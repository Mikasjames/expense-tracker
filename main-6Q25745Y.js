import{$ as XI,A as ZH,B as Oa,C as Sd,D as KI,E as Pv,F as Mv,G as JH,H as eU,I as tU,J as nU,K as Ov,L as Yf,M as nt,N as vn,O as ss,P as ka,Q as kv,R as SS,S as jn,T as Ei,U as Oc,V as iU,W as Vi,X as bS,Y as Qe,Z as YI,_ as QI,a as zH,aa as $I,b as yS,ba as ZI,c as qH,ca as _S,d as KH,da as ES,e as ye,ea as JI,f as zf,fa as Fs,g as CS,h as YH,i as QH,j as Mc,k as qf,l as Kf,m as Fv,n as WI,o as zI,p as XH,q as Pa,r as qI,s as oo,t as wd,u as Av,v as Ko,w as Ma,x as wS,y as Li,z as $H}from"./chunk-BWMVGNHL.js";import{a as W,b as Se,c as mS,d as hr,f as vS,g as jI,h as N}from"./chunk-SIAVTO45.js";var vc=hr(Yr=>{"use strict";var Jxe=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function eFe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Yr.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var i in n)eFe(n,i)&&(t[i]=n[i])}}return t};Yr.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var tFe={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+i),r);return}for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,o;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(o=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],o.set(s,r),r+=s.length;return o}},nFe={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};Yr.setTyped=function(t){t?(Yr.Buf8=Uint8Array,Yr.Buf16=Uint16Array,Yr.Buf32=Int32Array,Yr.assign(Yr,tFe)):(Yr.Buf8=Array,Yr.Buf16=Array,Yr.Buf32=Array,Yr.assign(Yr,nFe))};Yr.setTyped(Jxe)});var XY=hr(fm=>{"use strict";var iFe=vc(),rFe=4,IY=0,xY=1,sFe=2;function hm(t){for(var e=t.length;--e>=0;)t[e]=0}var oFe=0,kY=1,aFe=2,lFe=3,cFe=258,nV=29,Cw=256,gw=Cw+1+nV,dm=30,iV=19,NY=2*gw+1,tf=15,XL=16,uFe=7,rV=256,LY=16,VY=17,BY=18,eV=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],dFe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],GY=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],hFe=512,yc=new Array((gw+2)*2);hm(yc);var pw=new Array(dm*2);hm(pw);var mw=new Array(hFe);hm(mw);var vw=new Array(cFe-lFe+1);hm(vw);var sV=new Array(nV);hm(sV);var ZT=new Array(dm);hm(ZT);function $L(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}var HY,UY,jY;function ZL(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function WY(t){return t<256?mw[t]:mw[256+(t>>>7)]}function yw(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function _s(t,e,n){t.bi_valid>XL-n?(t.bi_buf|=e<<t.bi_valid&65535,yw(t,t.bi_buf),t.bi_buf=e>>XL-t.bi_valid,t.bi_valid+=n-XL):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function hl(t,e,n){_s(t,n[e*2],n[e*2+1])}function zY(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function fFe(t){t.bi_valid===16?(yw(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function pFe(t,e){var n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,h,p,g,m=0;for(h=0;h<=tf;h++)t.bl_count[h]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<NY;c++)u=t.heap[c],h=n[n[u*2+1]*2+1]+1,h>l&&(h=l,m++),n[u*2+1]=h,!(u>i)&&(t.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),g=n[u*2],t.opt_len+=g*(h+p),s&&(t.static_len+=g*(r[u*2+1]+p)));if(m!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--c],!(d>i)&&(n[d*2+1]!==h&&(t.opt_len+=(h-n[d*2+1])*n[d*2],n[d*2+1]=h),u--)}}function qY(t,e,n){var i=new Array(tf+1),r=0,s,o;for(s=1;s<=tf;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=zY(i[a]++,a))}}function gFe(){var t,e,n,i,r,s=new Array(tf+1);for(n=0,i=0;i<nV-1;i++)for(sV[i]=n,t=0;t<1<<eV[i];t++)vw[n++]=i;for(vw[n-1]=i,r=0,i=0;i<16;i++)for(ZT[i]=r,t=0;t<1<<$T[i];t++)mw[r++]=i;for(r>>=7;i<dm;i++)for(ZT[i]=r<<7,t=0;t<1<<$T[i]-7;t++)mw[256+r++]=i;for(e=0;e<=tf;e++)s[e]=0;for(t=0;t<=143;)yc[t*2+1]=8,t++,s[8]++;for(;t<=255;)yc[t*2+1]=9,t++,s[9]++;for(;t<=279;)yc[t*2+1]=7,t++,s[7]++;for(;t<=287;)yc[t*2+1]=8,t++,s[8]++;for(qY(yc,gw+1,s),t=0;t<dm;t++)pw[t*2+1]=5,pw[t*2]=zY(t,5);HY=new $L(yc,eV,Cw+1,gw,tf),UY=new $L(pw,$T,0,dm,tf),jY=new $L(new Array(0),dFe,0,iV,uFe)}function KY(t){var e;for(e=0;e<gw;e++)t.dyn_ltree[e*2]=0;for(e=0;e<dm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<iV;e++)t.bl_tree[e*2]=0;t.dyn_ltree[rV*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function YY(t){t.bi_valid>8?yw(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function mFe(t,e,n,i){YY(t),i&&(yw(t,n),yw(t,~n)),iFe.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function FY(t,e,n,i){var r=e*2,s=n*2;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function JL(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&FY(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!FY(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function AY(t,e,n){var i,r,s=0,o,a;if(t.last_lit!==0)do i=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],r=t.pending_buf[t.l_buf+s],s++,i===0?hl(t,r,e):(o=vw[r],hl(t,o+Cw+1,e),a=eV[o],a!==0&&(r-=sV[o],_s(t,r,a)),i--,o=WY(i),hl(t,o,n),a=$T[o],a!==0&&(i-=ZT[o],_s(t,i,a)));while(s<t.last_lit);hl(t,rV,e)}function tV(t,e){var n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=NY,o=0;o<s;o++)n[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,r&&(t.static_len-=i[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)JL(t,n,o);c=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],JL(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[c*2]=n[o*2]+n[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=c,t.heap[1]=c++,JL(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],pFe(t,e),qY(n,l,t.bl_count)}function PY(t,e,n){var i,r=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=e[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?t.bl_tree[s*2]+=a:s!==0?(s!==r&&t.bl_tree[s*2]++,t.bl_tree[LY*2]++):a<=10?t.bl_tree[VY*2]++:t.bl_tree[BY*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))}function MY(t,e,n){var i,r=-1,s,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=e[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do hl(t,s,t.bl_tree);while(--a!==0);else s!==0?(s!==r&&(hl(t,s,t.bl_tree),a--),hl(t,LY,t.bl_tree),_s(t,a-3,2)):a<=10?(hl(t,VY,t.bl_tree),_s(t,a-3,3)):(hl(t,BY,t.bl_tree),_s(t,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}}function vFe(t){var e;for(PY(t,t.dyn_ltree,t.l_desc.max_code),PY(t,t.dyn_dtree,t.d_desc.max_code),tV(t,t.bl_desc),e=iV-1;e>=3&&t.bl_tree[GY[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function yFe(t,e,n,i){var r;for(_s(t,e-257,5),_s(t,n-1,5),_s(t,i-4,4),r=0;r<i;r++)_s(t,t.bl_tree[GY[r]*2+1],3);MY(t,t.dyn_ltree,e-1),MY(t,t.dyn_dtree,n-1)}function CFe(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return IY;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return xY;for(n=32;n<Cw;n++)if(t.dyn_ltree[n*2]!==0)return xY;return IY}var OY=!1;function wFe(t){OY||(gFe(),OY=!0),t.l_desc=new ZL(t.dyn_ltree,HY),t.d_desc=new ZL(t.dyn_dtree,UY),t.bl_desc=new ZL(t.bl_tree,jY),t.bi_buf=0,t.bi_valid=0,KY(t)}function QY(t,e,n,i){_s(t,(oFe<<1)+(i?1:0),3),mFe(t,e,n,!0)}function SFe(t){_s(t,kY<<1,3),hl(t,rV,yc),fFe(t)}function bFe(t,e,n,i){var r,s,o=0;t.level>0?(t.strm.data_type===sFe&&(t.strm.data_type=CFe(t)),tV(t,t.l_desc),tV(t,t.d_desc),o=vFe(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&e!==-1?QY(t,e,n,i):t.strategy===rFe||s===r?(_s(t,(kY<<1)+(i?1:0),3),AY(t,yc,pw)):(_s(t,(aFe<<1)+(i?1:0),3),yFe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),AY(t,t.dyn_ltree,t.dyn_dtree)),KY(t),i&&YY(t)}function _Fe(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(vw[n]+Cw+1)*2]++,t.dyn_dtree[WY(e)*2]++),t.last_lit===t.lit_bufsize-1}fm._tr_init=wFe;fm._tr_stored_block=QY;fm._tr_flush_block=bFe;fm._tr_tally=_Fe;fm._tr_align=SFe});var oV=hr((Art,$Y)=>{"use strict";function EFe(t,e,n,i){for(var r=t&65535|0,s=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0}$Y.exports=EFe});var aV=hr((Prt,ZY)=>{"use strict";function DFe(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var TFe=DFe();function RFe(t,e,n,i){var r=TFe,s=i+n;t^=-1;for(var o=i;o<s;o++)t=t>>>8^r[(t^e[o])&255];return t^-1}ZY.exports=RFe});var JT=hr((Mrt,JY)=>{"use strict";JY.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var lQ=hr(gl=>{"use strict";var Qr=vc(),Ao=XY(),iQ=oV(),Wu=aV(),IFe=JT(),of=0,xFe=1,FFe=3,Qu=4,eQ=5,pl=0,tQ=1,Po=-2,AFe=-3,lV=-5,PFe=-1,MFe=1,eR=2,OFe=3,kFe=4,NFe=0,LFe=2,rR=8,VFe=9,BFe=15,GFe=8,HFe=29,UFe=256,uV=UFe+1+HFe,jFe=30,WFe=19,zFe=2*uV+1,qFe=15,Nt=3,Ku=258,Ca=Ku+Nt+1,KFe=32,sR=42,dV=69,tR=73,nR=91,iR=103,nf=113,Sw=666,Mi=1,bw=2,rf=3,mm=4,YFe=3;function Yu(t,e){return t.msg=IFe[e],e}function nQ(t){return(t<<1)-(t>4?9:0)}function qu(t){for(var e=t.length;--e>=0;)t[e]=0}function zu(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(Qr.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function ar(t,e){Ao._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,zu(t.strm)}function Qt(t,e){t.pending_buf[t.pending++]=e}function ww(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function QFe(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),r===0?0:(t.avail_in-=r,Qr.arraySet(e,t.input,t.next_in,r,n),t.state.wrap===1?t.adler=iQ(t.adler,e,r,n):t.state.wrap===2&&(t.adler=Wu(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function rQ(t,e){var n=t.max_chain_length,i=t.strstart,r,s,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Ca?t.strstart-(t.w_size-Ca):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+Ku,p=c[i+o-1],g=c[i+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(r=e,!(c[r+o]!==g||c[r+o-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(s=Ku-(h-i),i=h-Ku,s>o){if(t.match_start=e,o=s,s>=a)break;p=c[i+o-1],g=c[i+o]}}while((e=d[e&u])>l&&--n!==0);return o<=t.lookahead?o:t.lookahead}function sf(t){var e=t.w_size,n,i,r,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Ca)){Qr.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,n=i;do r=t.head[--n],t.head[n]=r>=e?r-e:0;while(--i);i=e,n=i;do r=t.prev[--n],t.prev[n]=r>=e?r-e:0;while(--i);s+=e}if(t.strm.avail_in===0)break;if(i=QFe(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=Nt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Nt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Nt)););}while(t.lookahead<Ca&&t.strm.avail_in!==0)}function XFe(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(sf(t),t.lookahead===0&&e===of)return Mi;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((t.strstart===0||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,ar(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Ca&&(ar(t,!1),t.strm.avail_out===0))return Mi}return t.insert=0,e===Qu?(ar(t,!0),t.strm.avail_out===0?rf:mm):(t.strstart>t.block_start&&(ar(t,!1),t.strm.avail_out===0),Mi)}function cV(t,e){for(var n,i;;){if(t.lookahead<Ca){if(sf(t),t.lookahead<Ca&&e===of)return Mi;if(t.lookahead===0)break}if(n=0,t.lookahead>=Nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-Ca&&(t.match_length=rQ(t,n)),t.match_length>=Nt)if(i=Ao._tr_tally(t,t.strstart-t.match_start,t.match_length-Nt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Nt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=Ao._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ar(t,!1),t.strm.avail_out===0))return Mi}return t.insert=t.strstart<Nt-1?t.strstart:Nt-1,e===Qu?(ar(t,!0),t.strm.avail_out===0?rf:mm):t.last_lit&&(ar(t,!1),t.strm.avail_out===0)?Mi:bw}function pm(t,e){for(var n,i,r;;){if(t.lookahead<Ca){if(sf(t),t.lookahead<Ca&&e===of)return Mi;if(t.lookahead===0)break}if(n=0,t.lookahead>=Nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Nt-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Ca&&(t.match_length=rQ(t,n),t.match_length<=5&&(t.strategy===MFe||t.match_length===Nt&&t.strstart-t.match_start>4096)&&(t.match_length=Nt-1)),t.prev_length>=Nt&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-Nt,i=Ao._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Nt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Nt-1,t.strstart++,i&&(ar(t,!1),t.strm.avail_out===0))return Mi}else if(t.match_available){if(i=Ao._tr_tally(t,0,t.window[t.strstart-1]),i&&ar(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Mi}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Ao._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Nt-1?t.strstart:Nt-1,e===Qu?(ar(t,!0),t.strm.avail_out===0?rf:mm):t.last_lit&&(ar(t,!1),t.strm.avail_out===0)?Mi:bw}function $Fe(t,e){for(var n,i,r,s,o=t.window;;){if(t.lookahead<=Ku){if(sf(t),t.lookahead<=Ku&&e===of)return Mi;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Nt&&t.strstart>0&&(r=t.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=t.strstart+Ku;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);t.match_length=Ku-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Nt?(n=Ao._tr_tally(t,1,t.match_length-Nt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Ao._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(ar(t,!1),t.strm.avail_out===0))return Mi}return t.insert=0,e===Qu?(ar(t,!0),t.strm.avail_out===0?rf:mm):t.last_lit&&(ar(t,!1),t.strm.avail_out===0)?Mi:bw}function ZFe(t,e){for(var n;;){if(t.lookahead===0&&(sf(t),t.lookahead===0)){if(e===of)return Mi;break}if(t.match_length=0,n=Ao._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(ar(t,!1),t.strm.avail_out===0))return Mi}return t.insert=0,e===Qu?(ar(t,!0),t.strm.avail_out===0?rf:mm):t.last_lit&&(ar(t,!1),t.strm.avail_out===0)?Mi:bw}function fl(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}var gm;gm=[new fl(0,0,0,0,XFe),new fl(4,4,8,4,cV),new fl(4,5,16,8,cV),new fl(4,6,32,32,cV),new fl(4,4,16,16,pm),new fl(8,16,32,32,pm),new fl(8,16,128,128,pm),new fl(8,32,128,256,pm),new fl(32,128,258,1024,pm),new fl(32,258,258,4096,pm)];function JFe(t){t.window_size=2*t.w_size,qu(t.head),t.max_lazy_match=gm[t.level].max_lazy,t.good_match=gm[t.level].good_length,t.nice_match=gm[t.level].nice_length,t.max_chain_length=gm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Nt-1,t.match_available=0,t.ins_h=0}function e1e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rR,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Qr.Buf16(zFe*2),this.dyn_dtree=new Qr.Buf16((2*jFe+1)*2),this.bl_tree=new Qr.Buf16((2*WFe+1)*2),qu(this.dyn_ltree),qu(this.dyn_dtree),qu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Qr.Buf16(qFe+1),this.heap=new Qr.Buf16(2*uV+1),qu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Qr.Buf16(2*uV+1),qu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function sQ(t){var e;return!t||!t.state?Yu(t,Po):(t.total_in=t.total_out=0,t.data_type=LFe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?sR:nf,t.adler=e.wrap===2?0:1,e.last_flush=of,Ao._tr_init(e),pl)}function oQ(t){var e=sQ(t);return e===pl&&JFe(t.state),e}function t1e(t,e){return!t||!t.state||t.state.wrap!==2?Po:(t.state.gzhead=e,pl)}function aQ(t,e,n,i,r,s){if(!t)return Po;var o=1;if(e===PFe&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>VFe||n!==rR||i<8||i>15||e<0||e>9||s<0||s>kFe)return Yu(t,Po);i===8&&(i=9);var a=new e1e;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Nt-1)/Nt),a.window=new Qr.Buf8(a.w_size*2),a.head=new Qr.Buf16(a.hash_size),a.prev=new Qr.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Qr.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=s,a.method=n,oQ(t)}function n1e(t,e){return aQ(t,e,rR,BFe,GFe,NFe)}function i1e(t,e){var n,i,r,s;if(!t||!t.state||e>eQ||e<0)return t?Yu(t,Po):Po;if(i=t.state,!t.output||!t.input&&t.avail_in!==0||i.status===Sw&&e!==Qu)return Yu(t,t.avail_out===0?lV:Po);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===sR)if(i.wrap===2)t.adler=0,Qt(i,31),Qt(i,139),Qt(i,8),i.gzhead?(Qt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Qt(i,i.gzhead.time&255),Qt(i,i.gzhead.time>>8&255),Qt(i,i.gzhead.time>>16&255),Qt(i,i.gzhead.time>>24&255),Qt(i,i.level===9?2:i.strategy>=eR||i.level<2?4:0),Qt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Qt(i,i.gzhead.extra.length&255),Qt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Wu(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=dV):(Qt(i,0),Qt(i,0),Qt(i,0),Qt(i,0),Qt(i,0),Qt(i,i.level===9?2:i.strategy>=eR||i.level<2?4:0),Qt(i,YFe),i.status=nf);else{var o=rR+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=eR||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=KFe),o+=31-o%31,i.status=nf,ww(i,o),i.strstart!==0&&(ww(i,t.adler>>>16),ww(i,t.adler&65535)),t.adler=1}if(i.status===dV)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),zu(t),r=i.pending,i.pending===i.pending_buf_size));)Qt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=tR)}else i.status=tR;if(i.status===tR)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),zu(t),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,Qt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.gzindex=0,i.status=nR)}else i.status=nR;if(i.status===nR)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),zu(t),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,Qt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(t.adler=Wu(t.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.status=iR)}else i.status=iR;if(i.status===iR&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&zu(t),i.pending+2<=i.pending_buf_size&&(Qt(i,t.adler&255),Qt(i,t.adler>>8&255),t.adler=0,i.status=nf)):i.status=nf),i.pending!==0){if(zu(t),t.avail_out===0)return i.last_flush=-1,pl}else if(t.avail_in===0&&nQ(e)<=nQ(n)&&e!==Qu)return Yu(t,lV);if(i.status===Sw&&t.avail_in!==0)return Yu(t,lV);if(t.avail_in!==0||i.lookahead!==0||e!==of&&i.status!==Sw){var l=i.strategy===eR?ZFe(i,e):i.strategy===OFe?$Fe(i,e):gm[i.level].func(i,e);if((l===rf||l===mm)&&(i.status=Sw),l===Mi||l===rf)return t.avail_out===0&&(i.last_flush=-1),pl;if(l===bw&&(e===xFe?Ao._tr_align(i):e!==eQ&&(Ao._tr_stored_block(i,0,0,!1),e===FFe&&(qu(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),zu(t),t.avail_out===0))return i.last_flush=-1,pl}return e!==Qu?pl:i.wrap<=0?tQ:(i.wrap===2?(Qt(i,t.adler&255),Qt(i,t.adler>>8&255),Qt(i,t.adler>>16&255),Qt(i,t.adler>>24&255),Qt(i,t.total_in&255),Qt(i,t.total_in>>8&255),Qt(i,t.total_in>>16&255),Qt(i,t.total_in>>24&255)):(ww(i,t.adler>>>16),ww(i,t.adler&65535)),zu(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?pl:tQ)}function r1e(t){var e;return!t||!t.state?Po:(e=t.state.status,e!==sR&&e!==dV&&e!==tR&&e!==nR&&e!==iR&&e!==nf&&e!==Sw?Yu(t,Po):(t.state=null,e===nf?Yu(t,AFe):pl))}function s1e(t,e){var n=e.length,i,r,s,o,a,l,c,u;if(!t||!t.state||(i=t.state,o=i.wrap,o===2||o===1&&i.status!==sR||i.lookahead))return Po;for(o===1&&(t.adler=iQ(t.adler,e,n,0)),i.wrap=0,n>=i.w_size&&(o===0&&(qu(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new Qr.Buf8(i.w_size),Qr.arraySet(u,e,n-i.w_size,i.w_size,0),e=u,n=i.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=n,t.next_in=0,t.input=e,sf(i);i.lookahead>=Nt;){r=i.strstart,s=i.lookahead-(Nt-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+Nt-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++;while(--s);i.strstart=r,i.lookahead=Nt-1,sf(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Nt-1,i.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,i.wrap=o,pl}gl.deflateInit=n1e;gl.deflateInit2=aQ;gl.deflateReset=oQ;gl.deflateResetKeep=sQ;gl.deflateSetHeader=t1e;gl.deflate=i1e;gl.deflateEnd=r1e;gl.deflateSetDictionary=s1e;gl.deflateInfo="pako deflate (from Nodeca project)"});var hV=hr(vm=>{"use strict";var oR=vc(),cQ=!0,uQ=!0;try{String.fromCharCode.apply(null,[0])}catch{cQ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{uQ=!1}var _w=new oR.Buf8(256);for(Cc=0;Cc<256;Cc++)_w[Cc]=Cc>=252?6:Cc>=248?5:Cc>=240?4:Cc>=224?3:Cc>=192?2:1;var Cc;_w[254]=_w[254]=1;vm.string2buf=function(t){var e,n,i,r,s,o=t.length,a=0;for(r=0;r<o;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new oR.Buf8(a),s=0,r=0;s<a;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};function dQ(t,e){if(e<65534&&(t.subarray&&uQ||!t.subarray&&cQ))return String.fromCharCode.apply(null,oR.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}vm.buf2binstring=function(t){return dQ(t,t.length)};vm.binstring2buf=function(t){for(var e=new oR.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e};vm.buf2string=function(t,e){var n,i,r,s,o=e||t.length,a=new Array(o*2);for(i=0,n=0;n<o;){if(r=t[n++],r<128){a[i++]=r;continue}if(s=_w[r],s>4){a[i++]=65533,n+=s-1;continue}for(r&=s===2?31:s===3?15:7;s>1&&n<o;)r=r<<6|t[n++]&63,s--;if(s>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return dQ(a,i)};vm.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+_w[t[n]]>e?n:e}});var fV=hr((Nrt,hQ)=>{"use strict";function o1e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}hQ.exports=o1e});var mQ=hr(Tw=>{"use strict";var Ew=lQ(),Dw=vc(),gV=hV(),mV=JT(),a1e=fV(),gQ=Object.prototype.toString,l1e=0,pV=4,ym=0,fQ=1,pQ=2,c1e=-1,u1e=0,d1e=8;function af(t){if(!(this instanceof af))return new af(t);this.options=Dw.assign({level:c1e,method:d1e,chunkSize:16384,windowBits:15,memLevel:8,strategy:u1e,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a1e,this.strm.avail_out=0;var n=Ew.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==ym)throw new Error(mV[n]);if(e.header&&Ew.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(typeof e.dictionary=="string"?i=gV.string2buf(e.dictionary):gQ.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,n=Ew.deflateSetDictionary(this.strm,i),n!==ym)throw new Error(mV[n]);this._dict_set=!0}}af.prototype.push=function(t,e){var n=this.strm,i=this.options.chunkSize,r,s;if(this.ended)return!1;s=e===~~e?e:e===!0?pV:l1e,typeof t=="string"?n.input=gV.string2buf(t):gQ.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Dw.Buf8(i),n.next_out=0,n.avail_out=i),r=Ew.deflate(n,s),r!==fQ&&r!==ym)return this.onEnd(r),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(s===pV||s===pQ))&&(this.options.to==="string"?this.onData(gV.buf2binstring(Dw.shrinkBuf(n.output,n.next_out))):this.onData(Dw.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&r!==fQ);return s===pV?(r=Ew.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ym):(s===pQ&&(this.onEnd(ym),n.avail_out=0),!0)};af.prototype.onData=function(t){this.chunks.push(t)};af.prototype.onEnd=function(t){t===ym&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Dw.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function vV(t,e){var n=new af(e);if(n.push(t,!0),n.err)throw n.msg||mV[n.err];return n.result}function h1e(t,e){return e=e||{},e.raw=!0,vV(t,e)}function f1e(t,e){return e=e||{},e.gzip=!0,vV(t,e)}Tw.Deflate=af;Tw.deflate=vV;Tw.deflateRaw=h1e;Tw.gzip=f1e});var yQ=hr((Vrt,vQ)=>{"use strict";var aR=30,p1e=12;vQ.exports=function(e,n){var i,r,s,o,a,l,c,u,d,h,p,g,m,v,C,b,E,T,P,x,_,S,D,O,F;i=e.state,r=e.next_in,O=e.input,s=r+(e.avail_in-5),o=e.next_out,F=e.output,a=o-(n-e.avail_out),l=o+(e.avail_out-257),c=i.dmax,u=i.wsize,d=i.whave,h=i.wnext,p=i.window,g=i.hold,m=i.bits,v=i.lencode,C=i.distcode,b=(1<<i.lenbits)-1,E=(1<<i.distbits)-1;e:do{m<15&&(g+=O[r++]<<m,m+=8,g+=O[r++]<<m,m+=8),T=v[g&b];t:for(;;){if(P=T>>>24,g>>>=P,m-=P,P=T>>>16&255,P===0)F[o++]=T&65535;else if(P&16){x=T&65535,P&=15,P&&(m<P&&(g+=O[r++]<<m,m+=8),x+=g&(1<<P)-1,g>>>=P,m-=P),m<15&&(g+=O[r++]<<m,m+=8,g+=O[r++]<<m,m+=8),T=C[g&E];n:for(;;){if(P=T>>>24,g>>>=P,m-=P,P=T>>>16&255,P&16){if(_=T&65535,P&=15,m<P&&(g+=O[r++]<<m,m+=8,m<P&&(g+=O[r++]<<m,m+=8)),_+=g&(1<<P)-1,_>c){e.msg="invalid distance too far back",i.mode=aR;break e}if(g>>>=P,m-=P,P=o-a,_>P){if(P=_-P,P>d&&i.sane){e.msg="invalid distance too far back",i.mode=aR;break e}if(S=0,D=p,h===0){if(S+=u-P,P<x){x-=P;do F[o++]=p[S++];while(--P);S=o-_,D=F}}else if(h<P){if(S+=u+h-P,P-=h,P<x){x-=P;do F[o++]=p[S++];while(--P);if(S=0,h<x){P=h,x-=P;do F[o++]=p[S++];while(--P);S=o-_,D=F}}}else if(S+=h-P,P<x){x-=P;do F[o++]=p[S++];while(--P);S=o-_,D=F}for(;x>2;)F[o++]=D[S++],F[o++]=D[S++],F[o++]=D[S++],x-=3;x&&(F[o++]=D[S++],x>1&&(F[o++]=D[S++]))}else{S=o-_;do F[o++]=F[S++],F[o++]=F[S++],F[o++]=F[S++],x-=3;while(x>2);x&&(F[o++]=F[S++],x>1&&(F[o++]=F[S++]))}}else if(P&64){e.msg="invalid distance code",i.mode=aR;break e}else{T=C[(T&65535)+(g&(1<<P)-1)];continue n}break}}else if(P&64)if(P&32){i.mode=p1e;break e}else{e.msg="invalid literal/length code",i.mode=aR;break e}else{T=v[(T&65535)+(g&(1<<P)-1)];continue t}break}}while(r<s&&o<l);x=m>>3,r-=x,m-=x<<3,g&=(1<<m)-1,e.next_in=r,e.next_out=o,e.avail_in=r<s?5+(s-r):5-(r-s),e.avail_out=o<l?257+(l-o):257-(o-l),i.hold=g,i.bits=m}});var DQ=hr((Brt,EQ)=>{"use strict";var CQ=vc(),Cm=15,wQ=852,SQ=592,bQ=0,yV=1,_Q=2,g1e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m1e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v1e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y1e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];EQ.exports=function(e,n,i,r,s,o,a,l){var c=l.bits,u=0,d=0,h=0,p=0,g=0,m=0,v=0,C=0,b=0,E=0,T,P,x,_,S,D=null,O=0,F,k=new CQ.Buf16(Cm+1),M=new CQ.Buf16(Cm+1),ce=null,xe=0,Ue,Ce,St;for(u=0;u<=Cm;u++)k[u]=0;for(d=0;d<r;d++)k[n[i+d]]++;for(g=c,p=Cm;p>=1&&k[p]===0;p--);if(g>p&&(g=p),p===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<p&&k[h]===0;h++);for(g<h&&(g=h),C=1,u=1;u<=Cm;u++)if(C<<=1,C-=k[u],C<0)return-1;if(C>0&&(e===bQ||p!==1))return-1;for(M[1]=0,u=1;u<Cm;u++)M[u+1]=M[u]+k[u];for(d=0;d<r;d++)n[i+d]!==0&&(a[M[n[i+d]]++]=d);if(e===bQ?(D=ce=a,F=19):e===yV?(D=g1e,O-=257,ce=m1e,xe-=257,F=256):(D=v1e,ce=y1e,F=-1),E=0,d=0,u=h,S=o,m=g,v=0,x=-1,b=1<<g,_=b-1,e===yV&&b>wQ||e===_Q&&b>SQ)return 1;for(;;){Ue=u-v,a[d]<F?(Ce=0,St=a[d]):a[d]>F?(Ce=ce[xe+a[d]],St=D[O+a[d]]):(Ce=96,St=0),T=1<<u-v,P=1<<m,h=P;do P-=T,s[S+(E>>v)+P]=Ue<<24|Ce<<16|St|0;while(P!==0);for(T=1<<u-1;E&T;)T>>=1;if(T!==0?(E&=T-1,E+=T):E=0,d++,--k[u]===0){if(u===p)break;u=n[i+a[d]]}if(u>g&&(E&_)!==x){for(v===0&&(v=g),S+=h,m=u-v,C=1<<m;m+v<p&&(C-=k[m+v],!(C<=0));)m++,C<<=1;if(b+=1<<m,e===yV&&b>wQ||e===_Q&&b>SQ)return 1;x=E&_,s[x]=g<<24|m<<16|S-o|0}}return E!==0&&(s[S+E]=u-v<<24|64<<16|0),l.bits=g,0}});var oX=hr(wa=>{"use strict";var eo=vc(),EV=oV(),ml=aV(),C1e=yQ(),Rw=DQ(),w1e=0,$Q=1,ZQ=2,TQ=4,S1e=5,lR=6,lf=0,b1e=1,_1e=2,Mo=-2,JQ=-3,DV=-4,E1e=-5,RQ=8,eX=1,IQ=2,xQ=3,FQ=4,AQ=5,PQ=6,MQ=7,OQ=8,kQ=9,NQ=10,dR=11,wc=12,CV=13,LQ=14,wV=15,VQ=16,BQ=17,GQ=18,HQ=19,cR=20,uR=21,UQ=22,jQ=23,WQ=24,zQ=25,qQ=26,SV=27,KQ=28,YQ=29,kn=30,TV=31,D1e=32,T1e=852,R1e=592,I1e=15,x1e=I1e;function QQ(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function F1e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new eo.Buf16(320),this.work=new eo.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function tX(t){var e;return!t||!t.state?Mo:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=eX,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new eo.Buf32(T1e),e.distcode=e.distdyn=new eo.Buf32(R1e),e.sane=1,e.back=-1,lf)}function nX(t){var e;return!t||!t.state?Mo:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,tX(t))}function iX(t,e){var n,i;return!t||!t.state||(i=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Mo:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,nX(t))}function rX(t,e){var n,i;return t?(i=new F1e,t.state=i,i.window=null,n=iX(t,e),n!==lf&&(t.state=null),n):Mo}function A1e(t){return rX(t,x1e)}var XQ=!0,bV,_V;function P1e(t){if(XQ){var e;for(bV=new eo.Buf32(512),_V=new eo.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Rw($Q,t.lens,0,288,bV,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Rw(ZQ,t.lens,0,32,_V,0,t.work,{bits:5}),XQ=!1}t.lencode=bV,t.lenbits=9,t.distcode=_V,t.distbits=5}function sX(t,e,n,i){var r,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new eo.Buf8(s.wsize)),i>=s.wsize?(eo.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),eo.arraySet(s.window,e,n-i,r,s.wnext),i-=r,i?(eo.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function M1e(t,e){var n,i,r,s,o,a,l,c,u,d,h,p,g,m,v=0,C,b,E,T,P,x,_,S,D=new eo.Buf8(4),O,F,k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Mo;n=t.state,n.mode===wc&&(n.mode=CV),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,d=a,h=l,S=lf;e:for(;;)switch(n.mode){case eX:if(n.wrap===0){n.mode=CV;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,D[0]=c&255,D[1]=c>>>8&255,n.check=ml(n.check,D,2,0),c=0,u=0,n.mode=IQ;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=kn;break}if((c&15)!==RQ){t.msg="unknown compression method",n.mode=kn;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){t.msg="invalid window size",n.mode=kn;break}n.dmax=1<<_,t.adler=n.check=1,n.mode=c&512?NQ:wc,c=0,u=0;break;case IQ:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==RQ){t.msg="unknown compression method",n.mode=kn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=kn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ml(n.check,D,2,0)),c=0,u=0,n.mode=xQ;case xQ:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,n.check=ml(n.check,D,4,0)),c=0,u=0,n.mode=FQ;case FQ:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ml(n.check,D,2,0)),c=0,u=0,n.mode=AQ;case AQ:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ml(n.check,D,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=PQ;case PQ:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),eo.arraySet(n.head.extra,i,s,p,_)),n.flags&512&&(n.check=ml(n.check,i,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=MQ;case MQ:if(n.flags&2048){if(a===0)break e;p=0;do _=i[s+p++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&p<a);if(n.flags&512&&(n.check=ml(n.check,i,p,s)),a-=p,s+=p,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=OQ;case OQ:if(n.flags&4096){if(a===0)break e;p=0;do _=i[s+p++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&p<a);if(n.flags&512&&(n.check=ml(n.check,i,p,s)),a-=p,s+=p,_)break e}else n.head&&(n.head.comment=null);n.mode=kQ;case kQ:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=kn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=wc;break;case NQ:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}t.adler=n.check=QQ(c),c=0,u=0,n.mode=dR;case dR:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,_1e;t.adler=n.check=1,n.mode=wc;case wc:if(e===S1e||e===lR)break e;case CV:if(n.last){c>>>=u&7,u-=u&7,n.mode=SV;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=LQ;break;case 1:if(P1e(n),n.mode=cR,e===lR){c>>>=2,u-=2;break e}break;case 2:n.mode=BQ;break;case 3:t.msg="invalid block type",n.mode=kn}c>>>=2,u-=2;break;case LQ:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=kn;break}if(n.length=c&65535,c=0,u=0,n.mode=wV,e===lR)break e;case wV:n.mode=VQ;case VQ:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;eo.arraySet(r,i,s,p,o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=wc;break;case BQ:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=kn;break}n.have=0,n.mode=GQ;case GQ:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[k[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[k[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},S=Rw(w1e,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,S){t.msg="invalid code lengths set",n.mode=kn;break}n.have=0,n.mode=HQ;case HQ:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[c&(1<<n.lenbits)-1],C=v>>>24,b=v>>>16&255,E=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(E<16)c>>>=C,u-=C,n.lens[n.have++]=E;else{if(E===16){for(F=C+2;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=C,u-=C,n.have===0){t.msg="invalid bit length repeat",n.mode=kn;break}_=n.lens[n.have-1],p=3+(c&3),c>>>=2,u-=2}else if(E===17){for(F=C+3;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=C,u-=C,_=0,p=3+(c&7),c>>>=3,u-=3}else{for(F=C+7;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=C,u-=C,_=0,p=11+(c&127),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=kn;break}for(;p--;)n.lens[n.have++]=_}}if(n.mode===kn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=kn;break}if(n.lenbits=9,O={bits:n.lenbits},S=Rw($Q,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,S){t.msg="invalid literal/lengths set",n.mode=kn;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},S=Rw(ZQ,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,S){t.msg="invalid distances set",n.mode=kn;break}if(n.mode=cR,e===lR)break e;case cR:n.mode=uR;case uR:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,C1e(t,h),o=t.next_out,r=t.output,l=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===wc&&(n.back=-1);break}for(n.back=0;v=n.lencode[c&(1<<n.lenbits)-1],C=v>>>24,b=v>>>16&255,E=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(b&&!(b&240)){for(T=C,P=b,x=E;v=n.lencode[x+((c&(1<<T+P)-1)>>T)],C=v>>>24,b=v>>>16&255,E=v&65535,!(T+C<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,n.back+=T}if(c>>>=C,u-=C,n.back+=C,n.length=E,b===0){n.mode=qQ;break}if(b&32){n.back=-1,n.mode=wc;break}if(b&64){t.msg="invalid literal/length code",n.mode=kn;break}n.extra=b&15,n.mode=UQ;case UQ:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=jQ;case jQ:for(;v=n.distcode[c&(1<<n.distbits)-1],C=v>>>24,b=v>>>16&255,E=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(b&240)){for(T=C,P=b,x=E;v=n.distcode[x+((c&(1<<T+P)-1)>>T)],C=v>>>24,b=v>>>16&255,E=v&65535,!(T+C<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=T,u-=T,n.back+=T}if(c>>>=C,u-=C,n.back+=C,b&64){t.msg="invalid distance code",n.mode=kn;break}n.offset=E,n.extra=b&15,n.mode=WQ;case WQ:if(n.extra){for(F=n.extra;u<F;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=kn;break}n.mode=zQ;case zQ:if(l===0)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=kn;break}p>n.wnext?(p-=n.wnext,g=n.wsize-p):g=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=r,g=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do r[o++]=m[g++];while(--p);n.length===0&&(n.mode=uR);break;case qQ:if(l===0)break e;r[o++]=n.length,l--,n.mode=uR;break;case SV:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?ml(n.check,r,h,o-h):EV(n.check,r,h,o-h)),h=l,(n.flags?c:QQ(c))!==n.check){t.msg="incorrect data check",n.mode=kn;break}c=0,u=0}n.mode=KQ;case KQ:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=kn;break}c=0,u=0}n.mode=YQ;case YQ:S=b1e;break e;case kn:S=JQ;break e;case TV:return DV;case D1e:default:return Mo}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<kn&&(n.mode<SV||e!==TQ))&&sX(t,t.output,t.next_out,h-t.avail_out)?(n.mode=TV,DV):(d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?ml(n.check,r,h,t.next_out-h):EV(n.check,r,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===wc?128:0)+(n.mode===cR||n.mode===wV?256:0),(d===0&&h===0||e===TQ)&&S===lf&&(S=E1e),S)}function O1e(t){if(!t||!t.state)return Mo;var e=t.state;return e.window&&(e.window=null),t.state=null,lf}function k1e(t,e){var n;return!t||!t.state||(n=t.state,!(n.wrap&2))?Mo:(n.head=e,e.done=!1,lf)}function N1e(t,e){var n=e.length,i,r,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==dR)?Mo:i.mode===dR&&(r=1,r=EV(r,e,n,0),r!==i.check)?JQ:(s=sX(t,e,n,n),s?(i.mode=TV,DV):(i.havedict=1,lf))}wa.inflateReset=nX;wa.inflateReset2=iX;wa.inflateResetKeep=tX;wa.inflateInit=A1e;wa.inflateInit2=rX;wa.inflate=M1e;wa.inflateEnd=O1e;wa.inflateGetHeader=k1e;wa.inflateSetDictionary=N1e;wa.inflateInfo="pako inflate (from Nodeca project)"});var RV=hr((Hrt,aX)=>{"use strict";aX.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var cX=hr((Urt,lX)=>{"use strict";function L1e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}lX.exports=L1e});var dX=hr(xw=>{"use strict";var wm=oX(),Iw=vc(),hR=hV(),oi=RV(),IV=JT(),V1e=fV(),B1e=cX(),uX=Object.prototype.toString;function cf(t){if(!(this instanceof cf))return new cf(t);this.options=Iw.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new V1e,this.strm.avail_out=0;var n=wm.inflateInit2(this.strm,e.windowBits);if(n!==oi.Z_OK)throw new Error(IV[n]);if(this.header=new B1e,wm.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=hR.string2buf(e.dictionary):uX.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=wm.inflateSetDictionary(this.strm,e.dictionary),n!==oi.Z_OK)))throw new Error(IV[n])}cf.prototype.push=function(t,e){var n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,s,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?oi.Z_FINISH:oi.Z_NO_FLUSH,typeof t=="string"?n.input=hR.binstring2buf(t):uX.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Iw.Buf8(i),n.next_out=0,n.avail_out=i),s=wm.inflate(n,oi.Z_NO_FLUSH),s===oi.Z_NEED_DICT&&r&&(s=wm.inflateSetDictionary(this.strm,r)),s===oi.Z_BUF_ERROR&&u===!0&&(s=oi.Z_OK,u=!1),s!==oi.Z_STREAM_END&&s!==oi.Z_OK)return this.onEnd(s),this.ended=!0,!1;n.next_out&&(n.avail_out===0||s===oi.Z_STREAM_END||n.avail_in===0&&(o===oi.Z_FINISH||o===oi.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=hR.utf8border(n.output,n.next_out),l=n.next_out-a,c=hR.buf2string(n.output,a),n.next_out=l,n.avail_out=i-l,l&&Iw.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(Iw.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&s!==oi.Z_STREAM_END);return s===oi.Z_STREAM_END&&(o=oi.Z_FINISH),o===oi.Z_FINISH?(s=wm.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===oi.Z_OK):(o===oi.Z_SYNC_FLUSH&&(this.onEnd(oi.Z_OK),n.avail_out=0),!0)};cf.prototype.onData=function(t){this.chunks.push(t)};cf.prototype.onEnd=function(t){t===oi.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Iw.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function xV(t,e){var n=new cf(e);if(n.push(t,!0),n.err)throw n.msg||IV[n.err];return n.result}function G1e(t,e){return e=e||{},e.raw=!0,xV(t,e)}xw.Inflate=cf;xw.inflate=xV;xw.inflateRaw=G1e;xw.ungzip=xV});var Fw=hr((Wrt,fX)=>{"use strict";var H1e=vc().assign,U1e=mQ(),j1e=dX(),W1e=RV(),hX={};H1e(hX,U1e,j1e,W1e);fX.exports=hX});var rU=null;var ex=1,tx=Symbol("SIGNAL");function Dt(t){let e=rU;return rU=t,e}var sU={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zne(t){if(!(rx(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ex)){if(!t.producerMustRecompute(t)&&!nx(t)){t.dirty=!1,t.lastCleanEpoch=ex;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ex}}function oU(t){return t&&(t.nextProducerIndex=0),Dt(t)}function aU(t,e){if(Dt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(rx(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ix(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function nx(t){DS(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(zne(n),i!==n.version))return!0}return!1}function lU(t){if(DS(t),rx(t))for(let e=0;e<t.producerNode.length;e++)ix(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ix(t,e){if(qne(t),DS(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)ix(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];DS(r),r.producerIndexOfThis[i]=e}}function rx(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function DS(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function qne(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Kne(){throw new Error}var Yne=Kne;function cU(t){Yne=t}function Ve(t){return typeof t=="function"}function Qf(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var TS=Qf(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function bd(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ln=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ve(i))try{i()}catch(s){e=s instanceof TS?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{uU(s)}catch(o){e=e??[],o instanceof TS?e=[...e,...o.errors]:e.push(o)}}if(e)throw new TS(e)}}add(e){var n;if(e&&e!==this)if(this.closed)uU(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&bd(n,e)}remove(e){let{_finalizers:n}=this;n&&bd(n,e),e instanceof t&&e._removeParent(this)}};Ln.EMPTY=(()=>{let t=new Ln;return t.closed=!0,t})();var sx=Ln.EMPTY;function RS(t){return t instanceof Ln||t&&"closed"in t&&Ve(t.remove)&&Ve(t.add)&&Ve(t.unsubscribe)}function uU(t){Ve(t)?t():t.unsubscribe()}var Yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xf={setTimeout(t,e,...n){let{delegate:i}=Xf;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function IS(t){Xf.setTimeout(()=>{let{onUnhandledError:e}=Yo;if(e)e(t);else throw t})}function Qo(){}var dU=ox("C",void 0,void 0);function hU(t){return ox("E",void 0,t)}function fU(t){return ox("N",t,void 0)}function ox(t,e,n){return{kind:t,value:e,error:n}}var _d=null;function $f(t){if(Yo.useDeprecatedSynchronousErrorHandling){let e=!_d;if(e&&(_d={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=_d;if(_d=null,n)throw i}}else t()}function pU(t){Yo.useDeprecatedSynchronousErrorHandling&&_d&&(_d.errorThrown=!0,_d.error=t)}var Ed=class extends Ln{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,RS(e)&&e.add(this)):this.destination=$ne}static create(e,n,i){return new Il(e,n,i)}next(e){this.isStopped?lx(fU(e),this):this._next(e)}error(e){this.isStopped?lx(hU(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lx(dU,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Qne=Function.prototype.bind;function ax(t,e){return Qne.call(t,e)}var cx=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){xS(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){xS(i)}else xS(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){xS(n)}}},Il=class extends Ed{constructor(e,n,i){super();let r;if(Ve(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Yo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ax(e.next,s),error:e.error&&ax(e.error,s),complete:e.complete&&ax(e.complete,s)}):r=e}this.destination=new cx(r)}};function xS(t){Yo.useDeprecatedSynchronousErrorHandling?pU(t):IS(t)}function Xne(t){throw t}function lx(t,e){let{onStoppedNotification:n}=Yo;n&&Xf.setTimeout(()=>n(t,e))}var $ne={closed:!0,next:Qo,error:Xne,complete:Qo};var Zf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xi(t){return t}function FS(...t){return ux(t)}function ux(t){return t.length===0?Xi:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=Jne(n)?n:new Il(n,i,r);return $f(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=gU(i),new i((r,s)=>{let o=new Il({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Zf](){return this}pipe(...n){return ux(n)(this)}toPromise(n){return n=gU(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function gU(t){var e;return(e=t??Yo.Promise)!==null&&e!==void 0?e:Promise}function Zne(t){return t&&Ve(t.next)&&Ve(t.error)&&Ve(t.complete)}function Jne(t){return t&&t instanceof Ed||Zne(t)&&RS(t)}function dx(t){return Ve(t?.lift)}function Ke(t){return e=>{if(dx(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(t,e,n,i,r){return new Nv(t,e,n,i,r)}var Nv=class extends Ed{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Jf(){return Ke((t,e)=>{let n=null;t._refCount++;let i=Be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var kc=class extends pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,dx(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ln;let n=this.getSubject();e.add(this.source.subscribe(Be(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ln.EMPTY)}return e}refCount(){return Jf()(this)}};var mU=Qf(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new AS(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new mU}next(n){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?sx:(this.currentObservers=null,s.push(n),new Ln(()=>{this.currentObservers=null,bd(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new pe;return n.source=this,n}}return t.create=(e,n)=>new AS(e,n),t})(),AS=class extends ot{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:sx}};var qt=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Lv={now(){return(Lv.delegate||Date).now()},delegate:void 0};var xl=class extends ot{constructor(e=1/0,n=1/0,i=Lv){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var PS=class extends Ln{constructor(e,n){super()}schedule(e,n=0){return this}};var Vv={setInterval(t,e,...n){let{delegate:i}=Vv;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Vv;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ep=class extends PS{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Vv.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Vv.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,bd(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var tp=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};tp.now=Lv.now;var np=class extends tp{constructor(e,n=tp.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var os=new np(ep),hx=os;var MS=class extends ep{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var OS=class extends np{};var fx=new OS(MS);var Di=new pe(t=>t.complete());function kS(t){return t&&Ve(t.schedule)}function px(t){return t[t.length-1]}function Nc(t){return Ve(px(t))?t.pop():void 0}function Na(t){return kS(px(t))?t.pop():void 0}function vU(t,e){return typeof px(t)=="number"?t.pop():e}var ip=t=>t&&typeof t.length=="number"&&typeof t!="function";function NS(t){return Ve(t?.then)}function LS(t){return Ve(t[Zf])}function VS(t){return Symbol.asyncIterator&&Ve(t?.[Symbol.asyncIterator])}function BS(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eie(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var GS=eie();function HS(t){return Ve(t?.[GS])}function US(t){return qH(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield yS(n.read());if(r)return yield yS(void 0);yield yield yS(i)}}finally{n.releaseLock()}})}function jS(t){return Ve(t?.getReader)}function ct(t){if(t instanceof pe)return t;if(t!=null){if(LS(t))return tie(t);if(ip(t))return nie(t);if(NS(t))return iie(t);if(VS(t))return yU(t);if(HS(t))return rie(t);if(jS(t))return sie(t)}throw BS(t)}function tie(t){return new pe(e=>{let n=t[Zf]();if(Ve(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nie(t){return new pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iie(t){return new pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,IS)})}function rie(t){return new pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yU(t){return new pe(e=>{oie(t,e).catch(n=>e.error(n))})}function sie(t){return yU(US(t))}function oie(t,e){var n,i,r,s;return zH(this,void 0,void 0,function*(){try{for(n=KH(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function as(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function ls(t,e=0){return Ke((n,i)=>{n.subscribe(Be(i,r=>as(i,t,()=>i.next(r),e),()=>as(i,t,()=>i.complete(),e),r=>as(i,t,()=>i.error(r),e)))})}function ao(t,e=0){return Ke((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function CU(t,e){return ct(t).pipe(ao(e),ls(e))}function wU(t,e){return ct(t).pipe(ao(e),ls(e))}function SU(t,e){return new pe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function bU(t,e){return new pe(n=>{let i;return as(n,e,()=>{i=t[GS](),as(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}function WS(t,e){if(!t)throw new Error("Iterable cannot be null");return new pe(n=>{as(n,e,()=>{let i=t[Symbol.asyncIterator]();as(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function _U(t,e){return WS(US(t),e)}function EU(t,e){if(t!=null){if(LS(t))return CU(t,e);if(ip(t))return SU(t,e);if(NS(t))return wU(t,e);if(VS(t))return WS(t,e);if(HS(t))return bU(t,e);if(jS(t))return _U(t,e)}throw BS(t)}function Je(t,e){return e?EU(t,e):ct(t)}function ae(...t){let e=Na(t);return Je(t,e)}function Lc(t,e){let n=Ve(t)?t:()=>t,i=r=>r.error(n());return new pe(e?r=>e.schedule(i,0,r):i)}function gx(t){return!!t&&(t instanceof pe||Ve(t.lift)&&Ve(t.subscribe))}var Fl=Qf(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function DU(t){return t instanceof Date&&!isNaN(t)}function le(t,e){return Ke((n,i)=>{let r=0;n.subscribe(Be(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:aie}=Array;function lie(t,e){return aie(e)?t(...e):t(e)}function rp(t){return le(e=>lie(t,e))}var{isArray:cie}=Array,{getPrototypeOf:uie,prototype:die,keys:hie}=Object;function zS(t){if(t.length===1){let e=t[0];if(cie(e))return{args:e,keys:null};if(fie(e)){let n=hie(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function fie(t){return t&&typeof t=="object"&&uie(t)===die}function qS(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Fr(...t){let e=Na(t),n=Nc(t),{args:i,keys:r}=zS(t);if(i.length===0)return Je([],e);let s=new pe(pie(i,e,r?o=>qS(r,o):Xi));return n?s.pipe(rp(n)):s}function pie(t,e,n=Xi){return i=>{TU(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)TU(e,()=>{let c=Je(t[l],e),u=!1;c.subscribe(Be(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function TU(t,e,n){t?as(n,t,e):e()}function RU(t,e,n,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},p=m=>c<i?g(m):l.push(m),g=m=>{s&&e.next(m),c++;let v=!1;ct(n(m,u++)).subscribe(Be(e,C=>{r?.(C),s?p(C):e.next(C)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let C=l.shift();o?as(e,o,()=>g(C)):g(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(Be(e,p,()=>{d=!0,h()})),()=>{a?.()}}function dn(t,e,n=1/0){return Ve(e)?dn((i,r)=>le((s,o)=>e(i,s,r,o))(ct(t(i,r))),n):(typeof e=="number"&&(n=e),Ke((i,r)=>RU(i,r,t,n)))}function Bv(t=1/0){return dn(Xi,t)}function IU(){return Bv(1)}function lo(...t){return IU()(Je(t,Na(t)))}function Dd(t){return new pe(e=>{ct(t()).subscribe(e)})}function sp(...t){let e=Nc(t),{args:n,keys:i}=zS(t),r=new pe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;ct(n[u]).subscribe(Be(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?qS(i,a):a),s.complete())}))}});return e?r.pipe(rp(e)):r}var gie=["addListener","removeListener"],mie=["addEventListener","removeEventListener"],vie=["on","off"];function ui(t,e,n,i){if(Ve(n)&&(i=n,n=void 0),i)return ui(t,e,n).pipe(rp(i));let[r,s]=wie(t)?mie.map(o=>a=>t[o](e,a,n)):yie(t)?gie.map(xU(t,e)):Cie(t)?vie.map(xU(t,e)):[];if(!r&&ip(t))return dn(o=>ui(o,e,n))(ct(t));if(!r)throw new TypeError("Invalid event target");return new pe(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function xU(t,e){return n=>i=>t[n](e,i)}function yie(t){return Ve(t.addListener)&&Ve(t.removeListener)}function Cie(t){return Ve(t.on)&&Ve(t.off)}function wie(t){return Ve(t.addEventListener)&&Ve(t.removeEventListener)}function Vc(t=0,e,n=hx){let i=-1;return e!=null&&(kS(e)?n=e:i=e),new pe(r=>{let s=DU(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Bc(...t){let e=Na(t),n=vU(t,1/0),i=t;return i.length?i.length===1?ct(i[0]):Bv(n)(Je(i,e)):Di}var Gc=new pe(Qo);var{isArray:Sie}=Array;function KS(t){return t.length===1&&Sie(t[0])?t[0]:t}function Tt(t,e){return Ke((n,i)=>{let r=0;n.subscribe(Be(i,s=>t.call(e,s,r++)&&i.next(s)))})}function YS(...t){return t=KS(t),t.length===1?ct(t[0]):new pe(bie(t))}function bie(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(ct(t[i]).subscribe(Be(e,r=>{if(n){for(let s=0;s<n.length;s++)s!==i&&n[s].unsubscribe();n=null}e.next(r)})))}}function Gv(...t){let e=Nc(t),n=KS(t);return n.length?new pe(i=>{let r=n.map(()=>[]),s=n.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<n.length;o++)ct(n[o]).subscribe(Be(i,a=>{if(r[o].push(a),r.every(l=>l.length)){let l=r.map(c=>c.shift());i.next(e?e(...l):l),r.some((c,u)=>!c.length&&s[u])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):Di}function Xo(t){return Ke((e,n)=>{let i=null,r=!1,s;i=e.subscribe(Be(n,void 0,void 0,o=>{s=ct(t(o,Xo(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function FU(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(Be(o,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Hc(t,e){return Ve(e)?dn(t,e,1):dn(t,1)}function AU(t){return new pe(e=>t.subscribe(e))}var _ie={connector:()=>new ot};function QS(t,e=_ie){let{connector:n}=e;return Ke((i,r)=>{let s=n();ct(t(AU(s))).subscribe(r),r.add(i.subscribe(s))})}function op(t,e=os){return Ke((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=s;s=null,i.next(c)}};function l(){let c=o+t,u=e.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}n.subscribe(Be(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function Uc(t){return Ke((e,n)=>{let i=!1;e.subscribe(Be(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function It(t){return t<=0?()=>Di:Ke((e,n)=>{let i=0;e.subscribe(Be(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function PU(){return Ke((t,e)=>{t.subscribe(Be(e,Qo))})}function Hv(t){return le(()=>t)}function mx(t,e){return e?n=>lo(e.pipe(It(1),PU()),n.pipe(mx(t))):dn((n,i)=>ct(t(n,i)).pipe(It(1),Hv(n)))}function Uv(t,e=os){let n=Vc(t,e);return mx(()=>n)}function La(t,e=Xi){return t=t??Eie,Ke((n,i)=>{let r,s=!0;n.subscribe(Be(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function Eie(t,e){return t===e}function XS(t=Die){return Ke((e,n)=>{let i=!1;e.subscribe(Be(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function Die(){return new Fl}function vx(...t){return e=>lo(e,ae(...t))}function Td(t){return Ke((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function As(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Tt((r,s)=>t(r,s,i)):Xi,It(1),n?Uc(e):XS(()=>new Fl))}function yx(t,e,n,i){return Ke((r,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:i}=e;let a=new Map,l=g=>{a.forEach(g),g(s)},c=g=>l(m=>m.error(g)),u=0,d=!1,h=new Nv(s,g=>{try{let m=t(g),v=a.get(m);if(!v){a.set(m,v=i?i():new ot);let C=p(m,v);if(s.next(C),n){let b=Be(v,()=>{v.complete(),b?.unsubscribe()},void 0,void 0,()=>a.delete(m));h.add(ct(n(C)).subscribe(b))}}v.next(o?o(g):g)}catch(m){c(m)}},()=>l(g=>g.complete()),c,()=>a.clear(),()=>(d=!0,u===0));r.subscribe(h);function p(g,m){let v=new pe(C=>{u++;let b=m.subscribe(C);return()=>{b.unsubscribe(),--u===0&&d&&h.unsubscribe()}});return v.key=g,v}})}function ap(t){return t<=0?()=>Di:Ke((e,n)=>{let i=[];e.subscribe(Be(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Cx(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Tt((r,s)=>t(r,s,i)):Xi,ap(1),n?Uc(e):XS(()=>new Fl))}function MU(t,e){let n=Ve(t)?t:()=>t;return Ve(e)?QS(e,{connector:n}):i=>new kc(i,n)}function jc(){return Ke((t,e)=>{let n,i=!1;t.subscribe(Be(e,r=>{let s=n;n=r,i&&e.next([s,r]),i=!0}))})}function wx(t){return t?e=>QS(t)(e):e=>MU(new ot)(e)}function Wc(t,e){return Ke(FU(t,e,arguments.length>=2,!0))}function OU(t={}){let{connector:e=()=>new ot,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),o=l=void 0,u=d=!1},g=()=>{let m=o;p(),m?.unsubscribe()};return Ke((m,v)=>{c++,!d&&!u&&h();let C=l=l??e();v.add(()=>{c--,c===0&&!d&&!u&&(a=Sx(g,r))}),C.subscribe(v),!o&&c>0&&(o=new Il({next:b=>C.next(b),error:b=>{d=!0,h(),a=Sx(p,n,b),C.error(b)},complete:()=>{u=!0,h(),a=Sx(p,i),C.complete()}}),ct(m).subscribe(o))})(s)}}function Sx(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Il({next:()=>{i.unsubscribe(),t()}});return ct(e(...n)).subscribe(i)}function Rd(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,OU({connector:()=>new xl(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function $o(...t){let e=Na(t);return Ke((n,i)=>{(e?lo(t,n,e):lo(t,n)).subscribe(i)})}function Ge(t,e){return Ke((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(Be(i,l=>{r?.unsubscribe();let c=0,u=s++;ct(t(l,u)).subscribe(r=Be(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function $S(t,e){return Ve(e)?Ge(()=>t,e):Ge(()=>t)}function xn(t){return Ke((e,n)=>{ct(t).subscribe(Be(n,()=>n.complete(),Qo)),!n.closed&&e.subscribe(n)})}function rn(t,e,n){let i=Ve(t)||e||n?{next:t,error:e,complete:n}:t;return i?Ke((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Be(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Xi}function kU(t,e){return Ke((n,i)=>{let{leading:r=!0,trailing:s=!1}=e??{},o=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,s&&(p(),c&&i.complete())},d=()=>{l=null,c&&i.complete()},h=g=>l=ct(t(g)).subscribe(Be(i,u,d)),p=()=>{if(o){o=!1;let g=a;a=null,i.next(g),!c&&h(g)}};n.subscribe(Be(i,g=>{o=!0,a=g,!(l&&!l.closed)&&(r?p():h(g))},()=>{c=!0,!(s&&o&&l&&!l.closed)&&i.complete()}))})}function bx(t,e=os,n){let i=Vc(t,e);return kU(()=>i,n)}function jv(...t){let e=Nc(t);return Ke((n,i)=>{let r=t.length,s=new Array(r),o=t.map(()=>!1),a=!1;for(let l=0;l<r;l++)ct(t[l]).subscribe(Be(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Xi))&&(o=null))},Qo));n.subscribe(Be(i,l=>{if(a){let c=[l,...s];i.next(e?e(...c):c)}}))})}var Tie="https://g.co/ng/security#xss",Le=class extends Error{constructor(e,n){super(Mb(e,n)),this.code=e}};function Mb(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function sy(t){return{toString:t}.toString()}var ZS="__parameters__";function Rie(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function yj(t,e,n){return sy(()=>{let i=Rie(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(ZS)?l[ZS]:Object.defineProperty(l,ZS,{value:[]})[ZS];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Al=globalThis;function hn(t){for(let e in t)if(t[e]===hn)return e;throw Error("Could not find renamed property on target object.")}function Iie(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Mr(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Mr).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ux(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var xie=hn({__forward_ref__:hn});function Os(t){return t.__forward_ref__=Os,t.toString=function(){return Mr(this())},t}function Ar(t){return Cj(t)?t():t}function Cj(t){return typeof t=="function"&&t.hasOwnProperty(xie)&&t.__forward_ref__===Os}function oe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ob(t){return NU(t,Sj)||NU(t,bj)}function wj(t){return Ob(t)!==null}function NU(t,e){return t.hasOwnProperty(e)?t[e]:null}function Fie(t){let e=t&&(t[Sj]||t[bj]);return e||null}function LU(t){return t&&(t.hasOwnProperty(VU)||t.hasOwnProperty(Aie))?t[VU]:null}var Sj=hn({\u0275prov:hn}),VU=hn({\u0275inj:hn}),bj=hn({ngInjectableDef:hn}),Aie=hn({ngInjectorDef:hn}),ue=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _j(t){return t&&!!t.\u0275providers}var Pie=hn({\u0275cmp:hn}),Mie=hn({\u0275dir:hn}),Oie=hn({\u0275pipe:hn}),kie=hn({\u0275mod:hn}),ub=hn({\u0275fac:hn}),Wv=hn({__NG_ELEMENT_ID__:hn}),BU=hn({__NG_ENV_ID__:hn});function WF(t){return typeof t=="string"?t:t==null?"":String(t)}function Nie(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():WF(t)}function Lie(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Le(-200,t)}function zF(t,e){throw new Le(-201,!1)}var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(bt||{}),jx;function Ej(){return jx}function cs(t){let e=jx;return jx=t,e}function Dj(t,e,n){let i=Ob(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&bt.Optional)return null;if(e!==void 0)return e;zF(t,"Injector")}var Vie={},zv=Vie,Wx="__NG_DI_FLAG__",db="ngTempTokenPath",Bie="ngTokenPath",Gie=/\n/gm,Hie="\u0275",GU="__source",dp;function Uie(){return dp}function zc(t){let e=dp;return dp=t,e}function jie(t,e=bt.Default){if(dp===void 0)throw new Le(-203,!1);return dp===null?Dj(t,void 0,e):dp.get(t,e&bt.Optional?null:void 0,e)}function Z(t,e=bt.Default){return(Ej()||jie)(Ar(t),e)}function Q(t,e=bt.Default){return Z(t,kb(e))}function kb(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zx(t){let e=[];for(let n=0;n<t.length;n++){let i=Ar(t[n]);if(Array.isArray(i)){if(i.length===0)throw new Le(900,!1);let r,s=bt.Default;for(let o=0;o<i.length;o++){let a=i[o],l=Wie(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(Z(r,s))}else e.push(Z(i))}return e}function Tj(t,e){return t[Wx]=e,t.prototype[Wx]=e,t}function Wie(t){return t[Wx]}function zie(t,e,n,i){let r=t[db];throw e[GU]&&r.unshift(e[GU]),t.message=qie(`
`+t.message,r,n,i),t[Bie]=r,t[db]=null,t}function qie(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Hie?t.slice(2):t;let r=Mr(e);if(Array.isArray(e))r=e.map(Mr).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Mr(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Gie,`
  `)}`}var mt=Tj(yj("Optional"),8);var Rj=Tj(yj("SkipSelf"),4);function Fd(t,e){let n=t.hasOwnProperty(ub);return n?t[ub]:null}function Kie(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function Yie(t){return t.flat(Number.POSITIVE_INFINITY)}function qF(t,e){t.forEach(n=>Array.isArray(n)?qF(n,e):e(n))}function Ij(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hb(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Qie(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function Xie(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function KF(t,e,n){let i=oy(t,e);return i>=0?t[i|1]=n:(i=~i,Xie(t,i,e,n)),i}function _x(t,e){let n=oy(t,e);if(n>=0)return t[n|1]}function oy(t,e){return $ie(t,e,1)}function $ie(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var fp={},Pr=[],Ad=new ue(""),xj=new ue("",-1),Fj=new ue(""),fb=class{get(e,n=zv){if(n===zv){let i=new Error(`NullInjectorError: No provider for ${Mr(e)}!`);throw i.name="NullInjectorError",i}return n}},Aj=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Aj||{}),Ga=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ga||{}),$n=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($n||{});function Zie(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function qx(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];ere(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function Jie(t){return t===3||t===4||t===6}function ere(t){return t.charCodeAt(0)===64}function qv(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?HU(t,n,r,null,e[++i]):HU(t,n,r,null,null))}}return t}function HU(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var Pj="ng-template";function tre(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&Zie(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(YF(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===n)return!0}return!1}function YF(t){return t.type===4&&t.value!==Pj}function nre(t,e,n){let i=t.type===4&&!n?Pj:t.value;return e===i}function ire(t,e,n){let i=4,r=t.attrs,s=r!==null?ore(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Zo(i)&&!Zo(l))return!1;if(o&&Zo(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!nre(t,l,n)||l===""&&e.length===1){if(Zo(i))return!1;o=!0}}else if(i&8){if(r===null||!tre(t,r,l,n)){if(Zo(i))return!1;o=!0}}else{let c=e[++a],u=rre(l,r,YF(t),n);if(u===-1){if(Zo(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Zo(i))return!1;o=!0}}}}return Zo(i)||o}function Zo(t){return(t&1)===0}function rre(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return are(e,t)}function Mj(t,e,n=!1){for(let i=0;i<e.length;i++)if(ire(t,e[i],n))return!0;return!1}function sre(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function ore(t){for(let e=0;e<t.length;e++){let n=t[e];if(Jie(n))return e}return t.length}function are(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function lre(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function UU(t,e){return t?":not("+e.trim()+")":e}function cre(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Zo(o)&&(e+=UU(s,r),r=""),i=o,s=s||!Zo(i);n++}return r!==""&&(e+=UU(s,r)),e}function ure(t){return t.map(cre).join(",")}function dre(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Zo(r))break;r=s}i++}return{attrs:e,classes:n}}function je(t){return sy(()=>{let e=Vj(t),n=Se(W({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Aj.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ga.Emulated,styles:t.styles||Pr,_:null,schemas:t.schemas||null,tView:null,id:""});Bj(n);let i=t.dependencies;return n.directiveDefs=WU(i,!1),n.pipeDefs=WU(i,!0),n.id=pre(n),n})}function hre(t){return Kc(t)||Oj(t)}function fre(t){return t!==null}function Ji(t){return sy(()=>({type:t.type,bootstrap:t.bootstrap||Pr,declarations:t.declarations||Pr,imports:t.imports||Pr,exports:t.exports||Pr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jU(t,e){if(t==null)return fp;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=$n.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==$n.None?[i,a]:i,e[s]=o):n[s]=i}return n}function on(t){return sy(()=>{let e=Vj(t);return Bj(e),e})}function Nb(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kc(t){return t[Pie]||null}function Oj(t){return t[Mie]||null}function kj(t){return t[Oie]||null}function Nj(t){let e=Kc(t)||Oj(t)||kj(t);return e!==null?e.standalone:!1}function Lj(t,e){let n=t[kie]||null;if(!n&&e===!0)throw new Error(`Type ${Mr(t)} does not have '\u0275mod' property.`);return n}function Vj(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fp,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Pr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jU(t.inputs,e),outputs:jU(t.outputs),debugInfo:null}}function Bj(t){t.features?.forEach(e=>e(t))}function WU(t,e){if(!t)return null;let n=e?kj:hre;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(fre)}function pre(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fn(t){return{\u0275providers:t}}function gre(...t){return{\u0275providers:Gj(!0,t),\u0275fromNgModule:!0}}function Gj(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return qF(e,o=>{let a=o;Kx(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Hj(r,s),n}function Hj(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];QF(r,s=>{e(s,i)})}}function Kx(t,e,n,i){if(t=Ar(t),!t)return!1;let r=null,s=LU(t),o=!s&&Kc(t);if(!s&&!o){let l=t.ngModule;if(s=LU(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Kx(c,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{qF(s.imports,u=>{Kx(u,e,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Hj(c,e)}if(!a){let c=Fd(r)||(()=>new r);e({provide:r,useFactory:c,deps:Pr},r),e({provide:Fj,useValue:r,multi:!0},r),e({provide:Ad,useValue:()=>Z(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=t;QF(l,u=>{e(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function QF(t,e){for(let n of t)_j(n)&&(n=n.\u0275providers),Array.isArray(n)?QF(n,e):e(n)}var mre=hn({provide:String,useValue:hn});function Uj(t){return t!==null&&typeof t=="object"&&mre in t}function vre(t){return!!(t&&t.useExisting)}function yre(t){return!!(t&&t.useFactory)}function pp(t){return typeof t=="function"}function Cre(t){return!!t.useClass}var Lb=new ue(""),rb={},wre={},Ex;function Vb(){return Ex===void 0&&(Ex=new fb),Ex}var Or=class{},Kv=class extends Or{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qx(e,o=>this.processProvider(o)),this.records.set(xj,lp(void 0,this)),r.has("environment")&&this.records.set(Or,lp(void 0,this));let s=this.records.get(Lb);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Fj,Pr,bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Dt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Dt(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=zc(this),i=cs(void 0),r;try{return e()}finally{zc(n),cs(i)}}get(e,n=zv,i=bt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(BU))return e[BU](this);i=kb(i);let r,s=zc(this),o=cs(void 0);try{if(!(i&bt.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Dre(e)&&Ob(e);c&&this.injectableDefInScope(c)?l=lp(Yx(e),rb):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&bt.Self?Vb():this.parent;return n=i&bt.Optional&&n===zv?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[db]=a[db]||[]).unshift(Mr(e)),s)throw a;return zie(a,e,"R3InjectorError",this.source)}else throw a}finally{cs(o),zc(s)}}resolveInjectorInitializers(){let e=Dt(null),n=zc(this),i=cs(void 0),r;try{let s=this.get(Ad,Pr,bt.Self);for(let o of s)o()}finally{zc(n),cs(i),Dt(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Mr(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(e){e=Ar(e);let n=pp(e)?e:Ar(e&&e.provide),i=bre(e);if(!pp(e)&&e.multi===!0){let r=this.records.get(n);r||(r=lp(void 0,rb,!0),r.factory=()=>zx(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Dt(null);try{return n.value===rb&&(n.value=wre,n.value=n.factory()),typeof n.value=="object"&&n.value&&Ere(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Dt(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ar(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Yx(t){let e=Ob(t),n=e!==null?e.factory:Fd(t);if(n!==null)return n;if(t instanceof ue)throw new Le(204,!1);if(t instanceof Function)return Sre(t);throw new Le(204,!1)}function Sre(t){if(t.length>0)throw new Le(204,!1);let n=Fie(t);return n!==null?()=>n.factory(t):()=>new t}function bre(t){if(Uj(t))return lp(void 0,t.useValue);{let e=jj(t);return lp(e,rb)}}function jj(t,e,n){let i;if(pp(t)){let r=Ar(t);return Fd(r)||Yx(r)}else if(Uj(t))i=()=>Ar(t.useValue);else if(yre(t))i=()=>t.useFactory(...zx(t.deps||[]));else if(vre(t))i=()=>Z(Ar(t.useExisting));else{let r=Ar(t&&(t.useClass||t.provide));if(_re(t))i=()=>new r(...zx(t.deps));else return Fd(r)||Yx(r)}return i}function lp(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _re(t){return!!t.deps}function Ere(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Dre(t){return typeof t=="function"||typeof t=="object"&&t instanceof ue}function Qx(t,e){for(let n of t)Array.isArray(n)?Qx(n,e):n&&_j(n)?Qx(n.\u0275providers,e):e(n)}function $c(t,e){t instanceof Kv&&t.assertNotDestroyed();let n,i=zc(t),r=cs(void 0);try{return e()}finally{zc(i),cs(r)}}function Wj(){return Ej()!==void 0||Uie()!=null}function zj(t){if(!Wj())throw new Le(-203,!1)}function Tre(t){return typeof t=="function"}var Ps=0,rt=1,it=2,Bi=3,ea=4,ks=5,Ms=6,Yv=7,fr=8,gp=9,Ha=10,sn=11,Qv=12,zU=13,wp=14,us=15,ay=16,cp=17,Ml=18,Bb=19,qj=20,qc=21,Dx=22,Pd=23,Zn=25,Kj=1,Xv=6,Ol=7,pb=8,mp=9,$i=10,XF=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(XF||{});function Pl(t){return Array.isArray(t)&&typeof t[Kj]=="object"}function Ua(t){return Array.isArray(t)&&t[Kj]===!0}function $F(t){return(t.flags&4)!==0}function ly(t){return t.componentOffset>-1}function Gb(t){return(t.flags&1)===1}function Yc(t){return!!t.template}function Yj(t){return(t[it]&512)!==0}var Xx=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Qj(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Vn(){return Xj}function Xj(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ire),Rre}Vn.ngInherit=!0;function Rre(){let t=Zj(this),e=t?.current;if(e){let n=t.previous;if(n===fp)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Ire(t,e,n,i,r){let s=this.declaredInputs[i],o=Zj(t)||xre(t,{previous:fp,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Xx(c&&c.currentValue,n,l===fp),Qj(t,e,r,n)}var $j="__ngSimpleChanges__";function Zj(t){return t[$j]||null}function xre(t,e){return t[$j]=e}var qU=null;var Va=function(t,e,n){qU?.(t,e,n)},Jj="svg",Fre="math",Are=!1;function Pre(){return Are}function ta(t){for(;Array.isArray(t);)t=t[Ps];return t}function eW(t,e){return ta(e[t])}function Ns(t,e){return ta(e[t.index])}function ZF(t,e){return t.data[e]}function tW(t,e){return t[e]}function Zc(t,e){let n=e[t];return Pl(n)?n:n[Ps]}function Mre(t){return(t[it]&4)===4}function JF(t){return(t[it]&128)===128}function Ore(t){return Ua(t[Bi])}function vp(t,e){return e==null?null:t[e]}function nW(t){t[cp]=0}function kre(t){t[it]&1024||(t[it]|=1024,JF(t)&&$v(t))}function Nre(t,e){for(;t>0;)e=e[wp],t--;return e}function e1(t){return!!(t[it]&9216||t[Pd]?.dirty)}function $x(t){t[Ha].changeDetectionScheduler?.notify(1),e1(t)?$v(t):t[it]&64&&(Pre()?(t[it]|=1024,$v(t)):t[Ha].changeDetectionScheduler?.notify())}function $v(t){t[Ha].changeDetectionScheduler?.notify();let e=Zv(t);for(;e!==null&&!(e[it]&8192||(e[it]|=8192,!JF(e)));)e=Zv(e)}function iW(t,e){if((t[it]&256)===256)throw new Le(911,!1);t[qc]===null&&(t[qc]=[]),t[qc].push(e)}function Lre(t,e){if(t[qc]===null)return;let n=t[qc].indexOf(e);n!==-1&&t[qc].splice(n,1)}function Zv(t){let e=t[Bi];return Ua(e)?e[Bi]:e}var ft={lFrame:dW(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vre(){return ft.lFrame.elementDepthCount}function Bre(){ft.lFrame.elementDepthCount++}function Gre(){ft.lFrame.elementDepthCount--}function rW(){return ft.bindingsEnabled}function Sp(){return ft.skipHydrationRootTNode!==null}function Hre(t){return ft.skipHydrationRootTNode===t}function Ure(t){ft.skipHydrationRootTNode=t}function jre(){ft.skipHydrationRootTNode=null}function Ct(){return ft.lFrame.lView}function Wn(){return ft.lFrame.tView}function We(t){return ft.lFrame.contextLView=t,t[fr]}function ze(t){return ft.lFrame.contextLView=null,t}function kr(){let t=sW();for(;t!==null&&t.type===64;)t=t.parent;return t}function sW(){return ft.lFrame.currentTNode}function Wre(){let t=ft.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vd(t,e){let n=ft.lFrame;n.currentTNode=t,n.isParent=e}function t1(){return ft.lFrame.isParent}function n1(){ft.lFrame.isParent=!1}function zre(){return ft.lFrame.contextLView}function oW(){let t=ft.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function qre(t){return ft.lFrame.bindingIndex=t}function Bd(){return ft.lFrame.bindingIndex++}function aW(t){let e=ft.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Kre(){return ft.lFrame.inI18n}function Yre(t,e){let n=ft.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zx(e)}function Qre(){return ft.lFrame.currentDirectiveIndex}function Zx(t){ft.lFrame.currentDirectiveIndex=t}function Xre(t){let e=ft.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function lW(){return ft.lFrame.currentQueryIndex}function i1(t){ft.lFrame.currentQueryIndex=t}function $re(t){let e=t[rt];return e.type===2?e.declTNode:e.type===1?t[ks]:null}function cW(t,e,n){if(n&bt.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&bt.Host);)if(r=$re(s),r===null||(s=s[wp],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=ft.lFrame=uW();return i.currentTNode=e,i.lView=t,!0}function r1(t){let e=uW(),n=t[rt];ft.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function uW(){let t=ft.lFrame,e=t===null?null:t.child;return e===null?dW(t):e}function dW(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function hW(){let t=ft.lFrame;return ft.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var fW=hW;function s1(){let t=hW();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zre(t){return(ft.lFrame.contextLView=Nre(t,ft.lFrame.contextLView))[fr]}function Jc(){return ft.lFrame.selectedIndex}function Md(t){ft.lFrame.selectedIndex=t}function Hb(){let t=ft.lFrame;return ZF(t.tView,t.selectedIndex)}function Gd(){ft.lFrame.currentNamespace=Jj}function pW(){return ft.lFrame.currentNamespace}var gW=!0;function Ub(){return gW}function ja(t){gW=t}function Jre(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=Xj(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function jb(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function sb(t,e,n){mW(t,e,3,n)}function ob(t,e,n,i){(t[it]&3)===n&&mW(t,e,n,i)}function Tx(t,e){let n=t[it];(n&3)===e&&(n&=16383,n+=1,t[it]=n)}function mW(t,e,n,i){let r=i!==void 0?t[cp]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[cp]+=65536),(a<s||s==-1)&&(ese(t,n,e,l),t[cp]=(t[cp]&4294901760)+l+2),l++}function KU(t,e){Va(4,t,e);let n=Dt(null);try{e.call(t)}finally{Dt(n),Va(5,t,e)}}function ese(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[it]>>14<t[cp]>>16&&(t[it]&3)===e&&(t[it]+=16384,KU(a,s)):KU(a,s)}var hp=-1,Od=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function tse(t){return t instanceof Od}function nse(t){return(t.flags&8)!==0}function ise(t){return(t.flags&16)!==0}function vW(t){return t!==hp}function gb(t){return t&32767}function rse(t){return t>>16}function mb(t,e){let n=rse(t),i=e;for(;n>0;)i=i[wp],n--;return i}var Jx=!0;function vb(t){let e=Jx;return Jx=t,e}var sse=256,yW=sse-1,CW=5,ose=0,Ba={};function ase(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Wv)&&(i=n[Wv]),i==null&&(i=n[Wv]=ose++);let r=i&yW,s=1<<r;e.data[t+(r>>CW)]|=s}function yb(t,e){let n=wW(t,e);if(n!==-1)return n;let i=e[rt];i.firstCreatePass&&(t.injectorIndex=e.length,Rx(i.data,t),Rx(e,null),Rx(i.blueprint,null));let r=o1(t,e),s=t.injectorIndex;if(vW(r)){let o=gb(r),a=mb(r,e),l=a[rt].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Rx(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wW(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function o1(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=DW(r),i===null)return hp;if(n++,r=r[wp],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return hp}function eF(t,e,n){ase(t,e,n)}function SW(t,e,n){if(n&bt.Optional||t!==void 0)return t;zF(e,"NodeInjector")}function bW(t,e,n,i){if(n&bt.Optional&&i===void 0&&(i=null),!(n&(bt.Self|bt.Host))){let r=t[gp],s=cs(void 0);try{return r?r.get(e,i,n&bt.Optional):Dj(e,i,n&bt.Optional)}finally{cs(s)}}return SW(i,e,n)}function _W(t,e,n,i=bt.Default,r){if(t!==null){if(e[it]&2048&&!(i&bt.Self)){let o=dse(t,e,n,i,Ba);if(o!==Ba)return o}let s=EW(t,e,n,i,Ba);if(s!==Ba)return s}return bW(e,n,i,r)}function EW(t,e,n,i,r){let s=cse(n);if(typeof s=="function"){if(!cW(e,t,i))return i&bt.Host?SW(r,n,i):bW(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&bt.Optional))zF(n);else return o}finally{fW()}}else if(typeof s=="number"){let o=null,a=wW(t,e),l=hp,c=i&bt.Host?e[us][ks]:null;for((a===-1||i&bt.SkipSelf)&&(l=a===-1?o1(t,e):e[a+8],l===hp||!QU(i,!1)?a=-1:(o=e[rt],a=gb(l),e=mb(l,e)));a!==-1;){let u=e[rt];if(YU(s,a,u.data)){let d=lse(a,e,n,o,i,c);if(d!==Ba)return d}l=e[a+8],l!==hp&&QU(i,e[rt].data[a+8]===c)&&YU(s,a,e)?(o=u,a=gb(l),e=mb(l,e)):a=-1}}return r}function lse(t,e,n,i,r,s){let o=e[rt],a=o.data[t+8],l=i==null?ly(a)&&Jx:i!=o&&(a.type&3)!==0,c=r&bt.Host&&s===a,u=ab(a,o,n,l,c);return u!==null?kd(e,o,u,a):Ba}function ab(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let g=o[p];if(p<l&&n===g||p>=l&&g.type===n)return p}if(r){let p=o[l];if(p&&Yc(p)&&p.type===n)return l}return null}function kd(t,e,n,i){let r=t[n],s=e.data;if(tse(r)){let o=r;o.resolving&&Lie(Nie(s[n]));let a=vb(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?cs(o.injectImpl):null,u=cW(t,i,bt.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&Jre(n,s[n],e)}finally{c!==null&&cs(c),vb(a),o.resolving=!1,fW()}}return r}function cse(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Wv)?t[Wv]:void 0;return typeof e=="number"?e>=0?e&yW:use:e}function YU(t,e,n){let i=1<<t;return!!(n[e+(t>>CW)]&i)}function QU(t,e){return!(t&bt.Self)&&!(t&bt.Host&&e)}var xd=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return _W(this._tNode,this._lView,e,kb(i),n)}};function use(){return new xd(kr(),Ct())}function ds(t){return sy(()=>{let e=t.prototype.constructor,n=e[ub]||tF(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[ub]||tF(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function tF(t){return Cj(t)?()=>{let e=tF(Ar(t));return e&&e()}:Fd(t)}function dse(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[it]&2048&&!(o[it]&512);){let a=EW(s,o,n,i|bt.Self,Ba);if(a!==Ba)return a;let l=s.parent;if(!l){let c=o[qj];if(c){let u=c.get(n,Ba,i);if(u!==Ba)return u}l=DW(o),o=o[wp]}s=l}return r}function DW(t){let e=t[rt],n=e.type;return n===2?e.declTNode:n===1?t[ks]:null}function XU(t,e=null,n=null,i){let r=TW(t,e,n,i);return r.resolveInjectorInitializers(),r}function TW(t,e=null,n=null,i,r=new Set){let s=[n||Pr,gre(t)];return i=i||(typeof t=="object"?void 0:Mr(t)),new Kv(s,e||Vb(),i||null,r)}var _t=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return XU({name:""},r,i,"");{let s=i.name??"";return XU({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=zv,e.NULL=new fb,e.\u0275prov=oe({token:e,providedIn:"any",factory:()=>Z(xj)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var hse="ngOriginalError";function Ix(t){return t[hse]}var kl=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ix(e);for(;n&&Ix(n);)n=Ix(n);return n||null}},RW=new ue("",{providedIn:"root",factory:()=>Q(kl).handleError.bind(void 0)}),bp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fse,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),nF=class extends bp{constructor(e){super(),this._lView=e}onDestroy(e){return iW(this._lView,e),()=>Lre(this._lView,e)}};function fse(){return new nF(Ct())}function pse(){return _p(kr(),Ct())}function _p(t,e){return new Fn(Ns(t,e))}var Fn=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=pse;let t=e;return t})();function gse(t){return t instanceof Fn?t.nativeElement:t}var iF=class extends ot{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Wj()&&(this.destroyRef=Q(bp,{optional:!0})??void 0)}emit(e){let n=Dt(null);try{super.next(e)}finally{Dt(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=xx(s),r&&(r=xx(r)),o&&(o=xx(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ln&&e.add(a),a}};function xx(t){return e=>{setTimeout(t,void 0,e)}}var X=iF;function mse(){return this._results[Symbol.iterator]()}var rF=class t{get changes(){return this._changes??=new X}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=mse)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=Yie(e);(this._changesDetected=!Kie(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},vse="ngSkipHydration",yse="ngskiphydration";function IW(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let i=e[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===yse)return!0}return!1}function xW(t){return t.hasAttribute(vse)}function Cb(t){return(t.flags&128)===128}function Cse(t){if(Cb(t))return!0;let e=t.parent;for(;e;){if(Cb(t)||IW(e))return!0;e=e.parent}return!1}var FW=new Map,wse=0;function Sse(){return wse++}function bse(t){FW.set(t[Bb],t)}function _se(t){FW.delete(t[Bb])}var $U="__ngContext__";function Qc(t,e){Pl(e)?(t[$U]=e[Bb],bse(e)):t[$U]=e}function AW(t){return MW(t[Qv])}function PW(t){return MW(t[ea])}function MW(t){for(;t!==null&&!Ua(t);)t=t[ea];return t}var sF;function OW(t){sF=t}function Wb(){if(sF!==void 0)return sF;if(typeof document<"u")return document;throw new Le(210,!1)}var zb=new ue("",{providedIn:"root",factory:()=>Ese}),Ese="ng",a1=new ue(""),_n=new ue("",{providedIn:"platform",factory:()=>"unknown"});var l1=new ue("",{providedIn:"root",factory:()=>Wb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Dse(){let t=new Hd;return Q(_n)==="browser"&&(t.store=Tse(Wb(),Q(zb))),t}var Hd=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=oe({token:e,providedIn:"root",factory:Dse});let t=e;return t})();function Tse(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var kW="h",NW="b",oF=function(t){return t.FirstChild="f",t.NextSibling="n",t}(oF||{}),Rse="e",Ise="t",c1="c",LW="x",wb="r",xse="i",Fse="n",Ase="d",Pse="__nghData__",VW=Pse,Fx="ngh",Mse="nghm",BW=()=>null;function Ose(t,e,n=!1){let i=t.getAttribute(Fx);if(i==null)return null;let[r,s]=i.split("|");if(i=n?s:r,!i)return null;let o=s?`|${s}`:"",a=n?r:o,l={};if(i!==""){let u=e.get(Hd,null,{optional:!0});u!==null&&(l=u.get(VW,[])[Number(i)])}let c={data:l,firstChild:t.firstChild??null};return n&&(c.firstChild=t,qb(c,0,t.nextSibling)),a?t.setAttribute(Fx,a):t.removeAttribute(Fx),c}function kse(){BW=Ose}function u1(t,e,n=!1){return BW(t,e,n)}function Nse(t){let e=t._lView;return e[rt].type===2?null:(Yj(e)&&(e=e[Zn]),e)}function Lse(t){return t.textContent?.replace(/\s/gm,"")}function Vse(t){let e=Wb(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=Lse(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let s of r)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function qb(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function aF(t,e){return t.segmentHeads?.[e]??null}function Bse(t,e){let n=t.data,i=n[Rse]?.[e]??null;return i===null&&n[c1]?.[e]&&(i=d1(t,e)),i}function GW(t,e){return t.data[c1]?.[e]??null}function d1(t,e){let n=GW(t,e)??[],i=0;for(let r of n)i+=r[wb]*(r[LW]??1);return i}function Kb(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Ase];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var JS=new ue(""),HW=!1,UW=new ue("",{providedIn:"root",factory:()=>HW}),Gse=new ue("");var lF=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tie})`}};function Yb(t){return t instanceof lF?t.changingThisBreaksApplicationSecurity:t}var Hse=/^>|^->|<!--|-->|--!>|<!-$/g,Use=/(<|>)/g,jse="\u200B$1\u200B";function Wse(t){return t.replace(Hse,e=>e.replace(Use,jse))}function zse(t){return t.ownerDocument.body}function jW(t){return t instanceof Function?t():t}function eb(t){return(t??Q(_t)).get(_n)==="browser"}var Nl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Nl||{}),qse;function h1(t,e){return qse(t,e)}function up(t,e,n,i,r){if(i!=null){let s,o=!1;Ua(i)?s=i:Pl(i)&&(o=!0,i=i[Ps]);let a=ta(i);t===0&&n!==null?r==null?KW(e,n,a):Sb(e,n,a,r||null,!0):t===1&&n!==null?Sb(e,n,a,r||null,!0):t===2?m1(e,a,o):t===3&&e.destroyNode(a),s!=null&&aoe(e,t,s,n,r)}}function f1(t,e){return t.createText(e)}function Kse(t,e,n){t.setValue(e,n)}function p1(t,e){return t.createComment(Wse(e))}function Qb(t,e,n){return t.createElement(e,n)}function Yse(t,e){WW(t,e),e[Ps]=null,e[ks]=null}function Qse(t,e,n,i,r,s){i[Ps]=r,i[ks]=e,Zb(t,i,n,1,r,s)}function WW(t,e){e[Ha].changeDetectionScheduler?.notify(1),Zb(t,e,e[sn],2,null,null)}function Xse(t){let e=t[Qv];if(!e)return Ax(t[rt],t);for(;e;){let n=null;if(Pl(e))n=e[Qv];else{let i=e[$i];i&&(n=i)}if(!n){for(;e&&!e[ea]&&e!==t;)Pl(e)&&Ax(e[rt],e),e=e[Bi];e===null&&(e=t),Pl(e)&&Ax(e[rt],e),n=e&&e[ea]}e=n}}function $se(t,e,n,i){let r=$i+i,s=n.length;i>0&&(n[r-1][ea]=e),i<s-$i?(e[ea]=n[r],Ij(n,$i+i,e)):(n.push(e),e[ea]=null),e[Bi]=n;let o=e[ay];o!==null&&n!==o&&Zse(o,e);let a=e[Ml];a!==null&&a.insertView(t),$x(e),e[it]|=128}function Zse(t,e){let n=t[mp],r=e[Bi][Bi][us];e[us]!==r&&(t[it]|=XF.HasTransplantedViews),n===null?t[mp]=[e]:n.push(e)}function zW(t,e){let n=t[mp],i=n.indexOf(e);n.splice(i,1)}function Jv(t,e){if(t.length<=$i)return;let n=$i+e,i=t[n];if(i){let r=i[ay];r!==null&&r!==t&&zW(r,i),e>0&&(t[n-1][ea]=i[ea]);let s=hb(t,$i+e);Yse(i[rt],i);let o=s[Ml];o!==null&&o.detachView(s[rt]),i[Bi]=null,i[ea]=null,i[it]&=-129}return i}function Xb(t,e){if(!(e[it]&256)){let n=e[sn];n.destroyNode&&Zb(t,e,n,3,null,null),Xse(e)}}function Ax(t,e){if(e[it]&256)return;let n=Dt(null);try{e[it]&=-129,e[it]|=256,e[Pd]&&lU(e[Pd]),eoe(t,e),Jse(t,e),e[rt].type===1&&e[sn].destroy();let i=e[ay];if(i!==null&&Ua(e[Bi])){i!==e[Bi]&&zW(i,e);let r=e[Ml];r!==null&&r.detachView(t)}_se(e)}finally{Dt(n)}}function Jse(t,e){let n=t.cleanup,i=e[Yv];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[Yv]=null);let r=e[qc];if(r!==null){e[qc]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function eoe(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Od)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];Va(4,a,l);try{l.call(a)}finally{Va(5,a,l)}}else{Va(4,r,s);try{s.call(r)}finally{Va(5,r,s)}}}}}function qW(t,e,n){return toe(t,e.parent,n)}function toe(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Ps];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===Ga.None||s===Ga.Emulated)return null}return Ns(i,n)}}function Sb(t,e,n,i,r){t.insertBefore(e,n,i,r)}function KW(t,e,n){t.appendChild(e,n)}function ZU(t,e,n,i,r){i!==null?Sb(t,e,n,i,r):KW(t,e,n)}function noe(t,e,n,i){t.removeChild(e,n,i)}function g1(t,e){return t.parentNode(e)}function ioe(t,e){return t.nextSibling(e)}function YW(t,e,n){return soe(t,e,n)}function roe(t,e,n){return t.type&40?Ns(t,n):null}var soe=roe,JU;function $b(t,e,n,i){let r=qW(t,i,e),s=e[sn],o=i.parent||e[ks],a=YW(o,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)ZU(s,r,n[l],a,!1);else ZU(s,r,n,a,!1);JU!==void 0&&JU(s,i,e,n,r)}function lb(t,e){if(e!==null){let n=e.type;if(n&3)return Ns(e,t);if(n&4)return cF(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return lb(t,i);{let r=t[e.index];return Ua(r)?cF(-1,r):ta(r)}}else{if(n&32)return h1(e,t)()||ta(t[e.index]);{let i=QW(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Zv(t[us]);return lb(r,i)}else return lb(t,e.next)}}}return null}function QW(t,e){if(e!==null){let i=t[us][ks],r=e.projection;return i.projection[r]}return null}function cF(t,e){let n=$i+t+1;if(n<e.length){let i=e[n],r=i[rt].firstChild;if(r!==null)return lb(i,r)}return e[Ol]}function m1(t,e,n){let i=g1(t,e);i&&noe(t,i,e,n)}function XW(t){t.textContent=""}function v1(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],l=n.type;if(o&&e===0&&(a&&Qc(ta(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)v1(t,e,n.child,i,r,s,!1),up(e,t,r,a,s);else if(l&32){let c=h1(n,i),u;for(;u=c();)up(e,t,r,u,s);up(e,t,r,a,s)}else l&16?$W(t,e,i,n,r,s):up(e,t,r,a,s);n=o?n.projectionNext:n.next}}function Zb(t,e,n,i,r,s){v1(n,i,t.firstChild,e,r,s,!1)}function ooe(t,e,n){let i=e[sn],r=qW(t,n,e),s=n.parent||e[ks],o=YW(s,n,e);$W(i,0,e,n,r,o)}function $W(t,e,n,i,r,s){let o=n[us],l=o[ks].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];up(e,t,r,u,s)}else{let c=l,u=o[Bi];Cb(i)&&(c.flags|=128),v1(t,e,c,u,r,s,!0)}}function aoe(t,e,n,i,r){let s=n[Ol],o=ta(n);s!==o&&up(e,t,i,s,r);for(let a=$i;a<n.length;a++){let l=n[a];Zb(l[rt],l,t,e,i,s)}}function loe(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:Nl.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Nl.Important),t.setStyle(n,i,r,s))}}function coe(t,e,n){t.setAttribute(e,"style",n)}function ZW(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function JW(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&qx(t,e,i),r!==null&&ZW(t,e,r),s!==null&&coe(t,e,s)}var Vl={};function ee(t=1){ez(Wn(),Ct(),Jc()+t,!1)}function ez(t,e,n,i){if(!i)if((e[it]&3)===3){let s=t.preOrderCheckHooks;s!==null&&sb(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ob(e,s,0,n)}Md(n)}function J(t,e=bt.Default){let n=Ct();if(n===null)return Z(t,e);let i=kr();return _W(i,n,Ar(t),e)}function tz(t,e,n,i,r,s){let o=Dt(null);try{let a=null;r&$n.SignalBased&&(a=e[i][tx]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&$n.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):Qj(e,a,i,s)}finally{Dt(o)}}function uoe(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Md(~r);else{let s=r,o=n[++i],a=n[++i];Yre(o,s);let l=e[s];a(2,l)}}}finally{Md(-1)}}function Jb(t,e,n,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Ps]=r,d[it]=i|4|128|8|64,(c!==null||t&&t[it]&2048)&&(d[it]|=2048),nW(d),d[Bi]=d[wp]=t,d[fr]=n,d[Ha]=o||t&&t[Ha],d[sn]=a||t&&t[sn],d[gp]=l||t&&t[gp]||null,d[ks]=s,d[Bb]=Sse(),d[Ms]=u,d[qj]=c,d[us]=e.type==2?t[us]:d,d}function Ep(t,e,n,i,r){let s=t.data[e];if(s===null)s=doe(t,e,n,i,r),Kre()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=Wre();s.injectorIndex=o===null?-1:o.injectorIndex}return Vd(s,!0),s}function doe(t,e,n,i,r){let s=sW(),o=t1(),a=o?s:s&&s.parent,l=t.data[e]=yoe(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function nz(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function iz(t,e,n,i,r){let s=Jc(),o=i&2;try{Md(-1),o&&e.length>Zn&&ez(t,e,Zn,!1),Va(o?2:0,r),n(i,r)}finally{Md(s),Va(o?3:1,r)}}function y1(t,e,n){if($F(e)){let i=Dt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{Dt(i)}}}function C1(t,e,n){rW()&&(Eoe(t,e,n,Ns(n,e)),(n.flags&64)===64&&az(t,e,n))}function w1(t,e,n=Ns){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function rz(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=S1(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function S1(t,e,n,i,r,s,o,a,l,c,u){let d=Zn+i,h=d+r,p=hoe(d,h),g=typeof c=="function"?c():c;return p[rt]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function hoe(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Vl);return n}function foe(t,e,n,i){let s=i.get(UW,HW)||n===Ga.ShadowDom,o=t.selectRootElement(e,s);return poe(o),o}function poe(t){sz(t)}var sz=()=>null;function goe(t){xW(t)?XW(t):Vse(t)}function moe(){sz=goe}function voe(t,e,n,i){let r=uz(e);r.push(n),t.firstCreatePass&&dz(t).push(i,r.length-1)}function yoe(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Sp()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ej(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,l=$n.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(r!==null){if(!r.hasOwnProperty(s))continue;c=r[s]}t===0?tj(i,n,c,a,l):tj(i,n,c,a)}return i}function tj(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function Coe(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,p=h?h.inputs:null,g=h?h.outputs:null;l=ej(0,d.inputs,u,l,p),c=ej(1,d.outputs,u,c,g);let m=l!==null&&o!==null&&!YF(e)?koe(l,u,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function woe(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function b1(t,e,n,i,r,s,o,a){let l=Ns(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(E1(t,n,u,i,r),ly(e)&&Soe(n,e.index)):e.type&3?(i=woe(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function Soe(t,e){let n=Zc(e,t);n[it]&16||(n[it]|=64)}function _1(t,e,n,i){if(rW()){let r=i===null?null:{"":-1},s=Toe(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&oz(t,e,n,o,r,a),r&&Roe(n,i,r)}n.mergedAttrs=qv(n.mergedAttrs,n.attrs)}function oz(t,e,n,i,r,s){for(let c=0;c<i.length;c++)eF(yb(n,e),t,i[c].type);xoe(n,t.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=nz(t,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=qv(n.mergedAttrs,u.hostAttrs),Foe(t,n,e,l,u),Ioe(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Coe(t,n,s)}function boe(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;_oe(o)!=a&&o.push(a),o.push(n,i,s)}}function _oe(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Eoe(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;ly(n)&&Aoe(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||yb(n,e),Qc(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let l=t.data[a],c=kd(e,t,a,n);if(Qc(c,e),o!==null&&Ooe(e,a-r,c,l,n,o),Yc(l)){let u=Zc(n.index,e);u[fr]=kd(e,t,a,n)}}}function az(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Qre();try{Md(s);for(let a=i;a<r;a++){let l=t.data[a],c=e[a];Zx(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Doe(l,c)}}finally{Md(-1),Zx(o)}}function Doe(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Toe(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Mj(e,o.selectors,!1))if(i||(i=[]),Yc(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;uF(t,e,l)}else i.unshift(o),uF(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function uF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Roe(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new Le(-301,!1);i.push(e[r],s)}}}function Ioe(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Yc(e)&&(n[""]=t)}}function xoe(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Foe(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=Fd(r.type,!0)),o=new Od(s,Yc(r),J);t.blueprint[i]=o,n[i]=o,boe(t,e,i,nz(t,n,r.hostVars,Vl),r)}function Aoe(t,e,n){let i=Ns(e,t),r=rz(n),s=t[Ha].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=e_(t,Jb(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function Poe(t,e,n,i,r,s){let o=Ns(t,e);Moe(e[sn],o,s,t.value,n,i,r)}function Moe(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?WF(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function Ooe(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];tz(i,n,l,c,u,d)}}function koe(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function lz(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function cz(t,e){let n=t.contentQueries;if(n!==null){let i=Dt(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];i1(s),a.contentQueries(2,e[o],o)}}}finally{Dt(i)}}}function e_(t,e){return t[Qv]?t[zU][ea]=e:t[Qv]=e,t[zU]=e,e}function dF(t,e,n){i1(0);let i=Dt(null);try{e(t,n)}finally{Dt(i)}}function uz(t){return t[Yv]||(t[Yv]=[])}function dz(t){return t.cleanup||(t.cleanup=[])}function hz(t,e){let n=t[gp],i=n?n.get(kl,null):null;i&&i.handleError(e)}function E1(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],u=t.data[o];tz(u,c,i,a,l,r)}}function Noe(t,e,n){let i=eW(e,t);Kse(t[sn],i,n)}function Loe(t,e){let n=Zc(e,t),i=n[rt];Voe(i,n);let r=n[Ps];r!==null&&n[Ms]===null&&(n[Ms]=u1(r,n[gp])),D1(i,n,n[fr])}function Voe(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function D1(t,e,n){r1(e);try{let i=t.viewQuery;i!==null&&dF(1,i,n);let r=t.template;r!==null&&iz(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ml]?.finishViewCreation(t),t.staticContentQueries&&cz(t,e),t.staticViewQueries&&dF(2,t.viewQuery,n);let s=t.components;s!==null&&Boe(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[it]&=-5,s1()}}function Boe(t,e){for(let n=0;n<e.length;n++)Loe(t,e[n])}function t_(t,e,n,i){let r=Dt(null);try{let s=e.tView,a=t[it]&4096?4096:16,l=Jb(t,s,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[e.index];l[ay]=c;let u=t[Ml];return u!==null&&(l[Ml]=u.createEmbeddedView(s)),D1(s,l,n),l}finally{Dt(r)}}function fz(t,e){let n=$i+e;if(n<t.length)return t[n]}function ey(t,e){return!e||e.firstChild===null||Cb(t)}function n_(t,e,n,i=!0){let r=e[rt];if($se(r,e,t,n),i){let o=cF(n,t),a=e[sn],l=g1(a,t[Ol]);l!==null&&Qse(r,t[ks],a,e,l,o)}let s=e[Ms];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function pz(t,e){let n=Jv(t,e);return n!==void 0&&Xb(n[rt],n),n}function bb(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(ta(s)),Ua(s)&&Goe(s,i);let o=n.type;if(o&8)bb(t,e,n.child,i);else if(o&32){let a=h1(n,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=QW(e,n);if(Array.isArray(a))i.push(...a);else{let l=Zv(e[us]);bb(l[rt],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Goe(t,e){for(let n=$i;n<t.length;n++){let i=t[n],r=i[rt].firstChild;r!==null&&bb(i[rt],i,r,e)}t[Ol]!==t[Ps]&&e.push(t[Ol])}var gz=[];function Hoe(t){return t[Pd]??Uoe(t)}function Uoe(t){let e=gz.pop()??Object.create(Woe);return e.lView=t,e}function joe(t){t.lView[Pd]!==t&&(t.lView=null,gz.push(t))}var Woe=Se(W({},sU),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$v(t.lView)},consumerOnSignalRead(){this.lView[Pd]=this}}),mz=100;function vz(t,e=!0,n=0){let i=t[Ha],r=i.rendererFactory,s=!1;s||r.begin?.();try{zoe(t,n)}catch(o){throw e&&hz(t,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function zoe(t,e){hF(t,e);let n=0;for(;e1(t);){if(n===mz)throw new Le(103,!1);n++,hF(t,1)}}function qoe(t,e,n,i){let r=e[it];if((r&256)===256)return;let s=!1;!s&&e[Ha].inlineEffectRunner?.flush(),r1(e);let o=null,a=null;!s&&Koe(t)&&(a=Hoe(e),o=oU(a));try{nW(e),qre(t.bindingStartIndex),n!==null&&iz(t,e,n,2,i);let l=(r&3)===3;if(!s)if(l){let d=t.preOrderCheckHooks;d!==null&&sb(e,d,null)}else{let d=t.preOrderHooks;d!==null&&ob(e,d,0,null),Tx(e,0)}if(Yoe(e),yz(e,0),t.contentQueries!==null&&cz(t,e),!s)if(l){let d=t.contentCheckHooks;d!==null&&sb(e,d)}else{let d=t.contentHooks;d!==null&&ob(e,d,1),Tx(e,1)}uoe(t,e);let c=t.components;c!==null&&wz(e,c,0);let u=t.viewQuery;if(u!==null&&dF(2,u,i),!s)if(l){let d=t.viewCheckHooks;d!==null&&sb(e,d)}else{let d=t.viewHooks;d!==null&&ob(e,d,2),Tx(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dx]){for(let d of e[Dx])d();e[Dx]=null}s||(e[it]&=-73)}catch(l){throw $v(e),l}finally{a!==null&&(aU(a,o),joe(a)),s1()}}function Koe(t){return t.type!==2}function yz(t,e){for(let n=AW(t);n!==null;n=PW(n))for(let i=$i;i<n.length;i++){let r=n[i];Cz(r,e)}}function Yoe(t){for(let e=AW(t);e!==null;e=PW(e)){if(!(e[it]&XF.HasTransplantedViews))continue;let n=e[mp];for(let i=0;i<n.length;i++){let r=n[i],s=r[Bi];kre(r)}}}function Qoe(t,e,n){let i=Zc(e,t);Cz(i,n)}function Cz(t,e){JF(t)&&hF(t,e)}function hF(t,e){let i=t[rt],r=t[it],s=t[Pd],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&nx(s)),s&&(s.dirty=!1),t[it]&=-9217,o)qoe(i,t,i.template,t[fr]);else if(r&8192){yz(t,1);let a=i.components;a!==null&&wz(t,a,1)}}function wz(t,e,n){for(let i=0;i<e.length;i++)Qoe(t,e[i],n)}function T1(t){for(t[Ha].changeDetectionScheduler?.notify();t;){t[it]|=64;let e=Zv(t);if(Yj(t)&&!e)return t;t=e}return null}var Nd=class{get rootNodes(){let e=this._lView,n=e[rt];return bb(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(e){this._lView[fr]=e}get destroyed(){return(this._lView[it]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bi];if(Ua(e)){let n=e[pb],i=n?n.indexOf(this):-1;i>-1&&(Jv(e,i),hb(n,i))}this._attachedToViewContainer=!1}Xb(this._lView[rt],this._lView)}onDestroy(e){iW(this._lView,e)}markForCheck(){T1(this._cdRefInjectingView||this._lView)}detach(){this._lView[it]&=-129}reattach(){$x(this._lView),this._lView[it]|=128}detectChanges(){this._lView[it]|=1024,vz(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,WW(this._lView[rt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=e,$x(this._lView)}},na=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Zoe;let t=e;return t})(),Xoe=na,$oe=class extends Xoe{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=t_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Nd(r)}};function Zoe(){return i_(kr(),Ct())}function i_(t,e){return t.type&4?new $oe(e,t,_p(t,e)):null}function Sz(t){let e=t[Xv]??[],i=t[Bi][sn];for(let r of e)Joe(r,i);t[Xv]=Pr}function Joe(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[wb];for(;n<r;){let s=i.nextSibling;m1(e,i,!1),i=s,n++}}}function bz(t){Sz(t);for(let e=$i;e<t.length;e++)_b(t[e])}function eae(t){let e=t[Ms]?.i18nNodes;if(e){let n=t[sn];for(let i of e.values())m1(n,i,!1);t[Ms].i18nNodes=void 0}}function _b(t){eae(t);let e=t[rt];for(let n=Zn;n<e.bindingStartIndex;n++)if(Ua(t[n])){let i=t[n];bz(i)}else Pl(t[n])&&_b(t[n])}function tae(t){let e=t._views;for(let n of e){let i=Nse(n);if(i!==null&&i[Ps]!==null)if(Pl(i))_b(i);else{let r=i[Ps];_b(r),bz(i)}}}var nae=new RegExp(`^(\\d+)*(${NW}|${kW})*(.*)`);function iae(t){let e=t.match(nae),[n,i,r,s]=e,o=i?parseInt(i,10):r,a=[];for(let[l,c,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[o,...a]}function rae(t){return!t.prev&&t.parent?.type===8}function Px(t){return t.index-Zn}function sae(t,e){let n=t.i18nNodes;if(n){let i=n.get(e);return i&&n.delete(e),i}return null}function r_(t,e,n,i){let r=Px(i),s=sae(t,r);if(!s){let o=t.data[Fse];if(o?.[r])s=aae(o[r],n);else if(e.firstChild===i)s=t.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(rae(i)){let c=Px(i.parent);s=aF(t,c)}else{let c=Ns(l,n);if(a)s=c.firstChild;else{let u=Px(l),d=aF(t,u);if(l.type===2&&d){let p=d1(t,u)+1;s=s_(p,d)}else s=c.nextSibling}}}}return s}function s_(t,e){let n=e;for(let i=0;i<t;i++)n=n.nextSibling;return n}function oae(t,e){let n=t;for(let i=0;i<e.length;i+=2){let r=e[i],s=e[i+1];for(let o=0;o<s;o++)switch(r){case oF.FirstChild:n=n.firstChild;break;case oF.NextSibling:n=n.nextSibling;break}}return n}function aae(t,e){let[n,...i]=iae(t),r;if(n===kW)r=e[us][Ps];else if(n===NW)r=zse(e[us][Ps]);else{let s=Number(n);r=ta(e[s+Zn])}return oae(r,i)}function lae(t,e){let n=[];for(let i of e)for(let r=0;r<(i[LW]??1);r++){let s={data:i,firstChild:null};i[wb]>0&&(s.firstChild=t,t=s_(i[wb],t)),n.push(s)}return[t,n]}var _z=()=>null;function cae(t,e){let n=t[Xv];return!e||n===null||n.length===0?null:n[0].data[xse]===e?n.shift():(Sz(t),null)}function uae(){_z=cae}function ty(t,e){return _z(t,e)}var fF=class{},pF=class{},Eb=class{};function dae(t){let e=Error(`No component factory found for ${Mr(t)}.`);return e[hae]=t,e}var hae="ngComponent";var gF=class{resolveComponentFactory(e){throw dae(e)}},Dp=(()=>{let e=class e{};e.NULL=new gF;let t=e;return t})(),ny=class{},Nr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>fae();let t=e;return t})();function fae(){let t=Ct(),e=kr(),n=Zc(e.index,t);return(Pl(n)?n:t)[sn]}var pae=(()=>{let e=class e{};e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Mx={};var nj=new Set;function Ud(t){nj.has(t)||(nj.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function ij(...t){}function gae(){let t=typeof Al.requestAnimationFrame=="function",e=Al[t?"requestAnimationFrame":"setTimeout"],n=Al[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new X(!1),this.onMicrotaskEmpty=new X(!1),this.onStable=new X(!1),this.onError=new X(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=gae().nativeRequestAnimationFrame,yae(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Le(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,mae,ij,ij);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},mae={};function R1(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vae(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Al,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mF(t),t.isCheckStableRunning=!0,R1(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mF(t))}function yae(t){let e=()=>{vae(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(Cae(a))return n.invokeTask(r,s,o,a);try{return rj(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),sj(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return rj(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),sj(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,mF(t),R1(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function mF(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function rj(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sj(t){t._nesting--,R1(t)}function Cae(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ez=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Db(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Ux(r,a);else if(s==2){let l=a,c=e[++o];i=Ux(i,l+": "+c+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Tb=class extends Dp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Kc(e);return new yp(n,this.ngModule)}};function oj(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function wae(t){let e=t.toLowerCase();return e==="svg"?Jj:e==="math"?Fre:null}var vF=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=kb(i);let r=this.injector.get(e,Mx,i);return r!==Mx||n===Mx?r:this.parentInjector.get(e,n,i)}},yp=class extends Eb{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=oj(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return oj(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ure(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=Dt(null);try{r=r||this.ngModule;let o=r instanceof Or?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new vF(e,o):e,l=a.get(ny,null);if(l===null)throw new Le(407,!1);let c=a.get(pae,null),u=a.get(Ez,null),d=a.get(fF,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=i?foe(p,i,this.componentDef.encapsulation,a):Qb(p,g,wae(g)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let C=null;m!==null&&(C=u1(m,a,!0));let b=S1(0,null,null,1,0,null,null,null,null,null,null),E=Jb(null,b,null,v,null,null,h,p,a,null,C);r1(E);let T,P;try{let x=this.componentDef,_,S=null;x.findHostDirectiveDefs?(_=[],S=new Map,x.findHostDirectiveDefs(x,_,S),_.push(x)):_=[x];let D=Sae(E,m),O=bae(D,m,x,_,E,h,p);P=ZF(b,Zn),m&&Dae(p,x,m,i),n!==void 0&&Tae(P,this.ngContentSelectors,n),T=Eae(O,x,_,S,E,[Rae]),D1(b,E,null)}finally{s1()}return new yF(this.componentType,T,_p(P,E),E,P)}finally{Dt(s)}}},yF=class extends pF{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Nd(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;E1(s[rt],s,r,e,n),this.previousInputValues.set(e,n);let o=Zc(this._tNode.index,s);T1(o)}}get injector(){return new xd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Sae(t,e){let n=t[rt],i=Zn;return t[i]=e,Ep(n,i,2,"#host",null)}function bae(t,e,n,i,r,s,o){let a=r[rt];_ae(i,t,e,o);let l=null;e!==null&&(l=u1(e,r[gp]));let c=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Jb(r,rz(n),null,u,r[t.index],t,s,c,null,null,l);return a.firstCreatePass&&uF(a,t,i.length-1),e_(r,d),r[t.index]=d}function _ae(t,e,n,i){for(let r of t)e.mergedAttrs=qv(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Db(e,e.mergedAttrs,!0),n!==null&&JW(i,n,e))}function Eae(t,e,n,i,r,s){let o=kr(),a=r[rt],l=Ns(o,r);oz(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=kd(r,a,d,o);Qc(h,r)}az(a,r,o),l&&Qc(l,r);let c=kd(r,a,o.directiveStart+o.componentOffset,o);if(t[fr]=r[fr]=c,s!==null)for(let u of s)u(c,e);return y1(a,o,r),c}function Dae(t,e,n,i){if(i)qx(t,n,["ng-version","17.3.12"]);else{let{attrs:r,classes:s}=dre(e.selectors[0]);r&&qx(t,n,r),s&&s.length>0&&ZW(t,n,s.join(" "))}}function Tae(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function Rae(){let t=kr();jb(Ct()[rt],t)}var Ls=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Iae;let t=e;return t})();function Iae(){let t=kr();return Tz(t,Ct())}var xae=Ls,Dz=class extends xae{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return _p(this._hostTNode,this._hostLView)}get injector(){return new xd(this._hostTNode,this._hostLView)}get parentInjector(){let e=o1(this._hostTNode,this._hostLView);if(vW(e)){let n=mb(e,this._hostLView),i=gb(e),r=n[rt].data[i+8];return new xd(r,n)}else return new xd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=aj(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-$i}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=ty(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,ey(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!Tre(e),a;if(o)a=n;else{let g=n||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let l=o?e:new yp(Kc(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?c:this.parentInjector).get(Or,null);m&&(s=m)}let u=Kc(l.componentType??{}),d=ty(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,s);return this.insertImpl(p.hostView,a,ey(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Ore(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Bi],c=new Dz(l,l[ks],l[Bi]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return n_(o,r,s,i),e.attachToViewContainerRef(),Ij(Ox(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=aj(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Jv(this._lContainer,n);i&&(hb(Ox(this._lContainer),n),Xb(i[rt],i))}detach(e){let n=this._adjustIndex(e,-1),i=Jv(this._lContainer,n);return i&&hb(Ox(this._lContainer),n)!=null?new Nd(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function aj(t){return t[pb]}function Ox(t){return t[pb]||(t[pb]=[])}function Tz(t,e){let n,i=e[t.index];return Ua(i)?n=i:(n=lz(i,e,null,t),e[t.index]=n,e_(e,n)),Rz(n,e,t,i),new Dz(n,t,e)}function Fae(t,e){let n=t[sn],i=n.createComment(""),r=Ns(e,t),s=g1(n,r);return Sb(n,s,i,ioe(n,r),!1),i}var Rz=Iz,I1=()=>!1;function Aae(t,e,n){return I1(t,e,n)}function Iz(t,e,n,i){if(t[Ol])return;let r;n.type&8?r=ta(i):r=Fae(e,n),t[Ol]=r}function Pae(t,e,n){if(t[Ol]&&t[Xv])return!0;let i=n[Ms],r=e.index-Zn;if(!i||Cse(e)||Kb(i,r))return!1;let o=aF(i,r),a=i.data[c1]?.[r],[l,c]=lae(o,a);return t[Ol]=l,t[Xv]=c,!0}function Mae(t,e,n,i){I1(t,n,e)||Iz(t,e,n,i)}function Oae(){Rz=Mae,I1=Pae}var CF=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},wF=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)x1(e,n).matches!==null&&this.queries[n].setDirty()}},Rb=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=Uae(e):this.predicate=e}},SF=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},bF=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,kae(n,s)),this.matchTNodeWithReadOption(e,n,ab(n,e,s,!1,!1))}else i===na?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ab(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Fn||r===Ls||r===na&&n.type&4)this.addMatch(n.index,-2);else{let s=ab(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function kae(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function Nae(t,e){return t.type&11?_p(t,e):t.type&4?i_(t,e):null}function Lae(t,e,n,i){return n===-1?Nae(e,t):n===-2?Vae(t,e,i):kd(t,t[rt],n,e)}function Vae(t,e,n){if(n===Fn)return _p(e,t);if(n===na)return i_(e,t);if(n===Ls)return Tz(e,t)}function xz(t,e,n,i){let r=e[Ml].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(Lae(e,u,o[l+1],n.metadata.read))}}r.matches=a}return r.matches}function _F(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=xz(t,e,r,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=$i;d<u.length;d++){let h=u[d];h[ay]===h[Bi]&&_F(h[rt],h,c,i)}if(u[mp]!==null){let d=u[mp];for(let h=0;h<d.length;h++){let p=d[h];_F(p[rt],p,c,i)}}}}}return i}function Bae(t,e){return t[Ml].queries[e].queryList}function Fz(t,e,n){let i=new rF((n&4)===4);return voe(t,e,i,i.destroy),(e[Ml]??=new wF).queries.push(new CF(i))-1}function Gae(t,e,n){let i=Wn();return i.firstCreatePass&&(Az(i,new Rb(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),Fz(i,Ct(),e)}function Hae(t,e,n,i){let r=Wn();if(r.firstCreatePass){let s=kr();Az(r,new Rb(e,n,i),s.index),jae(r,t),(n&2)===2&&(r.staticContentQueries=!0)}return Fz(r,Ct(),n)}function Uae(t){return t.split(",").map(e=>e.trim())}function Az(t,e,n){t.queries===null&&(t.queries=new SF),t.queries.track(new bF(e,n))}function jae(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function x1(t,e){return t.queries.getByIndex(e)}function Wae(t,e){let n=t[rt],i=x1(n,e);return i.crossesNgTemplate?_F(n,t,e,[]):xz(n,t,i,e)}function zae(t){return typeof t=="function"&&t[tx]!==void 0}function Pz(t){return zae(t)&&typeof t.set=="function"}function qae(t){return Object.getPrototypeOf(t.prototype).constructor}function hs(t){let e=qae(t.type),n=!0,i=[t];for(;e;){let r;if(Yc(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Le(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=tb(t.inputs),o.inputTransforms=tb(t.inputTransforms),o.declaredInputs=tb(t.declaredInputs),o.outputs=tb(t.outputs);let a=r.hostBindings;a&&$ae(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Qae(t,l),c&&Xae(t,c),Kae(t,r),Iie(t.outputs,r.outputs),Yc(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===hs&&(n=!1)}}e=Object.getPrototypeOf(e)}Yae(i)}function Kae(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function Yae(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=qv(r.hostAttrs,n=qv(n,r.hostAttrs))}}function tb(t){return t===fp?{}:t===Pr?[]:t}function Qae(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function Xae(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function $ae(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var Xc=class{},iy=class{};var EF=class extends Xc{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tb(this);let r=Lj(e);this._bootstrapComponents=jW(r.bootstrap),this._r3Injector=TW(e,n,[{provide:Xc,useValue:this},{provide:Dp,useValue:this.componentFactoryResolver},...i],Mr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},DF=class extends iy{constructor(e){super(),this.moduleType=e}create(e){return new EF(this.moduleType,e,[])}};var Ib=class extends Xc{constructor(e){super(),this.componentFactoryResolver=new Tb(this),this.instance=null;let n=new Kv([...e.providers,{provide:Xc,useValue:this},{provide:Dp,useValue:this.componentFactoryResolver}],e.parent||Vb(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function F1(t,e,n=null){return new Ib({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var cy=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mz(t){return Jae(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Zae(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function Jae(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ele(t,e,n){return t[e]=n}function Wa(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function uy(t){return(t.flags&32)===32}function tle(t,e,n,i,r,s,o,a,l){let c=e.consts,u=Ep(e,t,4,o||null,vp(c,a));_1(e,n,u,vp(c,l)),jb(e,u);let d=u.tView=S1(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Fe(t,e,n,i,r,s,o,a){let l=Ct(),c=Wn(),u=t+Zn,d=c.firstCreatePass?tle(u,c,l,e,n,i,r,s,o):c.data[u];Vd(d,!1);let h=Oz(c,l,d,t);Ub()&&$b(c,l,h,d),Qc(h,l);let p=lz(h,l,h,d);return l[u]=p,e_(l,p),Aae(p,d,l),Gb(d)&&C1(c,l,d),o!=null&&w1(l,d,a),Fe}var Oz=kz;function kz(t,e,n,i){return ja(!0),e[sn].createComment("")}function nle(t,e,n,i){let r=e[Ms],s=!r||Sp()||uy(n)||Kb(r,i);if(ja(s),s)return kz(t,e,n,i);let o=r.data[Ise]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=r_(r,t,e,n);qb(r,i,a);let l=d1(r,i);return s_(l,a)}function ile(){Oz=nle}function Bl(t,e,n,i){let r=Ct(),s=Bd();if(Wa(r,s,e)){let o=Wn(),a=Hb();Poe(a,r,t,e,n,i)}return Bl}function rle(t,e,n,i){return Wa(t,Bd(),n)?e+WF(n)+i:Vl}function nb(t,e){return t<<17|e<<2}function Ld(t){return t>>17&32767}function sle(t){return(t&2)==2}function ole(t,e){return t&131071|e<<17}function TF(t){return t|2}function Cp(t){return(t&131068)>>2}function kx(t,e){return t&-131069|e<<2}function ale(t){return(t&1)===1}function RF(t){return t|1}function lle(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ld(o),l=Cp(o);t[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||oy(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=Ld(t[a+1]);t[i+1]=nb(h,a),h!==0&&(t[h+1]=kx(t[h+1],i)),t[a+1]=ole(t[a+1],i)}else t[i+1]=nb(a,0),a!==0&&(t[a+1]=kx(t[a+1],i)),a=i;else t[i+1]=nb(l,0),a===0?a=i:t[l+1]=kx(t[l+1],i),l=i;c&&(t[i+1]=TF(t[i+1])),lj(t,u,i,!0),lj(t,u,i,!1),cle(e,u,t,i,s),o=nb(a,l),s?e.classBindings=o:e.styleBindings=o}function cle(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&oy(s,e)>=0&&(n[i+1]=RF(n[i+1]))}function lj(t,e,n,i){let r=t[n+1],s=e===null,o=i?Ld(r):Cp(r),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];ule(l,e)&&(a=!0,t[o+1]=i?RF(c):TF(c)),o=i?Ld(c):Cp(c)}a&&(t[n+1]=i?TF(r):RF(r))}function ule(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?oy(t,e)>=0:!1}var Jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dle(t){return t.substring(Jo.key,Jo.keyEnd)}function hle(t){return fle(t),Nz(t,Lz(t,0,Jo.textEnd))}function Nz(t,e){let n=Jo.textEnd;return n===e?-1:(e=Jo.keyEnd=ple(t,Jo.key=e,n),Lz(t,e,n))}function fle(t){Jo.key=0,Jo.keyEnd=0,Jo.value=0,Jo.valueEnd=0,Jo.textEnd=t.length}function Lz(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ple(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function de(t,e,n){let i=Ct(),r=Bd();if(Wa(i,r,e)){let s=Wn(),o=Hb();b1(s,o,i,t,e,i[sn],n,!1)}return de}function IF(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";E1(t,n,s[o],o,i)}function jd(t,e,n){return Vz(t,e,n,!1),jd}function fs(t,e){return Vz(t,e,null,!0),fs}function er(t){mle(ble,gle,t,!0)}function gle(t,e){for(let n=hle(e);n>=0;n=Nz(e,n))KF(t,dle(e),!0)}function Vz(t,e,n,i){let r=Ct(),s=Wn(),o=aW(2);if(s.firstUpdatePass&&Gz(s,t,o,i),e!==Vl&&Wa(r,o,e)){let a=s.data[Jc()];Hz(s,a,r,r[sn],t,r[o+1]=Ele(e,n),i,o)}}function mle(t,e,n,i){let r=Wn(),s=aW(2);r.firstUpdatePass&&Gz(r,null,s,i);let o=Ct();if(n!==Vl&&Wa(o,s,n)){let a=r.data[Jc()];if(Uz(a,i)&&!Bz(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Ux(l,n||"")),IF(r,a,o,n,i)}else _le(r,a,o,o[sn],o[s+1],o[s+1]=Sle(t,e,n),i,s)}}function Bz(t,e){return e>=t.expandoStartIndex}function Gz(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[Jc()],o=Bz(t,n);Uz(s,i)&&e===null&&!o&&(e=!1),e=vle(r,s,e,i),lle(r,s,e,n,o,i)}}function vle(t,e,n,i){let r=Xre(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Nx(null,t,e,n,i),n=ry(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=Nx(r,t,e,n,i),s===null){let l=yle(t,e,i);l!==void 0&&Array.isArray(l)&&(l=Nx(null,t,e,l[1],i),l=ry(l,e.attrs,i),Cle(t,e,i,l))}else s=wle(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function yle(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Cp(i)!==0)return t[Ld(i)]}function Cle(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Ld(r)]=i}function wle(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=ry(i,o,n)}return ry(i,e.attrs,n)}function Nx(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=ry(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function ry(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),KF(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Sle(t,e,n){if(n==null||n==="")return Pr;let i=[],r=Yb(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function ble(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&KF(t,i,n)}function _le(t,e,n,i,r,s,o,a){r===Vl&&(r=Pr);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,g=null,m;u===d?(l+=2,c+=2,h!==p&&(g=d,m=p)):d===null||u!==null&&u<d?(l+=2,g=u):(c+=2,g=d,m=p),g!==null&&Hz(t,e,n,i,g,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function Hz(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=ale(c)?cj(l,e,n,r,Cp(c),o):void 0;if(!xb(u)){xb(s)||sle(c)&&(s=cj(l,null,n,r,a,o));let d=eW(Jc(),n);loe(i,o,d,r,s)}}function cj(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===Vl&&(h=d?Pr:void 0);let p=d?_x(h,i):u===i?h:void 0;if(c&&!xb(p)&&(p=_x(l,i)),xb(p)&&(a=p,o))return a;let g=t[r+1];r=o?Ld(g):Cp(g)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=_x(l,i))}return a}function xb(t){return t!==void 0}function Ele(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Mr(Yb(t)))),t}function Uz(t,e){return(t.flags&(e?8:16))!==0}var xF=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,n){this.attach(n,this.detach(e))}};function Lx(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function Dle(t,e,n){let i,r,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let l=t.at(s),c=e[s],u=Lx(s,l,s,c,n);if(u!==0){u<0&&t.updateValue(s,c),s++;continue}let d=t.at(o),h=e[a],p=Lx(o,d,a,h,n);if(p!==0){p<0&&t.updateValue(o,h),o--,a--;continue}let g=n(s,l),m=n(o,d),v=n(s,c);if(Object.is(v,m)){let C=n(a,h);Object.is(C,g)?(t.swap(s,o),t.updateValue(o,h),a--,o--):t.move(o,s),t.updateValue(s,c),s++;continue}if(i??=new Fb,r??=dj(t,s,o,n),FF(t,i,s,v))t.updateValue(s,c),s++,o++;else if(r.has(v))i.set(g,t.detach(s)),o--;else{let C=t.create(s,e[s]);t.attach(s,C),s++,o++}}for(;s<=a;)uj(t,i,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&s<=o;){let c=t.at(s),u=l.value,d=Lx(s,c,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,l=a.next();else{i??=new Fb,r??=dj(t,s,o,n);let h=n(s,u);if(FF(t,i,s,h))t.updateValue(s,u),s++,o++,l=a.next();else if(!r.has(h))t.attach(s,t.create(s,u)),s++,o++,l=a.next();else{let p=n(s,c);i.set(p,t.detach(s)),o--}}}for(;!l.done;)uj(t,i,n,t.length,l.value),l=a.next()}for(;s<=o;)t.destroy(t.detach(o--));i?.forEach(a=>{t.destroy(a)})}function FF(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function uj(t,e,n,i,r){if(FF(t,e,i,n(i,r)))t.updateValue(i,r);else{let s=t.create(i,r);t.attach(i,s)}}function dj(t,e,n,i){let r=new Set;for(let s=e;s<=n;s++)r.add(i(s,t.at(s)));return r}var Fb=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Lr(t,e,n){Ud("NgControlFlow");let i=Ct(),r=Bd(),s=OF(i,Zn+t),o=0;if(Wa(i,r,e)){let a=Dt(null);try{if(pz(s,o),e!==-1){let l=kF(i[rt],Zn+e),c=ty(s,l.tView.ssrId),u=t_(i,l,n,{dehydratedView:c});n_(s,u,o,ey(l,c))}}finally{Dt(a)}}else{let a=fz(s,o);a!==void 0&&(a[fr]=n)}}var AF=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-$i}};function eu(t,e){return e}var PF=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function tu(t,e,n,i,r,s,o,a,l,c,u,d,h){Ud("NgControlFlow");let p=l!==void 0,g=Ct(),m=a?o.bind(g[us][fr]):o,v=new PF(p,m);g[Zn+t]=v,Fe(t+1,e,n,i,r,s),p&&Fe(t+2,l,c,u,d,h)}var MF=class extends xF{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-$i}at(e){return this.getLView(e)[fr].$implicit}attach(e,n){let i=n[Ms];this.needsIndexUpdate||=e!==this.length,n_(this.lContainer,n,e,ey(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Tle(this.lContainer,e)}create(e,n){let i=ty(this.lContainer,this.templateTNode.tView.ssrId);return t_(this.hostLView,this.templateTNode,new AF(this.lContainer,n,e),{dehydratedView:i})}destroy(e){Xb(e[rt],e)}updateValue(e,n){this.getLView(e)[fr].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[fr].$index=e}getLView(e){return Rle(this.lContainer,e)}};function nu(t){let e=Dt(null),n=Jc();try{let i=Ct(),r=i[rt],s=i[n];if(s.liveCollection===void 0){let a=n+1,l=OF(i,a),c=kF(r,a);s.liveCollection=new MF(l,i,c)}else s.liveCollection.reset();let o=s.liveCollection;if(Dle(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Bd(),l=o.length===0;if(Wa(i,a,l)){let c=n+2,u=OF(i,c);if(l){let d=kF(r,c),h=ty(u,d.tView.ssrId),p=t_(i,d,void 0,{dehydratedView:h});n_(u,p,0,ey(d,h))}else pz(u,0)}}}finally{Dt(e)}}function OF(t,e){return t[e]}function Tle(t,e){return Jv(t,e)}function Rle(t,e){return fz(t,e)}function kF(t,e){return ZF(t,e)}function Ile(t,e,n,i,r,s){let o=e.consts,a=vp(o,r),l=Ep(e,t,2,i,a);return _1(e,n,l,vp(o,s)),l.attrs!==null&&Db(l,l.attrs,!1),l.mergedAttrs!==null&&Db(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function j(t,e,n,i){let r=Ct(),s=Wn(),o=Zn+t,a=r[sn],l=s.firstCreatePass?Ile(o,s,r,e,n,i):s.data[o],c=jz(s,r,l,a,e,t);r[o]=c;let u=Gb(l);return Vd(l,!0),JW(a,c,l),!uy(l)&&Ub()&&$b(s,r,c,l),Vre()===0&&Qc(c,r),Bre(),u&&(C1(s,r,l),y1(s,l,r)),i!==null&&w1(r,l),j}function U(){let t=kr();t1()?n1():(t=t.parent,Vd(t,!1));let e=t;Hre(e)&&jre(),Gre();let n=Wn();return n.firstCreatePass&&(jb(n,t),$F(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&nse(e)&&IF(n,e,Ct(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ise(e)&&IF(n,e,Ct(),e.stylesWithoutHost,!1),U}function fe(t,e,n,i){return j(t,e,n,i),U(),fe}var jz=(t,e,n,i,r,s)=>(ja(!0),Qb(i,r,pW()));function xle(t,e,n,i,r,s){let o=e[Ms],a=!o||Sp()||uy(n)||Kb(o,s);if(ja(a),a)return Qb(i,r,pW());let l=r_(o,t,e,n);return GW(o,s)&&qb(o,s,l.nextSibling),o&&(IW(n)||xW(l))&&ly(n)&&(Ure(n),XW(l)),l}function Fle(){jz=xle}function Ale(t,e,n,i,r){let s=e.consts,o=vp(s,i),a=Ep(e,t,8,"ng-container",o);o!==null&&Db(a,o,!0);let l=vp(s,r);return _1(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function Vs(t,e,n){let i=Ct(),r=Wn(),s=t+Zn,o=r.firstCreatePass?Ale(s,r,i,e,n):r.data[s];Vd(o,!0);let a=Wz(r,i,o,t);return i[s]=a,Ub()&&$b(r,i,a,o),Qc(a,i),Gb(o)&&(C1(r,i,o),y1(r,o,i)),n!=null&&w1(i,o),Vs}function Bs(){let t=kr(),e=Wn();return t1()?n1():(t=t.parent,Vd(t,!1)),e.firstCreatePass&&(jb(e,t),$F(t)&&e.queries.elementEnd(t)),Bs}var Wz=(t,e,n,i)=>(ja(!0),p1(e[sn],""));function Ple(t,e,n,i){let r,s=e[Ms],o=!s||Sp()||uy(n);if(ja(o),o)return p1(e[sn],"");let a=r_(s,t,e,n),l=Bse(s,i);return qb(s,i,a),r=s_(l,a),r}function Mle(){Wz=Ple}function xt(){return Ct()}function A1(t,e,n){let i=Ct(),r=Bd();if(Wa(i,r,e)){let s=Wn(),o=Hb();b1(s,o,i,t,e,i[sn],n,!0)}return A1}var Id=void 0;function Ole(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var kle=["en",[["a","p"],["AM","PM"],Id],[["AM","PM"],Id,Id],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Id,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Id,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Id,"{1} 'at' {0}",Id],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Ole],Vx={};function co(t){let e=Nle(t),n=hj(e);if(n)return n;let i=e.split("-")[0];if(n=hj(i),n)return n;if(i==="en")return kle;throw new Le(701,!1)}function hj(t){return t in Vx||(Vx[t]=Al.ng&&Al.ng.common&&Al.ng.common.locales&&Al.ng.common.locales[t]),Vx[t]}var Jn=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Jn||{});function Nle(t){return t.toLowerCase().replace(/_/g,"-")}var Ab="en-US";var Lle=Ab;function Vle(t){typeof t=="string"&&(Lle=t.toLowerCase().replace(/_/g,"-"))}function zz(t,e,n){let i=t[sn];switch(n){case Node.COMMENT_NODE:return p1(i,e);case Node.TEXT_NODE:return f1(i,e);case Node.ELEMENT_NODE:return Qb(i,e,null)}}var Ble=(t,e,n,i)=>(ja(!0),zz(t,n,i));function Gle(t,e,n,i){return ja(!0),zz(t,n,i)}function Hle(){Ble=Gle}function De(t,e,n,i){let r=Ct(),s=Wn(),o=kr();return qz(s,r,r[sn],o,t,e,i),De}function Ule(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[Yv],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function qz(t,e,n,i,r,s,o){let a=Gb(i),c=t.firstCreatePass&&dz(t),u=e[fr],d=uz(e),h=!0;if(i.type&3||o){let m=Ns(i,e),v=o?o(m):m,C=d.length,b=o?T=>o(ta(T[i.index])):i.index,E=null;if(!o&&a&&(E=Ule(t,e,r,i.index)),E!==null){let T=E.__ngLastListenerFn__||E;T.__ngNextListenerFn__=s,E.__ngLastListenerFn__=s,h=!1}else{s=pj(i,e,u,s,!1);let T=n.listen(v,r,s);d.push(s,T),c&&c.push(r,b,C,C+1)}}else s=pj(i,e,u,s,!1);let p=i.outputs,g;if(h&&p!==null&&(g=p[r])){let m=g.length;if(m)for(let v=0;v<m;v+=2){let C=g[v],b=g[v+1],P=e[C][b].subscribe(s),x=d.length;d.push(s,P),c&&c.push(r,i.index,x,-(x+1))}}}function fj(t,e,n,i){let r=Dt(null);try{return Va(6,e,n),n(i)!==!1}catch(s){return hz(t,s),!1}finally{Va(7,e,n),Dt(r)}}function pj(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?Zc(t.index,e):e;T1(a);let l=fj(e,n,i,o),c=s.__ngNextListenerFn__;for(;c;)l=fj(e,n,c,o)&&l,c=c.__ngNextListenerFn__;return r&&l===!1&&o.preventDefault(),l}}function Te(t=1){return Zre(t)}function jle(t,e){let n=null,i=sre(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?Mj(t,s,!0):lre(i,s))return r}return n}function P1(t){let e=Ct()[us][ks];if(!e.projection){let n=t?t.length:1,i=e.projection=Qie(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?jle(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function M1(t,e=0,n){let i=Ct(),r=Wn(),s=Ep(r,Zn+t,16,null,n||null);s.projection===null&&(s.projection=e),n1(),(!i[Ms]||Sp())&&(s.flags&32)!==32&&ooe(r,i,s)}function O1(t,e,n,i){Hae(t,e,n,i)}function uo(t,e,n){Gae(t,e,n)}function ps(t){let e=Ct(),n=Wn(),i=lW();i1(i+1);let r=x1(n,i);if(t.dirty&&Mre(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=Wae(e,i);t.reset(s,gse),t.notifyOnChanges()}return!0}return!1}function gs(){return Bae(Ct(),lW())}function Wle(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function za(t){let e=zre();return tW(e,Zn+t)}function we(t,e=""){let n=Ct(),i=Wn(),r=t+Zn,s=i.firstCreatePass?Ep(i,r,1,e,null):i.data[r],o=Kz(i,n,s,e,t);n[r]=o,Ub()&&$b(i,n,o,s),Vd(s,!1)}var Kz=(t,e,n,i,r)=>(ja(!0),f1(e[sn],i));function zle(t,e,n,i,r){let s=e[Ms],o=!s||Sp()||uy(n)||Kb(s,r);return ja(o),o?f1(e[sn],i):r_(s,t,e,n)}function qle(){Kz=zle}function pr(t){return zn("",t,""),pr}function zn(t,e,n){let i=Ct(),r=rle(i,t,e,n);return r!==Vl&&Noe(i,Jc(),r),zn}function k1(t,e,n){Pz(e)&&(e=e());let i=Ct(),r=Bd();if(Wa(i,r,e)){let s=Wn(),o=Hb();b1(s,o,i,t,e,i[sn],n,!1)}return k1}function Yz(t,e){let n=Pz(t);return n&&t.set(e),n}function N1(t,e){let n=Ct(),i=Wn(),r=kr();return qz(i,n,n[sn],r,t,e),N1}function Kle(t,e,n){let i=Wn();if(i.firstCreatePass){let r=Yc(t);NF(n,i.data,i.blueprint,r,!0),NF(e,i.data,i.blueprint,r,!1)}}function NF(t,e,n,i,r){if(t=Ar(t),Array.isArray(t))for(let s=0;s<t.length;s++)NF(t[s],e,n,i,r);else{let s=Wn(),o=Ct(),a=kr(),l=pp(t)?t:Ar(t.provide),c=jj(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(pp(t)||!t.multi){let p=new Od(c,r,J),g=Gx(l,e,r?u:u+h,d);g===-1?(eF(yb(a,o),s,l),Bx(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(p),o.push(p)):(n[g]=p,o[g]=p)}else{let p=Gx(l,e,u+h,d),g=Gx(l,e,u,u+h),m=p>=0&&n[p],v=g>=0&&n[g];if(r&&!v||!r&&!m){eF(yb(a,o),s,l);let C=Xle(r?Qle:Yle,n.length,r,i,c);!r&&v&&(n[g].providerFactory=C),Bx(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(C),o.push(C)}else{let C=Qz(n[r?g:p],c,!r&&i);Bx(s,t,p>-1?p:g,C)}!r&&i&&v&&n[g].componentProviders++}}}function Bx(t,e,n,i){let r=pp(e),s=Cre(e);if(r||s){let l=(s?Ar(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function Qz(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Gx(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Yle(t,e,n,i){return LF(this.multi,[])}function Qle(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=kd(n,n[rt],this.providerFactory.index,i);s=a.slice(0,o),LF(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],LF(r,s);return s}function LF(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function Xle(t,e,n,i,r){let s=new Od(t,n,J);return s.multi=[],s.index=e,s.componentProviders=0,Qz(s,r,i&&!n),s}function Vr(t,e=[]){return n=>{n.providersResolver=(i,r)=>Kle(i,r?r(t):t,e)}}var $le=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=Gj(!1,i.type),s=r.length>0?F1([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=oe({token:e,providedIn:"environment",factory:()=>new e(Z(Or))});let t=e;return t})();function qe(t){Ud("NgStandalone"),t.getStandaloneInjector=e=>e.get($le).getOrCreateStandaloneInjector(t)}function Tp(t,e,n,i){return Xz(Ct(),oW(),t,e,n,i)}function Zle(t,e){let n=t[e];return n===Vl?void 0:n}function Xz(t,e,n,i,r,s){let o=e+n;return Wa(t,o,r)?ele(t,o+1,s?i.call(s,r):i(r)):Zle(t,o+1)}function dy(t,e){let n=Wn(),i,r=t+Zn;n.firstCreatePass?(i=Jle(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=Fd(i.type,!0)),o,a=cs(J);try{let l=vb(!1),c=s();return vb(l),Wle(n,Ct(),r,c),c}finally{cs(a)}}function Jle(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function hy(t,e,n){let i=t+Zn,r=Ct(),s=tW(r,i);return ece(r,i)?Xz(r,oW(),e,s.transform,n,s):s.transform(n)}function ece(t,e){return t[rt].data[e].pure}function tr(t,e){return i_(t,e)}var Ll=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},L1=new Ll("17.3.12"),o_=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var $z=new ue("");function iu(t){return!!t&&typeof t.then=="function"}function V1(t){return!!t&&typeof t.subscribe=="function"}var qa=new ue(""),Zz=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Q(qa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(iu(o))i.push(o);else if(V1(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rp=new ue("");function tce(){cU(()=>{throw new Le(600,!1)})}function nce(t){return t.isBoundToModule}function ice(t,e,n){try{let i=n();return iu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Gs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(RW),this.afterRenderEffectManager=Q(Ez),this.externalTestViews=new Set,this.beforeRender=new ot,this.afterTick=new ot,this.componentTypes=[],this.components=[],this.isStable=Q(cy).hasPendingTasks.pipe(le(i=>!i)),this._injector=Q(Or)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof Eb;if(!this._injector.get(Zz).done){let p=!s&&Nj(i),g=!1;throw new Le(405,g)}let a;s?a=i:a=this._injector.get(Dp).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=nce(a)?void 0:this._injector.get(Xc),c=r||a.selector,u=a.create(_t.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get($z,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Hx(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new Le(101,!1);let r=Dt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Dt(r)}}detectChangesInAttachedViews(i){let r=0,s=this.afterRenderEffectManager;for(;;){if(r===mz)throw new Le(103,!1);if(i){let o=r===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)rce(a,o,l)}if(r++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>VF(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>VF(o))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Hx(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Rp,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Hx(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Le(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Hx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var ib;function B1(t){ib??=new WeakMap;let e=ib.get(t);if(e)return e;let n=t.isStable.pipe(As(i=>i)).toPromise().then(()=>{});return ib.set(t,n),t.onDestroy(()=>ib?.delete(t)),n}function rce(t,e,n){!e&&!VF(t)||sce(t,n,e)}function VF(t){return e1(t)}function sce(t,e,n){let i;n?(i=0,t[it]|=1024):t[it]&64?i=0:i=1,vz(t,e,i)}var BF=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},G1=(()=>{let e=class e{compileModuleSync(i){return new DF(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=Lj(i),o=jW(s.declarations).reduce((a,l)=>{let c=Kc(l);return c&&a.push(new yp(c)),a},[]);return new BF(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oce=(()=>{let e=class e{constructor(){this.zone=Q(Re),this.applicationRef=Q(Gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ace(t){return[{provide:Re,useFactory:t},{provide:Ad,multi:!0,useFactory:()=>{let e=Q(oce,{optional:!0});return()=>e.initialize()}},{provide:Ad,multi:!0,useFactory:()=>{let e=Q(dce);return()=>{e.initialize()}}},{provide:RW,useFactory:lce}]}function lce(){let t=Q(Re),e=Q(kl);return n=>t.runOutsideAngular(()=>e.handleError(n))}function cce(t){let e=ace(()=>new Re(uce(t)));return fn([[],e])}function uce(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var dce=(()=>{let e=class e{constructor(){this.subscription=new Ln,this.initialized=!1,this.zone=Q(Re),this.pendingTasks=Q(cy)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hce(){return typeof $localize<"u"&&$localize.locale||Ab}var fy=new ue("",{providedIn:"root",factory:()=>Q(fy,bt.Optional|bt.SkipSelf)||hce()});var Jz=new ue("");var cb=null;function fce(t=[],e){return _t.create({name:e,providers:[{provide:Lb,useValue:"platform"},{provide:Jz,useValue:new Set([()=>cb=null])},...t]})}function pce(t=[]){if(cb)return cb;let e=fce(t);return cb=e,tce(),gce(e),e}function gce(t){t.get(a1,null)?.forEach(n=>n())}function py(){return!1}var Br=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mce;let t=e;return t})();function mce(t){return vce(kr(),Ct(),(t&16)===16)}function vce(t,e,n){if(ly(t)&&!n){let i=Zc(t.index,e);return new Nd(i,i)}else if(t.type&47){let i=e[us];return new Nd(i,e)}return null}var GF=class{constructor(){}supports(e){return Mz(e)}create(e){return new HF(e)}},yce=(t,e)=>e,HF=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||yce}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){let o=!i||n&&n.currentIndex<gj(i,r,s)?n:i,a=gj(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<s.length?s[h]:s[h]=0,g=p+h;u<=g&&g<c&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Mz(e))throw new Le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else r=0,Zae(e,a=>{o=this._trackByFn(r,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new UF(n,i),s,r)),e}_verifyReinsertion(e,n,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pb),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pb),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},UF=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},jF=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Pb=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new jF,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gj(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function mj(){return new H1([new GF])}var H1=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||mj()),deps:[[e,new Rj,new mt]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new Le(901,!1)}};e.\u0275prov=oe({token:e,providedIn:"root",factory:mj});let t=e;return t})();function e3(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=pce(i),s=[cce(),...n||[]],a=new Ib({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Re);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(kl,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:p=>{c.handleError(p)}})});let d=()=>a.destroy(),h=r.get(Jz);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),ice(c,l,()=>{let p=a.get(Zz);return p.runInitializers(),p.donePromise.then(()=>{let g=a.get(fy,Ab);Vle(g||Ab);let m=a.get(Gs);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var vj=!1,Cce=!1;function wce(){vj||(vj=!0,kse(),Fle(),qle(),Mle(),ile(),Oae(),uae(),moe(),Hle())}function Sce(t,e){return B1(t)}function t3(){return fn([{provide:JS,useFactory:()=>{let t=!0;return eb()&&(t=!!Q(Hd,{optional:!0})?.get(VW,null)),t&&Ud("NgHydration"),t}},{provide:Ad,useValue:()=>{Cce=!!Q(Gse,{optional:!0}),eb()&&Q(JS)&&(bce(),wce())},multi:!0},{provide:UW,useFactory:()=>eb()&&Q(JS)},{provide:Rp,useFactory:()=>{if(eb()&&Q(JS)){let t=Q(Gs),e=Q(_t);return()=>{Sce(t,e).then(()=>{tae(t)})}}return()=>{}},multi:!0}])}function bce(){let t=Wb(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Mse){e=n;break}if(!e)throw new Le(-507,!1)}function a_(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function l_(t){let e=Dt(null);try{return t()}finally{Dt(e)}}function c_(t,e){let n=Kc(t),i=e.elementInjector||Vb();return new yp(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var c3=null;function Ul(){return c3}function u3(t){c3??=t}var y_=class{};var hi=new ue(""),d3=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q(Ece),providedIn:"platform"});let t=e;return t})();var Ece=(()=>{let e=class e extends d3{constructor(){super(),this._doc=Q(hi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ul().getBaseHref(this._doc)}onPopState(i){let r=Ul().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Ul().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function h3(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function n3(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Wd(t){return t&&t[0]!=="?"?"?"+t:t}var S_=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q(f3),providedIn:"root"});let t=e;return t})(),Dce=new ue(""),f3=(()=>{let e=class e extends S_{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(hi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return h3(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Wd(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Wd(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Wd(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(Z(d3),Z(Dce,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gy=(()=>{let e=class e{constructor(i){this._subject=new X,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=Ice(n3(i3(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Wd(r))}normalize(i){return e.stripTrailingSlash(Rce(this._basePath,i3(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Wd(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Wd(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Wd,e.joinWithSlash=h3,e.stripTrailingSlash=n3,e.\u0275fac=function(r){return new(r||e)(Z(S_))},e.\u0275prov=oe({token:e,factory:()=>Tce(),providedIn:"root"});let t=e;return t})();function Tce(){return new gy(Z(S_))}function Rce(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function i3(t){return t.replace(/\/index.html$/,"")}function Ice(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Ti=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ti||{}),Gt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Gt||{}),Hs=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Hs||{}),ru={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function xce(t){return co(t)[Jn.LocaleId]}function p3(t,e,n){let i=co(t),r=[i[Jn.DayPeriodsFormat],i[Jn.DayPeriodsStandalone]],s=ho(r,e);return ho(s,n)}function X1(t,e,n){let i=co(t),r=[i[Jn.DaysFormat],i[Jn.DaysStandalone]],s=ho(r,e);return ho(s,n)}function b_(t,e,n){let i=co(t),r=[i[Jn.MonthsFormat],i[Jn.MonthsStandalone]],s=ho(r,e);return ho(s,n)}function Fce(t,e){let i=co(t)[Jn.Eras];return ho(i,e)}function u_(t,e){let n=co(t);return ho(n[Jn.DateFormat],e)}function d_(t,e){let n=co(t);return ho(n[Jn.TimeFormat],e)}function h_(t,e){let i=co(t)[Jn.DateTimeFormat];return ho(i,e)}function __(t,e){let n=co(t),i=n[Jn.NumberSymbols][e];if(typeof i>"u"){if(e===ru.CurrencyDecimal)return n[Jn.NumberSymbols][ru.Decimal];if(e===ru.CurrencyGroup)return n[Jn.NumberSymbols][ru.Group]}return i}function g3(t){if(!t[Jn.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Jn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ace(t){let e=co(t);return g3(e),(e[Jn.ExtraData][2]||[]).map(i=>typeof i=="string"?U1(i):[U1(i[0]),U1(i[1])])}function Pce(t,e,n){let i=co(t);g3(i);let r=[i[Jn.ExtraData][0],i[Jn.ExtraData][1]],s=ho(r,e)||[];return ho(s,n)||[]}function ho(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function U1(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Mce=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,f_={},Oce=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Hl=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Hl||{}),Zt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Zt||{}),$t=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}($t||{});function m3(t,e,n,i){let r=jce(t);e=Gl(n,e)||e;let o=[],a;for(;e;)if(a=Oce.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let l=r.getTimezoneOffset();i&&(l=y3(i,l),r=Uce(r,i,!0));let c="";return o.forEach(u=>{let d=Gce(u);c+=d?d(r,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function C_(t,e,n){let i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function Gl(t,e){let n=xce(t);if(f_[n]??={},f_[n][e])return f_[n][e];let i="";switch(e){case"shortDate":i=u_(t,Hs.Short);break;case"mediumDate":i=u_(t,Hs.Medium);break;case"longDate":i=u_(t,Hs.Long);break;case"fullDate":i=u_(t,Hs.Full);break;case"shortTime":i=d_(t,Hs.Short);break;case"mediumTime":i=d_(t,Hs.Medium);break;case"longTime":i=d_(t,Hs.Long);break;case"fullTime":i=d_(t,Hs.Full);break;case"short":let r=Gl(t,"shortTime"),s=Gl(t,"shortDate");i=p_(h_(t,Hs.Short),[r,s]);break;case"medium":let o=Gl(t,"mediumTime"),a=Gl(t,"mediumDate");i=p_(h_(t,Hs.Medium),[o,a]);break;case"long":let l=Gl(t,"longTime"),c=Gl(t,"longDate");i=p_(h_(t,Hs.Long),[l,c]);break;case"full":let u=Gl(t,"fullTime"),d=Gl(t,"fullDate");i=p_(h_(t,Hs.Full),[u,d]);break}return i&&(f_[n][e]=i),i}function p_(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return e!=null&&i in e?e[i]:n})),t}function ia(t,e,n="-",i,r){let s="";(t<0||r&&t<=0)&&(r?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function kce(t,e){return ia(t,3).substring(0,e)}function di(t,e,n=0,i=!1,r=!1){return function(s,o){let a=Nce(t,s);if((n>0||a>-n)&&(a+=n),t===Zt.Hours)a===0&&n===-12&&(a=12);else if(t===Zt.FractionalSeconds)return kce(a,e);let l=__(o,ru.MinusSign);return ia(a,e,l,i,r)}}function Nce(t,e){switch(t){case Zt.FullYear:return e.getFullYear();case Zt.Month:return e.getMonth();case Zt.Date:return e.getDate();case Zt.Hours:return e.getHours();case Zt.Minutes:return e.getMinutes();case Zt.Seconds:return e.getSeconds();case Zt.FractionalSeconds:return e.getMilliseconds();case Zt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function yn(t,e,n=Ti.Format,i=!1){return function(r,s){return Lce(r,s,t,e,n,i)}}function Lce(t,e,n,i,r,s){switch(n){case $t.Months:return b_(e,r,i)[t.getMonth()];case $t.Days:return X1(e,r,i)[t.getDay()];case $t.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let c=Ace(e),u=Pce(e,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){let[p,g]=h,m=o>=p.hours&&a>=p.minutes,v=o<g.hours||o===g.hours&&a<g.minutes;if(p.hours<g.hours){if(m&&v)return!0}else if(m||v)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return p3(e,r,i)[o<12?0:1];case $t.Eras:return Fce(e,i)[t.getFullYear()<=0?0:1];default:let l=n;throw new Error(`unexpected translation type ${l}`)}}function g_(t){return function(e,n,i){let r=-1*i,s=__(n,ru.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Hl.Short:return(r>=0?"+":"")+ia(o,2,s)+ia(Math.abs(r%60),2,s);case Hl.ShortGMT:return"GMT"+(r>=0?"+":"")+ia(o,1,s);case Hl.Long:return"GMT"+(r>=0?"+":"")+ia(o,2,s)+":"+ia(Math.abs(r%60),2,s);case Hl.Extended:return i===0?"Z":(r>=0?"+":"")+ia(o,2,s)+":"+ia(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var Vce=0,v_=4;function Bce(t){let e=C_(t,Vce,1).getDay();return C_(t,0,1+(e<=v_?v_:v_+7)-e)}function v3(t){let e=t.getDay(),n=e===0?-3:v_-e;return C_(t.getFullYear(),t.getMonth(),t.getDate()+n)}function j1(t,e=!1){return function(n,i){let r;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();r=1+Math.floor((o+s)/7)}else{let s=v3(n),o=Bce(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return ia(r,t,__(i,ru.MinusSign))}}function m_(t,e=!1){return function(n,i){let s=v3(n).getFullYear();return ia(s,t,__(i,ru.MinusSign),e)}}var W1={};function Gce(t){if(W1[t])return W1[t];let e;switch(t){case"G":case"GG":case"GGG":e=yn($t.Eras,Gt.Abbreviated);break;case"GGGG":e=yn($t.Eras,Gt.Wide);break;case"GGGGG":e=yn($t.Eras,Gt.Narrow);break;case"y":e=di(Zt.FullYear,1,0,!1,!0);break;case"yy":e=di(Zt.FullYear,2,0,!0,!0);break;case"yyy":e=di(Zt.FullYear,3,0,!1,!0);break;case"yyyy":e=di(Zt.FullYear,4,0,!1,!0);break;case"Y":e=m_(1);break;case"YY":e=m_(2,!0);break;case"YYY":e=m_(3);break;case"YYYY":e=m_(4);break;case"M":case"L":e=di(Zt.Month,1,1);break;case"MM":case"LL":e=di(Zt.Month,2,1);break;case"MMM":e=yn($t.Months,Gt.Abbreviated);break;case"MMMM":e=yn($t.Months,Gt.Wide);break;case"MMMMM":e=yn($t.Months,Gt.Narrow);break;case"LLL":e=yn($t.Months,Gt.Abbreviated,Ti.Standalone);break;case"LLLL":e=yn($t.Months,Gt.Wide,Ti.Standalone);break;case"LLLLL":e=yn($t.Months,Gt.Narrow,Ti.Standalone);break;case"w":e=j1(1);break;case"ww":e=j1(2);break;case"W":e=j1(1,!0);break;case"d":e=di(Zt.Date,1);break;case"dd":e=di(Zt.Date,2);break;case"c":case"cc":e=di(Zt.Day,1);break;case"ccc":e=yn($t.Days,Gt.Abbreviated,Ti.Standalone);break;case"cccc":e=yn($t.Days,Gt.Wide,Ti.Standalone);break;case"ccccc":e=yn($t.Days,Gt.Narrow,Ti.Standalone);break;case"cccccc":e=yn($t.Days,Gt.Short,Ti.Standalone);break;case"E":case"EE":case"EEE":e=yn($t.Days,Gt.Abbreviated);break;case"EEEE":e=yn($t.Days,Gt.Wide);break;case"EEEEE":e=yn($t.Days,Gt.Narrow);break;case"EEEEEE":e=yn($t.Days,Gt.Short);break;case"a":case"aa":case"aaa":e=yn($t.DayPeriods,Gt.Abbreviated);break;case"aaaa":e=yn($t.DayPeriods,Gt.Wide);break;case"aaaaa":e=yn($t.DayPeriods,Gt.Narrow);break;case"b":case"bb":case"bbb":e=yn($t.DayPeriods,Gt.Abbreviated,Ti.Standalone,!0);break;case"bbbb":e=yn($t.DayPeriods,Gt.Wide,Ti.Standalone,!0);break;case"bbbbb":e=yn($t.DayPeriods,Gt.Narrow,Ti.Standalone,!0);break;case"B":case"BB":case"BBB":e=yn($t.DayPeriods,Gt.Abbreviated,Ti.Format,!0);break;case"BBBB":e=yn($t.DayPeriods,Gt.Wide,Ti.Format,!0);break;case"BBBBB":e=yn($t.DayPeriods,Gt.Narrow,Ti.Format,!0);break;case"h":e=di(Zt.Hours,1,-12);break;case"hh":e=di(Zt.Hours,2,-12);break;case"H":e=di(Zt.Hours,1);break;case"HH":e=di(Zt.Hours,2);break;case"m":e=di(Zt.Minutes,1);break;case"mm":e=di(Zt.Minutes,2);break;case"s":e=di(Zt.Seconds,1);break;case"ss":e=di(Zt.Seconds,2);break;case"S":e=di(Zt.FractionalSeconds,1);break;case"SS":e=di(Zt.FractionalSeconds,2);break;case"SSS":e=di(Zt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=g_(Hl.Short);break;case"ZZZZZ":e=g_(Hl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=g_(Hl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=g_(Hl.Long);break;default:return null}return W1[t]=e,e}function y3(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Hce(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Uce(t,e,n){let i=n?-1:1,r=t.getTimezoneOffset(),s=y3(e,r);return Hce(t,i*(s-r))}function jce(t){if(r3(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[r,s=1,o=1]=t.split("-").map(a=>+a);return C_(r,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(Mce))return Wce(i)}let e=new Date(t);if(!r3(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function Wce(t){let e=new Date(0),n=0,i=0,r=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,l,c),e}function r3(t){return t instanceof Date&&!isNaN(t.valueOf())}function $1(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var z1=/\s+/,s3=[],E_=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=s3,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(z1):s3}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(z1):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(z1).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(J(Fn),J(Nr))},e.\u0275dir=on({type:e,selectors:[["","ngClass",""]],inputs:{klass:[$n.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var q1=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fo=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new q1(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let l=r.get(o);r.move(l,a),o3(l,s)}});for(let s=0,o=r.length;s<o;s++){let l=r.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);o3(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(J(Ls),J(na),J(H1))},e.\u0275dir=on({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function o3(t,e){t.context.$implicit=e.item}var Gi=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new K1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){a3("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){a3("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(J(Ls),J(na))},e.\u0275dir=on({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),K1=class{constructor(){this.$implicit=null,this.ngIf=null}};function a3(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Mr(e)}'.`)}var Z1=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(J(Ls))},e.\u0275dir=on({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Vn]});let t=e;return t})();function C3(t,e){return new Le(2100,!1)}var Y1=class{createSubscription(e,n){return l_(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){l_(()=>e.unsubscribe())}},Q1=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},zce=new Q1,qce=new Y1,w3=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(iu(i))return zce;if(V1(i))return qce;throw C3(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(J(Br,16))},e.\u0275pipe=Nb({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Kce=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,S3=(()=>{let e=class e{transform(i){if(i==null)return null;if(typeof i!="string")throw C3(e,i);return i.replace(Kce,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Nb({name:"titlecase",type:e,pure:!0,standalone:!0});let t=e;return t})();var En=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Zi({});let t=e;return t})(),J1="browser",Yce="server";function Ip(t){return t===J1}function ra(t){return t===Yce}var w_=class{};var T_=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var x3=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(x3||{}),eA=class{constructor(e,n=F3.Ok,i="OK"){this.headers=e.headers||new T_,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var R_=class t extends eA{constructor(e={}){super(e),this.type=x3.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var F3=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(F3||{});var Xce=new ue("");var b3="b",_3="h",E3="s",D3="st",T3="u",R3="rt",D_=new ue(""),$ce=["GET","HEAD"];function Zce(t,e){let d=Q(D_),{isCacheActive:n}=d,i=mS(d,["isCacheActive"]),{transferCache:r,method:s}=t;if(!n||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!$ce.includes(s)||r===!1||i.filter?.(t)===!1)return e(t);let o=Q(Hd),a=eue(t),l=o.get(a,null),c=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(c=r.includeHeaders),l){let{[b3]:h,[R3]:p,[_3]:g,[E3]:m,[D3]:v,[T3]:C}=l,b=h;switch(p){case"arraybuffer":b=new TextEncoder().encode(h).buffer;break;case"blob":b=new Blob([h]);break}let E=new T_(g);return ae(new R_({body:b,headers:E,status:m,statusText:v,url:C}))}let u=ra(Q(_n));return e(t).pipe(rn(h=>{h instanceof R_&&u&&o.set(a,{[b3]:h.body,[_3]:Jce(h.headers,c),[E3]:h.status,[D3]:h.statusText,[T3]:h.url||"",[R3]:t.responseType})}))}function Jce(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function I3(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function eue(t){let{params:e,method:n,responseType:i,url:r}=t,s=I3(e),o=t.serializeBody();o instanceof URLSearchParams?o=I3(o):typeof o!="string"&&(o="");let a=[n,i,r,o,s].join("|"),l=tue(a);return l}function tue(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function A3(t){return[{provide:D_,useFactory:()=>(Ud("NgHttpTransferCache"),W({isCacheActive:!0},t))},{provide:Xce,useValue:Zce,multi:!0,deps:[Hd,D_]},{provide:Rp,multi:!0,useFactory:()=>{let e=Q(Gs),n=Q(D_);return()=>{B1(e).then(()=>{n.isCacheActive=!1})}}}]}var iA=class extends y_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},rA=class t extends iA{static makeCurrent(){u3(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=nue();return n==null?null:iue(n)}resetBaseElement(){my=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $1(document.cookie,e)}},my=null;function nue(){return my=my||document.querySelector("base"),my?my.getAttribute("href"):null}function iue(t){return new URL(t,document.baseURI).pathname}var rue=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),sA=new ue(""),k3=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Le(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(Z(sA),Z(Re))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),I_=class{constructor(e){this._doc=e}},tA="ng-app-id",N3=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ra(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${tA}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(tA),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(tA,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Z(hi),Z(zb),Z(l1,8),Z(_n))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),nA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lA=/%COMP%/g,L3="%COMP%",sue=`_nghost-${L3}`,oue=`_ngcontent-${L3}`,aue=!0,lue=new ue("",{providedIn:"root",factory:()=>aue});function cue(t){return oue.replace(lA,t)}function uue(t){return sue.replace(lA,t)}function V3(t,e){return e.map(n=>n.replace(lA,t))}var P3=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=ra(l),this.defaultRenderer=new vy(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ga.ShadowDom&&(r=Se(W({},r),{encapsulation:Ga.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof x_?s.applyToHost(i):s instanceof yy&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ga.Emulated:o=new x_(c,u,r,this.appId,d,a,l,h);break;case Ga.ShadowDom:return new oA(c,u,i,r,a,l,this.nonce,h);default:o=new yy(c,u,r,d,a,l,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Z(k3),Z(N3),Z(zb),Z(lue),Z(hi),Z(_n),Z(Re),Z(l1))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),vy=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(nA[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(M3(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(M3(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Le(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=nA[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=nA[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Nl.DashCase|Nl.Important)?e.style.setProperty(n,i,r&Nl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Nl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Ul().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function M3(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var oA=class extends vy{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=V3(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yy=class extends vy{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?V3(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},x_=class extends yy{constructor(e,n,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=cue(c),this.hostAttr=uue(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},due=(()=>{let e=class e extends I_{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(Z(hi))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),O3=["alt","control","meta","shift"],hue={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fue={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},pue=(()=>{let e=class e extends I_{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ul().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),O3.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=hue[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),O3.forEach(a=>{if(a!==s){let l=fue[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(Z(hi))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();function B3(t,e){return e3(W({rootComponent:t},gue(e)))}function gue(t){return{appProviders:[...wue,...t?.providers??[]],platformProviders:Cue}}function mue(){rA.makeCurrent()}function vue(){return new kl}function yue(){return OW(document),document}var Cue=[{provide:_n,useValue:J1},{provide:a1,useValue:mue,multi:!0},{provide:hi,useFactory:yue,deps:[]}];var wue=[{provide:Lb,useValue:"root"},{provide:kl,useFactory:vue,deps:[]},{provide:sA,useClass:due,multi:!0,deps:[hi,Re,_n]},{provide:sA,useClass:pue,multi:!0,deps:[hi]},P3,N3,k3,{provide:ny,useExisting:P3},{provide:w_,useClass:rue,deps:[]},[]];var F_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(Z(hi))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aA=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(aA||{});function G3(...t){let e=[],n=new Set,i=n.has(aA.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of t)n.add(s),r.length&&e.push(r);return fn([[],t3(),n.has(aA.NoHttpTransferCache)||i?[]:A3({}),e])}var gt="primary",Oy=Symbol("RouteTitle"),fA=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Mp(t){return new fA(t)}function Sue(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function bue(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ka(t[n],e[n]))return!1;return!0}function Ka(t,e){let n=t?pA(t):void 0,i=e?pA(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!K3(t[r],e[r]))return!1;return!0}function pA(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function K3(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function Y3(t){return t.length>0?t[t.length-1]:null}function au(t){return gx(t)?t:iu(t)?Je(Promise.resolve(t)):ae(t)}var _ue={exact:X3,subset:$3},Q3={exact:Eue,subset:Due,ignored:()=>!0};function U3(t,e,n){return _ue[n.paths](t.root,e.root,n.matrixParams)&&Q3[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Eue(t,e){return Ka(t,e)}function X3(t,e,n){if(!qd(t.segments,e.segments)||!M_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!X3(t.children[i],e.children[i],n))return!1;return!0}function Due(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>K3(t[n],e[n]))}function $3(t,e,n){return Z3(t,e,e.segments,n)}function Z3(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!qd(r,n)||e.hasChildren()||!M_(r,n,i))}else if(t.segments.length===n.length){if(!qd(t.segments,n)||!M_(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!$3(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!qd(t.segments,r)||!M_(t.segments,r,i)||!t.children[gt]?!1:Z3(t.children[gt],e,s,i)}}function M_(t,e,n){return e.every((i,r)=>Q3[n](t[r].parameters,i.parameters))}var su=class{constructor(e=new Jt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Mp(this.queryParams),this._queryParamMap}toString(){return Iue.serialize(this)}},Jt=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return O_(this)}},zd=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Mp(this.parameters),this._parameterMap}toString(){return e4(this)}};function Tue(t,e){return qd(t,e)&&t.every((n,i)=>Ka(n.parameters,e[i].parameters))}function qd(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function Rue(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===gt&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==gt&&(n=n.concat(e(r,i)))}),n}var BA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>new N_,providedIn:"root"});let t=e;return t})(),N_=class{parse(e){let n=new mA(e);return new su(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Cy(e.root,!0)}`,i=Aue(e.queryParams),r=typeof e.fragment=="string"?`#${xue(e.fragment)}`:"";return`${n}${i}${r}`}},Iue=new N_;function O_(t){return t.segments.map(e=>e4(e)).join("/")}function Cy(t,e){if(!t.hasChildren())return O_(t);if(e){let n=t.children[gt]?Cy(t.children[gt],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==gt&&i.push(`${r}:${Cy(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Rue(t,(i,r)=>r===gt?[Cy(t.children[gt],!1)]:[`${r}:${Cy(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[gt]!=null?`${O_(t)}/${n[0]}`:`${O_(t)}/(${n.join("//")})`}}function J3(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function A_(t){return J3(t).replace(/%3B/gi,";")}function xue(t){return encodeURI(t)}function gA(t){return J3(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k_(t){return decodeURIComponent(t)}function j3(t){return k_(t.replace(/\+/g,"%20"))}function e4(t){return`${gA(t.path)}${Fue(t.parameters)}`}function Fue(t){return Object.entries(t).map(([e,n])=>`;${gA(e)}=${gA(n)}`).join("")}function Aue(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${A_(n)}=${A_(r)}`).join("&"):`${A_(n)}=${A_(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Pue=/^[^\/()?;#]+/;function cA(t){let e=t.match(Pue);return e?e[0]:""}var Mue=/^[^\/()?;=#]+/;function Oue(t){let e=t.match(Mue);return e?e[0]:""}var kue=/^[^=?&#]+/;function Nue(t){let e=t.match(kue);return e?e[0]:""}var Lue=/^[^&#]+/;function Vue(t){let e=t.match(Lue);return e?e[0]:""}var mA=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[gt]=new Jt(e,n)),i}parseSegment(){let e=cA(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Le(4009,!1);return this.capture(e),new zd(k_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Oue(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=cA(this.remaining);r&&(i=r,this.capture(i))}e[k_(n)]=k_(i)}parseQueryParam(e){let n=Nue(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=Vue(this.remaining);o&&(i=o,this.capture(i))}let r=j3(n),s=j3(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=cA(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Le(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=gt);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[gt]:new Jt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Le(4011,!1)}};function t4(t){return t.segments.length>0?new Jt([],{[gt]:t}):t}function n4(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=n4(r);if(i===gt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new Jt(t.segments,e);return Bue(n)}function Bue(t){if(t.numberOfChildren===1&&t.children[gt]){let e=t.children[gt];return new Jt(t.segments.concat(e.segments),e.children)}return t}function Op(t){return t instanceof su}function Gue(t,e,n=null,i=null){let r=i4(t);return r4(r,e,n,i)}function i4(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new Jt(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=t4(i);return e??r}function r4(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return uA(r,r,r,n,i);let s=Hue(e);if(s.toRoot())return uA(r,r,new Jt([],{}),n,i);let o=Uue(s,r,t),a=o.processChildren?by(o.segmentGroup,o.index,s.commands):o4(o.segmentGroup,o.index,s.commands);return uA(r,o.segmentGroup,a,n,i)}function L_(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Dy(t){return typeof t=="object"&&t!=null&&t.outlets}function uA(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;t===e?o=n:o=s4(t,e,n);let a=t4(n4(o));return new su(a,s,r)}function s4(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=s4(s,e,n)}),new Jt(t.segments,i)}var V_=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&L_(i[0]))throw new Le(4003,!1);let r=i.find(Dy);if(r&&r!==Y3(i))throw new Le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Hue(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new V_(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new V_(n,e,i)}var Ap=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function Uue(t,e,n){if(t.isAbsolute)return new Ap(e,!0,0);if(!n)return new Ap(e,!1,NaN);if(n.parent===null)return new Ap(n,!0,0);let i=L_(t.commands[0])?0:1,r=n.segments.length-1+i;return jue(n,r,t.numberOfDoubleDots)}function jue(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Le(4005,!1);r=i.segments.length}return new Ap(i,!1,r-s)}function Wue(t){return Dy(t[0])?t[0].outlets:{[gt]:t}}function o4(t,e,n){if(t??=new Jt([],{}),t.segments.length===0&&t.hasChildren())return by(t,e,n);let i=zue(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Jt(t.segments.slice(0,i.pathIndex),{});return s.children[gt]=new Jt(t.segments.slice(i.pathIndex),t.children),by(s,0,r)}else return i.match&&r.length===0?new Jt(t.segments,{}):i.match&&!t.hasChildren()?vA(t,e,n):i.match?by(t,0,r):vA(t,e,n)}function by(t,e,n){if(n.length===0)return new Jt(t.segments,{});{let i=Wue(n),r={};if(Object.keys(i).some(s=>s!==gt)&&t.children[gt]&&t.numberOfChildren===1&&t.children[gt].segments.length===0){let s=by(t.children[gt],e,n);return new Jt(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=o4(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Jt(t.segments,r)}}function zue(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Dy(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!z3(l,c,o))return s;i+=2}else{if(!z3(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function vA(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Dy(s)){let l=que(s.outlets);return new Jt(i,l)}if(r===0&&L_(n[0])){let l=t.segments[e];i.push(new zd(l.path,W3(n[0]))),r++;continue}let o=Dy(s)?s.outlets[gt]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&L_(a)?(i.push(new zd(o,W3(a))),r+=2):(i.push(new zd(o,{})),r++)}return new Jt(i,{})}function que(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=vA(new Jt([],{}),0,i))}),e}function W3(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function z3(t,e,n){return t==n.path&&Ka(e,n.parameters)}var _y="imperative",nr=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(nr||{}),po=class{constructor(e,n){this.id=e,this.url=n}},Ty=class extends po{constructor(e,n,i="imperative",r=null){super(e,n),this.type=nr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kd=class extends po{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=nr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},js=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(js||{}),yA=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(yA||{}),ou=class extends po{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=nr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yd=class extends po{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=nr.NavigationSkipped}},Ry=class extends po{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=nr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},B_=class extends po{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},CA=class extends po{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wA=class extends po{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=nr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},SA=class extends po{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bA=class extends po{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_A=class{constructor(e){this.route=e,this.type=nr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},EA=class{constructor(e){this.route=e,this.type=nr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},DA=class{constructor(e){this.snapshot=e,this.type=nr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},TA=class{constructor(e){this.snapshot=e,this.type=nr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},RA=class{constructor(e){this.snapshot=e,this.type=nr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{constructor(e){this.snapshot=e,this.type=nr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xy=class{},Fy=class{constructor(e){this.url=e}};var IA=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new z_,this.attachRef=null}},z_=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new IA,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),G_=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xA(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=xA(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=FA(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return FA(e,this._root).map(n=>n.value)}};function xA(t,e){if(t===e.value)return e;for(let n of e.children){let i=xA(t,n);if(i)return i}return null}function FA(t,e){if(t===e.value)return[e];for(let n of e.children){let i=FA(t,n);if(i.length)return i.unshift(e),i}return[]}var Us=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fp(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var H_=class extends G_{constructor(e,n){super(e),this.snapshot=n,HA(this,e)}toString(){return this.snapshot.toString()}};function a4(t){let e=Kue(t),n=new qt([new zd("",{})]),i=new qt({}),r=new qt({}),s=new qt({}),o=new qt(""),a=new kp(n,i,s,o,r,gt,t,e.root);return a.snapshot=e.root,new H_(new Us(a,[]),e)}function Kue(t){let e={},n={},i={},r="",s=new Ay([],e,i,r,n,gt,t,null,{});return new U_("",new Us(s,[]))}var kp=class{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(le(c=>c[Oy]))??ae(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Mp(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Mp(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function GA(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:W(W({},e.params),t.params),data:W(W({},e.data),t.data),resolve:W(W(W(W({},t.data),e.data),r?.data),t._resolvedData)}:i={params:W({},t.params),data:W({},t.data),resolve:W(W({},t.data),t._resolvedData??{})},r&&c4(r)&&(i.resolve[Oy]=r.title),i}var Ay=class{get title(){return this.data?.[Oy]}constructor(e,n,i,r,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mp(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},U_=class extends G_{constructor(e,n){super(n),this.url=e,HA(this,n)}toString(){return l4(this._root)}};function HA(t,e){e.value._routerState=t,e.children.forEach(n=>HA(t,n))}function l4(t){let e=t.children.length>0?` { ${t.children.map(l4).join(", ")} } `:"";return`${t.value}${e}`}function dA(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ka(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ka(e.params,n.params)||t.paramsSubject.next(n.params),bue(e.url,n.url)||t.urlSubject.next(n.url),Ka(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function AA(t,e){let n=Ka(t.params,e.params)&&Tue(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||AA(t.parent,e.parent))}function c4(t){return typeof t.title=="string"||t.title===null}var ky=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new X,this.deactivateEvents=new X,this.attachEvents=new X,this.detachEvents=new X,this.parentContexts=Q(z_),this.location=Q(Ls),this.changeDetector=Q(Br),this.environmentInjector=Q(Or),this.inputBinder=Q(UA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Le(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Le(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new PA(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=on({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vn]});let t=e;return t})(),PA=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===kp?this.route:e===z_?this.childContexts:this.parent.get(e,n)}},UA=new ue("");function Yue(t,e,n){let i=Py(t,e._root,n?n._root:void 0);return new H_(i,e)}function Py(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=Que(t,e,n);return new Us(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Py(t,a)),o}}let i=Xue(e.value),r=e.children.map(s=>Py(t,s));return new Us(i,r)}}function Que(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Py(t,i,r);return Py(t,i)})}function Xue(t){return new kp(new qt(t.url),new qt(t.params),new qt(t.queryParams),new qt(t.fragment),new qt(t.data),t.outlet,t.component,t)}var u4="ngNavigationCancelingError";function d4(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Op(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=h4(!1,js.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function h4(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[u4]=!0,n.cancellationCode=e,n}function $ue(t){return f4(t)&&Op(t.url)}function f4(t){return!!t&&t[u4]}var jA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ng-component"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(r,s){r&1&&fe(0,"router-outlet")},dependencies:[ky],encapsulation:2});let t=e;return t})();function Zue(t,e){return t.providers&&!t._injector&&(t._injector=F1(t.providers,e,`Route: ${t.path}`)),t._injector??e}function WA(t){let e=t.children&&t.children.map(WA),n=e?Se(W({},t),{children:e}):W({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==gt&&(n.component=jA),n}function Ya(t){return t.outlet||gt}function Jue(t,e){let n=t.filter(i=>Ya(i)===e);return n.push(...t.filter(i=>Ya(i)!==e)),n}function Ny(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ede=(t,e,n,i)=>le(r=>(new MA(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),MA=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),dA(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Fp(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Fp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Fp(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Fp(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Iy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new TA(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(dA(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ny(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},j_=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pp=class{constructor(e,n){this.component=e,this.route=n}};function tde(t,e,n){let i=t._root,r=e?e._root:null;return wy(i,r,n,[i.value])}function nde(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Lp(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!wj(t)?t:e.get(t):i}function wy(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fp(e);return t.children.forEach(o=>{ide(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ey(a,n.getContext(o),r)),r}function ide(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=rde(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new j_(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?wy(t,e,a?a.children:null,i,r):wy(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Pp(a.outlet.component,o))}else o&&Ey(e,a,r),r.canActivateChecks.push(new j_(i)),s.component?wy(t,null,a?a.children:null,i,r):wy(t,null,n,i,r);return r}function rde(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qd(t.url,e.url)||!Ka(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!AA(t,e)||!Ka(t.queryParams,e.queryParams);case"paramsChange":default:return!AA(t,e)}}function Ey(t,e,n){let i=Fp(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ey(o,e.children.getContext(s),n):Ey(o,null,n):Ey(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Pp(e.outlet.component,r)):n.canDeactivateChecks.push(new Pp(null,r)):n.canDeactivateChecks.push(new Pp(null,r))}function Ly(t){return typeof t=="function"}function sde(t){return typeof t=="boolean"}function ode(t){return t&&Ly(t.canLoad)}function ade(t){return t&&Ly(t.canActivate)}function lde(t){return t&&Ly(t.canActivateChild)}function cde(t){return t&&Ly(t.canDeactivate)}function ude(t){return t&&Ly(t.canMatch)}function p4(t){return t instanceof Fl||t?.name==="EmptyError"}var P_=Symbol("INITIAL_VALUE");function Np(){return Ge(t=>Fr(t.map(e=>e.pipe(It(1),$o(P_)))).pipe(le(e=>{for(let n of e)if(n!==!0){if(n===P_)return P_;if(n===!1||n instanceof su)return n}return!0}),Tt(e=>e!==P_),It(1)))}function dde(t,e){return dn(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ae(Se(W({},n),{guardsResult:!0})):hde(o,i,r,t).pipe(dn(a=>a&&sde(a)?fde(i,s,t,e):ae(a)),le(a=>Se(W({},n),{guardsResult:a})))})}function hde(t,e,n,i){return Je(t).pipe(dn(r=>yde(r.component,r.route,n,e,i)),As(r=>r!==!0,!0))}function fde(t,e,n,i){return Je(e).pipe(Hc(r=>lo(gde(r.route.parent,i),pde(r.route,i),vde(t,r.path,n),mde(t,r.route,n))),As(r=>r!==!0,!0))}function pde(t,e){return t!==null&&e&&e(new RA(t)),ae(!0)}function gde(t,e){return t!==null&&e&&e(new DA(t)),ae(!0)}function mde(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ae(!0);let r=i.map(s=>Dd(()=>{let o=Ny(e)??n,a=Lp(s,o),l=ade(a)?a.canActivate(e,t):$c(o,()=>a(e,t));return au(l).pipe(As())}));return ae(r).pipe(Np())}function vde(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>nde(o)).filter(o=>o!==null).map(o=>Dd(()=>{let a=o.guards.map(l=>{let c=Ny(o.node)??n,u=Lp(l,c),d=lde(u)?u.canActivateChild(i,t):$c(c,()=>u(i,t));return au(d).pipe(As())});return ae(a).pipe(Np())}));return ae(s).pipe(Np())}function yde(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ae(!0);let o=s.map(a=>{let l=Ny(e)??r,c=Lp(a,l),u=cde(c)?c.canDeactivate(t,e,n,i):$c(l,()=>c(t,e,n,i));return au(u).pipe(As())});return ae(o).pipe(Np())}function Cde(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return ae(!0);let s=r.map(o=>{let a=Lp(o,t),l=ode(a)?a.canLoad(e,n):$c(t,()=>a(e,n));return au(l)});return ae(s).pipe(Np(),g4(i))}function g4(t){return FS(rn(e=>{if(Op(e))throw d4(t,e)}),le(e=>e===!0))}function wde(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return ae(!0);let s=r.map(o=>{let a=Lp(o,t),l=ude(a)?a.canMatch(e,n):$c(t,()=>a(e,n));return au(l)});return ae(s).pipe(Np(),g4(i))}var My=class{constructor(e){this.segmentGroup=e||null}},W_=class extends Error{constructor(e){super(),this.urlTree=e}};function xp(t){return Lc(new My(t))}function Sde(t){return Lc(new Le(4e3,!1))}function bde(t){return Lc(h4(!1,js.GuardRejected))}var OA=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ae(i);if(r.numberOfChildren>1||!r.children[gt])return Sde(e.redirectTo);r=r.children[gt]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new W_(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new su(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Jt(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new Le(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},kA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _de(t,e,n,i,r){let s=zA(t,e,n);return s.matched?(i=Zue(e,i),wde(i,e,n,r).pipe(le(o=>o===!0?s:W({},kA)))):ae(s)}function zA(t,e,n){if(e.path==="**")return Ede(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?W({},kA):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Sue)(n,t,e);if(!r)return W({},kA);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?W(W({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Ede(t){return{matched:!0,parameters:t.length>0?Y3(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function q3(t,e,n,i){return n.length>0&&Rde(t,n,i)?{segmentGroup:new Jt(e,Tde(i,new Jt(n,t.children))),slicedSegments:[]}:n.length===0&&Ide(t,n,i)?{segmentGroup:new Jt(t.segments,Dde(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Jt(t.segments,t.children),slicedSegments:n}}function Dde(t,e,n,i){let r={};for(let s of n)if(q_(t,e,s)&&!i[Ya(s)]){let o=new Jt([],{});r[Ya(s)]=o}return W(W({},i),r)}function Tde(t,e){let n={};n[gt]=e;for(let i of t)if(i.path===""&&Ya(i)!==gt){let r=new Jt([],{});n[Ya(i)]=r}return n}function Rde(t,e,n){return n.some(i=>q_(t,e,i)&&Ya(i)!==gt)}function Ide(t,e,n){return n.some(i=>q_(t,e,i))}function q_(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function xde(t,e,n,i){return Ya(t)!==i&&(i===gt||!q_(e,n,t))?!1:zA(e,t,n).matched}function Fde(t,e,n){return e.length===0&&!t.children[n]}var NA=class{};function Ade(t,e,n,i,r,s,o="emptyOnly"){return new LA(t,e,n,i,r,o,s).recognize()}var Pde=31,LA=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new OA(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Le(4002,`'${e.segmentGroup}'`)}recognize(){let e=q3(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(n=>{let i=new Ay([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,{},gt,this.rootComponentType,null,{}),r=new Us(i,n),s=new U_("",r),o=Gue(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,gt).pipe(Xo(i=>{if(i instanceof W_)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof My?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=GA(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(le(s=>s instanceof Us?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Je(r).pipe(Hc(s=>{let o=i.children[s],a=Jue(n,s);return this.processSegmentGroup(e,a,o,s)}),Wc((s,o)=>(s.push(...o),s)),Uc(null),Cx(),dn(s=>{if(s===null)return xp(i);let o=m4(s);return Mde(o),ae(o)}))}processSegment(e,n,i,r,s,o){return Je(n).pipe(Hc(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(Xo(l=>{if(l instanceof My)return ae(null);throw l}))),As(a=>!!a),Xo(a=>{if(p4(a))return Fde(i,r,s)?ae(new NA):xp(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return xde(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):xp(r):xp(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=zA(n,r,s);if(!a)return xp(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pde&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,d).pipe(dn(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=_de(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Ge(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ge(({routes:l})=>{let c=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new Ay(u,h,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,kde(i),Ya(i),i.component??i._loadedComponent??null,i,Nde(i)),{segmentGroup:g,slicedSegments:m}=q3(n,u,d,l);if(m.length===0&&g.hasChildren())return this.processChildren(c,l,g).pipe(le(C=>C===null?null:new Us(p,C)));if(l.length===0&&m.length===0)return ae(new Us(p,[]));let v=Ya(i)===s;return this.processSegment(c,l,g,m,v?gt:s,!0).pipe(le(C=>new Us(p,C instanceof Us?[C]:[])))}))):xp(n)))}getChildConfig(e,n,i){return n.children?ae({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ae({routes:n._loadedRoutes,injector:n._loadedInjector}):Cde(e,n,i,this.urlSerializer).pipe(dn(r=>r?this.configLoader.loadChildren(e,n).pipe(rn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):bde(n))):ae({routes:[],injector:e})}};function Mde(t){t.sort((e,n)=>e.value.outlet===gt?-1:n.value.outlet===gt?1:e.value.outlet.localeCompare(n.value.outlet))}function Ode(t){let e=t.value.routeConfig;return e&&e.path===""}function m4(t){let e=[],n=new Set;for(let i of t){if(!Ode(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=m4(i.children);e.push(new Us(i.value,r))}return e.filter(i=>!n.has(i))}function kde(t){return t.data||{}}function Nde(t){return t.resolve||{}}function Lde(t,e,n,i,r,s){return dn(o=>Ade(t,e,n,i,o.extractedUrl,r,s).pipe(le(({state:a,tree:l})=>Se(W({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Vde(t,e){return dn(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return ae(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of v4(l))o.add(c);let a=0;return Je(o).pipe(Hc(l=>s.has(l)?Bde(l,i,t,e):(l.data=GA(l,l.parent,t).resolve,ae(void 0))),rn(()=>a++),ap(1),dn(l=>a===o.size?ae(n):Di))})}function v4(t){let e=t.children.map(n=>v4(n)).flat();return[t,...e]}function Bde(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!c4(r)&&(s[Oy]=r.title),Gde(s,t,e,i).pipe(le(o=>(t._resolvedData=o,t.data=GA(t,t.parent,n).resolve,null)))}function Gde(t,e,n,i){let r=pA(t);if(r.length===0)return ae({});let s={};return Je(r).pipe(dn(o=>Hde(t[o],e,n,i).pipe(As(),rn(a=>{s[o]=a}))),ap(1),Hv(s),Xo(o=>p4(o)?Di:Lc(o)))}function Hde(t,e,n,i){let r=Ny(e)??i,s=Lp(t,r),o=s.resolve?s.resolve(e,n):$c(r,()=>s(e,n));return au(o)}function hA(t){return Ge(e=>{let n=t(e);return n?Je(n).pipe(le(()=>e)):ae(e)})}var y4=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===gt);return r}getResolvedTitleForRoute(i){return i.data[Oy]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q(Ude),providedIn:"root"});let t=e;return t})(),Ude=(()=>{let e=class e extends y4{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Z(F_))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qA=new ue("",{providedIn:"root",factory:()=>({})}),KA=new ue(""),jde=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(G1)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ae(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=au(i.loadComponent()).pipe(le(C4),rn(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Td(()=>{this.componentLoaders.delete(i)})),s=new kc(r,()=>new ot).pipe(Jf());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Wde(r,this.compiler,i,this.onLoadEndListener).pipe(Td(()=>{this.childrenLoaders.delete(r)})),a=new kc(o,()=>new ot).pipe(Jf());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wde(t,e,n,i){return au(t.loadChildren()).pipe(le(C4),dn(r=>r instanceof iy||Array.isArray(r)?ae(r):Je(e.compileModuleAsync(r))),le(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(KA,[],{optional:!0,self:!0}).flat()),{routes:o.map(WA),injector:s}}))}function zde(t){return t&&typeof t=="object"&&"default"in t}function C4(t){return zde(t)?t.default:t}var YA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q(qde),providedIn:"root"});let t=e;return t})(),qde=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kde=new ue("");var Yde=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ot,this.transitionAbortSubject=new ot,this.configLoader=Q(jde),this.environmentInjector=Q(Or),this.urlSerializer=Q(BA),this.rootContexts=Q(z_),this.location=Q(gy),this.inputBindingEnabled=Q(UA,{optional:!0})!==null,this.titleStrategy=Q(y4),this.options=Q(qA,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(YA),this.createViewTransition=Q(Kde,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let i=s=>this.events.next(new _A(s)),r=s=>this.events.next(new EA(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Se(W(W({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new qt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_y,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(o=>o.id!==0),le(o=>Se(W({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{let a=!1,l=!1;return ae(o).pipe(Ge(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",js.SupersededByNewNavigation),Di;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Se(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Yd(c.id,this.urlSerializer.serialize(c.rawUrl),h,yA.IgnoredSameUrlNavigation)),c.resolve(null),Di}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ae(c).pipe(Ge(h=>{let p=this.transitions?.getValue();return this.events.next(new Ty(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?Di:Promise.resolve(h)}),Lde(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),rn(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Se(W({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new B_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:m,extras:v}=c,C=new Ty(h,this.urlSerializer.serialize(p),g,m);this.events.next(C);let b=a4(this.rootComponentType).snapshot;return this.currentTransition=o=Se(W({},c),{targetSnapshot:b,urlAfterRedirects:p,extras:Se(W({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ae(o)}else{let h="";return this.events.next(new Yd(c.id,this.urlSerializer.serialize(c.extractedUrl),h,yA.IgnoredByUrlHandlingStrategy)),c.resolve(null),Di}}),rn(c=>{let u=new CA(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),le(c=>(this.currentTransition=o=Se(W({},c),{guards:tde(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),dde(this.environmentInjector,c=>this.events.next(c)),rn(c=>{if(o.guardsResult=c.guardsResult,Op(c.guardsResult))throw d4(this.urlSerializer,c.guardsResult);let u=new wA(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Tt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",js.GuardRejected),!1)),hA(c=>{if(c.guards.canActivateChecks.length)return ae(c).pipe(rn(u=>{let d=new SA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ge(u=>{let d=!1;return ae(u).pipe(Vde(this.paramsInheritanceStrategy,this.environmentInjector),rn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",js.NoDataFromResolver)}}))}),rn(u=>{let d=new bA(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),hA(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(rn(p=>{d.component=p}),le(()=>{})));for(let p of d.children)h.push(...u(p));return h};return Fr(u(c.targetSnapshot.root)).pipe(Uc(null),It(1))}),hA(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?Je(d).pipe(le(()=>o)):ae(o)}),le(c=>{let u=Yue(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Se(W({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),rn(()=>{this.events.next(new xy)}),ede(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),It(1),rn({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),xn(this.transitionAbortSubject.pipe(rn(c=>{throw c}))),Td(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",js.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xo(c=>{if(l=!0,f4(c))this.events.next(new ou(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),$ue(c)?this.events.next(new Fy(c.url)):o.resolve(!1);else{this.events.next(new Ry(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Di}))}))}cancelNavigationTransition(i,r,s){let o=new ou(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qde(t){return t!==_y}var Xde=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q($de),providedIn:"root"});let t=e;return t})(),VA=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},$de=(()=>{let e=class e extends VA{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),w4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Q(Zde),providedIn:"root"});let t=e;return t})(),Zde=(()=>{let e=class e extends w4{constructor(){super(...arguments),this.location=Q(gy),this.urlSerializer=Q(BA),this.options=Q(qA,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(YA),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new su,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=a4(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ty)this.stateMemento=this.createStateMemento();else if(i instanceof Yd)this.rawUrlTree=r.initialUrl;else if(i instanceof B_){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof xy?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof ou&&(i.code===js.GuardRejected||i.code===js.NoDataFromResolver)?this.restoreHistory(r):i instanceof Ry?this.restoreHistory(r,!0):i instanceof Kd&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=W(W({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=W(W({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sy=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Sy||{});function Jde(t,e){t.events.pipe(Tt(n=>n instanceof Kd||n instanceof ou||n instanceof Ry||n instanceof Yd),le(n=>n instanceof Kd||n instanceof Yd?Sy.COMPLETE:(n instanceof ou?n.code===js.Redirect||n.code===js.SupersededByNewNavigation:!1)?Sy.REDIRECTING:Sy.FAILED),Tt(n=>n!==Sy.REDIRECTING),It(1)).subscribe(()=>{e()})}function ehe(t){throw t}var the={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nhe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Q(o_),this.stateManager=Q(w4),this.options=Q(qA,{optional:!0})||{},this.pendingTasks=Q(cy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(Yde),this.urlSerializer=Q(BA),this.location=Q(gy),this.urlHandlingStrategy=Q(YA),this._events=new ot,this.errorHandler=this.options.errorHandler||ehe,this.navigated=!1,this.routeReuseStrategy=Q(Xde),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(KA,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(UA,{optional:!0}),this.eventsSubscription=new Ln,this.isNgZoneEnabled=Q(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ou&&r.code!==js.Redirect&&r.code!==js.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kd)this.navigated=!0;else if(r instanceof Fy){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Qde(s.source)};this.scheduleNavigation(a,_y,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}rhe(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_y,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=W({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(WA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=s?s.snapshot:this.routerState.snapshot.root;h=i4(p)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return r4(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Op(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,_y,null,r)}navigate(i,r={skipLocationChange:!1}){return ihe(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=W({},the):r===!1?s=W({},nhe):s=r,Op(i))return U3(this.currentUrlTree,i,s);let o=this.parseUrl(i);return U3(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,p)=>{l=h,c=p});let d=this.pendingTasks.add();return Jde(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ihe(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Le(4008,!1)}function rhe(t){return!(t instanceof xy)&&!(t instanceof Fy)}var she=new ue("");function S4(t,...e){return fn([{provide:KA,multi:!0,useValue:t},[],{provide:kp,useFactory:ohe,deps:[fi]},{provide:Rp,multi:!0,useFactory:ahe},e.map(n=>n.\u0275providers)])}function ohe(t){return t.routerState.root}function ahe(){let t=Q(_t);return e=>{let n=t.get(Gs);if(e!==n.components[0])return;let i=t.get(fi),r=t.get(lhe);t.get(che)===1&&i.initialNavigation(),t.get(uhe,null,bt.Optional)?.setUpPreloading(),t.get(she,null,bt.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var lhe=new ue("",{factory:()=>new ot}),che=new ue("",{providedIn:"root",factory:()=>1});var uhe=new ue("");var F4=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(J(Nr),J(Fn))},e.\u0275dir=on({type:e});let t=e;return t})(),nE=(()=>{let e=class e extends F4{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275dir=on({type:e,features:[hs]});let t=e;return t})(),zl=new ue("");var dhe={provide:zl,useExisting:Os(()=>mo),multi:!0};function hhe(){let t=Ul()?Ul().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var fhe=new ue(""),mo=(()=>{let e=class e extends F4{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!hhe())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(J(Nr),J(Fn),J(fhe,8))},e.\u0275dir=on({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&De("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Vr([dhe]),hs]});let t=e;return t})();function cu(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function A4(t){return t!=null&&typeof t.length=="number"}var Gy=new ue(""),iE=new ue(""),phe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,go=class{static min(e){return ghe(e)}static max(e){return mhe(e)}static required(e){return vhe(e)}static requiredTrue(e){return yhe(e)}static email(e){return Che(e)}static minLength(e){return whe(e)}static maxLength(e){return She(e)}static pattern(e){return bhe(e)}static nullValidator(e){return P4(e)}static compose(e){return V4(e)}static composeAsync(e){return G4(e)}};function ghe(t){return e=>{if(cu(e.value)||cu(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function mhe(t){return e=>{if(cu(e.value)||cu(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function vhe(t){return cu(t.value)?{required:!0}:null}function yhe(t){return t.value===!0?null:{required:!0}}function Che(t){return cu(t.value)||phe.test(t.value)?null:{email:!0}}function whe(t){return e=>cu(e.value)||!A4(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function She(t){return e=>A4(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function bhe(t){if(!t)return P4;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(cu(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function P4(t){return null}function M4(t){return t!=null}function O4(t){return iu(t)?Je(t):t}function k4(t){let e={};return t.forEach(n=>{e=n!=null?W(W({},e),n):e}),Object.keys(e).length===0?null:e}function N4(t,e){return e.map(n=>n(t))}function _he(t){return!t.validate}function L4(t){return t.map(e=>_he(e)?e:n=>e.validate(n))}function V4(t){if(!t)return null;let e=t.filter(M4);return e.length==0?null:function(n){return k4(N4(n,e))}}function B4(t){return t!=null?V4(L4(t)):null}function G4(t){if(!t)return null;let e=t.filter(M4);return e.length==0?null:function(n){let i=N4(n,e).map(O4);return sp(i).pipe(le(k4))}}function H4(t){return t!=null?G4(L4(t)):null}function b4(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function U4(t){return t._rawValidators}function j4(t){return t._rawAsyncValidators}function QA(t){return t?Array.isArray(t)?t:[t]:[]}function Y_(t,e){return Array.isArray(t)?t.includes(e):t===e}function _4(t,e){let n=QA(e);return QA(t).forEach(r=>{Y_(n,r)||n.push(r)}),n}function E4(t,e){return QA(e).filter(n=>!Y_(t,n))}var Q_=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B4(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=H4(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Qd=class extends Q_{get formDirective(){return null}get path(){return null}},Wl=class extends Q_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},X_=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Ehe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},h6e=Se(W({},Ehe),{"[class.ng-submitted]":"isSubmitted"}),vo=(()=>{let e=class e extends X_{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(J(Wl,2))},e.\u0275dir=on({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&fs("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[hs]});let t=e;return t})(),Gp=(()=>{let e=class e extends X_{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(J(Qd,10))},e.\u0275dir=on({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&fs("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[hs]});let t=e;return t})();var Vy="VALID",K_="INVALID",Vp="PENDING",By="DISABLED";function ZA(t){return(rE(t)?t.validators:t)||null}function Dhe(t){return Array.isArray(t)?B4(t):t||null}function JA(t,e){return(rE(e)?e.asyncValidators:t)||null}function The(t){return Array.isArray(t)?H4(t):t||null}function rE(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function W4(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new Le(1e3,"");if(!i[n])throw new Le(1001,"")}function z4(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new Le(1002,"")})}var Bp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Vy}get invalid(){return this.status===K_}get pending(){return this.status==Vp}get disabled(){return this.status===By}get enabled(){return this.status!==By}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(E4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(E4(e,this._rawAsyncValidators))}hasValidator(e){return Y_(this._rawValidators,e)}hasAsyncValidator(e){return Y_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vp,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=By,this.errors=null,this._forEachChild(i=>{i.disable(Se(W({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(W({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Vy,this._forEachChild(i=>{i.enable(Se(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Se(W({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vy||this.status===Vp)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?By:Vy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vp,this._hasOwnPendingAsyncValidator=!0;let n=O4(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new X,this.statusChanges=new X}_calculateStatus(){return this._allControlsDisabled()?By:this.errors?K_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vp)?Vp:this._anyControlsHaveStatus(K_)?K_:Vy}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Dhe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=The(this._rawAsyncValidators)}},$_=class extends Bp{constructor(e,n,i){super(ZA(n),JA(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){z4(this,!0,e),Object.keys(e).forEach(i=>{W4(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var XA=class extends $_{};var Hy=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>sE}),sE="always";function q4(t,e){return[...e.path,t]}function Z_(t,e,n=sE){eP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Ihe(t,e),Fhe(t,e),xhe(t,e),Rhe(t,e)}function J_(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),tE(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function eE(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Rhe(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function eP(t,e){let n=U4(t);e.validator!==null?t.setValidators(b4(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=j4(t);e.asyncValidator!==null?t.setAsyncValidators(b4(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();eE(e._rawValidators,r),eE(e._rawAsyncValidators,r)}function tE(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=U4(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=j4(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return eE(e._rawValidators,i),eE(e._rawAsyncValidators,i),n}function Ihe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&K4(t,e)})}function xhe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&K4(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function K4(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Fhe(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Ahe(t,e){t==null,eP(t,e)}function Phe(t,e){return tE(t,e)}function tP(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Mhe(t){return Object.getPrototypeOf(t.constructor)===nE}function Ohe(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function nP(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===mo?n=s:Mhe(s)?i=s:r=s}),r||i||n||null}function khe(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function D4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function T4(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var jl=class extends Bp{constructor(e=null,n,i){super(ZA(n),JA(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(T4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){D4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){D4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){T4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Nhe=t=>t instanceof jl;var Lhe={provide:Wl,useExisting:Os(()=>iP)},R4=Promise.resolve(),iP=(()=>{let e=class e extends Wl{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new jl,this._registered=!1,this.name="",this.update=new X,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=nP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),tP(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Z_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){R4.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&a_(r);R4.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?q4(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(J(Qd,9),J(Gy,10),J(iE,10),J(zl,10),J(Br,8),J(Hy,8))},e.\u0275dir=on({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[$n.None,"disabled","isDisabled"],model:[$n.None,"ngModel","model"],options:[$n.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vr([Lhe]),hs,Vn]});let t=e;return t})(),Hp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=on({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),Vhe={provide:zl,useExisting:Os(()=>rP),multi:!0},rP=(()=>{let e=class e extends nE{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275dir=on({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&De("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Vr([Vhe]),hs]});let t=e;return t})();var sP=new ue(""),Bhe={provide:Wl,useExisting:Os(()=>Uy)},Uy=(()=>{let e=class e extends Wl{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new X,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=nP(this,s)}ngOnChanges(i){if(this._isControlChanged(i)){let r=i.form.previousValue;r&&J_(r,this,!1),Z_(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}tP(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&J_(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(J(Gy,10),J(iE,10),J(zl,10),J(sP,8),J(Hy,8))},e.\u0275dir=on({type:e,selectors:[["","formControl",""]],inputs:{form:[$n.None,"formControl","form"],isDisabled:[$n.None,"disabled","isDisabled"],model:[$n.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Vr([Bhe]),hs,Vn]});let t=e;return t})(),Ghe={provide:Qd,useExisting:Os(()=>Xd)},Xd=(()=>{let e=class e extends Qd{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new X,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Z_(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){J_(i.control||null,i,!1),khe(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,Ohe(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(J_(r||null,i),Nhe(s)&&(Z_(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);Ahe(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&Phe(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eP(this.form,this),this._oldForm&&tE(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(J(Gy,10),J(iE,10),J(Hy,8))},e.\u0275dir=on({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&De("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[$n.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vr([Ghe]),hs,Vn]});let t=e;return t})();var Hhe={provide:Wl,useExisting:Os(()=>$d)},$d=(()=>{let e=class e extends Wl{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new X,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=nP(this,o)}ngOnChanges(i){this._added||this._setUpControl(),tP(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return q4(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(J(Qd,13),J(Gy,10),J(iE,10),J(zl,10),J(sP,8))},e.\u0275dir=on({type:e,selectors:[["","formControlName",""]],inputs:{name:[$n.None,"formControlName","name"],isDisabled:[$n.None,"disabled","isDisabled"],model:[$n.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Vr([Hhe]),hs,Vn]});let t=e;return t})(),Uhe={provide:zl,useExisting:Os(()=>oE),multi:!0};function Y4(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jhe(t){return t.split(":")[0]}var oE=(()=>{let e=class e extends nE{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=Y4(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=jhe(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275dir=on({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&De("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vr([Uhe]),hs]});let t=e;return t})(),Q4=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(Y4(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(J(Fn),J(Nr),J(oE,9))},e.\u0275dir=on({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Whe={provide:zl,useExisting:Os(()=>X4),multi:!0};function I4(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function zhe(t){return t.split(":")[0]}var X4=(()=>{let e=class e extends nE{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);s.push(u)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=zhe(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275dir=on({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&De("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vr([Whe]),hs]});let t=e;return t})(),$4=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(I4(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(I4(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(J(Fn),J(Nr),J(X4,9))},e.\u0275dir=on({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var Z4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Zi({});let t=e;return t})(),$A=class extends Bp{constructor(e,n,i){super(ZA(n),JA(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){z4(this,!1,e),e.forEach((i,r)=>{W4(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function x4(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Up=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return x4(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new $_(s,o)}record(i,r=null){let s=this._reduceControls(i);return new XA(s,r)}control(i,r,s){let o={};return this.useNonNullable?(x4(r)?o=r:(o.validators=r,o.asyncValidators=s),new jl(i,Se(W({},o),{nonNullable:!0}))):new jl(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new $A(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof jl)return i;if(i instanceof Bp)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J4=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Hy,useValue:i.callSetDisabledState??sE}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Zi({imports:[Z4]});let t=e;return t})(),Qa=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:sP,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Hy,useValue:i.callSetDisabledState??sE}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Zi({imports:[Z4]});let t=e;return t})();function qhe(t,e){if(t&1&&(Vs(0),Gd(),j(1,"svg",1),fe(2,"path",2),U(),Bs()),t&2){let n=e.$implicit;ee(),jd("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var aE=(()=>{let e=class e{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(i,r){return Math.random()*(r-i)+i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[qe],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(r,s){r&1&&Fe(0,qhe,3,10,"ng-container",0),r&2&&de("ngForOf",s.dollarSignArray)},dependencies:[En,fo],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]});let t=e;return t})();function Khe(t,e){t&1&&(Vs(0),Gd(),j(1,"svg",1),fe(2,"path",2),U(),Bs())}function Yhe(t,e){t&1&&(Vs(0),Gd(),j(1,"svg",3),fe(2,"path",4),U(),Bs())}var lE=(()=>{let e=class e{constructor(){this.wave="top"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[qe],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(r,s){r&1&&Fe(0,Khe,3,0,"ng-container",0)(1,Yhe,3,0,"ng-container",0),r&2&&(de("ngIf",s.wave==="top"),ee(),de("ngIf",s.wave==="bottom"))},dependencies:[En,Gi],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]});let t=e;return t})();var cE=(()=>{let e=class e{constructor(){this.size=250}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[qe],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(r,s){r&1&&(Gd(),j(0,"svg",0)(1,"style"),we(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),U(),fe(3,"path",1),U()),r&2&&Bl("width",s.size)("height",s.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let t=e;return t})();var Qhe="firebase",Xhe="10.12.5";Qe(Qhe,Xhe,"app");var An=new Ll("ANGULARFIRE2_VERSION"),zp=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function gr(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ir=(t,e)=>{let n=e?[e]:bS(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ri=class{constructor(){return ir($he)}},$he="app-check";function Wp(){}var uE=class{zone;delegate;constructor(e,n=fx){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},oP=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wp,{},Wp,Wp)),n.pipe(rn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Pn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new uE(Zone.current)),this.insideAngular=n.run(()=>new uE(Zone.current,os)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(Z(Re))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jy(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Zhe(t){return jy().ngZone.runOutsideAngular(()=>t())}function Zd(t){return jy().ngZone.run(()=>t())}function aP(t){return t.pipe(ls(jy().outsideAngular))}function Hi(t){return Jhe(jy())(t)}function Jhe(t){return function(n){return n=n.lift(new oP(t.ngZone)),n.pipe(ao(t.outsideAngular),ls(t.insideAngular))}}var efe=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Zd(()=>t.apply(void 0,i))},Ft=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Zd(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wp,{},Wp,Wp))),i[s]=efe(i[s],n));let r=Zhe(()=>t.apply(this,i));if(!e)if(r instanceof pe){let s=jy();return r.pipe(ao(s.outsideAngular),ls(s.insideAngular))}else return Zd(()=>r);return r instanceof pe?r.pipe(Hi):r instanceof Promise?Zd(()=>new Promise((s,o)=>r.then(a=>Zd(()=>s(a)),a=>Zd(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Zd(()=>r)};var ei=class{constructor(e){return e}},Ii=class{constructor(){return bS()}};function tfe(t){return t&&t.length===1?t[0]:new ei(Vi())}var cP=new ue("angularfire2._apps"),nfe={provide:ei,useFactory:tfe,deps:[[new mt,cP]]},ife={provide:Ii,deps:[[new mt,cP]]};function rfe(t){return(e,n)=>{let i=n.get(_n);Qe("angularfire",An.full,"core"),Qe("angularfire",An.full,"app"),Qe("angular",L1.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new ei(r)}}function e5(t,...e){return fn([nfe,ife,{provide:cP,useFactory:rfe(t),multi:!0,deps:[Re,_t,Pn,...e]}])}var t5=Ft(iU,!0);function i5(t){return new pe(function(e){var n=ES(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function r5(t){return new pe(function(e){var n=_S(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var s5="auth",Ws=class{constructor(e){return e}},oa=class{constructor(){return ir(s5)}};var uP=new ue("angularfire2.auth-instances");function Zfe(t,e){let n=gr(s5,t,e);return n&&new Ws(n)}function Jfe(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ws(i)}}var epe={provide:oa,deps:[[new mt,uP]]},tpe={provide:Ws,useFactory:Zfe,deps:[[new mt,uP],ei]};function o5(t,...e){return Qe("angularfire",An.full,"auth"),fn([tpe,epe,{provide:uP,useFactory:Jfe(t),multi:!0,deps:[Re,_t,Pn,Ii,[new mt,Ri],...e]}])}var qp=Ft(i5,!0),a5=Ft(r5,!0);var l5=Ft(XI,!0);var c5=Ft(JI,!0);var u5=Ft($I,!0);var d5=Ft(ZI,!0);var npe=new Map,ipe={activated:!1,tokenObservers:[]},rpe={initialized:!1,enabled:!1};function aa(t){return npe.get(t)||Object.assign({},ipe)}function m5(){return rpe}var spe="https://content-firebaseappcheck.googleapis.com/v1";var ope="exchangeDebugToken",h5={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Gqe=24*60*60*1e3;var fP=class{constructor(e,n,i,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new qf,this.pending.promise.catch(n=>{}),yield ape(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new qf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function ape(t){return new Promise(e=>{setTimeout(e,t)})}var lpe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},uu=new Ma("appCheck","AppCheck",lpe);function v5(t){if(!aa(t).activated)throw uu.create("use-before-activation",{appName:t.name})}function y5(i,r){return N(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(t,a)}catch(p){throw uu.create("fetch-network-error",{originalErrorMessage:p?.message})}if(l.status!==200)throw uu.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(p){throw uu.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw uu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function C5(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${spe}/projects/${n}/apps/${i}:${ope}?key=${r}`,body:{debug_token:e}}}var cpe="firebase-app-check-database",upe=1,pP="firebase-app-check-store";var dE=null;function dpe(){return dE||(dE=new Promise((t,e)=>{try{let n=indexedDB.open(cpe,upe);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(uu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(pP,{keyPath:"compositeKey"})}}}catch(n){e(uu.create("storage-open",{originalErrorMessage:n?.message}))}}),dE)}function hpe(t,e){return fpe(ppe(t),e)}function fpe(t,e){return N(this,null,function*(){let i=(yield dpe()).transaction(pP,"readwrite"),s=i.objectStore(pP).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(uu.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function ppe(t){return`${t.options.appId}-${t.name}`}var gP=new ka("@firebase/app-check");function hP(t,e){return oo()?hpe(t,e).catch(n=>{gP.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function w5(){return m5().enabled}function S5(){return N(this,null,function*(){let t=m5();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gpe={error:"UNKNOWN_ERROR"};function mpe(t){return CS.encodeString(JSON.stringify(t),!1)}function mP(t,e=!1){return N(this,null,function*(){let n=t.app;v5(n);let i=aa(n),r=i.token,s;if(r&&!Wy(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(Wy(l)?r=l:yield hP(n,void 0))}if(!e&&r&&Wy(r))return{token:r.token};let o=!1;if(w5()){i.exchangeTokenPromise||(i.exchangeTokenPromise=y5(C5(n,yield S5()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield hP(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield aa(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?gP.warn(l.message):gP.error(l),s=l}let a;return r?s?Wy(r)?a={token:r.token,internalError:s}:a=p5(s):(a={token:r.token},i.token=r,yield hP(n,r)):a=p5(s),o&&wpe(n,a),a})}function vpe(t){return N(this,null,function*(){let e=t.app;v5(e);let{provider:n}=aa(e);if(w5()){let i=yield S5(),{token:r}=yield y5(C5(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function ype(t,e,n,i){let{app:r}=t,s=aa(r),o={next:n,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Wy(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),f5(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>f5(t))}function b5(t,e){let n=aa(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function f5(t){let{app:e}=t,n=aa(e),i=n.tokenRefresher;i||(i=Cpe(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Cpe(t){let{app:e}=t;return new fP(()=>N(this,null,function*(){let n=aa(e),i;if(n.token?i=yield mP(t,!0):i=yield mP(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=aa(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},h5.RETRIAL_MIN_WAIT,h5.RETRIAL_MAX_WAIT)}function wpe(t,e){let n=aa(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Wy(t){return t.expireTimeMillis-Date.now()>0}function p5(t){return{token:mpe(gpe),error:t}}var vP=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=aa(this.app);for(let n of e)b5(this.app,n.next);return Promise.resolve()}};function Spe(t,e){return new vP(t,e)}function bpe(t){return{getToken:e=>mP(t,e),getLimitedUseToken:()=>vpe(t),addTokenListener:e=>ype(t,"INTERNAL",e),removeTokenListener:e=>b5(t.app,e)}}var _pe="@firebase/app-check",Epe="0.8.7";var Dpe="app-check",g5="app-check-internal";function Tpe(){jn(new vn(Dpe,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Spe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(g5).initialize()})),jn(new vn(g5,t=>{let e=t.getProvider("app-check").getImmediate();return bpe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qe(_pe,Epe)}Tpe();var Rpe=["localhost","0.0.0.0","127.0.0.1"],Zqe=typeof window<"u"&&Rpe.includes(window.location.hostname);var Ipe="firebase",xpe="10.12.5";Fs.registerVersion(Ipe,xpe,"app-compat");var Fpe=["ngOnDestroy"],E5=(t,e,n,i={})=>new Proxy(t,{get:(r,s)=>n.runOutsideAngular(()=>{if(t[s])return i?.spy?.get&&i.spy.get(s,t[s]),t[s];if(Fpe.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let d=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,d),d})})})});var CP=class{constructor(e){return e}},du=new ue("angularfire2.app.options"),Kp=new ue("angularfire2.app.name");function Yp(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=Fs.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Fs.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;Ape("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new CP(o)}var Ape=(t,...e)=>{py()&&typeof console<"u"&&console[t](...e)};function Qp(t,e,n,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return Ppe(r,o)||(_5("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Mpe?" You may need to reload as Firebase is not HMR aware.":""}`),_5("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function Ppe(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Mpe=typeof module<"u"&&!!module.hot,_5=(t,...e)=>{py()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var wP=new ue("angularfire2.auth.use-emulator"),SP=new ue("angularfire2.auth.settings"),bP=new ue("angularfire2.auth.tenant-id"),_P=new ue("angularfire2.auth.langugage-code"),EP=new ue("angularfire2.auth.use-device-language"),DP=new ue("angularfire.auth.persistence"),TP=(t,e,n,i,r,s,o,a)=>Qp(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,r,s,o,a]),Xa=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,s,o,a,l,c,u,d,h,p){let g=new ot,m=ae(void 0).pipe(ls(o.outsideAngular),Ge(()=>s.runOutsideAngular(()=>import("./chunk-IWN6ICAY.js"))),le(()=>Yp(n,s,i)),le(v=>TP(v,s,a,c,u,d,l,h)),Rd({bufferSize:1,refCount:!1}));if(ra(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ae(null);else{m.pipe(As()).subscribe();let v=m.pipe(Ge(E=>E.getRedirectResult().then(T=>T,()=>null)),Hi,Rd({bufferSize:1,refCount:!1})),C=m.pipe(Ge(E=>new pe(T=>({unsubscribe:s.runOutsideAngular(()=>E.onAuthStateChanged(P=>T.next(P),P=>T.error(P),()=>T.complete()))})))),b=m.pipe(Ge(E=>new pe(T=>({unsubscribe:s.runOutsideAngular(()=>E.onIdTokenChanged(P=>T.next(P),P=>T.error(P),()=>T.complete()))}))));this.authState=v.pipe($S(C),ao(o.outsideAngular),ls(o.insideAngular)),this.user=v.pipe($S(b),ao(o.outsideAngular),ls(o.insideAngular)),this.idToken=this.user.pipe(Ge(E=>E?Je(E.getIdToken()):ae(null))),this.idTokenResult=this.user.pipe(Ge(E=>E?Je(E.getIdTokenResult()):ae(null))),this.credential=Bc(v,g,this.authState.pipe(Tt(E=>!E))).pipe(le(E=>E?.user?E:null),ao(o.outsideAngular),ls(o.insideAngular))}return E5(this,m,s,{spy:{apply:(v,C,b)=>{(v.startsWith("signIn")||v.startsWith("createUser"))&&b.then(E=>g.next(E))}}})}static \u0275fac=function(i){return new(i||t)(Z(du),Z(Kp,8),Z(_n),Z(Re),Z(Pn),Z(wP,8),Z(SP,8),Z(bP,8),Z(_P,8),Z(EP,8),Z(DP,8),Z(Ri,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var D5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T5={};var hu,RP;(function(){var t;function e(_,S){function D(){}D.prototype=S.prototype,_.D=S.prototype,_.prototype=new D,_.prototype.constructor=_,_.C=function(O,F,k){for(var M=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)M[ce-2]=arguments[ce];return S.prototype[F].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,S,D){D||(D=0);var O=Array(16);if(typeof S=="string")for(var F=0;16>F;++F)O[F]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(F=0;16>F;++F)O[F]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=_.g[0],D=_.g[1],F=_.g[2];var k=_.g[3],M=S+(k^D&(F^k))+O[0]+3614090360&4294967295;S=D+(M<<7&4294967295|M>>>25),M=k+(F^S&(D^F))+O[1]+3905402710&4294967295,k=S+(M<<12&4294967295|M>>>20),M=F+(D^k&(S^D))+O[2]+606105819&4294967295,F=k+(M<<17&4294967295|M>>>15),M=D+(S^F&(k^S))+O[3]+3250441966&4294967295,D=F+(M<<22&4294967295|M>>>10),M=S+(k^D&(F^k))+O[4]+4118548399&4294967295,S=D+(M<<7&4294967295|M>>>25),M=k+(F^S&(D^F))+O[5]+1200080426&4294967295,k=S+(M<<12&4294967295|M>>>20),M=F+(D^k&(S^D))+O[6]+2821735955&4294967295,F=k+(M<<17&4294967295|M>>>15),M=D+(S^F&(k^S))+O[7]+4249261313&4294967295,D=F+(M<<22&4294967295|M>>>10),M=S+(k^D&(F^k))+O[8]+1770035416&4294967295,S=D+(M<<7&4294967295|M>>>25),M=k+(F^S&(D^F))+O[9]+2336552879&4294967295,k=S+(M<<12&4294967295|M>>>20),M=F+(D^k&(S^D))+O[10]+4294925233&4294967295,F=k+(M<<17&4294967295|M>>>15),M=D+(S^F&(k^S))+O[11]+2304563134&4294967295,D=F+(M<<22&4294967295|M>>>10),M=S+(k^D&(F^k))+O[12]+1804603682&4294967295,S=D+(M<<7&4294967295|M>>>25),M=k+(F^S&(D^F))+O[13]+4254626195&4294967295,k=S+(M<<12&4294967295|M>>>20),M=F+(D^k&(S^D))+O[14]+2792965006&4294967295,F=k+(M<<17&4294967295|M>>>15),M=D+(S^F&(k^S))+O[15]+1236535329&4294967295,D=F+(M<<22&4294967295|M>>>10),M=S+(F^k&(D^F))+O[1]+4129170786&4294967295,S=D+(M<<5&4294967295|M>>>27),M=k+(D^F&(S^D))+O[6]+3225465664&4294967295,k=S+(M<<9&4294967295|M>>>23),M=F+(S^D&(k^S))+O[11]+643717713&4294967295,F=k+(M<<14&4294967295|M>>>18),M=D+(k^S&(F^k))+O[0]+3921069994&4294967295,D=F+(M<<20&4294967295|M>>>12),M=S+(F^k&(D^F))+O[5]+3593408605&4294967295,S=D+(M<<5&4294967295|M>>>27),M=k+(D^F&(S^D))+O[10]+38016083&4294967295,k=S+(M<<9&4294967295|M>>>23),M=F+(S^D&(k^S))+O[15]+3634488961&4294967295,F=k+(M<<14&4294967295|M>>>18),M=D+(k^S&(F^k))+O[4]+3889429448&4294967295,D=F+(M<<20&4294967295|M>>>12),M=S+(F^k&(D^F))+O[9]+568446438&4294967295,S=D+(M<<5&4294967295|M>>>27),M=k+(D^F&(S^D))+O[14]+3275163606&4294967295,k=S+(M<<9&4294967295|M>>>23),M=F+(S^D&(k^S))+O[3]+4107603335&4294967295,F=k+(M<<14&4294967295|M>>>18),M=D+(k^S&(F^k))+O[8]+1163531501&4294967295,D=F+(M<<20&4294967295|M>>>12),M=S+(F^k&(D^F))+O[13]+2850285829&4294967295,S=D+(M<<5&4294967295|M>>>27),M=k+(D^F&(S^D))+O[2]+4243563512&4294967295,k=S+(M<<9&4294967295|M>>>23),M=F+(S^D&(k^S))+O[7]+1735328473&4294967295,F=k+(M<<14&4294967295|M>>>18),M=D+(k^S&(F^k))+O[12]+2368359562&4294967295,D=F+(M<<20&4294967295|M>>>12),M=S+(D^F^k)+O[5]+4294588738&4294967295,S=D+(M<<4&4294967295|M>>>28),M=k+(S^D^F)+O[8]+2272392833&4294967295,k=S+(M<<11&4294967295|M>>>21),M=F+(k^S^D)+O[11]+1839030562&4294967295,F=k+(M<<16&4294967295|M>>>16),M=D+(F^k^S)+O[14]+4259657740&4294967295,D=F+(M<<23&4294967295|M>>>9),M=S+(D^F^k)+O[1]+2763975236&4294967295,S=D+(M<<4&4294967295|M>>>28),M=k+(S^D^F)+O[4]+1272893353&4294967295,k=S+(M<<11&4294967295|M>>>21),M=F+(k^S^D)+O[7]+4139469664&4294967295,F=k+(M<<16&4294967295|M>>>16),M=D+(F^k^S)+O[10]+3200236656&4294967295,D=F+(M<<23&4294967295|M>>>9),M=S+(D^F^k)+O[13]+681279174&4294967295,S=D+(M<<4&4294967295|M>>>28),M=k+(S^D^F)+O[0]+3936430074&4294967295,k=S+(M<<11&4294967295|M>>>21),M=F+(k^S^D)+O[3]+3572445317&4294967295,F=k+(M<<16&4294967295|M>>>16),M=D+(F^k^S)+O[6]+76029189&4294967295,D=F+(M<<23&4294967295|M>>>9),M=S+(D^F^k)+O[9]+3654602809&4294967295,S=D+(M<<4&4294967295|M>>>28),M=k+(S^D^F)+O[12]+3873151461&4294967295,k=S+(M<<11&4294967295|M>>>21),M=F+(k^S^D)+O[15]+530742520&4294967295,F=k+(M<<16&4294967295|M>>>16),M=D+(F^k^S)+O[2]+3299628645&4294967295,D=F+(M<<23&4294967295|M>>>9),M=S+(F^(D|~k))+O[0]+4096336452&4294967295,S=D+(M<<6&4294967295|M>>>26),M=k+(D^(S|~F))+O[7]+1126891415&4294967295,k=S+(M<<10&4294967295|M>>>22),M=F+(S^(k|~D))+O[14]+2878612391&4294967295,F=k+(M<<15&4294967295|M>>>17),M=D+(k^(F|~S))+O[5]+4237533241&4294967295,D=F+(M<<21&4294967295|M>>>11),M=S+(F^(D|~k))+O[12]+1700485571&4294967295,S=D+(M<<6&4294967295|M>>>26),M=k+(D^(S|~F))+O[3]+2399980690&4294967295,k=S+(M<<10&4294967295|M>>>22),M=F+(S^(k|~D))+O[10]+4293915773&4294967295,F=k+(M<<15&4294967295|M>>>17),M=D+(k^(F|~S))+O[1]+2240044497&4294967295,D=F+(M<<21&4294967295|M>>>11),M=S+(F^(D|~k))+O[8]+1873313359&4294967295,S=D+(M<<6&4294967295|M>>>26),M=k+(D^(S|~F))+O[15]+4264355552&4294967295,k=S+(M<<10&4294967295|M>>>22),M=F+(S^(k|~D))+O[6]+2734768916&4294967295,F=k+(M<<15&4294967295|M>>>17),M=D+(k^(F|~S))+O[13]+1309151649&4294967295,D=F+(M<<21&4294967295|M>>>11),M=S+(F^(D|~k))+O[4]+4149444226&4294967295,S=D+(M<<6&4294967295|M>>>26),M=k+(D^(S|~F))+O[11]+3174756917&4294967295,k=S+(M<<10&4294967295|M>>>22),M=F+(S^(k|~D))+O[2]+718787259&4294967295,F=k+(M<<15&4294967295|M>>>17),M=D+(k^(F|~S))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(F+(M<<21&4294967295|M>>>11))&4294967295,_.g[2]=_.g[2]+F&4294967295,_.g[3]=_.g[3]+k&4294967295}i.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var D=S-this.blockSize,O=this.B,F=this.h,k=0;k<S;){if(F==0)for(;k<=D;)r(this,_,k),k+=this.blockSize;if(typeof _=="string"){for(;k<S;)if(O[F++]=_.charCodeAt(k++),F==this.blockSize){r(this,O),F=0;break}}else for(;k<S;)if(O[F++]=_[k++],F==this.blockSize){r(this,O),F=0;break}}this.h=F,this.o+=S},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var D=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=D&255,D/=256;for(this.u(_),_=Array(16),S=D=0;4>S;++S)for(var O=0;32>O;O+=8)_[D++]=this.g[S]>>>O&255;return _};function s(_,S){var D=a;return Object.prototype.hasOwnProperty.call(D,_)?D[_]:D[_]=S(_)}function o(_,S){this.h=S;for(var D=[],O=!0,F=_.length-1;0<=F;F--){var k=_[F]|0;O&&k==S||(D[F]=k,O=!1)}this.g=D}var a={};function l(_){return-128<=_&&128>_?s(_,function(S){return new o([S|0],0>S?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return v(c(-_));for(var S=[],D=1,O=0;_>=D;O++)S[O]=_/D|0,D*=4294967296;return new o(S,0)}function u(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return v(u(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(S,8)),O=d,F=0;F<_.length;F+=8){var k=Math.min(8,_.length-F),M=parseInt(_.substring(F,F+k),S);8>k?(k=c(Math.pow(S,k)),O=O.j(k).add(c(M))):(O=O.j(D),O=O.add(c(M)))}return O}var d=l(0),h=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-v(this).m();for(var _=0,S=1,D=0;D<this.g.length;D++){var O=this.i(D);_+=(0<=O?O:4294967296+O)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(g(this))return"0";if(m(this))return"-"+v(this).toString(_);for(var S=c(Math.pow(_,6)),D=this,O="";;){var F=T(D,S).g;D=C(D,F.j(S));var k=((0<D.g.length?D.g[0]:D.h)>>>0).toString(_);if(D=F,g(D))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function g(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function m(_){return _.h==-1}t.l=function(_){return _=C(this,_),m(_)?-1:g(_)?0:1};function v(_){for(var S=_.g.length,D=[],O=0;O<S;O++)D[O]=~_.g[O];return new o(D,~_.h).add(h)}t.abs=function(){return m(this)?v(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),D=[],O=0,F=0;F<=S;F++){var k=O+(this.i(F)&65535)+(_.i(F)&65535),M=(k>>>16)+(this.i(F)>>>16)+(_.i(F)>>>16);O=M>>>16,k&=65535,M&=65535,D[F]=M<<16|k}return new o(D,D[D.length-1]&-2147483648?-1:0)};function C(_,S){return _.add(v(S))}t.j=function(_){if(g(this)||g(_))return d;if(m(this))return m(_)?v(this).j(v(_)):v(v(this).j(_));if(m(_))return v(this.j(v(_)));if(0>this.l(p)&&0>_.l(p))return c(this.m()*_.m());for(var S=this.g.length+_.g.length,D=[],O=0;O<2*S;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<_.g.length;F++){var k=this.i(O)>>>16,M=this.i(O)&65535,ce=_.i(F)>>>16,xe=_.i(F)&65535;D[2*O+2*F]+=M*xe,b(D,2*O+2*F),D[2*O+2*F+1]+=k*xe,b(D,2*O+2*F+1),D[2*O+2*F+1]+=M*ce,b(D,2*O+2*F+1),D[2*O+2*F+2]+=k*ce,b(D,2*O+2*F+2)}for(O=0;O<S;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=S;O<2*S;O++)D[O]=0;return new o(D,0)};function b(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function E(_,S){this.g=_,this.h=S}function T(_,S){if(g(S))throw Error("division by zero");if(g(_))return new E(d,d);if(m(_))return S=T(v(_),S),new E(v(S.g),v(S.h));if(m(S))return S=T(_,v(S)),new E(v(S.g),S.h);if(30<_.g.length){if(m(_)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var D=h,O=S;0>=O.l(_);)D=P(D),O=P(O);var F=x(D,1),k=x(O,1);for(O=x(O,2),D=x(D,2);!g(O);){var M=k.add(O);0>=M.l(_)&&(F=F.add(D),k=M),O=x(O,1),D=x(D,1)}return S=C(_,F.j(S)),new E(F,S)}for(F=d;0<=_.l(S);){for(D=Math.max(1,Math.floor(_.m()/S.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=c(D),M=k.j(S);m(M)||0<M.l(_);)D-=O,k=c(D),M=k.j(S);g(k)&&(k=h),F=F.add(k),_=C(_,M)}return new E(F,_)}t.A=function(_){return T(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)&_.i(O);return new o(D,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)|_.i(O);return new o(D,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)^_.i(O);return new o(D,this.h^_.h)};function P(_){for(var S=_.g.length+1,D=[],O=0;O<S;O++)D[O]=_.i(O)<<1|_.i(O-1)>>>31;return new o(D,_.h)}function x(_,S){var D=S>>5;S%=32;for(var O=_.g.length-D,F=[],k=0;k<O;k++)F[k]=0<S?_.i(k+D)>>>S|_.i(k+D+1)<<32-S:_.i(k+D);return new o(F,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,RP=T5.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,hu=T5.Integer=o}).apply(typeof D5<"u"?D5:typeof self<"u"?self:typeof window<"u"?window:{});var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ql={};var IP,xP,Xp,FP,qy,fE,AP,PP,MP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,w){return f==Array.prototype||f==Object.prototype||(f[y]=w.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hE=="object"&&hE];for(var y=0;y<f.length;++y){var w=f[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(f,y){if(y)e:{var w=i;f=f.split(".");for(var I=0;I<f.length-1;I++){var V=f[I];if(!(V in w))break e;w=w[V]}f=f[f.length-1],I=w[f],y=y(I),y!=I&&y!=null&&e(w,f,{configurable:!0,writable:!0,value:y})}}function s(f,y){f instanceof String&&(f+="");var w=0,I=!1,V={next:function(){if(!I&&w<f.length){var Y=w++;return{value:y(Y,f[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(f){return f||function(){return s(this,function(y,w){return w})}});var o=o||{},a=this||self;function l(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function c(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function u(f,y,w){return f.call.apply(f.bind,arguments)}function d(f,y,w){if(!f)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),f.apply(y,V)}}return function(){return f.apply(y,arguments)}}function h(f,y,w){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(f,y){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function g(f,y){function w(){}w.prototype=y.prototype,f.aa=y.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(I,V,Y){for(var he=Array(arguments.length-2),un=2;un<arguments.length;un++)he[un-2]=arguments[un];return y.prototype[V].apply(I,he)}}function m(f){let y=f.length;if(0<y){let w=Array(y);for(let I=0;I<y;I++)w[I]=f[I];return w}return[]}function v(f,y){for(let w=1;w<arguments.length;w++){let I=arguments[w];if(l(I)){let V=f.length||0,Y=I.length||0;f.length=V+Y;for(let he=0;he<Y;he++)f[V+he]=I[he]}else f.push(I)}}class C{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(f){return/^[\s\xa0]*$/.test(f)}function E(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function T(f){return T[" "](f),f}T[" "]=function(){};var P=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function x(f,y,w){for(let I in f)y.call(w,f[I],I,f)}function _(f,y){for(let w in f)y.call(void 0,f[w],w,f)}function S(f){let y={};for(let w in f)y[w]=f[w];return y}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,y){let w,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(w in I)f[w]=I[w];for(let Y=0;Y<D.length;Y++)w=D[Y],Object.prototype.hasOwnProperty.call(I,w)&&(f[w]=I[w])}}function F(f){var y=1;f=f.split(":");let w=[];for(;0<y&&f.length;)w.push(f.shift()),y--;return f.length&&w.push(f.join(":")),w}function k(f){a.setTimeout(()=>{throw f},0)}function M(){var f=cn;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,w){let I=xe.get();I.set(y,w),this.h?this.h.next=I:this.g=I,this.h=I}}var xe=new C(()=>new Ue,f=>f.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,St=!1,cn=new ce,Is=()=>{let f=a.Promise.resolve(void 0);Ce=()=>{f.then(jo)}};var jo=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(w){k(w)}var y=xe;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}St=!1};function Sn(){this.s=this.s,this.C=this.C}Sn.prototype.s=!1,Sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Bt(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Bt.prototype.h=function(){this.defaultPrevented=!0};var Dl=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return f}();function ci(f,y){if(Bt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(P){e:{try{T(y.nodeName);var V=!0;break e}catch{}V=!1}V||(y=null)}}else w=="mouseover"?y=f.fromElement:w=="mouseout"&&(y=f.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Wo[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ci.aa.h.call(this)}}g(ci,Bt);var Wo={2:"touch",3:"pen",4:"mouse"};ci.prototype.h=function(){ci.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Xn="closure_listenable_"+(1e6*Math.random()|0),rs=0;function xa(f,y,w,I,V){this.listener=f,this.proxy=null,this.src=y,this.type=w,this.capture=!!I,this.ha=V,this.key=++rs,this.da=this.fa=!1}function zo(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Xt(f){this.src=f,this.g={},this.h=0}Xt.prototype.add=function(f,y,w,I,V){var Y=f.toString();f=this.g[Y],f||(f=this.g[Y]=[],this.h++);var he=Fa(f,y,I,V);return-1<he?(y=f[he],w||(y.fa=!1)):(y=new xa(y,this.src,Y,!!I,V),y.fa=w,f.push(y)),y};function pd(f,y){var w=y.type;if(w in f.g){var I=f.g[w],V=Array.prototype.indexOf.call(I,y,void 0),Y;(Y=0<=V)&&Array.prototype.splice.call(I,V,1),Y&&(zo(y),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Fa(f,y,w,I){for(var V=0;V<f.length;++V){var Y=f[V];if(!Y.da&&Y.listener==y&&Y.capture==!!w&&Y.ha==I)return V}return-1}var dv="closure_lm_"+(1e6*Math.random()|0),hv={};function fv(f,y,w,I,V){if(I&&I.once)return J0(f,y,w,I,V);if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)fv(f,y[Y],w,I,V);return null}return w=Gf(w),f&&f[Xn]?f.K(y,w,c(I)?!!I.capture:!!I,V):pv(f,y,w,!1,I,V)}function pv(f,y,w,I,V,Y){if(!y)throw Error("Invalid event type");var he=c(V)?!!V.capture:!!V,un=gd(f);if(un||(f[dv]=un=new Xt(f)),w=un.add(y,w,I,he,Y),w.proxy)return w;if(I=TI(),w.proxy=I,I.src=f,I.listener=w,f.addEventListener)Dl||(V=he),V===void 0&&(V=!1),f.addEventListener(y.toString(),I,V);else if(f.attachEvent)f.attachEvent(gv(y.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function TI(){function f(w){return y.call(f.src,f.listener,w)}let y=eS;return f}function J0(f,y,w,I,V){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)J0(f,y[Y],w,I,V);return null}return w=Gf(w),f&&f[Xn]?f.L(y,w,c(I)?!!I.capture:!!I,V):pv(f,y,w,!0,I,V)}function Aa(f,y,w,I,V){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Aa(f,y[Y],w,I,V);else I=c(I)?!!I.capture:!!I,w=Gf(w),f&&f[Xn]?(f=f.i,y=String(y).toString(),y in f.g&&(Y=f.g[y],w=Fa(Y,w,I,V),-1<w&&(zo(Y[w]),Array.prototype.splice.call(Y,w,1),Y.length==0&&(delete f.g[y],f.h--)))):f&&(f=gd(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Fa(y,w,I,V)),(w=-1<f?y[f]:null)&&xc(w))}function xc(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Xn])pd(y.i,f);else{var w=f.type,I=f.proxy;y.removeEventListener?y.removeEventListener(w,I,f.capture):y.detachEvent?y.detachEvent(gv(w),I):y.addListener&&y.removeListener&&y.removeListener(I),(w=gd(y))?(pd(w,f),w.h==0&&(w.src=null,y[dv]=null)):zo(f)}}}function gv(f){return f in hv?hv[f]:hv[f]="on"+f}function eS(f,y){if(f.da)f=!0;else{y=new ci(y,this);var w=f.listener,I=f.ha||f.src;f.fa&&xc(f),f=w.call(I,y)}return f}function gd(f){return f=f[dv],f instanceof Xt?f:null}var Bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(f){return typeof f=="function"?f:(f[Bf]||(f[Bf]=function(y){return f.handleEvent(y)}),f[Bf])}function _i(){Sn.call(this),this.i=new Xt(this),this.M=this,this.F=null}g(_i,Sn),_i.prototype[Xn]=!0,_i.prototype.removeEventListener=function(f,y,w,I){Aa(this,f,y,w,I)};function Ni(f,y){var w,I=f.F;if(I)for(w=[];I;I=I.F)w.push(I);if(f=f.M,I=y.type||y,typeof y=="string")y=new Bt(y,f);else if(y instanceof Bt)y.target=y.target||f;else{var V=y;y=new Bt(I,f),O(y,V)}if(V=!0,w)for(var Y=w.length-1;0<=Y;Y--){var he=y.g=w[Y];V=tS(he,I,!0,y)&&V}if(he=y.g=f,V=tS(he,I,!0,y)&&V,V=tS(he,I,!1,y)&&V,w)for(Y=0;Y<w.length;Y++)he=y.g=w[Y],V=tS(he,I,!1,y)&&V}_i.prototype.N=function(){if(_i.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var w=f.g[y],I=0;I<w.length;I++)zo(w[I]);delete f.g[y],f.h--}}this.F=null},_i.prototype.K=function(f,y,w,I){return this.i.add(String(f),y,!1,w,I)},_i.prototype.L=function(f,y,w,I){return this.i.add(String(f),y,!0,w,I)};function tS(f,y,w,I){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var V=!0,Y=0;Y<y.length;++Y){var he=y[Y];if(he&&!he.da&&he.capture==w){var un=he.listener,Qi=he.ha||he.src;he.fa&&pd(f.i,he),V=un.call(Qi,I)!==!1&&V}}return V&&!I.defaultPrevented}function XG(f,y,w){if(typeof f=="function")w&&(f=h(f,w));else if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function $G(f){f.g=XG(()=>{f.g=null,f.i&&(f.i=!1,$G(f))},f.l);let y=f.h;f.h=null,f.m.apply(null,y)}class Cne extends Sn{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mv(f){Sn.call(this),this.h=f,this.g={}}g(mv,Sn);var ZG=[];function JG(f){x(f.g,function(y,w){this.g.hasOwnProperty(w)&&xc(y)},f),f.g={}}mv.prototype.N=function(){mv.aa.N.call(this),JG(this)},mv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var RI=a.JSON.stringify,wne=a.JSON.parse,Sne=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function II(){}II.prototype.h=null;function eH(f){return f.h||(f.h=f.i())}function tH(){}var vv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xI(){Bt.call(this,"d")}g(xI,Bt);function FI(){Bt.call(this,"c")}g(FI,Bt);var md={},nH=null;function nS(){return nH=nH||new _i}md.La="serverreachability";function iH(f){Bt.call(this,md.La,f)}g(iH,Bt);function yv(f){let y=nS();Ni(y,new iH(y))}md.STAT_EVENT="statevent";function rH(f,y){Bt.call(this,md.STAT_EVENT,f),this.stat=y}g(rH,Bt);function xr(f){let y=nS();Ni(y,new rH(y,f))}md.Ma="timingevent";function sH(f,y){Bt.call(this,md.Ma,f),this.size=y}g(sH,Bt);function Cv(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function wv(){this.g=!0}wv.prototype.xa=function(){this.g=!1};function bne(f,y,w,I,V,Y){f.info(function(){if(f.g)if(Y)for(var he="",un=Y.split("&"),Qi=0;Qi<un.length;Qi++){var Kt=un[Qi].split("=");if(1<Kt.length){var ur=Kt[0];Kt=Kt[1];var dr=ur.split("_");he=2<=dr.length&&dr[1]=="type"?he+(ur+"="+Kt+"&"):he+(ur+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+y+`
`+w+`
`+he})}function _ne(f,y,w,I,V,Y,he){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+y+`
`+w+`
`+Y+" "+he})}function Hf(f,y,w,I){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dne(f,w)+(I?" "+I:"")})}function Ene(f,y){f.info(function(){return"TIMEOUT: "+y})}wv.prototype.info=function(){};function Dne(f,y){if(!f.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var I=w[f];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var Y=V[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<V.length;he++)V[he]=""}}}}return RI(w)}catch{return y}}var iS={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oH={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},AI;function rS(){}g(rS,II),rS.prototype.g=function(){return new XMLHttpRequest},rS.prototype.i=function(){return{}},AI=new rS;function Fc(f,y,w,I){this.j=f,this.i=y,this.l=w,this.R=I||1,this.U=new mv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aH}function aH(){this.i=null,this.g="",this.h=!1}var lH={},PI={};function MI(f,y,w){f.L=1,f.v=lS(Tl(y)),f.m=w,f.P=!0,cH(f,null)}function cH(f,y){f.F=Date.now(),sS(f),f.A=Tl(f.v);var w=f.A,I=f.R;Array.isArray(I)||(I=[String(I)]),_H(w.i,"t",I),f.C=0,w=f.j.J,f.h=new aH,f.g=HH(f.j,w?y:null,!f.m),0<f.O&&(f.M=new Cne(h(f.Y,f,f.g),f.O)),y=f.U,w=f.g,I=f.ca;var V="readystatechange";Array.isArray(V)||(V&&(ZG[0]=V.toString()),V=ZG);for(var Y=0;Y<V.length;Y++){var he=fv(w,V[Y],I||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),yv(),bne(f.i,f.u,f.A,f.l,f.R,f.m)}Fc.prototype.ca=function(f){f=f.target;let y=this.M;y&&Rl(f)==3?y.j():this.Y(f)},Fc.prototype.Y=function(f){try{if(f==this.g)e:{let dr=Rl(this.g);var y=this.g.Ba();let Wf=this.g.Z();if(!(3>dr)&&(dr!=3||this.g&&(this.h.h||this.g.oa()||FH(this.g)))){this.J||dr!=4||y==7||(y==8||0>=Wf?yv(3):yv(2)),OI(this);var w=this.g.Z();this.X=w;t:if(uH(this)){var I=FH(this.g);f="";var V=I.length,Y=Rl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vd(this),Sv(this);var he="";break t}this.h.i=new a.TextDecoder}for(y=0;y<V;y++)this.h.h=!0,f+=this.h.i.decode(I[y],{stream:!(Y&&y==V-1)});I.length=0,this.h.g+=f,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=w==200,_ne(this.i,this.u,this.A,this.l,this.R,dr,w),this.o){if(this.T&&!this.K){t:{if(this.g){var un,Qi=this.g;if((un=Qi.g?Qi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(un)){var Kt=un;break t}}Kt=null}if(w=Kt)Hf(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kI(this,w);else{this.o=!1,this.s=3,xr(12),vd(this),Sv(this);break e}}if(this.P){w=!0;let qo;for(;!this.J&&this.C<he.length;)if(qo=Tne(this,he),qo==PI){dr==4&&(this.s=4,xr(14),w=!1),Hf(this.i,this.l,null,"[Incomplete Response]");break}else if(qo==lH){this.s=4,xr(15),Hf(this.i,this.l,he,"[Invalid Chunk]"),w=!1;break}else Hf(this.i,this.l,qo,null),kI(this,qo);if(uH(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dr!=4||he.length!=0||this.h.h||(this.s=1,xr(16),w=!1),this.o=this.o&&w,!w)Hf(this.i,this.l,he,"[Invalid Chunked Response]"),vd(this),Sv(this);else if(0<he.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),HI(ur),ur.M=!0,xr(11))}}else Hf(this.i,this.l,he,null),kI(this,he);dr==4&&vd(this),this.o&&!this.J&&(dr==4?LH(this.j,this):(this.o=!1,sS(this)))}else jne(this.g),w==400&&0<he.indexOf("Unknown SID")?(this.s=3,xr(12)):(this.s=0,xr(13)),vd(this),Sv(this)}}}catch{}finally{}};function uH(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Tne(f,y){var w=f.C,I=y.indexOf(`
`,w);return I==-1?PI:(w=Number(y.substring(w,I)),isNaN(w)?lH:(I+=1,I+w>y.length?PI:(y=y.slice(I,I+w),f.C=I+w,y)))}Fc.prototype.cancel=function(){this.J=!0,vd(this)};function sS(f){f.S=Date.now()+f.I,dH(f,f.I)}function dH(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Cv(h(f.ba,f),y)}function OI(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Fc.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(Ene(this.i,this.A),this.L!=2&&(yv(),xr(17)),vd(this),this.s=2,Sv(this)):dH(this,this.S-f)};function Sv(f){f.j.G==0||f.J||LH(f.j,f)}function vd(f){OI(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,JG(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function kI(f,y){try{var w=f.j;if(w.G!=0&&(w.g==f||NI(w.h,f))){if(!f.K&&NI(w.h,f)&&w.G==3){try{var I=w.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)fS(w),dS(w);else break e;GI(w),xr(18)}}else w.za=V[1],0<w.za-w.T&&37500>V[2]&&w.F&&w.v==0&&!w.C&&(w.C=Cv(h(w.Za,w),6e3));if(1>=pH(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Cd(w,11)}else if((f.K||w.g==f)&&fS(w),!b(y))for(V=w.Da.g.parse(y),y=0;y<V.length;y++){let Kt=V[y];if(w.T=Kt[0],Kt=Kt[1],w.G==2)if(Kt[0]=="c"){w.K=Kt[1],w.ia=Kt[2];let ur=Kt[3];ur!=null&&(w.la=ur,w.j.info("VER="+w.la));let dr=Kt[4];dr!=null&&(w.Aa=dr,w.j.info("SVER="+w.Aa));let Wf=Kt[5];Wf!=null&&typeof Wf=="number"&&0<Wf&&(I=1.5*Wf,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;let qo=f.g;if(qo){let gS=qo.g?qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gS){var Y=I.h;Y.g||gS.indexOf("spdy")==-1&&gS.indexOf("quic")==-1&&gS.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(LI(Y,Y.h),Y.h=null))}if(I.D){let UI=qo.g?qo.g.getResponseHeader("X-HTTP-Session-Id"):null;UI&&(I.ya=UI,bn(I.I,I.D,UI))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var he=f;if(I.qa=GH(I,I.J?I.ia:null,I.W),he.K){gH(I.h,he);var un=he,Qi=I.L;Qi&&(un.I=Qi),un.B&&(OI(un),sS(un)),I.g=he}else kH(I);0<w.i.length&&hS(w)}else Kt[0]!="stop"&&Kt[0]!="close"||Cd(w,7);else w.G==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Cd(w,7):BI(w):Kt[0]!="noop"&&w.l&&w.l.ta(Kt),w.v=0)}}yv(4)}catch{}}var Rne=class{constructor(f,y){this.g=f,this.map=y}};function hH(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fH(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function pH(f){return f.h?1:f.g?f.g.size:0}function NI(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function LI(f,y){f.g?f.g.add(y):f.h=y}function gH(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}hH.prototype.cancel=function(){if(this.i=mH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function mH(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(let w of f.g.values())y=y.concat(w.D);return y}return m(f.i)}function Ine(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var y=[],w=f.length,I=0;I<w;I++)y.push(f[I]);return y}y=[],w=0;for(I in f)y[w++]=f[I];return y}function xne(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var y=[];f=f.length;for(var w=0;w<f;w++)y.push(w);return y}y=[],w=0;for(let I in f)y[w++]=I;return y}}}function vH(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var w=xne(f),I=Ine(f),V=I.length,Y=0;Y<V;Y++)y.call(void 0,I[Y],w&&w[Y],f)}var yH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fne(f,y){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var I=f[w].indexOf("="),V=null;if(0<=I){var Y=f[w].substring(0,I);V=f[w].substring(I+1)}else Y=f[w];y(Y,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function yd(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof yd){this.h=f.h,oS(this,f.j),this.o=f.o,this.g=f.g,aS(this,f.s),this.l=f.l;var y=f.i,w=new Ev;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),CH(this,w),this.m=f.m}else f&&(y=String(f).match(yH))?(this.h=!1,oS(this,y[1]||"",!0),this.o=bv(y[2]||""),this.g=bv(y[3]||"",!0),aS(this,y[4]),this.l=bv(y[5]||"",!0),CH(this,y[6]||"",!0),this.m=bv(y[7]||"")):(this.h=!1,this.i=new Ev(null,this.h))}yd.prototype.toString=function(){var f=[],y=this.j;y&&f.push(_v(y,wH,!0),":");var w=this.g;return(w||y=="file")&&(f.push("//"),(y=this.o)&&f.push(_v(y,wH,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(_v(w,w.charAt(0)=="/"?Mne:Pne,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",_v(w,kne)),f.join("")};function Tl(f){return new yd(f)}function oS(f,y,w){f.j=w?bv(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function aS(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function CH(f,y,w){y instanceof Ev?(f.i=y,Nne(f.i,f.h)):(w||(y=_v(y,One)),f.i=new Ev(y,f.h))}function bn(f,y,w){f.i.set(y,w)}function lS(f){return bn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function bv(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function _v(f,y,w){return typeof f=="string"?(f=encodeURI(f).replace(y,Ane),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ane(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var wH=/[#\/\?@]/g,Pne=/[#\?:]/g,Mne=/[#\?]/g,One=/[#\?@]/g,kne=/#/g;function Ev(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Ac(f){f.g||(f.g=new Map,f.h=0,f.i&&Fne(f.i,function(y,w){f.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Ev.prototype,t.add=function(f,y){Ac(this),this.i=null,f=Uf(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(y),this.h+=1,this};function SH(f,y){Ac(f),y=Uf(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function bH(f,y){return Ac(f),y=Uf(f,y),f.g.has(y)}t.forEach=function(f,y){Ac(this),this.g.forEach(function(w,I){w.forEach(function(V){f.call(y,V,I,this)},this)},this)},t.na=function(){Ac(this);let f=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let I=0;I<y.length;I++){let V=f[I];for(let Y=0;Y<V.length;Y++)w.push(y[I])}return w},t.V=function(f){Ac(this);let y=[];if(typeof f=="string")bH(this,f)&&(y=y.concat(this.g.get(Uf(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)y=y.concat(f[w])}return y},t.set=function(f,y){return Ac(this),this.i=null,f=Uf(this,f),bH(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},t.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function _H(f,y,w){SH(f,y),0<w.length&&(f.i=null,f.g.set(Uf(f,y),m(w)),f.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var I=y[w];let Y=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var V=Y;he[I]!==""&&(V+="="+encodeURIComponent(String(he[I]))),f.push(V)}}return this.i=f.join("&")};function Uf(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Nne(f,y){y&&!f.j&&(Ac(f),f.i=null,f.g.forEach(function(w,I){var V=I.toLowerCase();I!=V&&(SH(this,I),_H(this,V,w))},f)),f.j=y}function Lne(f,y){let w=new wv;if(a.Image){let I=new Image;I.onload=p(Pc,w,"TestLoadImage: loaded",!0,y,I),I.onerror=p(Pc,w,"TestLoadImage: error",!1,y,I),I.onabort=p(Pc,w,"TestLoadImage: abort",!1,y,I),I.ontimeout=p(Pc,w,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else y(!1)}function Vne(f,y){let w=new wv,I=new AbortController,V=setTimeout(()=>{I.abort(),Pc(w,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:I.signal}).then(Y=>{clearTimeout(V),Y.ok?Pc(w,"TestPingServer: ok",!0,y):Pc(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),Pc(w,"TestPingServer: error",!1,y)})}function Pc(f,y,w,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(w)}catch{}}function Bne(){this.g=new Sne}function Gne(f,y,w){let I=w||"";try{vH(f,function(V,Y){let he=V;c(V)&&(he=RI(V)),y.push(I+Y+"="+encodeURIComponent(he))})}catch(V){throw y.push(I+"type="+encodeURIComponent("_badmap")),V}}function Dv(f){this.l=f.Ub||null,this.j=f.eb||!1}g(Dv,II),Dv.prototype.g=function(){return new cS(this.l,this.j)},Dv.prototype.i=function(f){return function(){return f}}({});function cS(f,y){_i.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(cS,_i),t=cS.prototype,t.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Rv(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tv(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Rv(this)),this.g&&(this.readyState=3,Rv(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;EH(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function EH(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Tv(this):Rv(this),this.readyState==3&&EH(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Tv(this))},t.Qa=function(f){this.g&&(this.response=f,Tv(this))},t.ga=function(){this.g&&Tv(this)};function Tv(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Rv(f)}t.setRequestHeader=function(f,y){this.u.append(f,y)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=y.next();return f.join(`\r
`)};function Rv(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(cS.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function DH(f){let y="";return x(f,function(w,I){y+=I,y+=":",y+=w,y+=`\r
`}),y}function VI(f,y,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=DH(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):bn(f,y,w))}function Un(f){_i.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Un,_i);var Hne=/^https?$/i,Une=["POST","PUT"];t=Un.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,y,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():AI.g(),this.v=this.o?eH(this.o):eH(AI),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Y){TH(this,Y);return}if(f=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)w.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let Y of I.keys())w.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),V=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Une,y,void 0))||I||V||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Y,he]of w)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xH(this),this.u=!0,this.g.send(f),this.u=!1}catch(Y){TH(this,Y)}};function TH(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,RH(f),uS(f)}function RH(f){f.A||(f.A=!0,Ni(f,"complete"),Ni(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ni(this,"complete"),Ni(this,"abort"),uS(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uS(this,!0)),Un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?IH(this):this.bb())},t.bb=function(){IH(this)};function IH(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Rl(f)!=4||f.Z()!=2)){if(f.u&&Rl(f)==4)XG(f.Ea,0,f);else if(Ni(f,"readystatechange"),Rl(f)==4){f.h=!1;try{let he=f.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var I;if(I=he===0){var V=String(f.D).match(yH)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!Hne.test(V?V.toLowerCase():"")}w=I}if(w)Ni(f,"complete"),Ni(f,"success");else{f.m=6;try{var Y=2<Rl(f)?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.Z()+"]",RH(f)}}finally{uS(f)}}}}function uS(f,y){if(f.g){xH(f);let w=f.g,I=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Ni(f,"ready");try{w.onreadystatechange=I}catch{}}}function xH(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Rl(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Rl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),wne(y)}};function FH(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function jne(f){let y={};f=(f.g&&2<=Rl(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(b(f[I]))continue;var w=F(f[I]);let V=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let Y=y[V]||[];y[V]=Y,Y.push(w)}_(y,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Iv(f,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||y}function AH(f){this.Aa=0,this.i=[],this.j=new wv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Iv("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Iv("baseRetryDelayMs",5e3,f),this.cb=Iv("retryDelaySeedMs",1e4,f),this.Wa=Iv("forwardChannelMaxRetries",2,f),this.wa=Iv("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new hH(f&&f.concurrentRequestLimit),this.Da=new Bne,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=AH.prototype,t.la=8,t.G=1,t.connect=function(f,y,w,I){xr(0),this.W=f,this.H=y||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=GH(this,null,this.W),hS(this)};function BI(f){if(PH(f),f.G==3){var y=f.U++,w=Tl(f.I);if(bn(w,"SID",f.K),bn(w,"RID",y),bn(w,"TYPE","terminate"),xv(f,w),y=new Fc(f,f.j,y),y.L=2,y.v=lS(Tl(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.v,w=!0),w||(y.g=HH(y.j,null),y.g.ea(y.v)),y.F=Date.now(),sS(y)}BH(f)}function dS(f){f.g&&(HI(f),f.g.cancel(),f.g=null)}function PH(f){dS(f),f.u&&(a.clearTimeout(f.u),f.u=null),fS(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function hS(f){if(!fH(f.h)&&!f.s){f.s=!0;var y=f.Ga;Ce||Is(),St||(Ce(),St=!0),cn.add(y,f),f.B=0}}function Wne(f,y){return pH(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Cv(h(f.Ga,f,y),VH(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let V=new Fc(this,this.j,f),Y=this.o;if(this.S&&(Y?(Y=S(Y),O(Y,this.S)):Y=this.S),this.m!==null||this.O||(V.H=Y,Y=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=OH(this,V,y),w=Tl(this.I),bn(w,"RID",f),bn(w,"CVER",22),this.D&&bn(w,"X-HTTP-Session-Id",this.D),xv(this,w),Y&&(this.O?y="headers="+encodeURIComponent(String(DH(Y)))+"&"+y:this.m&&VI(w,this.m,Y)),LI(this.h,V),this.Ua&&bn(w,"TYPE","init"),this.P?(bn(w,"$req",y),bn(w,"SID","null"),V.T=!0,MI(V,w,null)):MI(V,w,y),this.G=2}}else this.G==3&&(f?MH(this,f):this.i.length==0||fH(this.h)||MH(this))};function MH(f,y){var w;y?w=y.l:w=f.U++;let I=Tl(f.I);bn(I,"SID",f.K),bn(I,"RID",w),bn(I,"AID",f.T),xv(f,I),f.m&&f.o&&VI(I,f.m,f.o),w=new Fc(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),y&&(f.i=y.D.concat(f.i)),y=OH(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),LI(f.h,w),MI(w,I,y)}function xv(f,y){f.H&&x(f.H,function(w,I){bn(y,I,w)}),f.l&&vH({},function(w,I){bn(y,I,w)})}function OH(f,y,w){w=Math.min(f.i.length,w);var I=f.l?h(f.l.Na,f.l,f):null;e:{var V=f.i;let Y=-1;for(;;){let he=["count="+w];Y==-1?0<w?(Y=V[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let un=!0;for(let Qi=0;Qi<w;Qi++){let Kt=V[Qi].g,ur=V[Qi].map;if(Kt-=Y,0>Kt)Y=Math.max(0,V[Qi].g-100),un=!1;else try{Gne(ur,he,"req"+Kt+"_")}catch{I&&I(ur)}}if(un){I=he.join("&");break e}}}return f=f.i.splice(0,w),y.D=f,I}function kH(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Ce||Is(),St||(Ce(),St=!0),cn.add(y,f),f.v=0}}function GI(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Cv(h(f.Fa,f),VH(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,NH(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Cv(h(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xr(10),dS(this),NH(this))};function HI(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function NH(f){f.g=new Fc(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=Tl(f.qa);bn(y,"RID","rpc"),bn(y,"SID",f.K),bn(y,"AID",f.T),bn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&bn(y,"TO",f.ja),bn(y,"TYPE","xmlhttp"),xv(f,y),f.m&&f.o&&VI(y,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=lS(Tl(y)),w.m=null,w.P=!0,cH(w,f)}t.Za=function(){this.C!=null&&(this.C=null,dS(this),GI(this),xr(19))};function fS(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function LH(f,y){var w=null;if(f.g==y){fS(f),HI(f),f.g=null;var I=2}else if(NI(f.h,y))w=y.D,gH(f.h,y),I=1;else return;if(f.G!=0){if(y.o)if(I==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var V=f.B;I=nS(),Ni(I,new sH(I,w)),hS(f)}else kH(f);else if(V=y.s,V==3||V==0&&0<y.X||!(I==1&&Wne(f,y)||I==2&&GI(f)))switch(w&&0<w.length&&(y=f.h,y.i=y.i.concat(w)),V){case 1:Cd(f,5);break;case 4:Cd(f,10);break;case 3:Cd(f,6);break;default:Cd(f,2)}}}function VH(f,y){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*y}function Cd(f,y){if(f.j.info("Error code "+y),y==2){var w=h(f.fb,f),I=f.Xa;let V=!I;I=new yd(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||oS(I,"https"),lS(I),V?Lne(I.toString(),w):Vne(I.toString(),w)}else xr(2);f.G=0,f.l&&f.l.sa(y),BH(f),PH(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),xr(2)):(this.j.info("Failed to ping google.com"),xr(1))};function BH(f){if(f.G=0,f.ka=[],f.l){let y=mH(f.h);(y.length!=0||f.i.length!=0)&&(v(f.ka,y),v(f.ka,f.i),f.h.i.length=0,m(f.i),f.i.length=0),f.l.ra()}}function GH(f,y,w){var I=w instanceof yd?Tl(w):new yd(w);if(I.g!="")y&&(I.g=y+"."+I.g),aS(I,I.s);else{var V=a.location;I=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;var Y=new yd(null);I&&oS(Y,I),y&&(Y.g=y),V&&aS(Y,V),w&&(Y.l=w),I=Y}return w=f.D,y=f.ya,w&&y&&bn(I,w,y),bn(I,"VER",f.la),xv(f,I),I}function HH(f,y,w){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Un(new Dv({eb:w})):new Un(f.pa),y.Ha(f.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function UH(){}t=UH.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pS(){}pS.prototype.g=function(f,y){return new xs(f,y)};function xs(f,y){_i.call(this),this.g=new AH(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!b(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!b(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new jf(this)}g(xs,_i),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){BI(this.g)},xs.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=RI(f),f=w);y.i.push(new Rne(y.Ya++,f)),y.G==3&&hS(y)},xs.prototype.N=function(){this.g.l=null,delete this.j,BI(this.g),delete this.g,xs.aa.N.call(this)};function jH(f){xI.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(let w in y){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}g(jH,xI);function WH(){FI.call(this),this.status=1}g(WH,FI);function jf(f){this.g=f}g(jf,UH),jf.prototype.ua=function(){Ni(this.g,"a")},jf.prototype.ta=function(f){Ni(this.g,new jH(f))},jf.prototype.sa=function(f){Ni(this.g,new WH)},jf.prototype.ra=function(){Ni(this.g,"b")},pS.prototype.createWebChannel=pS.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,MP=ql.createWebChannelTransport=function(){return new pS},PP=ql.getStatEventTarget=function(){return nS()},AP=ql.Event=md,fE=ql.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},iS.NO_ERROR=0,iS.TIMEOUT=8,iS.HTTP_ERROR=6,qy=ql.ErrorCode=iS,oH.COMPLETE="complete",FP=ql.EventType=oH,tH.EventType=vv,vv.OPEN="a",vv.CLOSE="b",vv.ERROR="c",vv.MESSAGE="d",_i.prototype.listen=_i.prototype.K,Xp=ql.WebChannel=tH,xP=ql.FetchXmlHttpFactory=Dv,Un.prototype.listenOnce=Un.prototype.L,Un.prototype.getLastError=Un.prototype.Ka,Un.prototype.getLastErrorCode=Un.prototype.Ba,Un.prototype.getStatus=Un.prototype.Z,Un.prototype.getResponseJson=Un.prototype.Oa,Un.prototype.getResponseText=Un.prototype.oa,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Ha,IP=ql.XhrIo=Un}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var R5="@firebase/firestore";var mi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");var Rg="10.12.5";var Cu=new ka("@firebase/firestore");function tg(){return Cu.logLevel}function VO(t){Cu.setLogLevel(t)}function ie(t,...e){if(Cu.logLevel<=ss.DEBUG){let n=e.map(BO);Cu.debug(`Firestore (${Rg}): ${t}`,...n)}}function ti(t,...e){if(Cu.logLevel<=ss.ERROR){let n=e.map(BO);Cu.error(`Firestore (${Rg}): ${t}`,...n)}}function Co(t,...e){if(Cu.logLevel<=ss.WARN){let n=e.map(BO);Cu.warn(`Firestore (${Rg}): ${t}`,...n)}}function BO(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Ee(t="Unexpected state"){let e=`FIRESTORE (${Rg}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function Ae(t,e){t||Ee()}function I8(t,e){t||Ee()}function ge(t,e){return t}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends Ko{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vi=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var EE=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},VP=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mi.UNAUTHENTICATED))}shutdown(){}},BP=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},GP=class{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),s=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vi,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>N(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vi)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new EE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new mi(e)}},HP=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=mi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},UP=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new HP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jP=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},WP=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new jP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Ope(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var DE=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Ope(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function lt(t,e){return t<e?-1:t>e?1:0}function ug(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function x8(t){return t+"\0"}var Cn=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var He=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Cn(0,0))}static max(){return new t(new Cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var TE=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ee(),i===void 0?i=e.length-n:i>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ut=class t extends TE{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},kpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=class t extends TE{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return kpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var me=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ut.fromString(e))}static fromName(e){return new t(Ut.fromString(e).popFirst(5))}static empty(){return new t(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ut(e.slice()))}};var dg=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function zP(t){return t.fields.find(e=>e.kind===2)}function eh(t){return t.fields.filter(e=>e.kind!==2)}dg.UNKNOWN_ID=-1;var ag=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var rC=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,wo.min())}};function F8(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=He.fromTimestamp(i===1e9?new Cn(n+1,0):new Cn(n,i));return new wo(r,me.empty(),e)}function A8(t){return new wo(t.readTime,t.key,-1)}var wo=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(He.min(),me.empty(),-1)}static max(){return new t(He.max(),me.empty(),-1)}};function GO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}var P8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",RE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xu(t){return N(this,null,function*(){if(t.code!==z.FAILED_PRECONDITION||t.message!==P8)throw t;ie("LocalStore","Unexpectedly lost primary lease")})}var H=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var IE=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new vi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new oh(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=HO(i.target.error);this.V.reject(new oh(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new oh(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new KP(n)}},wu=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Fv())===12.2&&ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),th(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!oo())return!1;if(t.C())return!0;let e=Fv(),n=t.S(e),i=0<n&&n<10,r=M8(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return N(this,null,function*(){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new oh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new te(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new te(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new oh(e,o))},r.onupgradeneeded=s=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return N(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=IE.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<3;if(ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function M8(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var qP=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return th(this.B.delete())}},oh=class extends te{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Fu(t){return t.name==="IndexedDbTransactionError"}var KP=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(ie("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),th(i)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),th(this.store.add(e))}get(e){return th(this.store.get(e)).next(n=>(n===void 0&&(n=null),ie("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),th(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),th(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new H((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new H((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,n){ie("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new H((i,r)=>{n.onerror=s=>{let o=HO(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,n){let i=[];return new H((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let l=new qP(a),c=n(a.primaryKey,a.value,l);if(c instanceof H){let u=c.catch(d=>(l.done(),H.reject(d)));i.push(u)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>H.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function th(t){return new H((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=HO(i.target.error);n(r)}})}var I5=!1;function HO(t){let e=wu.S(Fv());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I5||(I5=!0,setTimeout(()=>{throw i},0)),i}}return t}var YP=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{ie("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Fu(n)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield xu(n)}yield this.X(6e4)}))}},QP=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,s=!0;return H.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return ie("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let i=e;return n.changes.forEach((r,s)=>{let o=A8(s);GO(o,i)>0&&(i=o)}),new wo(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var zs=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function TC(t){return t==null}function sC(t){return t===0&&1/t==-1/0}function O8(t){return typeof t=="number"&&Number.isInteger(t)&&!sC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Gr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x5(e)),e=Npe(t.get(n),e);return x5(e)}function Npe(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function x5(t){return t+""}function $a(t){let e=t.length;if(Ae(e>=2),e===2)return Ae(t.charAt(0)===""&&t.charAt(1)===""),Ut.emptyPath();let n=e-2,i=[],r="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&Ee(),t.charAt(o+1)){case"":let a=t.substring(s,o),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:Ee()}s=o+2}return new Ut(i)}var F5=["userId","batchId"];function yE(t,e){return[t,Gr(e)]}function k8(t,e,n){return[t,Gr(e),n]}var Lpe={},Vpe=["prefixPath","collectionGroup","readTime","documentId"],Bpe=["prefixPath","collectionGroup","documentId"],Gpe=["collectionGroup","readTime","prefixPath","documentId"],Hpe=["canonicalId","targetId"],Upe=["targetId","path"],jpe=["path","targetId"],Wpe=["collectionId","parent"],zpe=["indexId","uid"],qpe=["uid","sequenceNumber"],Kpe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ype=["indexId","uid","orderedDocumentKey"],Qpe=["userId","collectionPath","documentId"],Xpe=["userId","collectionPath","largestBatchId"],$pe=["userId","collectionGroup","largestBatchId"],N8=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zpe=[...N8,"documentOverlays"],L8=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],V8=L8,UO=[...V8,"indexConfiguration","indexState","indexEntries"],Jpe=UO,ege=[...UO,"globals"];var oC=class extends RE{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function xi(t,e){let n=ge(t);return wu.F(n._e,e)}function A5(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yh(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B8(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Dn=class t{constructor(e,n){this.comparator=e,this.root=n||Ja.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ja.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ja.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}},og=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ja=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();let e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}};Ja.EMPTY=null,Ja.RED=!0,Ja.BLACK=!1;Ja.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Ja(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pn=class t{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xE(this.data.getIterator())}getIteratorFrom(e){return new xE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},xE=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $p(t){return t.hasNext()?t.getNext():void 0}var qs=class t{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new t([])}unionWith(e){let n=new pn(ni.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ug(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var FE=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function G8(){return typeof atob<"u"}var ri=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new FE("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ri.EMPTY_BYTE_STRING=new ri("");var tge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ql(t){if(Ae(!!t),typeof t=="string"){let e=0,n=tge.exec(t);if(Ae(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Su(t){return typeof t=="string"?ri.fromBase64String(t):ri.fromUint8Array(t)}function wD(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jO(t){let e=t.mapValue.fields.__previous_value__;return wD(e)?jO(e):e}function aC(t){let e=Ql(t.mapValue.fields.__local_write_time__.timestampValue);return new Cn(e.seconds,e.nanos)}var XP=class{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},bu=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CE={nullValue:"NULL_VALUE"};function ah(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wD(t)?4:H8(t)?9007199254740991:10:Ee()}function nl(t,e){if(t===e)return!0;let n=ah(t);if(n!==ah(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return aC(t).isEqual(aC(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Ql(r.timestampValue),a=Ql(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Su(r.bytesValue).isEqual(Su(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return qn(r.geoPointValue.latitude)===qn(s.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return qn(r.integerValue)===qn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=qn(r.doubleValue),a=qn(s.doubleValue);return o===a?sC(o)===sC(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ug(t.arrayValue.values||[],e.arrayValue.values||[],nl);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(A5(o)!==A5(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nl(o[l],a[l])))return!1;return!0}(t,e);default:return Ee()}}function lC(t,e){return(t.values||[]).find(n=>nl(n,e))!==void 0}function _u(t,e){if(t===e)return 0;let n=ah(t),i=ah(e);if(n!==i)return lt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=qn(s.integerValue||s.doubleValue),l=qn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return P5(t.timestampValue,e.timestampValue);case 4:return P5(aC(t),aC(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Su(s),l=Su(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=lt(a[c],l[c]);if(u!==0)return u}return lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=lt(qn(s.latitude),qn(o.latitude));return a!==0?a:lt(qn(s.longitude),qn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){let u=_u(a[c],l[c]);if(u)return u}return lt(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===vu.mapValue&&o===vu.mapValue)return 0;if(s===vu.mapValue)return 1;if(o===vu.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){let h=lt(l[d],u[d]);if(h!==0)return h;let p=_u(a[l[d]],c[u[d]]);if(p!==0)return p}return lt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function P5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);let n=Ql(t),i=Ql(e),r=lt(n.seconds,i.seconds);return r!==0?r:lt(n.nanos,i.nanos)}function hg(t){return $P(t)}function $P(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Ql(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Su(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=$P(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${$P(n.fields[o])}`;return r+"}"}(t.mapValue):Ee()}function lh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ZP(t){return!!t&&"integerValue"in t}function cC(t){return!!t&&"arrayValue"in t}function M5(t){return!!t&&"nullValue"in t}function O5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wE(t){return!!t&&"mapValue"in t}function Jy(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return yh(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Jy(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jy(t.arrayValue.values[n]);return e}return Object.assign({},t)}function H8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function nge(t){return"nullValue"in t?CE:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?lh(bu.empty(),me.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ee()}function ige(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?lh(bu.empty(),me.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?vu:Ee()}function k5(t,e){let n=_u(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function N5(t,e){let n=_u(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var vr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wE(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jy(n)}setAll(e){let n=ni.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Jy(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());wE(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];wE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){yh(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(Jy(this.value))}};function U8(t){let e=[];return yh(t.fields,(n,i)=>{let r=new ni([n]);if(wE(i)){let s=U8(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new qs(e)}var yi=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,He.min(),He.min(),He.min(),vr.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,He.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,He.min(),He.min(),vr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,He.min(),He.min(),vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var il=class{constructor(e,n){this.position=e,this.inclusive=n}};function L5(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=me.comparator(me.fromName(o.referenceValue),n.key):i=_u(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function V5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nl(t.position[n],e.position[n]))return!1;return!0}var ch=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function rge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var AE=class{},At=class t extends AE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new tM(e,n,i):n==="array-contains"?new rM(e,i):n==="in"?new PE(e,i):n==="not-in"?new sM(e,i):n==="array-contains-any"?new oM(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new nM(e,i):new iM(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_u(n,this.value)):n!==null&&ah(this.value)===ah(n)&&this.matchesComparison(_u(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tn=class t extends AE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return fg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function fg(t){return t.op==="and"}function JP(t){return t.op==="or"}function WO(t){return j8(t)&&fg(t)}function j8(t){for(let e of t.filters)if(e instanceof tn)return!1;return!0}function eM(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+hg(t.value);if(WO(t))return t.filters.map(e=>eM(e)).join(",");{let e=t.filters.map(n=>eM(n)).join(",");return`${t.op}(${e})`}}function W8(t,e){return t instanceof At?function(i,r){return r instanceof At&&i.op===r.op&&i.field.isEqual(r.field)&&nl(i.value,r.value)}(t,e):t instanceof tn?function(i,r){return r instanceof tn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&W8(o,r.filters[a]),!0):!1}(t,e):void Ee()}function z8(t,e){let n=t.filters.concat(e);return tn.create(n,t.op)}function q8(t){return t instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${hg(n.value)}`}(t):t instanceof tn?function(n){return n.op.toString()+" {"+n.getFilters().map(q8).join(" ,")+"}"}(t):"Filter"}var tM=class extends At{constructor(e,n,i){super(e,n,i),this.key=me.fromName(i.referenceValue)}matches(e){let n=me.comparator(e.key,this.key);return this.matchesComparison(n)}},nM=class extends At{constructor(e,n){super(e,"in",n),this.keys=K8("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},iM=class extends At{constructor(e,n){super(e,"not-in",n),this.keys=K8("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function K8(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>me.fromName(i.referenceValue))}var rM=class extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return cC(n)&&lC(n.arrayValue,this.value)}},PE=class extends At{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&lC(this.value.arrayValue,n)}},sM=class extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(lC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!lC(this.value.arrayValue,n)}},oM=class extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!cC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>lC(this.value.arrayValue,i))}};var aM=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function lM(t,e=null,n=[],i=[],r=null,s=null,o=null){return new aM(t,e,n,i,r,s,o)}function uh(t){let e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>eM(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),TC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>hg(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>hg(i)).join(",")),e.ue=n}return e.ue}function RC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rge(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!W8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!V5(t.startAt,e.startAt)&&V5(t.endAt,e.endAt)}function ME(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function OE(t,e){return t.filters.filter(n=>n instanceof At&&n.field.isEqual(e))}function B5(t,e,n){let i=CE,r=!0;for(let s of OE(t,e)){let o=CE,a=!0;switch(s.op){case"<":case"<=":o=nge(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=CE}k5({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];k5({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function G5(t,e,n){let i=vu,r=!0;for(let s of OE(t,e)){let o=vu,a=!0;switch(s.op){case">=":case">":o=ige(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=vu}N5({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];N5({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}var la=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Y8(t,e,n,i,r,s,o,a){return new la(t,e,n,i,r,s,o,a)}function Ig(t){return new la(t)}function H5(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zO(t){return t.collectionGroup!==null}function lg(t){let e=ge(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pn(ni.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ch(s,i))}),n.has(ni.keyField().canonicalString())||e.ce.push(new ch(ni.keyField(),i))}return e.ce}function Hr(t){let e=ge(t);return e.le||(e.le=sge(e,lg(t))),e.le}function sge(t,e){if(t.limitType==="F")return lM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ch(r.field,s)});let n=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;return lM(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function cM(t,e){let n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kE(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function IC(t,e){return RC(Hr(t),Hr(e))&&t.limitType===e.limitType}function Q8(t){return`${uh(Hr(t))}|lt:${t.limitType}`}function ng(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>q8(r)).join(", ")}]`),TC(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>hg(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>hg(r)).join(",")),`Target(${i})`}(Hr(t))}; limitType=${t.limitType})`}function xC(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):me.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of lg(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){let c=L5(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,lg(i),r)||i.endAt&&!function(o,a,l){let c=L5(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,lg(i),r))}(t,e)}function X8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $8(t){return(e,n)=>{let i=!1;for(let r of lg(t)){let s=oge(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function oge(t,e,n){let i=t.field.isKeyField()?me.comparator(e.key,n.key):function(s,o,a){let l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?_u(l,c):Ee()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ee()}}var rl=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yh(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return B8(this.inner)}size(){return this.innerSize}};var age=new Dn(me.comparator);function ms(){return age}var Z8=new Dn(me.comparator);function $y(...t){let e=Z8;for(let n of t)e=e.insert(n.key,n);return e}function J8(t){let e=Z8;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Za(){return eC()}function e6(){return eC()}function eC(){return new rl(t=>t.toString(),(t,e)=>t.isEqual(e))}var lge=new Dn(me.comparator),cge=new pn(me.comparator);function ut(...t){let e=cge;for(let n of t)e=e.add(n);return e}var uge=new pn(lt);function qO(){return uge}function t6(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sC(e)?"-0":e}}function n6(t){return{integerValue:""+t}}function i6(t,e){return O8(e)?n6(e):t6(t,e)}var pg=class{constructor(){this._=void 0}};function dge(t,e,n){return t instanceof Eu?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&wD(s)&&(s=jO(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xl?s6(t,e):t instanceof $l?o6(t,e):function(r,s){let o=r6(r,s),a=U5(o)+U5(r.Pe);return ZP(o)&&ZP(r.Pe)?n6(a):t6(r.serializer,a)}(t,e)}function hge(t,e,n){return t instanceof Xl?s6(t,e):t instanceof $l?o6(t,e):n}function r6(t,e){return t instanceof Du?function(i){return ZP(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Eu=class extends pg{},Xl=class extends pg{constructor(e){super(),this.elements=e}};function s6(t,e){let n=a6(e);for(let i of t.elements)n.some(r=>nl(r,i))||n.push(i);return{arrayValue:{values:n}}}var $l=class extends pg{constructor(e){super(),this.elements=e}};function o6(t,e){let n=a6(e);for(let i of t.elements)n=n.filter(r=>!nl(r,i));return{arrayValue:{values:n}}}var Du=class extends pg{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function U5(t){return qn(t.integerValue||t.doubleValue)}function a6(t){return cC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var dh=class{constructor(e,n){this.field=e,this.transform=n}};function fge(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Xl&&r instanceof Xl||i instanceof $l&&r instanceof $l?ug(i.elements,r.elements,nl):i instanceof Du&&r instanceof Du?nl(i.Pe,r.Pe):i instanceof Eu&&r instanceof Eu}(t.transform,e.transform)}var uM=class{constructor(e,n){this.version=e,this.transformResults=n}},Kn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function SE(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var gg=class{};function l6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ru(t.key,Kn.none()):new Tu(t.key,t.data,Kn.none());{let n=t.data,i=vr.empty(),r=new pn(ni.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ca(t.key,i,new qs(r.toArray()),Kn.none())}}function pge(t,e,n){t instanceof Tu?function(r,s,o){let a=r.value.clone(),l=W5(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ca?function(r,s,o){if(!SE(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=W5(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(c6(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tC(t,e,n,i){return t instanceof Tu?function(s,o,a,l){if(!SE(s.precondition,o))return a;let c=s.value.clone(),u=z5(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ca?function(s,o,a,l){if(!SE(s.precondition,o))return a;let c=z5(s.fieldTransforms,l,o),u=o.data;return u.setAll(c6(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return SE(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gge(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=r6(i.transform,r||null);s!=null&&(n===null&&(n=vr.empty()),n.set(i.field,s))}return n||null}function j5(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ug(i,r,(s,o)=>fge(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Tu=class extends gg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ca=class extends gg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function c6(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function W5(t,e,n){let i=new Map;Ae(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,hge(o,a,n[r]))}return i}function z5(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,dge(s,o,e))}return i}var Ru=class extends gg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uC=class extends gg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dC=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&pge(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=tC(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=tC(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=e6();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let l=l6(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(He.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ut())}isEqual(e){return this.batchId===e.batchId&&ug(this.mutations,e.mutations,(n,i)=>j5(n,i))&&ug(this.baseMutations,e.baseMutations,(n,i)=>j5(n,i))}},dM=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ae(e.mutations.length===i.length);let r=function(){return lge}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var hC=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hM=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var pi,Ht;function u6(t){switch(t){default:return Ee();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function d6(t){if(t===void 0)return ti("GRPC error has no .code"),z.UNKNOWN;switch(t){case pi.OK:return z.OK;case pi.CANCELLED:return z.CANCELLED;case pi.UNKNOWN:return z.UNKNOWN;case pi.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case pi.INTERNAL:return z.INTERNAL;case pi.UNAVAILABLE:return z.UNAVAILABLE;case pi.UNAUTHENTICATED:return z.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case pi.NOT_FOUND:return z.NOT_FOUND;case pi.ALREADY_EXISTS:return z.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return z.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case pi.ABORTED:return z.ABORTED;case pi.OUT_OF_RANGE:return z.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return z.UNIMPLEMENTED;case pi.DATA_LOSS:return z.DATA_LOSS;default:return Ee()}}(Ht=pi||(pi={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";var q5=null;function h6(){return new TextEncoder}var mge=new hu([4294967295,4294967295],0);function K5(t){let e=h6().encode(t),n=new RP;return n.update(e),new Uint8Array(n.digest())}function Y5(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hu([n,i],0),new hu([r,s],0)]}var fM=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sh(`Invalid padding: ${n}`);if(i<0)throw new sh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sh(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hu.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(hu.fromNumber(i)));return r.compare(mge)===1&&(r=new hu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=K5(e),[i,r]=Y5(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=K5(e),[i,r]=Y5(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},sh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fC=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,pC.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(He.min(),r,new Dn(lt),ms(),ut())}},pC=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,ut(),ut(),ut())}};var cg=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},NE=class{constructor(e,n){this.targetId=e,this.me=n}},LE=class{constructor(e,n,i=ri.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},VE=class{constructor(){this.fe=0,this.ge=X5(),this.pe=ri.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ut(),n=ut(),i=ut();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ee()}}),new pC(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=X5()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pM=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ms(),this.qe=Q5(),this.Qe=new Dn(lt)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let s=r.target;if(ME(s))if(i===0){let o=new me(s.path);this.Ue(n,o,yi.newNoDocument(o,He.min()))}else Ae(i===1);else{let o=this.Ye(n);if(o!==i){let a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}q5?.et(function(u,d,h,p,g){var m,v,C,b,E,T;let P={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},x=d.unchangedNames;return x&&(P.bloomFilter={applied:g===0,hashCount:(m=x?.hashCount)!==null&&m!==void 0?m:0,bitmapLength:(b=(C=(v=x?.bits)===null||v===void 0?void 0:v.bitmap)===null||C===void 0?void 0:C.length)!==null&&b!==void 0?b:0,padding:(T=(E=x?.bits)===null||E===void 0?void 0:E.padding)!==null&&T!==void 0?T:0,mightContain:_=>{var S;return(S=p?.mightContain(_))!==null&&S!==void 0&&S}}),P}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=Su(i).toUint8Array()}catch(l){if(l instanceof FE)return Co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fM(o,r,s)}catch(l){return Co(l instanceof sh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&ME(a.target)){let l=new me(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,yi.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let i=ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new fC(e,n,this.Qe,this.ke,i);return this.ke=ms(),this.qe=Q5(),this.Qe=new Dn(lt),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new VE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pn(lt),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new VE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Q5(){return new Dn(me.comparator)}function X5(){return new Dn(me.comparator)}var vge={asc:"ASCENDING",desc:"DESCENDING"},yge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cge={and:"AND",or:"OR"},gM=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function mM(t,e){return t.useProto3Json||TC(e)?e:{value:e}}function mg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wge(t,e){return mg(t,e.toTimestamp())}function ii(t){return Ae(!!t),He.fromTimestamp(function(n){let i=Ql(n);return new Cn(i.seconds,i.nanos)}(t))}function KO(t,e){return vM(t,e).canonicalString()}function vM(t,e){let n=function(r){return new Ut(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function p6(t){let e=Ut.fromString(t);return Ae(E6(e)),e}function gC(t,e){return KO(t.databaseId,e.path)}function el(t,e){let n=p6(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(v6(n))}function g6(t,e){return KO(t.databaseId,e)}function m6(t){let e=p6(t);return e.length===4?Ut.emptyPath():v6(e)}function yM(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v6(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $5(t,e,n){return{name:gC(t,e),fields:n.value.mapValue.fields}}function y6(t,e,n){let i=el(t,e.name),r=ii(e.updateTime),s=e.createTime?ii(e.createTime):He.min(),o=new vr({mapValue:{fields:e.fields}}),a=yi.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Sge(t,e){return"found"in e?function(i,r){Ae(!!r.found),r.found.name,r.found.updateTime;let s=el(i,r.found.name),o=ii(r.found.updateTime),a=r.found.createTime?ii(r.found.createTime):He.min(),l=new vr({mapValue:{fields:r.found.fields}});return yi.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){Ae(!!r.missing),Ae(!!r.readTime);let s=el(i,r.missing),o=ii(r.readTime);return yi.newNoDocument(s,o)}(t,e):Ee()}function bge(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ae(u===void 0||typeof u=="string"),ri.fromBase64String(u||"")):(Ae(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ri.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let u=c.code===void 0?z.UNKNOWN:d6(c.code);return new te(u,c.message||"")}(o);n=new LE(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=el(t,i.document.name),s=ii(i.document.updateTime),o=i.document.createTime?ii(i.document.createTime):He.min(),a=new vr({mapValue:{fields:i.document.fields}}),l=yi.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new cg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=el(t,i.document),s=i.readTime?ii(i.readTime):He.min(),o=yi.newNoDocument(r,s),a=i.removedTargetIds||[];n=new cg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=el(t,i.document),s=i.removedTargetIds||[];n=new cg([],s,r,null)}else{if(!("filter"in e))return Ee();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new hM(r,s),a=i.targetId;n=new NE(a,o)}}return n}function mC(t,e){let n;if(e instanceof Tu)n={update:$5(t,e.key,e.value)};else if(e instanceof Ru)n={delete:gC(t,e.key)};else if(e instanceof ca)n={update:$5(t,e.key,e.data),updateMask:Ige(e.fieldMask)};else{if(!(e instanceof uC))return Ee();n={verify:gC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Du)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ee()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:wge(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()}(t,e.precondition)),n}function CM(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Kn.updateTime(ii(s.updateTime)):s.exists!==void 0?Kn.exists(s.exists):Kn.none()}(e.currentDocument):Kn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)Ae(a.setToServerValue==="REQUEST_TIME"),l=new Eu;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];l=new Xl(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];l=new $l(u)}else"increment"in a?l=new Du(o,a.increment):Ee();let c=ni.fromServerFormat(a.fieldPath);return new dh(c,l)}(t,r)):[];if(e.update){e.update.name;let r=el(t,e.update.name),s=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let c=l.fieldPaths||[];return new qs(c.map(u=>ni.fromServerFormat(u)))}(e.updateMask);return new ca(r,s,o,n,i)}return new Tu(r,s,n,i)}if(e.delete){let r=el(t,e.delete);return new Ru(r,n)}if(e.verify){let r=el(t,e.verify);return new uC(r,n)}return Ee()}function _ge(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ii(r.updateTime):ii(s);return o.isEqual(He.min())&&(o=ii(s)),new uM(o,r.transformResults||[])}(n,e))):[]}function C6(t,e){return{documents:[g6(t,e.path)]}}function w6(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=g6(t,r);let s=function(c){if(c.length!==0)return _6(tn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:ig(h.field),direction:Dge(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=mM(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function S6(t){let e=m6(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Ae(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=b6(d);return h instanceof tn&&WO(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new ch(rg(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,TC(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){let h=!!d.before,p=d.values||[];return new il(p,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,p=d.values||[];return new il(p,h)}(n.endAt)),Y8(e,r,o,s,a,"F",l,c)}function Ege(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=rg(n.unaryFilter.field);return At.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=rg(n.unaryFilter.field);return At.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rg(n.unaryFilter.field);return At.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=rg(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(n){return At.create(rg(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return tn.create(n.compositeFilter.filters.map(i=>b6(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(t):Ee()}function Dge(t){return vge[t]}function Tge(t){return yge[t]}function Rge(t){return Cge[t]}function ig(t){return{fieldPath:t.canonicalString()}}function rg(t){return ni.fromServerFormat(t.fieldPath)}function _6(t){return t instanceof At?function(n){if(n.op==="=="){if(O5(n.value))return{unaryFilter:{field:ig(n.field),op:"IS_NAN"}};if(M5(n.value))return{unaryFilter:{field:ig(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O5(n.value))return{unaryFilter:{field:ig(n.field),op:"IS_NOT_NAN"}};if(M5(n.value))return{unaryFilter:{field:ig(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ig(n.field),op:Tge(n.op),value:n.value}}}(t):t instanceof tn?function(n){let i=n.getFilters().map(r=>_6(r));return i.length===1?i[0]:{compositeFilter:{op:Rge(n.op),filters:i}}}(t):Ee()}function Ige(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var vg=class t{constructor(e,n,i,r,s=He.min(),o=He.min(),a=ri.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var BE=class{constructor(e){this.ct=e}};function xge(t,e){let n;if(e.document)n=y6(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=me.fromSegments(e.noDocument.path),r=fh(e.noDocument.readTime);n=yi.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{let i=me.fromSegments(e.unknownDocument.path),r=fh(e.unknownDocument.version);n=yi.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let s=new Cn(r[0],r[1]);return He.fromTimestamp(s)}(e.readTime)),n}function Z5(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:GE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:gC(s,o.key),fields:o.data.value.mapValue.fields,updateTime:mg(s,o.version.toTimestamp()),createTime:mg(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:hh(e.version)};else{if(!e.isUnknownDocument())return Ee();i.unknownDocument={path:n.path.toArray(),version:hh(e.version)}}return i}function GE(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hh(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fh(t){let e=new Cn(t.seconds,t.nanoseconds);return He.fromTimestamp(e)}function nh(t,e){let n=(e.baseMutations||[]).map(s=>CM(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>CM(t.ct,s)),r=Cn.fromMillis(e.localWriteTimeMs);return new dC(e.batchId,r,n,i)}function Zy(t){let e=fh(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?fh(t.lastLimboFreeSnapshotVersion):He.min(),i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return Ae(s.documents.length===1),Hr(Ig(m6(s.documents[0])))}(t.query):function(s){return Hr(S6(s))}(t.query),new vg(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ri.fromBase64String(t.resumeToken))}function D6(t,e){let n=hh(e.snapshotVersion),i=hh(e.lastLimboFreeSnapshotVersion),r;r=ME(e.target)?C6(t.ct,e.target):w6(t.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uh(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function YO(t){let e=S6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kE(e,e.limit,"L"):e}function OP(t,e){return new hC(e.largestBatchId,CM(t.ct,e.overlayMutation))}function J5(t,e){let n=e.path.lastSegment();return[t,Gr(e.path.popLast()),n]}function e8(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:hh(i.readTime),documentKey:Gr(i.documentKey.path),largestBatchId:i.largestBatchId}}var wM=class{getBundleMetadata(e,n){return t8(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:fh(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return t8(e).put(function(r){return{bundleId:r.id,createTime:hh(ii(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return n8(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:YO(s.bundledQuery),readTime:fh(s.readTime)}}(i)})}saveNamedQuery(e,n){return n8(e).put(function(r){return{name:r.name,readTime:hh(ii(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function t8(t){return xi(t,"bundles")}function n8(t){return xi(t,"namedQueries")}var HE=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Ky(e).get(J5(this.userId,n)).next(i=>i?OP(this.serializer,i):null)}getOverlays(e,n){let i=Za();return H.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((s,o)=>{let a=new hC(n,o);r.push(this.ht(e,a))}),H.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(o=>r.add(Gr(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Ky(e).j("collectionPathOverlayIndex",a))}),H.waitFor(s)}getOverlaysForCollection(e,n,i){let r=Za(),s=Gr(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ky(e).U("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let c=OP(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let s=Za(),o,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ky(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{let d=OP(this.serializer,c);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return Ky(e).put(function(r,s,o){let[a,l,c]=J5(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:mC(r.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Ky(t){return xi(t,"documentOverlays")}var SM=class{Pt(e){return xi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let i=n?.value;return i?ri.fromUint8Array(i):ri.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Kl=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(qn(e.integerValue));else if("doubleValue"in e){let i=qn(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),sC(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Ql(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Su(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?H8(e)?this.dt(n,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.St(e.arrayValue,n),this.ft(n)):Ee()}Vt(e,n){this.dt(n,25),this.bt(e,n)}bt(e,n){n.Rt(e)}wt(e,n){let i=e.fields||{};this.dt(n,55);for(let r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}St(e,n){let i=e.values||[];this.dt(n,50);for(let r of i)this.Tt(r,n)}yt(e,n){this.dt(n,37),me.fromName(e).path.forEach(i=>{this.dt(n,60),this.bt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Kl.Dt=new Kl;function Fge(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function i8(t){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=Fge(255&i[s]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}var bM=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.vt(i.value),i=n.next();this.Ft()}Mt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.xt(i.value),i=n.next();this.Ot()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{let r=n.codePointAt(0);this.vt(240|r>>>18),this.vt(128|63&r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r)}}this.Ft()}Lt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.xt(i);else if(i<2048)this.xt(960|i>>>6),this.xt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i);else{let r=n.codePointAt(0);this.xt(240|r>>>18),this.xt(128|63&r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r)}}this.Ot()}Bt(e){let n=this.kt(e),i=i8(n);this.qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Qt(e){let n=this.kt(e),i=i8(n);this.qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}vt(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(n)}xt(e){let n=255&e;n===0?(this.Wt(0),this.Wt(255)):n===255?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},_M=class{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}},EM=class{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}},ih=class{constructor(){this.zt=new bM,this.jt=new _M(this.zt),this.Ht=new EM(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return e===0?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}};var rh=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Yt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function fu(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=r8(t.arrayValue,e.arrayValue),n!==0?n:(n=r8(t.directionalValue,e.directionalValue),n!==0?n:me.comparator(t.documentKey,e.documentKey)))}function r8(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var UE=class{constructor(e){this.Zt=new pn((n,i)=>ni.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(let n of e.filters){let i=n;i.isInequality()?this.Zt=this.Zt.add(i):this.en.push(i)}}get tn(){return this.Zt.size>1}nn(e){if(Ae(e.collectionGroup===this.collectionId),this.tn)return!1;let n=zP(e);if(n!==void 0&&!this.rn(n))return!1;let i=eh(e),r=new Set,s=0,o=0;for(;s<i.length&&this.rn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Zt.size>0){let a=this.Zt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[s];if(!this.sn(a,l)||!this.on(this.Xt[o++],l))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Xt.length||!this.on(this.Xt[o++],a))return!1}return!0}_n(){if(this.tn)return null;let e=new pn(ni.comparator),n=[];for(let i of this.en)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ag(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ag(i.field,0))}for(let i of this.Xt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ag(i.field,i.dir==="asc"?0:1)));return new dg(dg.UNKNOWN_ID,this.collectionId,n,rC.empty())}rn(e){for(let n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function T6(t){var e,n;if(Ae(t instanceof At||t instanceof tn),t instanceof At){if(t instanceof PE){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>At.create(t.field,"==",s)))||[];return tn.create(r,"or")}return t}let i=t.filters.map(r=>T6(r));return tn.create(i,t.op)}function Age(t){if(t.getFilters().length===0)return[];let e=RM(T6(t));return Ae(R6(e)),DM(e)||TM(e)?[e]:e.getFilters()}function DM(t){return t instanceof At}function TM(t){return t instanceof tn&&WO(t)}function R6(t){return DM(t)||TM(t)||function(n){if(n instanceof tn&&JP(n)){for(let i of n.getFilters())if(!DM(i)&&!TM(i))return!1;return!0}return!1}(t)}function RM(t){if(Ae(t instanceof At||t instanceof tn),t instanceof At)return t;if(t.filters.length===1)return RM(t.filters[0]);let e=t.filters.map(i=>RM(i)),n=tn.create(e,t.op);return n=jE(n),R6(n)?n:(Ae(n instanceof tn),Ae(fg(n)),Ae(n.filters.length>1),n.filters.reduce((i,r)=>QO(i,r)))}function QO(t,e){let n;return Ae(t instanceof At||t instanceof tn),Ae(e instanceof At||e instanceof tn),n=t instanceof At?e instanceof At?function(r,s){return tn.create([r,s],"and")}(t,e):s8(t,e):e instanceof At?s8(e,t):function(r,s){if(Ae(r.filters.length>0&&s.filters.length>0),fg(r)&&fg(s))return z8(r,s.getFilters());let o=JP(r)?r:s,a=JP(r)?s:r,l=o.filters.map(c=>QO(c,a));return tn.create(l,"or")}(t,e),jE(n)}function s8(t,e){if(fg(e))return z8(e,t.getFilters());{let n=e.filters.map(i=>QO(t,i));return tn.create(n,"or")}}function jE(t){if(Ae(t instanceof At||t instanceof tn),t instanceof At)return t;let e=t.getFilters();if(e.length===1)return jE(e[0]);if(j8(t))return t;let n=e.map(r=>jE(r)),i=[];return n.forEach(r=>{r instanceof At?i.push(r):r instanceof tn&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:tn.create(i,t.op)}var IM=class{constructor(){this.an=new vC}addToCollectionParentIndex(e,n){return this.an.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(wo.min())}updateCollectionGroup(e,n,i){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}},vC=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new pn(Ut.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new pn(Ut.comparator)).toArray()}};var pE=new Uint8Array(0),xM=class{constructor(e,n){this.databaseId=n,this.un=new vC,this.cn=new rl(i=>uh(i),(i,r)=>RC(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});let s={collectionId:i,parent:Gr(r)};return o8(e).put(s)}return H.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[x8(n),""],!1,!0);return o8(e).U(r).next(s=>{for(let o of s){if(o.collectionId!==n)break;i.push($a(o.parent))}return i})}addFieldIndex(e,n){let i=Yy(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;let s=i.add(r);if(n.indexState){let o=Jp(e);return s.next(a=>{o.put(e8(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let i=Yy(e),r=Jp(e),s=Zp(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Yy(e),i=Zp(e),r=Jp(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return H.forEach(this.ln(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new UE(i)._n();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let i=Zp(e),r=!0,s=new Map;return H.forEach(this.ln(n),o=>this.hn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=ut(),a=[];return H.forEach(s,(l,c)=>{ie("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(T=>`${T.fieldPath}:${T.kind}`).join(",")}`}(l)} to execute ${uh(n)}`);let u=function(E,T){let P=zP(T);if(P===void 0)return null;for(let x of OE(E,P.fieldPath))switch(x.op){case"array-contains-any":return x.value.arrayValue.values||[];case"array-contains":return[x.value]}return null}(c,l),d=function(E,T){let P=new Map;for(let x of eh(T))for(let _ of OE(E,x.fieldPath))switch(_.op){case"==":case"in":P.set(x.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return P.set(x.fieldPath.canonicalString(),_.value),Array.from(P.values())}return null}(c,l),h=function(E,T){let P=[],x=!0;for(let _ of eh(T)){let S=_.kind===0?B5(E,_.fieldPath,E.startAt):G5(E,_.fieldPath,E.startAt);P.push(S.value),x&&(x=S.inclusive)}return new il(P,x)}(c,l),p=function(E,T){let P=[],x=!0;for(let _ of eh(T)){let S=_.kind===0?G5(E,_.fieldPath,E.endAt):B5(E,_.fieldPath,E.endAt);P.push(S.value),x&&(x=S.inclusive)}return new il(P,x)}(c,l),g=this.Pn(l,c,h),m=this.Pn(l,c,p),v=this.In(l,c,d),C=this.Tn(l.indexId,u,g,h.inclusive,m,p.inclusive,v);return H.forEach(C,b=>i.G(b,n.limit).next(E=>{E.forEach(T=>{let P=me.fromSegments(T.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return H.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=Age(tn.create(e.filters,"and")).map(i=>lM(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}Tn(e,n,i,r,s,o,a){let l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){let h=n?this.En(n[d/c]):pE,p=this.dn(e,h,i[d%c],r),g=this.An(e,h,s[d%c],o),m=a.map(v=>this.dn(e,h,v,!0));u.push(...this.createRange(p,g,m))}return u}dn(e,n,i,r){let s=new rh(e,me.empty(),n,i);return r?s:s.Yt()}An(e,n,i,r){let s=new rh(e,me.empty(),n,i);return r?s.Yt():s}hn(e,n){let i=new UE(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2,r=this.ln(n);return H.forEach(r,s=>this.hn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let c=new pn(ni.comparator),u=!1;for(let d of l.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(let d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}Rn(e,n){let i=new ih;for(let r of eh(e)){let s=n.data.field(r.fieldPath);if(s==null)return null;let o=i.Jt(r.kind);Kl.Dt.It(s,o)}return i.Gt()}En(e){let n=new ih;return Kl.Dt.It(e,n.Jt(0)),n.Gt()}Vn(e,n){let i=new ih;return Kl.Dt.It(lh(this.databaseId,n),i.Jt(function(s){let o=eh(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Gt()}In(e,n,i){if(i===null)return[];let r=[];r.push(new ih);let s=0;for(let o of eh(e)){let a=i[s++];for(let l of r)if(this.mn(n,o.fieldPath)&&cC(a))r=this.fn(r,o,a);else{let c=l.Jt(o.kind);Kl.Dt.It(a,c)}}return this.gn(r)}Pn(e,n,i){return this.In(e,n,i.position)}gn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Gt();return n}fn(e,n,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let l=new ih;l.seed(a.Gt()),Kl.Dt.It(o,l.Jt(n.kind)),s.push(l)}return s}mn(e,n){return!!e.filters.find(i=>i instanceof At&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Yy(e),r=Jp(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(s=>{let o=[];return H.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){let h=d?new rC(d.sequenceNumber,new wo(fh(d.readTime),new me($a(d.documentKey)),d.largestBatchId)):rC.empty(),p=u.fields.map(([g,m])=>new ag(ni.fromServerFormat(g),m));return new dg(u.indexId,u.collectionGroup,p,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:lt(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Yy(e),s=Jp(e);return this.pn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>H.forEach(a,l=>s.put(e8(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,n){let i=new Map;return H.forEach(n,(r,s)=>{let o=i.get(r.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),H.forEach(a,l=>this.yn(e,r,l).next(c=>{let u=this.wn(s,l);return c.isEqual(u)?H.resolve():this.Sn(e,s,l,c,u)}))))})}bn(e,n,i,r){return Zp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(i,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,i,r){return Zp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(i,n.key),n.key.path.toArray()])}yn(e,n,i){let r=Zp(e),s=new pn(fu);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Vn(i,n)])},(o,a)=>{s=s.add(new rh(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let i=new pn(fu),r=this.Rn(n,e);if(r==null)return i;let s=zP(n);if(s!=null){let o=e.data.field(s.fieldPath);if(cC(o))for(let a of o.arrayValue.values||[])i=i.add(new rh(n.indexId,e.key,this.En(a),r))}else i=i.add(new rh(n.indexId,e.key,pE,r));return i}Sn(e,n,i,r,s){ie("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(l,c,u,d,h){let p=l.getIterator(),g=c.getIterator(),m=$p(p),v=$p(g);for(;m||v;){let C=!1,b=!1;if(m&&v){let E=u(m,v);E<0?b=!0:E>0&&(C=!0)}else m!=null?b=!0:C=!0;C?(d(v),v=$p(g)):b?(h(m),m=$p(p)):(m=$p(p),v=$p(g))}}(r,s,fu,a=>{o.push(this.bn(e,n,i,a))},a=>{o.push(this.Dn(e,n,i,a))}),H.waitFor(o)}pn(e){let n=1;return Jp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>fu(o,a)).filter((o,a,l)=>!a||fu(o,l[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=fu(o,e),l=fu(o,n);if(a===0)r[0]=e.Yt();else if(a>0&&l<0)r.push(o),r.push(o.Yt());else if(l>0)break}r.push(n);let s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,pE,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,pE,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return fu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(a8)}getMinOffset(e,n){return H.mapArray(this.ln(n),i=>this.hn(e,i).next(r=>r||Ee())).next(a8)}};function o8(t){return xi(t,"collectionParents")}function Zp(t){return xi(t,"indexEntries")}function Yy(t){return xi(t,"indexConfiguration")}function Jp(t){return xi(t,"indexState")}function a8(t){Ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;GO(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new wo(e.readTime,e.documentKey,n)}var l8={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yo=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function I6(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,l=i.J({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Ae(a===1)}));let c=[];for(let u of n.mutations){let d=k8(e,u.key.path,n.batchId);s.push(r.delete(d)),c.push(u.key)}return H.waitFor(s).next(()=>c)}function WE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ee();e=t.noDocument}return JSON.stringify(e).length}yo.DEFAULT_COLLECTION_PERCENTILE=10,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yo.DEFAULT=new yo(41943040,yo.DEFAULT_COLLECTION_PERCENTILE,yo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yo.DISABLED=new yo(-1,0,0);var zE=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.vn={}}static lt(e,n,i,r){Ae(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let s=sg(e),o=pu(e);return o.add({}).next(a=>{Ae(typeof a=="number");let l=new dC(a,n,i,r),c=function(p,g,m){let v=m.baseMutations.map(b=>mC(p.ct,b)),C=m.mutations.map(b=>mC(p.ct,b));return{userId:g,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:v,mutations:C}}(this.serializer,this.userId,l),u=[],d=new pn((h,p)=>lt(h.canonicalString(),p.canonicalString()));for(let h of r){let p=k8(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(p,Lpe))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.vn[a]=l.keys()}),H.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return pu(e).get(n).next(i=>i?(Ae(i.userId===this.userId),nh(this.serializer,i)):null)}Fn(e,n){return this.vn[n]?H.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.vn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return pu(e).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=i),s=nh(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return pu(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).U("userMutationsIndex",n).next(i=>i.map(r=>nh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=yE(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return sg(e).J({range:r},(o,a,l)=>{let[c,u,d]=o,h=$a(u);if(c===this.userId&&n.path.isEqual(h))return pu(e).get(d).next(p=>{if(!p)throw Ee();Ae(p.userId===this.userId),s.push(nh(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pn(lt),r=[];return n.forEach(s=>{let o=yE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=sg(e).J({range:a},(c,u,d)=>{let[h,p,g]=c,m=$a(p);h===this.userId&&s.path.isEqual(m)?i=i.add(g):d.done()});r.push(l)}),H.waitFor(r).next(()=>this.Mn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=yE(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new pn(lt);return sg(e).J({range:o},(l,c,u)=>{let[d,h,p]=l,g=$a(h);d===this.userId&&i.isPrefixOf(g)?g.length===r&&(a=a.add(p)):u.done()}).next(()=>this.Mn(e,a))}Mn(e,n){let i=[],r=[];return n.forEach(s=>{r.push(pu(e).get(s).next(o=>{if(o===null)throw Ee();Ae(o.userId===this.userId),i.push(nh(this.serializer,o))}))}),H.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return I6(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),H.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return H.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return sg(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){let l=$a(s[1]);r.push(l)}else a.done()}).next(()=>{Ae(r.length===0)})})}containsKey(e,n){return x6(e,this.userId,n)}On(e){return F6(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function x6(t,e,n){let i=yE(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return sg(t).J({range:s,H:!0},(a,l,c)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),c.done()}).next(()=>o)}function pu(t){return xi(t,"mutations")}function sg(t){return xi(t,"documentMutations")}function F6(t){return xi(t,"mutationQueues")}var yg=class t{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new t(0)}static Bn(){return new t(-1)}};var FM=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{let i=new yg(n.highestTargetId);return n.highestTargetId=i.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>He.fromTimestamp(new Cn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.kn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.qn(e,r)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(i=>(i.targetCount+=1,this.Kn(n,i),this.qn(e,i))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>eg(e).delete(n.targetId)).next(()=>this.kn(e)).next(i=>(Ae(i.targetCount>0),i.targetCount-=1,this.qn(e,i)))}removeTargets(e,n,i){let r=0,s=[];return eg(e).J((o,a)=>{let l=Zy(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>H.waitFor(s)).next(()=>r)}forEachTarget(e,n){return eg(e).J((i,r)=>{let s=Zy(r);n(s)})}kn(e){return c8(e).get("targetGlobalKey").next(n=>(Ae(n!==null),n))}qn(e,n){return c8(e).put("targetGlobalKey",n)}Qn(e,n){return eg(e).put(D6(this.serializer,n))}Kn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=uh(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return eg(e).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{let c=Zy(a);RC(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){let r=[],s=gu(e);return n.forEach(o=>{let a=Gr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),H.waitFor(r)}removeMatchingKeys(e,n,i){let r=gu(e);return H.forEach(n,s=>{let o=Gr(s.path);return H.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){let i=gu(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=gu(e),s=ut();return r.J({range:i,H:!0},(o,a,l)=>{let c=$a(o[1]),u=new me(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){let i=Gr(n.path),r=IDBKeyRange.bound([i],[x8(i)],!1,!0),s=0;return gu(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return eg(e).get(n).next(i=>i?Zy(i):null)}};function eg(t){return xi(t,"targets")}function c8(t){return xi(t,"targetGlobal")}function gu(t){return xi(t,"targetDocuments")}function u8([t,e],[n,i]){let r=lt(t,n);return r===0?lt(e,i):r}var AM=class{constructor(e){this.$n=e,this.buffer=new pn(u8),this.Un=0}Wn(){return++this.Un}Gn(e){let n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();u8(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},PM=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.zn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fu(n)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield xu(n)}yield this.jn(3e5)}))}},MM=class{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return H.resolve(zs.oe);let i=new AM(n);return this.Hn.forEachTarget(e,r=>i.Gn(r.sequenceNumber)).next(()=>this.Hn.Yn(e,r=>i.Gn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Hn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(l8)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l8):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let i,r,s,o,a,l,c,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),tg()<=ss.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function Pge(t,e){return new MM(t,e)}var OM=class{constructor(e,n){this.db=e,this.garbageCollector=Pge(this,n)}Jn(e){let n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Xn(e){let n=0;return this.Yn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(i,r)=>n(r))}addReference(e,n,i){return gE(e,i)}removeReference(e,n,i){return gE(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return gE(e,n)}tr(e,n){return function(r,s){let o=!1;return F6(r).Y(a=>x6(r,a,s).next(l=>(l&&(o=!0),H.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.er(e,(o,a)=>{if(a<=n){let l=this.tr(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,He.min()),gu(e).delete(function(d){return[0,Gr(d.path)]}(o))))});r.push(l)}}).next(()=>H.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return gE(e,n)}er(e,n){let i=gu(e),r,s=zs.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==zs.oe&&n(new me($a(r)),s),s=c,r=l):s=zs.oe}).next(()=>{s!==zs.oe&&n(new me($a(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gE(t,e){return gu(t).put(function(i,r){return{targetId:0,path:Gr(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var qE=class{constructor(){this.changes=new rl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?H.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var kM=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Jd(e).put(i)}removeEntry(e,n,i){return Jd(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],GE(o),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.nr(e,i)))}getEntry(e,n){let i=yi.newInvalidDocument(n);return Jd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(n))},(r,s)=>{i=this.rr(n,s)}).next(()=>i)}ir(e,n){let i={size:0,document:yi.newInvalidDocument(n)};return Jd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(n))},(r,s)=>{i={document:this.rr(n,s),size:WE(s)}}).next(()=>i)}getEntries(e,n){let i=ms();return this.sr(e,n,(r,s)=>{let o=this.rr(r,s);i=i.insert(r,o)}).next(()=>i)}_r(e,n){let i=ms(),r=new Dn(me.comparator);return this.sr(e,n,(s,o)=>{let a=this.rr(s,o);i=i.insert(s,a),r=r.insert(s,WE(o))}).next(()=>({documents:i,ar:r}))}sr(e,n,i){if(n.isEmpty())return H.resolve();let r=new pn(f8);n.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(Qy(r.first()),Qy(r.last())),o=r.getIterator(),a=o.getNext();return Jd(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{let d=me.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&f8(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.$(Qy(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),GE(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jd(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=ms();for(let d of c){let h=this.rr(me.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(xC(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,i,r){let s=ms(),o=h8(n,i),a=h8(n,wo.max());return Jd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{let d=this.rr(me.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new NM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return d8(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}nr(e,n){return d8(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){let i=xge(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(He.min())))return i}return yi.newInvalidDocument(e)}};function A6(t){return new kM(t)}var NM=class extends qE{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new rl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new pn((s,o)=>lt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.cr.get(s);if(n.push(this.ur.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=Z5(this.ur.serializer,o);r=r.add(s.path.popLast());let c=WE(l);i+=c-a.size,n.push(this.ur.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){let l=Z5(this.ur.serializer,o.convertToNoDocument(He.min()));n.push(this.ur.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ur.updateMetadata(e,i)),H.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(i=>(this.cr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:i,ar:r})=>(r.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function d8(t){return xi(t,"remoteDocumentGlobal")}function Jd(t){return xi(t,"remoteDocumentsV14")}function Qy(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function h8(t,e){let n=e.documentKey.path.toArray();return[t,GE(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function f8(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=lt(n[s],i[s]),r)return r;return r=lt(n.length,i.length),r||(r=lt(n[n.length-2],i[i.length-2]),r||lt(n[n.length-1],i[i.length-1]))}var LM=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var KE=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&tC(i.mutation,r,qs.empty(),Cn.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ut()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ut()){let r=Za();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=$y();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Za();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ut()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ms(),o=eC(),a=function(){return eC()}();return n.forEach((l,c)=>{let u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof ca)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tC(u.mutation,c,u.mutation.getFieldMask(),Cn.now())):o.set(c.key,qs.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new LM(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=eC(),r=new Dn((o,a)=>o-a),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||qs.empty();u=a.applyToLocalView(c,u),i.set(l,u);let d=(r.get(a.batchId)||ut()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,d=e6();u.forEach(h=>{if(!s.has(h)){let p=l6(n.get(h),i.get(h));p!==null&&d.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):H.resolve(Za()),a=-1,l=s;return o.next(c=>H.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ut())).next(u=>({batchId:a,changes:J8(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(i=>{let r=$y();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=$y();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{let c=function(d,h){return new la(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,yi.newInvalidDocument(u)))});let a=$y();return o.forEach((l,c)=>{let u=s.get(l);u!==void 0&&tC(u.mutation,c,qs.empty(),Cn.now()),xC(n,c)&&(a=a.insert(l,c))}),a})}};var VM=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return H.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ii(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(r){return{name:r.name,query:YO(r.bundledQuery),readTime:ii(r.readTime)}}(n)),H.resolve()}};var BM=class{constructor(){this.overlays=new Dn(me.comparator),this.Pr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Za();return H.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),H.resolve()}getOverlaysForCollection(e,n,i){let r=Za(),s=n.length+1,o=new me(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Dn((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Za(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=Za(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return H.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new hC(n,i));let s=this.Pr.get(n);s===void 0&&(s=ut(),this.Pr.set(n,s)),this.Pr.set(n,s.add(i.key))}};var GM=class{constructor(){this.sessionToken=ri.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}};var yC=class{constructor(){this.Ir=new pn(gi.Tr),this.Er=new pn(gi.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){let i=new gi(e,n);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Rr(new gi(e,n))}Vr(e,n){e.forEach(i=>this.removeReference(i,n))}mr(e){let n=new me(new Ut([])),i=new gi(n,e),r=new gi(n,e+1),s=[];return this.Er.forEachInRange([i,r],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let n=new me(new Ut([])),i=new gi(n,e),r=new gi(n,e+1),s=ut();return this.Er.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new gi(e,0),i=this.Ir.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},gi=class{constructor(e,n){this.key=e,this.yr=n}static Tr(e,n){return me.comparator(e.key,n.key)||lt(e.yr,n.yr)}static dr(e,n){return lt(e.yr,n.yr)||me.comparator(e.key,n.key)}};var HM=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new pn(gi.Tr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dC(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.Sr=this.Sr.add(new gi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.Dr(i),s=r<0?0:r;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new gi(n,0),r=new gi(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],o=>{let a=this.br(o.yr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pn(lt);return n.forEach(r=>{let s=new gi(r,0),o=new gi(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{i=i.add(a.yr)})}),H.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;me.isDocumentKey(s)||(s=s.child(""));let o=new gi(new me(s),0),a=new pn(lt);return this.Sr.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.yr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(i=>{let r=this.br(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ae(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return H.forEach(n.mutations,r=>{let s=new gi(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Sr=i})}xn(e){}containsKey(e,n){let i=new gi(n,0),r=this.Sr.firstAfterOrEqual(i);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var UM=class{constructor(e){this.Fr=e,this.docs=function(){return new Dn(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Fr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return H.resolve(i?i.document.mutableCopy():yi.newInvalidDocument(n))}getEntries(e,n){let i=ms();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():yi.newInvalidDocument(r))}),H.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ms(),o=n.path,a=new me(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||GO(A8(u),i)<=0||(r.has(u.key)||xC(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Ee()}Mr(e,n){return H.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new jM(this)}getSize(e){return H.resolve(this.size)}},jM=class extends qE{constructor(e){super(),this.ur=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ur.addEntry(e,r)):this.ur.removeEntry(i)}),H.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}};var WM=class{constructor(e){this.persistence=e,this.Or=new rl(n=>uh(n),RC),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new yC,this.targetCount=0,this.Br=yg.Ln()}forEachTarget(e,n){return this.Or.forEach((i,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Nr&&(this.Nr=n),H.resolve()}Qn(e){this.Or.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new yg(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Qn(n),H.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),H.waitFor(s).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){let i=this.Or.get(n)||null;return H.resolve(i)}addMatchingKeys(e,n,i){return this.Lr.Ar(n,i),H.resolve()}removeMatchingKeys(e,n,i){this.Lr.Vr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Lr.mr(n),H.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Lr.pr(n);return H.resolve(i)}containsKey(e,n){return H.resolve(this.Lr.containsKey(n))}};var YE=class{constructor(e,n){this.kr={},this.overlays={},this.qr=new zs(0),this.Qr=!1,this.Qr=!0,this.Kr=new GM,this.referenceDelegate=e(this),this.$r=new WM(this),this.indexManager=new IM,this.remoteDocumentCache=function(r){return new UM(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new BE(n),this.Wr=new VM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.kr[e.toKey()];return i||(i=new HM(n,this.referenceDelegate),this.kr[e.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);let r=new zM(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(e,n){return H.or(Object.values(this.kr).map(i=>()=>i.containsKey(e,n)))}},zM=class extends RE{constructor(e){super(),this.currentSequenceNumber=e}},QE=class t{constructor(e){this.persistence=e,this.Hr=new yC,this.Jr=null}static Yr(e){return new t(e)}get Zr(){if(this.Jr)return this.Jr;throw Ee()}addReference(e,n,i){return this.Hr.addReference(i,n),this.Zr.delete(i.toString()),H.resolve()}removeReference(e,n,i){return this.Hr.removeReference(i,n),this.Zr.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Zr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Hr.mr(n.targetId).forEach(r=>this.Zr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Gr(){this.Jr=new Set}zr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Zr,i=>{let r=me.fromPath(i);return this.Xr(e,r).next(s=>{s||n.removeEntry(r,He.min())})}).next(()=>(this.Jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Xr(e,n).next(i=>{i?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(e){return 0}Xr(e,n){return H.or([()=>H.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.jr(e,n)])}};var qM=class{constructor(e){this.serializer=e}O(e,n,i,r){let s=new IE("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",F5,{unique:!0}),l.createObjectStore("documentMutations")}(e),p8(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),p8(e)),o=o.next(()=>function(l){let c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:He.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",F5,{unique:!0});let d=c.store("mutations"),h=u.map(p=>d.put(p));return H.waitFor(h)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.ti(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ni(s)))),i<7&&r>=7&&(o=o.next(()=>this.ri(s))),i<8&&r>=8&&(o=o.next(()=>this.ii(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.si(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:Qpe});c.createIndex("collectionPathOverlayIndex",Xpe,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",$pe,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:Vpe});c.createIndex("documentKeyIndex",Bpe),c.createIndex("collectionGroupIndex",Gpe)}(e)).next(()=>this.oi(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this._i(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:zpe}).createIndex("sequenceNumberIndex",qpe,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Kpe}).createIndex("documentKeyIndex",Ype,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ni(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=WE(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ti(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>H.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>H.forEach(a,l=>{Ae(l.userId===s.userId);let c=nh(this.serializer,l);return I6(e,s.userId,c).next(()=>{})}))}))}ri(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.J((o,a)=>{let l=new Ut(o),c=function(d){return[0,Gr(d)]}(l);s.push(n.get(c).next(u=>u?H.resolve():(d=>n.put({targetId:0,path:Gr(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>H.waitFor(s))})}ii(e,n){e.createObjectStore("collectionParents",{keyPath:Wpe});let i=n.store("collectionParents"),r=new vC,s=o=>{if(r.add(o)){let a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Gr(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let l=new Ut(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{let u=$a(a);return s(u.popLast())}))}si(e){let n=e.store("targets");return n.J((i,r)=>{let s=Zy(r),o=D6(this.serializer,s);return n.put(o)})}oi(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((s,o)=>{let a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new me(Ut.fromString(d.document.name).popFirst(5)):d.noDocument?me.fromSegments(d.noDocument.path):d.unknownDocument?me.fromSegments(d.unknownDocument.path):Ee()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>H.waitFor(r))}_i(e,n){let i=n.store("mutations"),r=A6(this.serializer),s=new YE(QE.Yr,this.serializer.ct);return i.U().next(o=>{let a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:ut();nh(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),H.forEach(a,(l,c)=>{let u=new mi(c),d=HE.lt(this.serializer,u),h=s.getIndexManager(u),p=zE.lt(u,this.serializer,h,s.referenceDelegate);return new KE(r,p,d,h).recalculateAndSaveOverlaysForDocumentKeys(new oC(n,zs.oe),l).next()})})}};function p8(t){t.createObjectStore("targetDocuments",{keyPath:Upe}).createIndex("documentTargetsIndex",jpe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hpe,{unique:!0}),t.createObjectStore("targetGlobal")}var kP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",KM=class t{constructor(e,n,i,r,s,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ai=s,this.window=o,this.document=a,this.ui=c,this.ci=u,this.li=d,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=h=>Promise.resolve(),!t.D())throw new te(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OM(this,r),this.di=n+"main",this.serializer=new BE(l),this.Ai=new wu(this.di,this.li,new qM(this.serializer)),this.Kr=new SM,this.$r=new FM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=A6(this.serializer),this.Wr=new wM,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,u===!1&&ti("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,kP);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new zs(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){return this.Ei=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(n=>{n||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.Si(e).next(()=>!1):!!n&&this.bi(e).next(()=>!0))).catch(e=>{if(Fu(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return Xy(e).get("owner").next(n=>H.resolve(this.Di(n)))}Ci(e){return mE(e).delete(this.clientId)}vi(){return N(this,null,function*(){if(this.isPrimary&&!this.Fi(this.Ti,18e5)){this.Ti=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=xi(n,"clientMetadata");return i.U().next(r=>{let s=this.Mi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return H.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ri)for(let n of e)this.Ri.removeItem(this.xi(n.clientId))}})}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?H.resolve(!0):Xy(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)){if(this.Di(n)&&this.networkEnabled)return!0;if(!this.Di(n)){if(!n.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,kP);return!1}}return!(!this.networkEnabled||!this.inForeground)||mE(e).U().next(i=>this.Mi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ie("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Qr=!1,this.Ni(),this.Ii&&(this.Ii.cancel(),this.Ii=null),this.Li(),this.Bi(),yield this.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new oC(e,zs.oe);return this.Si(n).next(()=>this.Ci(n))}),this.Ai.close(),this.ki()})}Mi(e,n){return e.filter(i=>this.Fi(i.updateTimeMs,n)&&!this.Oi(i.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>mE(e).U().next(n=>this.Mi(n,18e5).map(i=>i.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,n){return zE.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return HE.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,n,i){ie("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?ege:l===16?Jpe:l===15?UO:l===14?V8:l===13?L8:l===12?Zpe:l===11?N8:void Ee()}(this.li),o;return this.Ai.runTransaction(e,r,s,a=>(o=new oC(a,this.qr?this.qr.next():zs.oe),n==="readwrite-primary"?this.yi(o).next(l=>!!l||this.wi(o)).next(l=>{if(!l)throw ti(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new te(z.FAILED_PRECONDITION,P8);return i(o)}).next(l=>this.bi(o).next(()=>l)):this.Qi(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Qi(e){return Xy(e).get("owner").next(n=>{if(n!==null&&this.Fi(n.leaseTimestampMs,5e3)&&!this.Oi(n.ownerId)&&!this.Di(n)&&!(this.ci||this.allowTabSynchronization&&n.allowTabSynchronization))throw new te(z.FAILED_PRECONDITION,kP)})}bi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xy(e).put("owner",n)}static D(){return wu.D()}Si(e){let n=Xy(e);return n.get("owner").next(i=>this.Di(i)?(ie("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):H.resolve())}Fi(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(ti(`Detected an update time that is in the future: ${e} > ${i}`),!1))}mi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground=this.document.visibilityState==="visible")}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.hi=()=>{this.Ni();let n=/(?:Version|Mobile)\/1[456]/;qI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var n;try{let i=((n=this.Ri)===null||n===void 0?void 0:n.getItem(this.xi(e)))!==null;return ie("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ti("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){ti("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Xy(t){return xi(t,"owner")}function mE(t){return xi(t,"clientMetadata")}function XO(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var YM=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Ki=i,this.$i=r}static Ui(e,n){let i=ut(),r=ut();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var QM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XE=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return qI()?8:M8(Fv())>0?6:4}()}initialize(e,n){this.Hi=e,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.Ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new QM;return this.Zi(e,n,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,n,o,a.size)})}).next(()=>s.result)}Xi(e,n,i,r){return i.documentReadCount<this.zi?(tg()<=ss.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ng(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),H.resolve()):(tg()<=ss.DEBUG&&ie("QueryEngine","Query:",ng(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(tg()<=ss.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ng(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):H.resolve())}Ji(e,n){if(H5(n))return H.resolve(null);let i=Hr(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kE(n,null,"F"),i=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ut(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let c=this.es(n,a);return this.ts(n,c,o,l.readTime)?this.Ji(e,kE(n,null,"F")):this.ns(e,c,n,l)}))})))}Yi(e,n,i,r){return H5(n)||r.isEqual(He.min())?H.resolve(null):this.Hi.getDocuments(e,i).next(s=>{let o=this.es(n,s);return this.ts(n,o,i,r)?H.resolve(null):(tg()<=ss.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ng(n)),this.ns(e,o,n,F8(r,-1)).next(a=>a))})}es(e,n){let i=new pn($8(e));return n.forEach((r,s)=>{xC(e,s)&&(i=i.add(s))}),i}ts(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(e,n,i){return tg()<=ss.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ng(n)),this.Hi.getDocumentsMatchingQuery(e,n,wo.min(),i)}ns(e,n,i,r){return this.Hi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var XM=class{constructor(e,n,i,r){this.persistence=e,this.rs=n,this.serializer=r,this.ss=new Dn(lt),this.os=new rl(s=>uh(s),RC),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(i)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KE(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ss))}};function P6(t,e,n,i){return new XM(t,e,n,i)}function M6(t,e){return N(this,null,function*(){let n=ge(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.cs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],l=ut();for(let c of r){o.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of s){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({ls:c,removedBatchIds:o,addedBatchIds:a}))})})})}function Mge(t,e){let n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.us.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let d=c.batch,h=d.keys(),p=H.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(m=>{let v=c.docVersions.get(g);Ae(v!==null),m.version.compareTo(v)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function O6(t){let e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.$r.getLastRemoteSnapshotVersion(n))}function Oge(t,e){let n=ge(t),i=e.snapshotVersion,r=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.us.newChangeBuffer({trackRemovals:!0});r=n.ss;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.$r.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.$r.addMatchingKeys(s,u.addedDocuments,d)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ri.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),function(m,v,C){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,p,u)&&a.push(n.$r.updateTargetData(s,p))});let l=ms(),c=ut();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(k6(s,o,e.documentUpdates).next(u=>{l=u.hs,c=u.Ps})),!i.isEqual(He.min())){let u=n.$r.getLastRemoteSnapshotVersion(s).next(d=>n.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ss=r,s))}function k6(t,e,n){let i=ut(),r=ut();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ms();return n.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(He.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{hs:o,Ps:r}})}function kge(t,e){let n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Cg(t,e){let n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.$r.getTargetData(i,e).next(s=>s?(r=s,H.resolve(r)):n.$r.allocateTargetId(i).next(o=>(r=new vg(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ss=n.ss.insert(i.targetId,i),n.os.set(e,i.targetId)),i})}function wg(t,e,n){return N(this,null,function*(){let i=ge(t),r=i.ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Fu(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ss=i.ss.remove(e),i.os.delete(r.target)})}function $E(t,e,n){let i=ge(t),r=He.min(),s=ut();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){let d=ge(l),h=d.os.get(u);return h!==void 0?H.resolve(d.ss.get(h)):d.$r.getTargetData(c,u)}(i,o,Hr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.rs.getDocumentsMatchingQuery(o,e,n?r:He.min(),n?s:ut())).next(a=>(V6(i,X8(e),a),{documents:a,Is:s})))}function N6(t,e){let n=ge(t),i=ge(n.$r),r=n.ss.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function L6(t,e){let n=ge(t),i=n._s.get(e)||He.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.us.getAllFromCollectionGroup(r,e,F8(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(V6(n,e,r),r))}function V6(t,e,n){let i=t._s.get(e)||He.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t._s.set(e,i)}function Nge(t,e,n,i){return N(this,null,function*(){let r=ge(t),s=ut(),o=ms();for(let c of n){let u=e.Ts(c.metadata.name);c.document&&(s=s.add(u));let d=e.Es(c);d.setReadTime(e.ds(c.metadata.readTime)),o=o.insert(u,d)}let a=r.us.newChangeBuffer({trackRemovals:!0}),l=yield Cg(r,function(u){return Hr(Ig(Ut.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>k6(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.$r.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.$r.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.hs,u.Ps)).next(()=>u.hs)))})}function Lge(i,r){return N(this,arguments,function*(t,e,n=ut()){let s=yield Cg(t,Hr(YO(e.bundledQuery))),o=ge(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=ii(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Wr.saveNamedQuery(a,e);let c=s.withResumeToken(ri.EMPTY_BYTE_STRING,l);return o.ss=o.ss.insert(c.targetId,c),o.$r.updateTargetData(a,c).next(()=>o.$r.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.$r.addMatchingKeys(a,n,s.targetId)).next(()=>o.Wr.saveNamedQuery(a,e))})})}function g8(t,e){return`firestore_clients_${t}_${e}`}function m8(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function NP(t,e){return`firestore_targets_${t}_${e}`}var ZE=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static As(e,n,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new te(r.error.code,r.error.message))),o?new t(e,n,r.state,s):(ti("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Rs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nC=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static As(e,n){let i=JSON.parse(n),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new te(i.error.code,i.error.message))),s?new t(e,i.state,r):(ti("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Rs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},JE=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static As(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=qO();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=O8(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new t(e,s):(ti("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},$M=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static As(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ti("SharedClientState",`Failed to parse online state: ${e}`),null)}},CC=class{constructor(){this.activeTargetIds=qO()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},iC=class{constructor(e,n,i,r,s){this.window=e,this.ai=n,this.persistenceKey=i,this.gs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new Dn(lt),this.started=!1,this.Ss=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.bs=g8(this.persistenceKey,this.gs),this.Ds=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ws=this.ws.insert(this.gs,new CC),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ms=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.xs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.qi();for(let i of e){if(i===this.gs)continue;let r=this.getItem(g8(this.persistenceKey,i));if(r){let s=JE.As(i,r);s&&(this.ws=this.ws.insert(s.clientId,s))}}this.Os();let n=this.storage.getItem(this.Ms);if(n){let i=this.Ns(n);i&&this.Ls(i)}for(let i of this.Ss)this.ys(i);this.Ss=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let n=!1;return this.ws.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,n,i){this.ks(e,n,i),this.qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(NP(this.persistenceKey,e));if(i){let r=nC.As(e,i);r&&(n=r.state)}}return this.Qs.Vs(e),this.Os(),n}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NP(this.persistenceKey,e))}updateQueryState(e,n,i){this.Ks(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return ie("SharedClientState","READ",e,n),n}setItem(e,n){ie("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){let n=e;if(n.storageArea===this.storage){if(ie("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bs)return void ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let i=this.Ws(n.key);return this.Gs(i,null)}{let i=this.zs(n.key,n.newValue);if(i)return this.Gs(i.clientId,i)}}else if(this.vs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let i=this.Js(n.key,n.newValue);if(i)return this.Ys(i)}}else if(n.key===this.Ms){if(n.newValue!==null){let i=this.Ns(n.newValue);if(i)return this.Ls(i)}}else if(n.key===this.Ds){let i=function(s){let o=zs.oe;if(s!=null)try{let a=JSON.parse(s);Ae(typeof a=="number"),o=a}catch(a){ti("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==zs.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.xs){let i=this.Zs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Xs(r)))}}}else this.Ss.push(n)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,n,i){let r=new ZE(this.currentUser,e,n,i),s=m8(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Rs())}qs(e){let n=m8(this.persistenceKey,this.currentUser,e);this.removeItem(n)}$s(e){let n={clientId:this.gs,onlineState:e};this.storage.setItem(this.Ms,JSON.stringify(n))}Ks(e,n,i){let r=NP(this.persistenceKey,e),s=new nC(e,n,i);this.setItem(r,s.Rs())}Us(e){let n=JSON.stringify(Array.from(e));this.setItem(this.xs,n)}Ws(e){let n=this.Cs.exec(e);return n?n[1]:null}zs(e,n){let i=this.Ws(e);return JE.As(i,n)}js(e,n){let i=this.vs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return ZE.As(new mi(s),r,n)}Js(e,n){let i=this.Fs.exec(e),r=Number(i[1]);return nC.As(r,n)}Ns(e){return $M.As(e)}Zs(e){return JSON.parse(e)}Hs(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.eo(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,n){let i=n?this.ws.insert(e,n):this.ws.remove(e),r=this.Bs(this.ws),s=this.Bs(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.ro(o,a).then(()=>{this.ws=i})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=qO();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},eD=class{constructor(){this.io=new CC,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,n,i){this.so[e]=n}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new CC,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ZM=class{oo(e){}shutdown(){}};var tD=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vE=null;function LP(){return vE===null?vE=function(){return 268435456+Math.round(2147483648*Math.random())}():vE++,"0x"+vE.toString(16)}var Vge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var JM=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var mr="WebChannelConnection",eO=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+n.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(n,i,r,s,o){let a=LP(),l=this.Mo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(c,s,o),this.Oo(n,l,c,r).then(u=>(ie("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Co("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}No(n,i,r,s,o,a){return this.Fo(n,i,r,s,o)}xo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rg}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}Mo(n,i){let r=Vge[n];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,n,i,r){let s=LP();return new Promise((o,a)=>{let l=new IP;l.setWithCredentials(!0),l.listenOnce(FP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qy.NO_ERROR:let u=l.getResponseJson();ie(mr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case qy.TIMEOUT:ie(mr,`RPC '${e}' ${s} timed out`),a(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case qy.HTTP_ERROR:let d=l.getStatus();if(ie(mr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);let p=h?.error;if(p&&p.status&&p.message){let g=function(v){let C=v.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(C)>=0?C:z.UNKNOWN}(p.status);a(new te(g,p.message))}else a(new te(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(z.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ie(mr,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(r);ie(mr,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Lo(e,n,i){let r=LP(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MP(),a=PP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new xP({})),this.xo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let u=s.join("");ie(mr,`Creating RPC '${e}' stream ${r}: ${u}`,l);let d=o.createWebChannel(u,l),h=!1,p=!1,g=new JM({Po:v=>{p?ie(mr,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(h||(ie(mr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),ie(mr,`RPC '${e}' stream ${r} sending:`,v),d.send(v))},Io:()=>d.close()}),m=(v,C,b)=>{v.listen(C,E=>{try{b(E)}catch(T){setTimeout(()=>{throw T},0)}})};return m(d,Xp.EventType.OPEN,()=>{p||(ie(mr,`RPC '${e}' stream ${r} transport opened.`),g.po())}),m(d,Xp.EventType.CLOSE,()=>{p||(p=!0,ie(mr,`RPC '${e}' stream ${r} transport closed`),g.wo())}),m(d,Xp.EventType.ERROR,v=>{p||(p=!0,Co(mr,`RPC '${e}' stream ${r} transport errored:`,v),g.wo(new te(z.UNAVAILABLE,"The operation could not be completed")))}),m(d,Xp.EventType.MESSAGE,v=>{var C;if(!p){let b=v.data[0];Ae(!!b);let E=b,T=E.error||((C=E[0])===null||C===void 0?void 0:C.error);if(T){ie(mr,`RPC '${e}' stream ${r} received error:`,T);let P=T.status,x=function(D){let O=pi[D];if(O!==void 0)return d6(O)}(P),_=T.message;x===void 0&&(x=z.INTERNAL,_="Unknown error status: "+P+" with message "+T.message),p=!0,g.wo(new te(x,_)),d.close()}else ie(mr,`RPC '${e}' stream ${r} received:`,b),g.So(b)}}),m(a,AP.STAT_EVENT,v=>{v.stat===fE.PROXY?ie(mr,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===fE.NOPROXY&&ie(mr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.yo()},0),g}};function B6(){return typeof window<"u"?window:null}function bE(){return typeof document<"u"?document:null}function FC(t){return new gM(t,!0)}var wC=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ai=e,this.timerId=n,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let n=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var nD=class{constructor(e,n,i,r,s,o,a,l){this.ai=e,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new wC(e,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return N(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return N(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,n){return N(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(n)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===n&&this.h_(i,r)},i=>{e(()=>{let r=new te(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(e,n){let i=this.l_(this.Jo);this.stream=this.I_(e,n),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(()=>N(this,null,function*(){this.state=0,this.start()}))}P_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return n=>{this.ai.enqueueAndForget(()=>this.Jo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},tO=class extends nD{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}I_(e,n){return this.connection.Lo("Listen",e,n)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let n=bge(this.serializer,e),i=function(s){if(!("targetChange"in s))return He.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?ii(o.readTime):He.min()}(e);return this.listener.E_(n,i)}d_(e){let n={};n.database=yM(this.serializer),n.addTarget=function(s,o){let a,l=o.target;if(a=ME(l)?{documents:C6(s,l)}:{query:w6(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=f6(s,o.resumeToken);let c=mM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(He.min())>0){a.readTime=mg(s,o.snapshotVersion.toTimestamp());let c=mM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let i=Ege(this.serializer,e);i&&(n.labels=i),this.__(n)}A_(e){let n={};n.database=yM(this.serializer),n.removeTarget=e,this.__(n)}},nO=class extends nD{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,n){return this.connection.Lo("Write",e,n)}T_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let n=_ge(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.f_(i,n)}g_(){let e={};e.database=yM(this.serializer),this.__(e)}V_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>mC(this.serializer,i))};this.__(n)}};var iO=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,n,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,vM(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(z.UNKNOWN,s.toString())})}No(e,n,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,vM(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(z.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},rO=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(ti(n),this.b_=!1):ie("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var sO=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{i.enqueueAndForget(()=>N(this,null,function*(){Au(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),yield function(l){return N(this,null,function*(){let c=ge(l);c.N_.add(4),yield xg(c),c.k_.set("Unknown"),c.N_.delete(4),yield AC(c)})}(this))}))}),this.k_=new rO(i,r)}};function AC(t){return N(this,null,function*(){if(Au(t))for(let e of t.L_)yield e(!0)})}function xg(t){return N(this,null,function*(){for(let e of t.L_)yield e(!1)})}function SD(t,e){let n=ge(t);n.O_.has(e.targetId)||(n.O_.set(e.targetId,e),JO(n)?ZO(n):Ag(n).n_()&&$O(n,e))}function Sg(t,e){let n=ge(t),i=Ag(n);n.O_.delete(e),i.n_()&&G6(n,e),n.O_.size===0&&(i.n_()?i.s_():Au(n)&&n.k_.set("Unknown"))}function $O(t,e){if(t.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ag(t).d_(e)}function G6(t,e){t.q_.xe(e),Ag(t).A_(e)}function ZO(t){t.q_=new pM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.O_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ag(t).start(),t.k_.D_()}function JO(t){return Au(t)&&!Ag(t).t_()&&t.O_.size>0}function Au(t){return ge(t).N_.size===0}function H6(t){t.q_=void 0}function Bge(t){return N(this,null,function*(){t.k_.set("Online")})}function Gge(t){return N(this,null,function*(){t.O_.forEach((e,n)=>{$O(t,e)})})}function Hge(t,e){return N(this,null,function*(){H6(t),JO(t)?(t.k_.F_(e),ZO(t)):t.k_.set("Unknown")})}function Uge(t,e,n){return N(this,null,function*(){if(t.k_.set("Online"),e instanceof LE&&e.state===2&&e.cause)try{yield function(r,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.O_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.O_.delete(a),r.q_.removeTarget(a))})}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield iD(t,i)}else if(e instanceof cg?t.q_.Ke(e):e instanceof NE?t.q_.He(e):t.q_.We(e),!n.isEqual(He.min()))try{let i=yield O6(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=s.O_.get(c);u&&s.O_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let u=s.O_.get(l);if(!u)return;s.O_.set(l,u.withResumeToken(ri.EMPTY_BYTE_STRING,u.snapshotVersion)),G6(s,l);let d=new vg(u.target,l,c,u.sequenceNumber);$O(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),yield iD(t,i)}})}function iD(t,e,n){return N(this,null,function*(){if(!Fu(e))throw e;t.N_.add(1),yield xg(t),t.k_.set("Offline"),n||(n=()=>O6(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){ie("RemoteStore","Retrying IndexedDB access"),yield n(),t.N_.delete(1),yield AC(t)}))})}function U6(t,e){return e().catch(n=>iD(t,n,e))}function Fg(t){return N(this,null,function*(){let e=ge(t),n=Iu(e),i=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;jge(e);)try{let r=yield kge(e.localStore,i);if(r===null){e.x_.length===0&&n.s_();break}i=r.batchId,Wge(e,r)}catch(r){yield iD(e,r)}j6(e)&&W6(e)})}function jge(t){return Au(t)&&t.x_.length<10}function Wge(t,e){t.x_.push(e);let n=Iu(t);n.n_()&&n.R_&&n.V_(e.mutations)}function j6(t){return Au(t)&&!Iu(t).t_()&&t.x_.length>0}function W6(t){Iu(t).start()}function zge(t){return N(this,null,function*(){Iu(t).g_()})}function qge(t){return N(this,null,function*(){let e=Iu(t);for(let n of t.x_)e.V_(n.mutations)})}function Kge(t,e,n){return N(this,null,function*(){let i=t.x_.shift(),r=dM.from(i,e,n);yield U6(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Fg(t)})}function Yge(t,e){return N(this,null,function*(){e&&Iu(t).R_&&(yield function(i,r){return N(this,null,function*(){if(function(o){return u6(o)&&o!==z.ABORTED}(r.code)){let s=i.x_.shift();Iu(i).i_(),yield U6(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Fg(i)}})}(t,e)),j6(t)&&W6(t)})}function v8(t,e){return N(this,null,function*(){let n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");let i=Au(n);n.N_.add(3),yield xg(n),i&&n.k_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),yield AC(n)})}function oO(t,e){return N(this,null,function*(){let n=ge(t);e?(n.N_.delete(2),yield AC(n)):e||(n.N_.add(2),yield xg(n),n.k_.set("Unknown"))})}function Ag(t){return t.Q_||(t.Q_=function(n,i,r){let s=ge(n);return s.y_(),new tO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{To:Bge.bind(null,t),Ao:Gge.bind(null,t),Vo:Hge.bind(null,t),E_:Uge.bind(null,t)}),t.L_.push(e=>N(this,null,function*(){e?(t.Q_.i_(),JO(t)?ZO(t):t.k_.set("Unknown")):(yield t.Q_.stop(),H6(t))}))),t.Q_}function Iu(t){return t.K_||(t.K_=function(n,i,r){let s=ge(n);return s.y_(),new nO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:zge.bind(null,t),Vo:Yge.bind(null,t),m_:qge.bind(null,t),f_:Kge.bind(null,t)}),t.L_.push(e=>N(this,null,function*(){e?(t.K_.i_(),yield Fg(t)):(yield t.K_.stop(),t.x_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))}))),t.K_}var aO=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Pg(t,e){if(ti("AsyncQueue",`${e}: ${t}`),Fu(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}var rD=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||me.comparator(n.key,i.key):(n,i)=>me.comparator(n.key,i.key),this.keyedMap=$y(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var sD=class{constructor(){this.U_=new Dn(me.comparator)}track(e){let n=e.doc.key,i=this.U_.get(n);i?e.type!==0&&i.type===3?this.U_=this.U_.insert(n,e):e.type===3&&i.type!==1?this.U_=this.U_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.U_=this.U_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.U_=this.U_.remove(n):e.type===1&&i.type===2?this.U_=this.U_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):Ee():this.U_=this.U_.insert(n,e)}W_(){let e=[];return this.U_.inorderTraversal((n,i)=>{e.push(i)}),e}},bg=class t{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,rD.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&IC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var lO=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},cO=class{constructor(){this.queries=y8(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,i){let r=ge(n),s=r.queries;r.queries=y8(),s.forEach((o,a)=>{for(let l of a.z_)l.onError(i)})})(this,new te(z.ABORTED,"Firestore shutting down"))}};function y8(){return new rl(t=>Q8(t),IC)}function ek(t,e){return N(this,null,function*(){let n=ge(t),i=3,r=e.query,s=n.queries.get(r);s?!s.j_()&&e.H_()&&(i=2):(s=new lO,i=e.H_()?0:1);try{switch(i){case 0:s.G_=yield n.onListen(r,!0);break;case 1:s.G_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let a=Pg(o,`Initialization of query '${ng(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.z_.push(e),e.Y_(n.onlineState),s.G_&&e.Z_(s.G_)&&nk(n)})}function tk(t,e){return N(this,null,function*(){let n=ge(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?r=e.H_()?0:1:!s.j_()&&e.H_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function Qge(t,e){let n=ge(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.z_)a.Z_(r)&&(i=!0);o.G_=r}}i&&nk(n)}function Xge(t,e,n){let i=ge(t),r=i.queries.get(e);if(r)for(let s of r.z_)s.onError(n);i.queries.delete(e)}function nk(t){t.J_.forEach(e=>{e.next()})}var uO,C8;(C8=uO||(uO={})).X_="default",C8.Cache="cache";var SC=class{constructor(e,n,i){this.query=e,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new bg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ta?this.ra(e)&&(this.ea.next(e),n=!0):this.ia(e,this.onlineState)&&(this.sa(e),n=!0),this.na=e,n}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let n=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),n=!0),n}ia(e,n){if(!e.fromCache||!this.H_())return!0;let i=n!=="Offline";return(!this.options.oa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let n=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(e){e=bg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==uO.Cache}};var dO=class{constructor(e,n){this._a=e,this.byteLength=n}aa(){return"metadata"in this._a}};var oD=class{constructor(e){this.serializer=e}Ts(e){return el(this.serializer,e)}Es(e){return e.metadata.exists?y6(this.serializer,e.document,!1):yi.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return ii(e)}},hO=class{constructor(e,n,i){this.ua=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=z6(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++n;let i=Ut.fromString(e._a.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}la(e){let n=new Map,i=new oD(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.Ts(r.metadata.name);for(let o of r.metadata.queries){let a=(n.get(o)||ut()).add(s);n.set(o,a)}}return n}complete(){return N(this,null,function*(){let e=yield Nge(this.localStore,new oD(this.serializer),this.documents,this.ua.id),n=this.la(this.documents);for(let i of this.queries)yield Lge(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ha:this.collectionGroups,Pa:e}})}};function z6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var aD=class{constructor(e){this.key=e}},lD=class{constructor(e){this.key=e}},cD=class{constructor(e,n){this.query=e,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ut(),this.mutatedKeys=ut(),this.da=$8(e),this.Aa=new rD(this.da)}get Ra(){return this.Ia}Va(e,n){let i=n?n.ma:new sD,r=n?n.Aa:this.Aa,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),p=xC(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),v=!1;h&&p?h.data.isEqual(p.data)?g!==m&&(i.track({type:3,doc:p}),v=!0):this.fa(h,p)||(i.track({type:2,doc:p}),v=!0,(l&&this.da(p,l)>0||c&&this.da(p,c)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),v=!0):h&&!p&&(i.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Aa:o,ma:i,ts:a,mutatedKeys:s}}fa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let o=e.ma.W_();o.sort((u,d)=>function(p,g){let m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return m(p)-m(g)}(u.type,d.type)||this.da(u.doc,d.doc)),this.ga(i),r=r!=null&&r;let a=n&&!r?this.pa():[],l=this.Ea.size===0&&this.current&&!r?1:0,c=l!==this.Ta;return this.Ta=l,o.length!==0||c?{snapshot:new bg(this.query,e.Aa,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new sD,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=ut(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let n=[];return e.forEach(i=>{this.Ea.has(i)||n.push(new lD(i))}),this.Ea.forEach(i=>{e.has(i)||n.push(new aD(i))}),n}Sa(e){this.Ia=e.Is,this.Ea=ut();let n=this.Va(e.documents);return this.applyChanges(n,!0)}ba(){return bg.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},fO=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},pO=class{constructor(e){this.key=e,this.Da=!1}},gO=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new rl(a=>Q8(a),IC),this.Fa=new Map,this.Ma=new Set,this.xa=new Dn(me.comparator),this.Oa=new Map,this.Na=new yC,this.La={},this.Ba=new Map,this.ka=yg.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function $ge(t,e,n=!0){return N(this,null,function*(){let i=bD(t),r,s=i.va.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=yield q6(i,e,n,!0),r})}function Zge(t,e){return N(this,null,function*(){let n=bD(t);yield q6(n,e,!0,!1)})}function q6(t,e,n,i){return N(this,null,function*(){let r=yield Cg(t.localStore,Hr(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield ik(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&SD(t.remoteStore,r),a})}function ik(t,e,n,i,r){return N(this,null,function*(){t.Qa=(d,h,p)=>function(m,v,C,b){return N(this,null,function*(){let E=v.view.Va(C);E.ts&&(E=yield $E(m.localStore,v.query,!1).then(({documents:_})=>v.view.Va(_,E)));let T=b&&b.targetChanges.get(v.targetId),P=b&&b.targetMismatches.get(v.targetId)!=null,x=v.view.applyChanges(E,m.isPrimaryClient,T,P);return mO(m,v.targetId,x.ya),x.snapshot})}(t,d,h,p);let s=yield $E(t.localStore,e,!0),o=new cD(e,s.Is),a=o.Va(s.documents),l=pC.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);mO(t,n,c.ya);let u=new fO(e,n,o);return t.va.set(e,u),t.Fa.has(n)?t.Fa.get(n).push(e):t.Fa.set(n,[e]),c.snapshot})}function Jge(t,e,n){return N(this,null,function*(){let i=ge(t),r=i.va.get(e),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(o=>!IC(o,e))),void i.va.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Sg(i.remoteStore,r.targetId),_g(i,r.targetId)}).catch(xu))):(_g(i,r.targetId),yield wg(i.localStore,r.targetId,!0))})}function eme(t,e){return N(this,null,function*(){let n=ge(t),i=n.va.get(e),r=n.Fa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(n.remoteStore,i.targetId))})}function tme(t,e,n){return N(this,null,function*(){let i=ak(t);try{let r=yield function(o,a){let l=ge(o),c=Cn.now(),u=a.reduce((p,g)=>p.add(g.key),ut()),d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ms(),m=ut();return l.us.getEntries(p,u).next(v=>{g=v,g.forEach((C,b)=>{b.isValidDocument()||(m=m.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(v=>{d=v;let C=[];for(let b of a){let E=gge(b,d.get(b.key).overlayedDocument);E!=null&&C.push(new ca(b.key,E,U8(E.value.mapValue),Kn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,C,a)}).next(v=>{h=v;let C=v.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(p,v.batchId,C)})}).then(()=>({batchId:h.batchId,changes:J8(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.La[o.currentUser.toKey()];c||(c=new Dn(lt)),c=c.insert(a,l),o.La[o.currentUser.toKey()]=c}(i,r.batchId,n),yield ec(i,r.changes),yield Fg(i.remoteStore)}catch(r){let s=Pg(r,"Failed to persist write");n.reject(s)}})}function K6(t,e){return N(this,null,function*(){let n=ge(t);try{let i=yield Oge(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Oa.get(s);o&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Da=!0:r.modifiedDocuments.size>0?Ae(o.Da):r.removedDocuments.size>0&&(Ae(o.Da),o.Da=!1))}),yield ec(n,i,e)}catch(i){yield xu(i)}})}function w8(t,e,n){let i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.va.forEach((s,o)=>{let a=o.view.Y_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let l=ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(let h of d.z_)h.Y_(a)&&(c=!0)}),c&&nk(l)}(i.eventManager,e),r.length&&i.Ca.E_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function nme(t,e,n){return N(this,null,function*(){let i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Oa.get(e),s=r&&r.key;if(s){let o=new Dn(me.comparator);o=o.insert(s,yi.newNoDocument(s,He.min()));let a=ut().add(s),l=new fC(He.min(),new Map,new Dn(lt),o,a);yield K6(i,l),i.xa=i.xa.remove(s),i.Oa.delete(e),ok(i)}else yield wg(i.localStore,e,!1).then(()=>_g(i,e,n)).catch(xu)})}function ime(t,e){return N(this,null,function*(){let n=ge(t),i=e.batch.batchId;try{let r=yield Mge(n.localStore,e);sk(n,i,null),rk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ec(n,r)}catch(r){yield xu(r)}})}function rme(t,e,n){return N(this,null,function*(){let i=ge(t);try{let r=yield function(o,a){let l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ae(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);sk(i,e,n),rk(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ec(i,r)}catch(r){yield xu(r)}})}function sme(t,e){return N(this,null,function*(){let n=ge(t);Au(n.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=ge(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Ba.get(i)||[];r.push(e),n.Ba.set(i,r)}catch(i){let r=Pg(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function rk(t,e){(t.Ba.get(e)||[]).forEach(n=>{n.resolve()}),t.Ba.delete(e)}function sk(t,e,n){let i=ge(t),r=i.La[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.La[i.currentUser.toKey()]=r}}function _g(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Fa.get(e))t.va.delete(i),n&&t.Ca.Ka(i,n);t.Fa.delete(e),t.isPrimaryClient&&t.Na.mr(e).forEach(i=>{t.Na.containsKey(i)||Y6(t,i)})}function Y6(t,e){t.Ma.delete(e.path.canonicalString());let n=t.xa.get(e);n!==null&&(Sg(t.remoteStore,n),t.xa=t.xa.remove(e),t.Oa.delete(n),ok(t))}function mO(t,e,n){for(let i of n)i instanceof aD?(t.Na.addReference(i.key,e),ome(t,i)):i instanceof lD?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.Na.removeReference(i.key,e),t.Na.containsKey(i.key)||Y6(t,i.key)):Ee()}function ome(t,e){let n=e.key,i=n.path.canonicalString();t.xa.get(n)||t.Ma.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.Ma.add(i),ok(t))}function ok(t){for(;t.Ma.size>0&&t.xa.size<t.maxConcurrentLimboResolutions;){let e=t.Ma.values().next().value;t.Ma.delete(e);let n=new me(Ut.fromString(e)),i=t.ka.next();t.Oa.set(i,new pO(n)),t.xa=t.xa.insert(n,i),SD(t.remoteStore,new vg(Hr(Ig(n.path)),i,"TargetPurposeLimboResolution",zs.oe))}}function ec(t,e,n){return N(this,null,function*(){let i=ge(t),r=[],s=[],o=[];i.va.isEmpty()||(i.va.forEach((a,l)=>{o.push(i.Qa(l,e,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){let d=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);let d=YM.Ui(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),i.Ca.E_(r),yield function(l,c){return N(this,null,function*(){let u=ge(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,h=>H.forEach(h.Ki,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>H.forEach(h.$i,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Fu(d))throw d;ie("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let p=u.ss.get(h),g=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(g);u.ss=u.ss.insert(h,m)}}})}(i.localStore,s))})}function ame(t,e){return N(this,null,function*(){let n=ge(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());let i=yield M6(n.localStore,e);n.currentUser=e,function(s,o){s.Ba.forEach(a=>{a.forEach(l=>{l.reject(new te(z.CANCELLED,o))})}),s.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ec(n,i.ls)}})}function lme(t,e){let n=ge(t),i=n.Oa.get(e);if(i&&i.Da)return ut().add(i.key);{let r=ut(),s=n.Fa.get(e);if(!s)return r;for(let o of s){let a=n.va.get(o);r=r.unionWith(a.view.Ra)}return r}}function cme(t,e){return N(this,null,function*(){let n=ge(t),i=yield $E(n.localStore,e.query,!0),r=e.view.Sa(i);return n.isPrimaryClient&&mO(n,e.targetId,r.ya),r})}function ume(t,e){return N(this,null,function*(){let n=ge(t);return L6(n.localStore,e).then(i=>ec(n,i))})}function dme(t,e,n,i){return N(this,null,function*(){let r=ge(t),s=yield function(a,l){let c=ge(a),u=ge(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Fn(d,l).next(h=>h?c.localDocuments.getDocuments(d,h):H.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?yield Fg(r.remoteStore):n==="acknowledged"||n==="rejected"?(sk(r,e,i||null),rk(r,e),function(a,l){ge(ge(a).mutationQueue).xn(l)}(r.localStore,e)):Ee(),yield ec(r,s)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)})}function hme(t,e){return N(this,null,function*(){let n=ge(t);if(bD(n),ak(n),e===!0&&n.qa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield S8(n,i.toArray());n.qa=!0,yield oO(n.remoteStore,!0);for(let s of r)SD(n.remoteStore,s)}else if(e===!1&&n.qa!==!1){let i=[],r=Promise.resolve();n.Fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(_g(n,o),wg(n.localStore,o,!0))),Sg(n.remoteStore,o)}),yield r,yield S8(n,i),function(o){let a=ge(o);a.Oa.forEach((l,c)=>{Sg(a.remoteStore,c)}),a.Na.gr(),a.Oa=new Map,a.xa=new Dn(me.comparator)}(n),n.qa=!1,yield oO(n.remoteStore,!1)}})}function S8(t,e,n){return N(this,null,function*(){let i=ge(t),r=[],s=[];for(let o of e){let a,l=i.Fa.get(o);if(l&&l.length!==0){a=yield Cg(i.localStore,Hr(l[0]));for(let c of l){let u=i.va.get(c),d=yield cme(i,u);d.snapshot&&s.push(d.snapshot)}}else{let c=yield N6(i.localStore,o);a=yield Cg(i.localStore,c),yield ik(i,Q6(c),o,!1,a.resumeToken)}r.push(a)}return i.Ca.E_(s),r})}function Q6(t){return Y8(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fme(t){return function(n){return ge(ge(n).persistence).qi()}(ge(t).localStore)}function pme(t,e,n,i){return N(this,null,function*(){let r=ge(t);if(r.qa)return void ie("SyncEngine","Ignoring unexpected query state notification.");let s=r.Fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield L6(r.localStore,X8(s[0])),a=fC.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ri.EMPTY_BYTE_STRING);yield ec(r,o,a);break}case"rejected":yield wg(r.localStore,e,!0),_g(r,e,i);break;default:Ee()}})}function gme(t,e,n){return N(this,null,function*(){let i=bD(t);if(i.qa){for(let r of e){if(i.Fa.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){ie("SyncEngine","Adding an already active target "+r);continue}let s=yield N6(i.localStore,r),o=yield Cg(i.localStore,s);yield ik(i,Q6(s),o.targetId,!1,o.resumeToken),SD(i.remoteStore,o)}for(let r of n)i.Fa.has(r)&&(yield wg(i.localStore,r,!1).then(()=>{Sg(i.remoteStore,r),_g(i,r)}).catch(xu))}})}function bD(t){let e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lme.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nme.bind(null,e),e.Ca.E_=Qge.bind(null,e.eventManager),e.Ca.Ka=Xge.bind(null,e.eventManager),e}function ak(t){let e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ime.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rme.bind(null,e),e}function mme(t,e,n){let i=ge(t);(function(s,o,a){return N(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(p,g){let m=ge(p),v=ii(g.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",C=>m.Wr.getBundleMetadata(C,g.id)).then(C=>!!C&&C.createTime.compareTo(v)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(z6(l));let c=new hO(l,s.localStore,o.serializer),u=yield o.$a();for(;u;){let h=yield c.ca(u);h&&a._updateProgress(h),u=yield o.$a()}let d=yield c.complete();return yield ec(s,d.Pa,void 0),yield function(p,g){let m=ge(p);return m.persistence.runTransaction("Save bundle","readwrite",v=>m.Wr.saveBundleMetadata(v,g))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.ha)}catch(l){return Co("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var bC=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=FC(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return P6(this.persistence,new XE,e.initialUser,this.serializer)}createPersistence(e){return new YE(QE.Yr,this.serializer)}createSharedClientState(e){return new eD}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var uD=class t extends bC{constructor(e,n,i){super(),this.Ua=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield jI(t.prototype,this,"initialize").call(this,e),yield this.Ua.initialize(this,e),yield ak(this.Ua.syncEngine),yield Fg(this.Ua.remoteStore),yield this.persistence.pi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return P6(this.persistence,new XE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new PM(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new QP(n,this.persistence);return new YP(e.asyncQueue,i)}createPersistence(e){let n=XO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?yo.withCacheSize(this.cacheSizeBytes):yo.DEFAULT;return new KM(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,B6(),bE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new eD}},vO=class t extends uD{constructor(e,n){super(e,n,!1),this.Ua=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield jI(t.prototype,this,"initialize").call(this,e);let n=this.Ua.syncEngine;this.sharedClientState instanceof iC&&(this.sharedClientState.syncEngine={eo:dme.bind(null,n),no:pme.bind(null,n),ro:gme.bind(null,n),qi:fme.bind(null,n),Xs:ume.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.pi(i=>N(this,null,function*(){yield hme(this.Ua.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=B6();if(!iC.D(n))throw new te(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=XO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iC(n,e.asyncQueue,i,e.clientId,e.initialUser)}},_C=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>w8(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ame.bind(null,this.syncEngine),yield oO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new cO}()}createDatastore(e){let n=FC(e.databaseInfo.databaseId),i=function(s){return new eO(s)}(e.databaseInfo);return function(s,o,a,l){return new iO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new sO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>w8(this.syncEngine,n,0),function(){return tD.D()?new tD:new ZM}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,u){let d=new gO(r,s,o,a,l,c);return u&&(d.qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield function(r){return N(this,null,function*(){let s=ge(r);ie("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield xg(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function b8(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Eg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var yO=class{constructor(e,n){this.za=e,this.serializer=n,this.metadata=new vi,this.buffer=new Uint8Array,this.ja=function(){return new TextDecoder("utf-8")}(),this.Ha().then(i=>{i&&i.aa()?this.metadata.resolve(i._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?._a)}`))},i=>this.metadata.reject(i))}close(){return this.za.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}$a(){return N(this,null,function*(){return yield this.getMetadata(),this.Ha()})}Ha(){return N(this,null,function*(){let e=yield this.Ja();if(e===null)return null;let n=this.ja.decode(e),i=Number(n);isNaN(i)&&this.Ya(`length string (${n}) is not valid number`);let r=yield this.Za(i);return new dO(JSON.parse(r),e.length+i)})}Xa(){return this.buffer.findIndex(e=>e===123)}Ja(){return N(this,null,function*(){for(;this.Xa()<0&&!(yield this.eu()););if(this.buffer.length===0)return null;let e=this.Xa();e<0&&this.Ya("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Za(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.eu())&&this.Ya("Reached the end of bundle when more is expected.");let n=this.ja.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){return N(this,null,function*(){let e=yield this.za.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var CO=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,s){return N(this,null,function*(){let o=ge(r),a={documents:s.map(d=>gC(o.serializer,d))},l=yield o.No("BatchGetDocuments",o.serializer.databaseId,Ut.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{let h=Sge(o.serializer,d);c.set(h.key.toString(),h)});let u=[];return s.forEach(d=>{let h=c.get(d.toString());Ae(!!h),u.push(h)}),u})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ru(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=me.fromPath(i);this.mutations.push(new uC(r,this.precondition(r)))}),yield function(i,r){return N(this,null,function*(){let s=ge(i),o={writes:r.map(a=>mC(s.serializer,a))};yield s.Fo("Commit",s.serializer.databaseId,Ut.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ee();n=He.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new te(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(He.min())?Kn.exists(!1):Kn.updateTime(n):Kn.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(He.min()))throw new te(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(n)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var wO=class{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.tu=i.maxAttempts,this.e_=new wC(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){this.e_.Wo(()=>N(this,null,function*(){let e=new CO(this.datastore),n=this.iu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.su(r)}))}).catch(i=>{this.su(i)})}))}iu(e){try{let n=this.updateFunction(e);return!TC(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!u6(n)}return!1}};var SO=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=mi.UNAUTHENTICATED,this.clientId=DE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>N(this,null,function*(){ie("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(ie("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Pg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function _E(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>N(this,null,function*(){i.isEqual(r)||(yield M6(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function bO(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield lk(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>v8(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>v8(e.remoteStore,r)),t._onlineComponents=e})}function X6(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function lk(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _E(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!X6(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),yield _E(t,new bC)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),yield _E(t,new bC);return t._offlineComponents})}function _D(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield bO(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),yield bO(t,new _C))),t._onlineComponents})}function $6(t){return lk(t).then(e=>e.persistence)}function ck(t){return lk(t).then(e=>e.localStore)}function Z6(t){return _D(t).then(e=>e.remoteStore)}function uk(t){return _D(t).then(e=>e.syncEngine)}function vme(t){return _D(t).then(e=>e.datastore)}function Dg(t){return N(this,null,function*(){let e=yield _D(t),n=e.eventManager;return n.onListen=$ge.bind(null,e.syncEngine),n.onUnlisten=Jge.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zge.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eme.bind(null,e.syncEngine),n})}function yme(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield $6(t),n=yield Z6(t);return e.setNetworkEnabled(!0),function(r){let s=ge(r);return s.N_.delete(0),AC(s)}(n)}))}function Cme(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield $6(t),n=yield Z6(t);return e.setNetworkEnabled(!1),function(r){return N(this,null,function*(){let s=ge(r);s.N_.add(0),yield xg(s),s.k_.set("Offline")})}(n)}))}function wme(t,e){let n=new vi;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,s,o){return N(this,null,function*(){try{let a=yield function(c,u){let d=ge(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new te(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Pg(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield ck(t),e,n)})),n.promise}function J6(t,e,n={}){let i=new vi;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,c){let u=new Eg({next:h=>{o.enqueueAndForget(()=>tk(s,d));let p=h.docs.has(a);!p&&h.fromCache?c.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new SC(Ig(a.path),u,{includeMetadataChanges:!0,oa:!0});return ek(s,d)}(yield Dg(t),t.asyncQueue,e,n,i)})),i.promise}function Sme(t,e){let n=new vi;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,s,o){return N(this,null,function*(){try{let a=yield $E(r,s,!0),l=new cD(s,a.Is),c=l.Va(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){let l=Pg(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield ck(t),e,n)})),n.promise}function eq(t,e,n={}){let i=new vi;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,c){let u=new Eg({next:h=>{o.enqueueAndForget(()=>tk(s,d)),h.fromCache&&l.source==="server"?c.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new SC(a,u,{includeMetadataChanges:!0,oa:!0});return ek(s,d)}(yield Dg(t),t.asyncQueue,e,n,i)})),i.promise}function bme(t,e){let n=new Eg(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,s){ge(r).J_.add(s),s.next()}(yield Dg(t),n)})),()=>{n.Ga(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,s){ge(r).J_.delete(s)}(yield Dg(t),n)}))}}function _me(t,e,n,i){let r=function(o,a){let l;return l=typeof o=="string"?h6().encode(o):o,function(u,d){return new yO(u,d)}(function(u,d){if(u instanceof Uint8Array)return b8(u,d);if(u instanceof ArrayBuffer)return b8(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,FC(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){mme(yield uk(t),r,i)}))}function Eme(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(i,r){let s=ge(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Wr.getNamedQuery(o,r))}(yield ck(t),e)}))}function tq(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _8=new Map;function dk(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hk(t,e,n,i){if(e===!0&&i===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function E8(t){if(!me.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D8(t){if(me.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ED(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ED(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nq(t,e){if(e<=0)throw new te(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var dD=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tq((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ph=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dD(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VP;switch(i.type){case"firstParty":return new UP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=_8.get(n);i&&(ie("ComponentProvider","Removing Datastore"),_8.delete(n),i.terminate())}(this),Promise.resolve()}};function DD(t,e,n,i={}){var r;let s=(t=jt(t,ph))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=mi.MOCK_USER;else{a=Kf(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new te(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new mi(c)}t._authCredentials=new BP(new EE(a,l))}}var rr=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wn=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},tl=class t extends rr{constructor(e,n,i){super(e,n,Ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new me(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function PC(t,e,...n){if(t=nt(t),dk("collection","path",e),t instanceof ph){let i=Ut.fromString(e,...n);return D8(i),new tl(t,null,i)}{if(!(t instanceof wn||t instanceof tl))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ut.fromString(e,...n));return D8(i),new tl(t.firestore,null,i)}}function fk(t,e){if(t=jt(t,ph),dk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rr(t,null,function(i){return new la(Ut.emptyPath(),i)}(e))}function Ch(t,e,...n){if(t=nt(t),arguments.length===1&&(e=DE.newId()),dk("doc","path",e),t instanceof ph){let i=Ut.fromString(e,...n);return E8(i),new wn(t,null,new me(i))}{if(!(t instanceof wn||t instanceof tl))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ut.fromString(e,...n));return E8(i),new wn(t.firestore,t instanceof tl?t.converter:null,new me(i))}}function MC(t,e){return t=nt(t),e=nt(e),(t instanceof wn||t instanceof tl)&&(e instanceof wn||e instanceof tl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function TD(t,e){return t=nt(t),e=nt(e),t instanceof rr&&e instanceof rr&&t.firestore===e.firestore&&IC(t._query,e._query)&&t.converter===e.converter}var _O=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new wC(this,"async_queue_retry"),this.Tu=()=>{let n=bE();n&&ie("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};let e=bE();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let n=bE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let n=new vi;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return N(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!Fu(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let n=this._u.then(()=>(this.hu=!0,e().catch(i=>{this.lu=i,this.hu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ti("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=n,n}enqueueAfterDelay(e,n,i){this.Eu(),this.Iu.indexOf(e)>-1&&(n=0);let r=aO.createAndSchedule(this,e,n,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&Ee()}verifyOperationInProgress(){}Vu(){return N(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let n of this.cu)if(n.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.cu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let n=this.cu.indexOf(e);this.cu.splice(n,1)}};function EO(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var DO=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var iq=-1,Mn=class extends ph{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new _O}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sq(this),this._firestoreClient.terminate()}};function rq(t,e){let n=typeof t=="object"?t:Vi(),i=typeof t=="string"?t:e||"(default)",r=Ei(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Mc("firestore");s&&DD(r,...s)}return r}function Fi(t){return t._firestoreClient||sq(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sq(t){var e,n,i;let r=t._freezeSettings(),s=function(a,l,c,u){return new XP(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tq(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new SO(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function pk(t,e){aq(t=jt(t,Mn));let n=Fi(t);if(n._uninitializedComponentsProvider)throw new te(z.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new _C;return oq(n,r,new uD(r,i.cacheSizeBytes,e?.forceOwnership))}function gk(t){aq(t=jt(t,Mn));let e=Fi(t);if(e._uninitializedComponentsProvider)throw new te(z.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new _C;return oq(e,i,new vO(i,n.cacheSizeBytes))}function oq(t,e,n){let i=new vi;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield _E(t,n),yield bO(t,e),i.resolve()}catch(r){let s=r;if(!X6(s))throw s;Co("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function mk(t){if(t._initialized&&!t._terminated)throw new te(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new vi;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(i){return N(this,null,function*(){if(!wu.D())return Promise.resolve();let r=i+"main";yield wu.delete(r)})}(XO(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function vk(t){return function(n){let i=new vi;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return sme(yield uk(n),i)})),i.promise}(Fi(t=jt(t,Mn)))}function yk(t){return yme(Fi(t=jt(t,Mn)))}function Ck(t){return Cme(Fi(t=jt(t,Mn)))}function wk(t,e){let n=Fi(t=jt(t,Mn)),i=new DO;return _me(n,t._databaseId,e,i),i}function Sk(t,e){return Eme(Fi(t=jt(t,Mn)),e).then(n=>n?new rr(t,null,n.query):null)}function aq(t){if(t._initialized||t._terminated)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sl=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ri.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ua=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zl=class{constructor(e){this._methodName=e}};var gh=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}};var Dme=/^__.*__$/,TO=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}},hD=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function lq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}var fD=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.wu({path:i,bu:!1});return r.Du(e),r}Cu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return pD(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(lq(this.yu)&&Dme.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},RO=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||FC(e)}Ou(e,n,i,r=!1){return new fD({yu:e,methodName:n,xu:i,path:ni.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wh(t){let e=t._freezeSettings(),n=FC(t._databaseId);return new RO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RD(t,e,n,i,r,s={}){let o=t.Ou(s.merge||s.mergeFields?2:0,e,n,r);Ek("Data must be an object, but it was:",o,i);let a=dq(i,o),l,c;if(s.merge)l=new qs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=PO(e,d,n);if(!o.contains(h))throw new te(z.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);fq(u,h)||u.push(h)}l=new qs(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new TO(new vr(a),l,c)}var EC=class t extends Zl{_toFieldTransform(e){if(e.yu!==2)throw e.yu===1?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function cq(t,e,n){return new fD({yu:3,xu:e.settings.xu,methodName:t._methodName,bu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var IO=class t extends Zl{_toFieldTransform(e){return new dh(e.path,new Eu)}isEqual(e){return e instanceof t}},xO=class t extends Zl{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){let n=cq(this,e,!0),i=this.Nu.map(s=>Sh(s,n)),r=new Xl(i);return new dh(e.path,r)}isEqual(e){return e instanceof t&&Mv(this.Nu,e.Nu)}},FO=class t extends Zl{constructor(e,n){super(e),this.Nu=n}_toFieldTransform(e){let n=cq(this,e,!0),i=this.Nu.map(s=>Sh(s,n)),r=new $l(i);return new dh(e.path,r)}isEqual(e){return e instanceof t&&Mv(this.Nu,e.Nu)}},AO=class t extends Zl{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=new Du(e.serializer,i6(e.serializer,this.Lu));return new dh(e.path,n)}isEqual(e){return e instanceof t&&this.Lu===e.Lu}};function bk(t,e,n,i){let r=t.Ou(1,e,n);Ek("Data must be an object, but it was:",r,i);let s=[],o=vr.empty();yh(i,(l,c)=>{let u=Dk(e,l,n);c=nt(c);let d=r.Cu(u);if(c instanceof EC)s.push(u);else{let h=Sh(c,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new qs(s);return new hD(o,a,r.fieldTransforms)}function _k(t,e,n,i,r,s){let o=t.Ou(1,e,n),a=[PO(e,i,n)],l=[r];if(s.length%2!=0)throw new te(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(PO(e,s[h])),l.push(s[h+1]);let c=[],u=vr.empty();for(let h=a.length-1;h>=0;--h)if(!fq(c,a[h])){let p=a[h],g=l[h];g=nt(g);let m=o.Cu(p);if(g instanceof EC)c.push(p);else{let v=Sh(g,m);v!=null&&(c.push(p),u.set(p,v))}}let d=new qs(c);return new hD(u,d,o.fieldTransforms)}function uq(t,e,n,i=!1){return Sh(n,t.Ou(i?4:3,e))}function Sh(t,e){if(hq(t=nt(t)))return Ek("Unsupported field value:",e,t),dq(t,e);if(t instanceof Zl)return function(i,r){if(!lq(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let l=Sh(a,r.vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=nt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return i6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Cn.fromDate(i);return{timestampValue:mg(r.serializer,s)}}if(i instanceof Cn){let s=new Cn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mg(r.serializer,s)}}if(i instanceof gh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sl)return{bytesValue:f6(r.serializer,i._byteString)};if(i instanceof wn){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KO(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${ED(i)}`)}(t,e)}function dq(t,e){let n={};return B8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yh(t,(i,r)=>{let s=Sh(r,e.Su(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function hq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Cn||t instanceof gh||t instanceof sl||t instanceof wn||t instanceof Zl)}function Ek(t,e,n){if(!hq(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=ED(n);throw i==="an object"?e.Fu(t+" a custom object"):e.Fu(t+" "+i)}}function PO(t,e,n){if((e=nt(e))instanceof ua)return e._internalPath;if(typeof e=="string")return Dk(t,e);throw pD("Field path arguments must be of type string or ",t,!1,void 0,n)}var Tme=new RegExp("[~\\*/\\[\\]]");function Dk(t,e,n){if(e.search(Tme)>=0)throw pD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ua(...e.split("."))._internalPath}catch{throw pD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pD(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new te(z.INVALID_ARGUMENT,a+t+l)}function fq(t,e){return t.some(n=>n.isEqual(e))}var mh=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ID("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},MO=class extends mh{data(){return super.data()}};function ID(t,e){return typeof e=="string"?Dk(t,e):e instanceof ua?e._internalPath:e._delegate._internalPath}function pq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DC=class{},vh=class extends DC{};function ha(t,e,...n){let i=[];e instanceof DC&&i.push(e),i=i.concat(n),function(s){let o=s.filter(l=>l instanceof OO).length,a=s.filter(l=>l instanceof gD).length;if(o>1||o>0&&a>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var gD=class t extends vh{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return mq(e._query,n),new rr(e.firestore,e.converter,cM(e._query,n))}_parse(e){let n=wh(e.firestore);return function(s,o,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){R8(d,u);let p=[];for(let g of d)p.push(T8(l,s,g));h={arrayValue:{values:p}}}else h=T8(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||R8(d,u),h=uq(a,o,d,u==="in"||u==="not-in");return At.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Tk(t,e,n){let i=e,r=ID("where",t);return gD._create(r,i,n)}var OO=class t extends DC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:tn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let l of a)mq(o,l),o=cM(o,l)}(e._query,n),new rr(e.firestore,e.converter,cM(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var kO=class t extends vh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ch(s,o)}(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new la(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function xD(t,e="asc"){let n=e,i=ID("orderBy",t);return kO._create(i,n)}var mD=class t extends vh{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new rr(e.firestore,e.converter,kE(e._query,this._limit,this._limitType))}};function Rk(t){return nq("limit",t),mD._create("limit",t,"F")}function Ik(t){return nq("limitToLast",t),mD._create("limitToLast",t,"L")}var vD=class t extends vh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=gq(e,this.type,this._docOrFields,this._inclusive);return new rr(e.firestore,e.converter,function(r,s){return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}};function xk(...t){return vD._create("startAt",t,!0)}function Fk(...t){return vD._create("startAfter",t,!1)}var yD=class t extends vh{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=gq(e,this.type,this._docOrFields,this._inclusive);return new rr(e.firestore,e.converter,function(r,s){return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}};function Ak(...t){return yD._create("endBefore",t,!1)}function Pk(...t){return yD._create("endAt",t,!0)}function gq(t,e,n,i){if(n[0]=nt(n[0]),n[0]instanceof mh)return function(s,o,a,l,c){if(!l)throw new te(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of lg(s))if(d.field.isKeyField())u.push(lh(o,l.key));else{let h=l.data.field(d.field);if(wD(h))throw new te(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let p=d.field.canonicalString();throw new te(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new il(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=wh(t.firestore);return function(o,a,l,c,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new te(z.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let p=[];for(let g=0;g<u.length;g++){let m=u[g];if(h[g].field.isKeyField()){if(typeof m!="string")throw new te(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!zO(o)&&m.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);let v=o.path.child(Ut.fromString(m));if(!me.isDocumentKey(v))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);let C=new me(v);p.push(lh(a,C))}else{let v=uq(l,c,m);p.push(v)}}return new il(p,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function T8(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zO(e)&&n.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ut.fromString(n));if(!me.isDocumentKey(i))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lh(t,new me(i))}if(n instanceof wn)return lh(t,n._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ED(n)}.`)}function R8(t,e){if(!Array.isArray(t)||t.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mq(t,e){let n=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Tg=class{convertValue(e,n="none"){switch(ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return yh(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new gh(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=jO(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(aC(e));default:return null}}convertTimestamp(e){let n=Ql(e);return new Cn(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ut.fromString(e);Ae(E6(i));let r=new bu(i.get(1),i.get(3)),s=new me(i.popFirst(5));return r.isEqual(n)||ti(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function FD(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var NO=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}};var Yl=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},So=class extends mh{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(ID("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},yu=class extends So{data(e={}){return super.data(e)}},da=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Yl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new yu(this._firestore,this._userDataWriter,i.key,i,new Yl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let l=new yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Yl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Yl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Rme(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Rme(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function AD(t,e){return t instanceof So&&e instanceof So?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof da&&e instanceof da&&t._firestore===e._firestore&&TD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function PD(t){t=jt(t,wn);let e=jt(t.firestore,Mn);return J6(Fi(e),t._key).then(n=>Bk(e,t,n))}var Jl=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}};function Mk(t){t=jt(t,wn);let e=jt(t.firestore,Mn),n=Fi(e),i=new Jl(e);return wme(n,t._key).then(r=>new So(e,i,t._key,r,new Yl(r!==null&&r.hasLocalMutations,!0),t.converter))}function Ok(t){t=jt(t,wn);let e=jt(t.firestore,Mn);return J6(Fi(e),t._key,{source:"server"}).then(n=>Bk(e,t,n))}function kk(t){t=jt(t,rr);let e=jt(t.firestore,Mn),n=Fi(e),i=new Jl(e);return pq(t._query),eq(n,t._query).then(r=>new da(e,i,t,r))}function Nk(t){t=jt(t,rr);let e=jt(t.firestore,Mn),n=Fi(e),i=new Jl(e);return Sme(n,t._query).then(r=>new da(e,i,t,r))}function Lk(t){t=jt(t,rr);let e=jt(t.firestore,Mn),n=Fi(e),i=new Jl(e);return eq(n,t._query,{source:"server"}).then(r=>new da(e,i,t,r))}function MD(t,e,n){t=jt(t,wn);let i=jt(t.firestore,Mn),r=FD(t.converter,e,n);return Og(i,[RD(wh(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Kn.none())])}function OC(t,e,n,...i){t=jt(t,wn);let r=jt(t.firestore,Mn),s=wh(r),o;return o=typeof(e=nt(e))=="string"||e instanceof ua?_k(s,"updateDoc",t._key,e,n,i):bk(s,"updateDoc",t._key,e),Og(r,[o.toMutation(t._key,Kn.exists(!0))])}function OD(t){return Og(jt(t.firestore,Mn),[new Ru(t._key,Kn.none())])}function kD(t,e){let n=jt(t.firestore,Mn),i=Ch(t),r=FD(t.converter,e);return Og(n,[RD(wh(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then(()=>i)}function Mg(t,...e){var n,i,r;t=nt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||EO(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(EO(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,u;if(t instanceof wn)c=jt(t.firestore,Mn),u=Ig(t._key.path),l={next:d=>{e[o]&&e[o](Bk(c,t,d))},error:e[o+1],complete:e[o+2]};else{let d=jt(t,rr);c=jt(d.firestore,Mn),u=d._query;let h=new Jl(c);l={next:p=>{e[o]&&e[o](new da(c,h,d,p))},error:e[o+1],complete:e[o+2]},pq(t._query)}return function(h,p,g,m){let v=new Eg(m),C=new SC(p,v,g);return h.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return ek(yield Dg(h),C)})),()=>{v.Ga(),h.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return tk(yield Dg(h),C)}))}}(Fi(c),u,a,l)}function Vk(t,e){return bme(Fi(t=jt(t,Mn)),EO(e)?e:{next:e})}function Og(t,e){return function(i,r){let s=new vi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return tme(yield uk(i),r,s)})),s.promise}(Fi(t),e)}function Bk(t,e,n){let i=n.docs.get(e._key),r=new Jl(t);return new So(t,r,e._key,i,new Yl(n.hasPendingWrites,n.fromCache),e.converter)}var Ime={maxAttempts:5};var CD=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wh(e)}set(e,n,i){this._verifyNotCommitted();let r=mu(e,this._firestore),s=FD(r.converter,n,i),o=RD(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Kn.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let s=mu(e,this._firestore),o;return o=typeof(n=nt(n))=="string"||n instanceof ua?_k(this._dataReader,"WriteBatch.update",s._key,n,i,r):bk(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=mu(e,this._firestore);return this._mutations=this._mutations.concat(new Ru(n._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function mu(t,e){if((t=nt(t)).firestore!==e)throw new te(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var LO=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=wh(n)}get(n){let i=mu(n,this._firestore),r=new NO(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return Ee();let o=s[0];if(o.isFoundDocument())return new mh(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new mh(this._firestore,r,i._key,null,i.converter);throw Ee()})}set(n,i,r){let s=mu(n,this._firestore),o=FD(s.converter,i,r),a=RD(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){let o=mu(n,this._firestore),a;return a=typeof(i=nt(i))=="string"||i instanceof ua?_k(this._dataReader,"Transaction.update",o._key,i,r,s):bk(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){let i=mu(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=mu(e,this._firestore),i=new Jl(this._firestore);return super.get(e).then(r=>new So(this._firestore,i,n._key,r._document,new Yl(!1,!1),n.converter))}};function Gk(t,e,n){t=jt(t,Mn);let i=Object.assign(Object.assign({},Ime),n);return function(s){if(s.maxAttempts<1)throw new te(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let l=new vi;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let c=yield vme(s);new wO(s.asyncQueue,c,a,o,l).nu()})),l.promise}(Fi(t),r=>e(new LO(t,r)),i)}function Hk(){return new EC("deleteField")}function Uk(){return new IO("serverTimestamp")}function ND(...t){return new xO("arrayUnion",t)}function LD(...t){return new FO("arrayRemove",t)}function jk(t){return new AO("increment",t)}(function(e,n=!0){(function(r){Rg=r})(Oc),jn(new vn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Mn(new GP(i.getProvider("auth-internal")),new WP(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qe(R5,"4.6.5",e),Qe(R5,"4.6.5","esm2017")})();var xme="@firebase/firestore-compat",Fme="0.3.34";function Qk(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new te("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function vq(){if(typeof Uint8Array>"u")throw new te("unimplemented","Uint8Arrays are not available in this environment.")}function yq(){if(!G8())throw new te("unimplemented","Blobs are unavailable in Firestore in this environment.")}var VD=class t{constructor(e){this._delegate=e}static fromBase64String(e){return yq(),new t(sl.fromBase64String(e))}static fromUint8Array(e){return vq(),new t(sl.fromUint8Array(e))}toBase64(){return yq(),this._delegate.toBase64()}toUint8Array(){return vq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Wk(t){return Ame(t,["next","error","complete"])}function Ame(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var zk=class{enableIndexedDbPersistence(e,n){return pk(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return gk(e._delegate)}clearIndexedDbPersistence(e){return mk(e._delegate)}},BD=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof bu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){DD(this._delegate,e,n,i)}enableNetwork(){return yk(this._delegate)}disableNetwork(){return Ck(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,hk("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return vk(this._delegate)}onSnapshotsInSync(e){return Vk(this._delegate,e)}get app(){if(!this._appCompat)throw new te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lg(this,PC(this._delegate,e))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(e){try{return new ol(this,Ch(this._delegate,e))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dh(this,fk(this._delegate,e))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Gk(this._delegate,n=>e(new GD(this,n)))}batch(){return Fi(this._delegate),new HD(new CD(this._delegate,e=>Og(this._delegate,e)))}loadBundle(e){return wk(this._delegate,e)}namedQuery(e){return Sk(this._delegate,e).then(n=>n?new Dh(this,n):null)}},kg=class extends Tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new VD(new sl(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return ol.forKey(n,this.firestore,null)}};function Pme(t){VO(t)}var GD=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}get(e){let n=bh(e);return this._delegate.get(n).then(i=>new _h(this._firestore,new So(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=bh(e);return i?(Qk("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let s=bh(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){let n=bh(e);return this._delegate.delete(n),this}},HD=class{constructor(e){this._delegate=e}set(e,n,i){let r=bh(e);return i?(Qk("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let s=bh(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){let n=bh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ng=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new yu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Eh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new t(e,new kg(e),n),r.set(n,s)),s}};Ng.INSTANCES=new WeakMap;var ol=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}static forPath(e,n,i){if(e.length%2!==0)throw new te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new wn(n._delegate,i,new me(e)))}static forKey(e,n,i){return new t(n,new wn(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Lg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lg(this.firestore,PC(this._delegate,e))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=nt(e),e instanceof wn?MC(this._delegate,e):!1}set(e,n){n=Qk("DocumentReference.set",n);try{return n?MD(this._delegate,e,n):MD(this._delegate,e)}catch(i){throw Ur(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?OC(this._delegate,e):OC(this._delegate,e,n,...i)}catch(r){throw Ur(r,"updateDoc()","DocumentReference.update()")}}delete(){return OD(this._delegate)}onSnapshot(...e){let n=Cq(e),i=wq(e,r=>new _h(this.firestore,new So(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Mg(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=Mk(this._delegate):e?.source==="server"?n=Ok(this._delegate):n=PD(this._delegate),n.then(i=>new _h(this.firestore,new So(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ng.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ur(t,e,n){return t.message=t.message.replace(e,n),t}function Cq(t){for(let e of t)if(typeof e=="object"&&!Wk(e))return e;return{}}function wq(t,e){var n,i;let r;return Wk(t[0])?r=t[0]:Wk(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var _h=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ol(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AD(this._delegate,e._delegate)}},Eh=class extends _h{data(e){let n=this._delegate.data(e);return this._delegate._converter||I8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Dh=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kg(e)}where(e,n,i){try{return new t(this.firestore,ha(this._delegate,Tk(e,n,i)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ha(this._delegate,xD(e,n)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ha(this._delegate,Rk(e)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ha(this._delegate,Ik(e)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ha(this._delegate,xk(...e)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ha(this._delegate,Fk(...e)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ha(this._delegate,Ak(...e)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ha(this._delegate,Pk(...e)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(e){return TD(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Nk(this._delegate):e?.source==="server"?n=Lk(this._delegate):n=kk(this._delegate),n.then(i=>new kC(this.firestore,new da(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=Cq(e),i=wq(e,r=>new kC(this.firestore,new da(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Mg(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ng.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},qk=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},kC=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Dh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new qk(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Eh(this._firestore,i))})}isEqual(e){return AD(this._delegate,e._delegate)}},Lg=class t extends Dh{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ol(this.firestore,e):null}doc(e){try{return e===void 0?new ol(this.firestore,Ch(this._delegate)):new ol(this.firestore,Ch(this._delegate,e))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(e){return kD(this._delegate,e).then(n=>new ol(this.firestore,n))}isEqual(e){return MC(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ng.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function bh(t){return jt(t,wn)}var Kk=class t{constructor(...e){this._delegate=new ua(...e)}static documentId(){return new t(ni.keyField().canonicalString())}isEqual(e){return e=nt(e),e instanceof ua?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Yk=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Uk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Hk();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ND(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=LD(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=jk(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Mme={Firestore:BD,GeoPoint:gh,Timestamp:Cn,Blob:VD,Transaction:GD,WriteBatch:HD,DocumentReference:ol,DocumentSnapshot:_h,Query:Dh,QueryDocumentSnapshot:Eh,QuerySnapshot:kC,CollectionReference:Lg,FieldPath:Kk,FieldValue:Yk,setLogLevel:Pme,CACHE_SIZE_UNLIMITED:iq};function Ome(t,e){t.INTERNAL.registerComponent(new vn("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Mme)))}function kme(t){Ome(t,(e,n)=>new BD(e,n,new zk)),t.registerVersion(xme,Fme)}kme(Fs);function Nme(t,e=os){return new pe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function Sq(t,e){return Nme(t,e)}function Lme(t,e){return Sq(t,e).pipe($o(void 0),jc(),le(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function Zk(t,e){return Sq(t,e).pipe(le(n=>({payload:n,type:"query"})))}var UD=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:s}=Eq(i,n);return new WD(r,s,this.afs)}snapshotChanges(){return Lme(this.ref,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(e={}){return this.snapshotChanges().pipe(le(({payload:n})=>e.idField?Se(W({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Je(this.ref.get(e)).pipe(Hi)}};function jD(t,e){return Zk(t,e).pipe($o(void 0),jc(),le(n=>{let[i,r]=n,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=s.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function bq(t,e,n){return jD(t,n).pipe(Wc((i,r)=>Vme(i,r.map(s=>s.payload),e),[]),La(),le(i=>i.map(r=>({type:r.type,payload:r}))))}function Vme(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=Bme(t,i))}),t}function Xk(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function Bme(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Xk(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Xk(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Xk(t,e.oldIndex,1);break}return t}function _q(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var WD=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=jD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(le(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe($o(void 0),jc(),Tt(([i,r])=>r.length>0||!i),le(([,i])=>i),Hi)}auditTrail(e){return this.stateChanges(e).pipe(Wc((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=_q(e);return bq(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(e={}){return Zk(this.query,this.afs.schedulers.outsideAngular).pipe(le(n=>n.payload.docs.map(i=>e.idField?Se(W({},i.data()),{[e.idField]:i.id}):i.data())),Hi)}get(e){return Je(this.query.get(e)).pipe(Hi)}add(e){return this.ref.add(e)}doc(e){return new UD(this.ref.doc(e),this.afs)}},$k=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?jD(this.query,this.afs.schedulers.outsideAngular).pipe(Hi):jD(this.query,this.afs.schedulers.outsideAngular).pipe(le(n=>n.filter(i=>e.indexOf(i.type)>-1)),Tt(n=>n.length>0),Hi)}auditTrail(e){return this.stateChanges(e).pipe(Wc((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=_q(e);return bq(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(e={}){return Zk(this.query,this.afs.schedulers.outsideAngular).pipe(le(i=>i.payload.docs.map(r=>e.idField?W({[e.idField]:r.id},r.data()):r.data())),Hi)}get(e){return Je(this.query.get(e)).pipe(Hi)}},Gme=new ue("angularfire2.enableFirestorePersistence"),Hme=new ue("angularfire2.firestore.persistenceSettings"),Ume=new ue("angularfire2.firestore.settings"),jme=new ue("angularfire2.firestore.use-emulator");function Eq(t,e=n=>n){return{query:e(t),ref:t}}var zD=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,s,o,a,l,c,u,d,h,p,g,m,v,C,b){this.schedulers=l;let E=Yp(n,a,i),T=u;d&&TP(E,a,h,g,m,v,p,C),[this.firestore,this.persistenceEnabled$]=Qp(`${E.name}.firestore`,"AngularFirestore",E.name,()=>{let P=a.runOutsideAngular(()=>E.firestore());if(s&&P.settings(s),T&&P.useEmulator(...T),r&&!ra(o)){let x=()=>{try{return Je(P.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(_){return typeof console<"u"&&console.warn(_),ae(!1)}};return[P,a.runOutsideAngular(x)]}else return[P,ae(!1)]},[s,T,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:s,query:o}=Eq(r,i),a=this.schedulers.ngZone.run(()=>s);return new WD(a,o,this)}collectionGroup(n,i){let r=i||(o=>o),s=this.firestore.collectionGroup(n);return new $k(r(s),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new UD(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(Z(du),Z(Kp,8),Z(Gme,8),Z(Ume,8),Z(_n),Z(Re),Z(Pn),Z(Hme,8),Z(jme,8),Z(Xa,8),Z(wP,8),Z(SP,8),Z(bP,8),Z(_P,8),Z(EP,8),Z(DP,8),Z(Ri,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var vs=(()=>{let e=class e{constructor(i,r,s,o){this.firebaseAuth=i,this.router=r,this.fireAuth=s,this.firestore=o,this.user$=a5(this.firebaseAuth),this.currentUserSubject=new qt(void 0),this.currentUser$=this.currentUserSubject.asObservable().pipe(La(),Rd(1))}initializeUserState(){this.user$.pipe(Ge(i=>i?this.firestore.doc(`users/${i.uid}`).valueChanges():ae(null))).subscribe(i=>{this.currentUserSubject.next(i?{email:i.email,username:i.username,isAdmin:i.isAdmin}:null)})}register(i,r,s){let o=l5(this.firebaseAuth,i,r).then(a=>{d5(a.user,{displayName:s}).then(()=>{this.firestore.doc(`users/${a.user.uid}`).set({email:i,username:s})})});return Je(o)}login(i,r){let s=u5(this.firebaseAuth,i,r).then(()=>{});return Je(s)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSubject.next(null),this.router.navigateByUrl("/login")})}googleSignIn(){return this.fireAuth.signInWithPopup(new QI).then(i=>N(this,null,function*(){i.user&&(yield this.updateUserData(i.user.uid,i.user.email||"",i.user.displayName||"")),this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))}),i=>{console.log(i)})}facebookSignIn(){return this.fireAuth.signInWithPopup(new YI).then(i=>{i.user&&this.updateUserData(i.user.uid,i.user.email||"",i.user.displayName||""),this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))},i=>{console.log(i)})}updateUserData(i,r,s){return N(this,null,function*(){let o=yield this.getUserData(i),a={email:r,username:s,isAdmin:o?.isAdmin??!1};return this.firestore.doc(`users/${i}`).set(a,{merge:!0})})}getUserData(i){return this.firestore.doc(`users/${i}`).get().toPromise().then(r=>r?.data()||null)}isAdmin(){return this.user$.pipe(Ge(i=>i?this.firestore.doc(`users/${i.uid}`).valueChanges():ae(null)),le(i=>i?.isAdmin||!1))}setAdminStatus(i,r){return this.firestore.doc(`users/${i}`).update({isAdmin:r})}getAllUsers(){return this.firestore.collection("users").valueChanges()}};e.\u0275fac=function(r){return new(r||e)(Z(Ws),Z(fi),Z(Xa),Z(zD))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qD=(()=>{let e=class e{constructor(i){this.authService=i}googleSignIn(){this.authService.googleSignIn()}facebookSignIn(){this.authService.facebookSignIn()}};e.\u0275fac=function(r){return new(r||e)(J(vs))},e.\u0275cmp=je({type:e,selectors:[["app-platform-buttons"]],standalone:!0,features:[qe],decls:4,vars:0,consts:[[1,"w-100","shadow-none","platform-signup-button","mb-0",3,"click"],[1,"bi","bi-google"],[1,"ms-2"]],template:function(r,s){r&1&&(j(0,"button",0),De("click",function(){return s.googleSignIn()}),fe(1,"i",1),j(2,"span",2),we(3,"Sign in with Google"),U()())}});let t=e;return t})();var Tq=(()=>{let e=class e{constructor(i){this.platformId=i}isBrowser(){return Ip(this.platformId)}isServer(){return ra(this.platformId)}};e.\u0275fac=function(r){return new(r||e)(Z(_n))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zme(t,e){t&1&&(j(0,"div"),fe(1,"app-loader"),U())}function qme(t,e){if(t&1&&(j(0,"div",22),we(1),U()),t&2){let n=Te(2);ee(),zn(" ",n.error," ")}}function Kme(t,e){if(t&1){let n=xt();fe(0,"app-wave",2),j(1,"div",3),fe(2,"app-dollar-sign-svgs",2),j(3,"div",4)(4,"div",5)(5,"h1",6),we(6,"Login"),U(),j(7,"h5",7),we(8,"Please sign in to continue"),U(),j(9,"div",8),fe(10,"app-platform-buttons"),U(),j(11,"form",9),De("ngSubmit",function(){We(n);let r=Te();return ze(r.login())}),j(12,"div",8)(13,"div",10),fe(14,"hr",11),j(15,"span",12),we(16,"or"),U()(),fe(17,"input",13),U(),j(18,"div",14),fe(19,"input",15),U(),j(20,"button",16),we(21," Login "),fe(22,"i",17),U(),j(23,"div",18)(24,"a",19),De("click",function(){We(n);let r=Te();return ze(r.navigateToRegister())}),we(25,"Sign Up"),U()()(),Fe(26,qme,2,1,"div",20),U()()(),fe(27,"app-wave",21)}if(t&2){let n=Te();ee(11),de("formGroup",n.loginForm),ee(15),de("ngIf",n.error),ee(),de("wave","bottom")}}var Rq=(()=>{let e=class e{constructor(i,r,s,o){this.fb=i,this.auth=r,this.router=s,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let i=this.loginForm.getRawValue();this.auth.login(i.email,i.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:r=>{this.error=r.message,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}};e.\u0275fac=function(r){return new(r||e)(J(Up),J(vs),J(fi),J(Tq))},e.\u0275cmp=je({type:e,selectors:[["app-login"]],standalone:!0,features:[qe],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],["class","text-danger",4,"ngIf"],[1,"z-0",3,"wave"],[1,"text-danger"]],template:function(r,s){if(r&1&&Fe(0,zme,2,0,"div",1)(1,Kme,28,3,"ng-template",null,0,tr),r&2){let o=za(2);de("ngIf",s.isLoading)("ngIfElse",o)}},dependencies:[En,Gi,Qa,Hp,mo,vo,Gp,Xd,$d,aE,lE,cE,qD],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]});let t=e;return t})();var Iq=(()=>{let e=class e{constructor(i,r,s){this.fb=i,this.authService=r,this.router=s,this.registerForm=this.fb.nonNullable.group({email:["",go.required],username:["",go.required],password:["",go.required]}),this.error=null}register(){console.log(this.registerForm.value);let i=this.registerForm.getRawValue();this.authService.register(i.email,i.password,i.username).subscribe({next:()=>this.router.navigate(["/login"]),error:r=>{this.error=r.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}};e.\u0275fac=function(r){return new(r||e)(J(Up),J(vs),J(fi))},e.\u0275cmp=je({type:e,selectors:[["app-register"]],standalone:!0,features:[qe],decls:29,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(r,s){r&1&&(fe(0,"app-wave",0),j(1,"div",1),fe(2,"app-dollar-sign-svgs",0),j(3,"div",2)(4,"div",3)(5,"h1",4),we(6,"Register"),U(),j(7,"h5",5),we(8,"Please sign up to continue"),U(),j(9,"div",6),fe(10,"app-platform-buttons"),U(),j(11,"form",7),De("ngSubmit",function(){return s.register()}),j(12,"div",6)(13,"div",8),fe(14,"hr",9),j(15,"span",10),we(16,"or"),U()(),fe(17,"input",11),U(),j(18,"div",12),fe(19,"input",13),U(),j(20,"div",14),fe(21,"input",15),U(),j(22,"button",16),we(23," Register "),fe(24,"i",17),U(),j(25,"div",18)(26,"a",19),De("click",function(){return s.navigateToLogin()}),we(27,"Login"),U()()()()()(),fe(28,"app-wave",20)),r&2&&(ee(11),de("formGroup",s.registerForm),ee(17),de("wave","bottom"))},dependencies:[Qa,Hp,mo,vo,Gp,Xd,$d,lE,aE,qD],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]});let t=e;return t})();var Yme=(()=>{let e=class e{constructor(i,r){this.auth=i,this.router=r}canActivate(){return qp(this.auth).pipe(It(1),le(i=>i?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(r){return new(r||e)(Z(Ws),Z(fi))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qme=(()=>{let e=class e{constructor(i,r){this.auth=i,this.router=r}canActivate(){return qp(this.auth).pipe(It(1),le(i=>i?(this.router.navigate(["/dashboard"]),!1):!0))}};e.\u0275fac=function(r){return new(r||e)(Z(Ws),Z(fi))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xme=(()=>{let e=class e{constructor(i,r,s){this.auth=i,this.router=r,this.authService=s}canActivate(){return Fr([qp(this.auth),this.authService.isAdmin()]).pipe(It(1),le(([i,r])=>i&&r?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(r){return new(r||e)(Z(Ws),Z(fi),Z(vs))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xq=(t,e)=>Q(Yme).canActivate(),KD=(t,e)=>Q(Qme).canActivate(),Fq=(t,e)=>Q(Xme).canActivate();function NC(t){t||(zj(NC),t=Q(bp));let e=new pe(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(xn(e))}var Ci="top",sr="bottom",Ui="right",Ai="left",YD="auto",Pu=[Ci,sr,Ui,Ai],tc="start",Rh="end",Aq="clippingParents",QD="viewport",Vg="popper",Pq="reference",Jk=Pu.reduce(function(t,e){return t.concat([e+"-"+tc,e+"-"+Rh])},[]),XD=[].concat(Pu,[YD]).reduce(function(t,e){return t.concat([e,e+"-"+tc,e+"-"+Rh])},[]),$me="beforeRead",Zme="read",Jme="afterRead",eve="beforeMain",tve="main",nve="afterMain",ive="beforeWrite",rve="write",sve="afterWrite",Mq=[$me,Zme,Jme,eve,tve,nve,ive,rve,sve];function ji(t){return t?(t.nodeName||"").toLowerCase():null}function On(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bo(t){var e=On(t).Element;return t instanceof e||t instanceof Element}function Pi(t){var e=On(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Bg(t){if(typeof ShadowRoot>"u")return!1;var e=On(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ove(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Pi(s)||!ji(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function ave(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Pi(r)||!ji(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var Oq={name:"applyStyles",enabled:!0,phase:"write",fn:ove,effect:ave,requires:["computeStyles"]};function Wi(t){return t.split("-")[0]}var fa=Math.max,Ih=Math.min,nc=Math.round;function Gg(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function LC(){return!/^((?!chrome|android).)*safari/i.test(Gg())}function _o(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Pi(t)&&(r=t.offsetWidth>0&&nc(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&nc(i.height)/t.offsetHeight||1);var o=bo(t)?On(t):window,a=o.visualViewport,l=!LC()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function xh(t){var e=_o(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function VC(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Bg(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function jr(t){return On(t).getComputedStyle(t)}function eN(t){return["table","td","th"].indexOf(ji(t))>=0}function or(t){return((bo(t)?t.ownerDocument:t.document)||window.document).documentElement}function ic(t){return ji(t)==="html"?t:t.assignedSlot||t.parentNode||(Bg(t)?t.host:null)||or(t)}function kq(t){return!Pi(t)||jr(t).position==="fixed"?null:t.offsetParent}function lve(t){var e=/firefox/i.test(Gg()),n=/Trident/i.test(Gg());if(n&&Pi(t)){var i=jr(t);if(i.position==="fixed")return null}var r=ic(t);for(Bg(r)&&(r=r.host);Pi(r)&&["html","body"].indexOf(ji(r))<0;){var s=jr(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function pa(t){for(var e=On(t),n=kq(t);n&&eN(n)&&jr(n).position==="static";)n=kq(n);return n&&(ji(n)==="html"||ji(n)==="body"&&jr(n).position==="static")?e:n||lve(t)||e}function Fh(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ah(t,e,n){return fa(t,Ih(e,n))}function Nq(t,e,n){var i=Ah(t,e,n);return i>n?n:i}function BC(){return{top:0,right:0,bottom:0,left:0}}function GC(t){return Object.assign({},BC(),t)}function HC(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var cve=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,GC(typeof e!="number"?e:HC(e,Pu))};function uve(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Wi(n.placement),l=Fh(a),c=[Ai,Ui].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=cve(r.padding,n),h=xh(s),p=l==="y"?Ci:Ai,g=l==="y"?sr:Ui,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],v=o[l]-n.rects.reference[l],C=pa(s),b=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,E=m/2-v/2,T=d[p],P=b-h[u]-d[g],x=b/2-h[u]/2+E,_=Ah(T,x,P),S=l;n.modifiersData[i]=(e={},e[S]=_,e.centerOffset=_-x,e)}}function dve(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||VC(e.elements.popper,r)&&(e.elements.arrow=r))}var tN={name:"arrow",enabled:!0,phase:"main",fn:uve,effect:dve,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Eo(t){return t.split("-")[1]}var hve={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fve(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:nc(n*r)/r||0,y:nc(i*r)/r||0}}function Lq(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,p=h===void 0?0:h,g=o.y,m=g===void 0?0:g,v=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=v.x,m=v.y;var C=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),E=Ai,T=Ci,P=window;if(c){var x=pa(n),_="clientHeight",S="clientWidth";if(x===On(n)&&(x=or(n),jr(x).position!=="static"&&a==="absolute"&&(_="scrollHeight",S="scrollWidth")),x=x,r===Ci||(r===Ai||r===Ui)&&s===Rh){T=sr;var D=d&&x===P&&P.visualViewport?P.visualViewport.height:x[_];m-=D-i.height,m*=l?1:-1}if(r===Ai||(r===Ci||r===sr)&&s===Rh){E=Ui;var O=d&&x===P&&P.visualViewport?P.visualViewport.width:x[S];p-=O-i.width,p*=l?1:-1}}var F=Object.assign({position:a},c&&hve),k=u===!0?fve({x:p,y:m},On(n)):{x:p,y:m};if(p=k.x,m=k.y,l){var M;return Object.assign({},F,(M={},M[T]=b?"0":"",M[E]=C?"0":"",M.transform=(P.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M))}return Object.assign({},F,(e={},e[T]=b?m+"px":"",e[E]=C?p+"px":"",e.transform="",e))}function pve(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Wi(e.placement),variation:Eo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Lq(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Lq(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Vq={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pve,data:{}};var $D={passive:!0};function gve(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=On(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,$D)}),a&&l.addEventListener("resize",n.update,$D),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,$D)}),a&&l.removeEventListener("resize",n.update,$D)}}var Bq={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gve,data:{}};var mve={left:"right",right:"left",bottom:"top",top:"bottom"};function Hg(t){return t.replace(/left|right|bottom|top/g,function(e){return mve[e]})}var vve={start:"end",end:"start"};function ZD(t){return t.replace(/start|end/g,function(e){return vve[e]})}function Ph(t){var e=On(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Mh(t){return _o(or(t)).left+Ph(t).scrollLeft}function nN(t,e){var n=On(t),i=or(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=LC();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Mh(t),y:l}}function iN(t){var e,n=or(t),i=Ph(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=fa(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=fa(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Mh(t),l=-i.scrollTop;return jr(r||n).direction==="rtl"&&(a+=fa(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Oh(t){var e=jr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function JD(t){return["html","body","#document"].indexOf(ji(t))>=0?t.ownerDocument.body:Pi(t)&&Oh(t)?t:JD(ic(t))}function Mu(t,e){var n;e===void 0&&(e=[]);var i=JD(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=On(i),o=r?[s].concat(s.visualViewport||[],Oh(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Mu(ic(o)))}function Ug(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function yve(t,e){var n=_o(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Gq(t,e,n){return e===QD?Ug(nN(t,n)):bo(e)?yve(e,n):Ug(iN(or(t)))}function Cve(t){var e=Mu(ic(t)),n=["absolute","fixed"].indexOf(jr(t).position)>=0,i=n&&Pi(t)?pa(t):t;return bo(i)?e.filter(function(r){return bo(r)&&VC(r,i)&&ji(r)!=="body"}):[]}function rN(t,e,n,i){var r=e==="clippingParents"?Cve(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var u=Gq(t,c,i);return l.top=fa(u.top,l.top),l.right=Ih(u.right,l.right),l.bottom=Ih(u.bottom,l.bottom),l.left=fa(u.left,l.left),l},Gq(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function UC(t){var e=t.reference,n=t.element,i=t.placement,r=i?Wi(i):null,s=i?Eo(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case Ci:l={x:o,y:e.y-n.height};break;case sr:l={x:o,y:e.y+e.height};break;case Ui:l={x:e.x+e.width,y:a};break;case Ai:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?Fh(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case tc:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Rh:l[c]=l[c]+(e[u]/2-n[u]/2);break;default:}}return l}function Ou(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Aq:a,c=n.rootBoundary,u=c===void 0?QD:c,d=n.elementContext,h=d===void 0?Vg:d,p=n.altBoundary,g=p===void 0?!1:p,m=n.padding,v=m===void 0?0:m,C=GC(typeof v!="number"?v:HC(v,Pu)),b=h===Vg?Pq:Vg,E=t.rects.popper,T=t.elements[g?b:h],P=rN(bo(T)?T:T.contextElement||or(t.elements.popper),l,u,o),x=_o(t.elements.reference),_=UC({reference:x,element:E,strategy:"absolute",placement:r}),S=Ug(Object.assign({},E,_)),D=h===Vg?S:x,O={top:P.top-D.top+C.top,bottom:D.bottom-P.bottom+C.bottom,left:P.left-D.left+C.left,right:D.right-P.right+C.right},F=t.modifiersData.offset;if(h===Vg&&F){var k=F[r];Object.keys(O).forEach(function(M){var ce=[Ui,sr].indexOf(M)>=0?1:-1,xe=[Ci,sr].indexOf(M)>=0?"y":"x";O[M]+=k[xe]*ce})}return O}function sN(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?XD:l,u=Eo(i),d=u?a?Jk:Jk.filter(function(g){return Eo(g)===u}):Pu,h=d.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=d);var p=h.reduce(function(g,m){return g[m]=Ou(t,{placement:m,boundary:r,rootBoundary:s,padding:o})[Wi(m)],g},{});return Object.keys(p).sort(function(g,m){return p[g]-p[m]})}function wve(t){if(Wi(t)===YD)return[];var e=Hg(t);return[ZD(t),e,ZD(e)]}function Sve(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,m=n.allowedAutoPlacements,v=e.options.placement,C=Wi(v),b=C===v,E=l||(b||!g?[Hg(v)]:wve(v)),T=[v].concat(E).reduce(function(Dl,ci){return Dl.concat(Wi(ci)===YD?sN(e,{placement:ci,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:m}):ci)},[]),P=e.rects.reference,x=e.rects.popper,_=new Map,S=!0,D=T[0],O=0;O<T.length;O++){var F=T[O],k=Wi(F),M=Eo(F)===tc,ce=[Ci,sr].indexOf(k)>=0,xe=ce?"width":"height",Ue=Ou(e,{placement:F,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),Ce=ce?M?Ui:Ai:M?sr:Ci;P[xe]>x[xe]&&(Ce=Hg(Ce));var St=Hg(Ce),cn=[];if(s&&cn.push(Ue[k]<=0),a&&cn.push(Ue[Ce]<=0,Ue[St]<=0),cn.every(function(Dl){return Dl})){D=F,S=!1;break}_.set(F,cn)}if(S)for(var Is=g?3:1,jo=function(ci){var Wo=T.find(function(Xn){var rs=_.get(Xn);if(rs)return rs.slice(0,ci).every(function(xa){return xa})});if(Wo)return D=Wo,"break"},Sn=Is;Sn>0;Sn--){var Bt=jo(Sn);if(Bt==="break")break}e.placement!==D&&(e.modifiersData[i]._skip=!0,e.placement=D,e.reset=!0)}}var oN={name:"flip",enabled:!0,phase:"main",fn:Sve,requiresIfExists:["offset"],data:{_skip:!1}};function bve(t,e,n){var i=Wi(t),r=[Ai,Ci].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Ai,Ui].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function _ve(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=XD.reduce(function(u,d){return u[d]=bve(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var aN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_ve};function Eve(t){var e=t.state,n=t.name;e.modifiersData[n]=UC({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Hq={name:"popperOffsets",enabled:!0,phase:"read",fn:Eve,data:{}};function lN(t){return t==="x"?"y":"x"}function Dve(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=h===void 0?!0:h,g=n.tetherOffset,m=g===void 0?0:g,v=Ou(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),C=Wi(e.placement),b=Eo(e.placement),E=!b,T=Fh(C),P=lN(T),x=e.modifiersData.popperOffsets,_=e.rects.reference,S=e.rects.popper,D=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,O=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(x){if(s){var M,ce=T==="y"?Ci:Ai,xe=T==="y"?sr:Ui,Ue=T==="y"?"height":"width",Ce=x[T],St=Ce+v[ce],cn=Ce-v[xe],Is=p?-S[Ue]/2:0,jo=b===tc?_[Ue]:S[Ue],Sn=b===tc?-S[Ue]:-_[Ue],Bt=e.elements.arrow,Dl=p&&Bt?xh(Bt):{width:0,height:0},ci=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:BC(),Wo=ci[ce],Xn=ci[xe],rs=Ah(0,_[Ue],Dl[Ue]),xa=E?_[Ue]/2-Is-rs-Wo-O.mainAxis:jo-rs-Wo-O.mainAxis,zo=E?-_[Ue]/2+Is+rs+Xn+O.mainAxis:Sn+rs+Xn+O.mainAxis,Xt=e.elements.arrow&&pa(e.elements.arrow),pd=Xt?T==="y"?Xt.clientTop||0:Xt.clientLeft||0:0,Fa=(M=F?.[T])!=null?M:0,dv=Ce+xa-Fa-pd,hv=Ce+zo-Fa,fv=Ah(p?Ih(St,dv):St,Ce,p?fa(cn,hv):cn);x[T]=fv,k[T]=fv-Ce}if(a){var pv,TI=T==="x"?Ci:Ai,J0=T==="x"?sr:Ui,Aa=x[P],xc=P==="y"?"height":"width",gv=Aa+v[TI],eS=Aa-v[J0],gd=[Ci,Ai].indexOf(C)!==-1,Bf=(pv=F?.[P])!=null?pv:0,Gf=gd?gv:Aa-_[xc]-S[xc]-Bf+O.altAxis,_i=gd?Aa+_[xc]+S[xc]-Bf-O.altAxis:eS,Ni=p&&gd?Nq(Gf,Aa,_i):Ah(p?Gf:gv,Aa,p?_i:eS);x[P]=Ni,k[P]=Ni-Aa}e.modifiersData[i]=k}}var cN={name:"preventOverflow",enabled:!0,phase:"main",fn:Dve,requiresIfExists:["offset"]};function uN(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function dN(t){return t===On(t)||!Pi(t)?Ph(t):uN(t)}function Tve(t){var e=t.getBoundingClientRect(),n=nc(e.width)/t.offsetWidth||1,i=nc(e.height)/t.offsetHeight||1;return n!==1||i!==1}function hN(t,e,n){n===void 0&&(n=!1);var i=Pi(e),r=Pi(e)&&Tve(e),s=or(e),o=_o(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ji(e)!=="body"||Oh(s))&&(a=dN(e)),Pi(e)?(l=_o(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Mh(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Rve(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function fN(t){var e=Rve(t);return Mq.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function pN(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function gN(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Uq={placement:"bottom",modifiers:[],strategy:"absolute"};function jq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Wq(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?Uq:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Uq,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(C){var b=typeof C=="function"?C(u.options):C;m(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:bo(a)?Mu(a):a.contextElement?Mu(a.contextElement):[],popper:Mu(l)};var E=fN(gN([].concat(i,u.options.modifiers)));return u.orderedModifiers=E.filter(function(T){return T.enabled}),g(),p.update()},forceUpdate:function(){if(!h){var C=u.elements,b=C.reference,E=C.popper;if(jq(b,E)){u.rects={reference:hN(b,pa(E),u.options.strategy==="fixed"),popper:xh(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var P=u.orderedModifiers[T],x=P.fn,_=P.options,S=_===void 0?{}:_,D=P.name;typeof x=="function"&&(u=x({state:u,options:S,name:D,instance:p})||u)}}}},update:pN(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){m(),h=!0}};if(!jq(a,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function g(){u.orderedModifiers.forEach(function(v){var C=v.name,b=v.options,E=b===void 0?{}:b,T=v.effect;if(typeof T=="function"){var P=T({state:u,name:C,instance:p,options:E}),x=function(){};d.push(P||x)}})}function m(){d.forEach(function(v){return v()}),d=[]}return p}}var Ive=[Bq,Hq,Vq,Oq],mN=Wq({defaultModifiers:Ive});var Qq=["*"];var xve=["ngbDatepickerDayView",""],Fve=["month"],Ave=["year"];function Pve(t,e){if(t&1&&(j(0,"option",3),we(1),U()),t&2){let n=e.$implicit,i=Te();de("value",n),Bl("aria-label",i.i18n.getMonthFullName(n,i.date.year)),ee(),pr(i.i18n.getMonthShortName(n,i.date.year))}}function Mve(t,e){if(t&1&&(j(0,"option",3),we(1),U()),t&2){let n=e.$implicit,i=Te();de("value",n),ee(),pr(i.i18n.getYearNumerals(n))}}function Ove(t,e){if(t&1){let n=xt();j(0,"ngb-datepicker-navigation-select",6),De("select",function(r){We(n);let s=Te();return ze(s.select.emit(r))}),U()}if(t&2){let n=Te();de("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function kve(t,e){t&1&&fe(0,"div",7)}function Nve(t,e){t&1&&fe(0,"div",7)}function Lve(t,e){if(t&1&&(Fe(0,kve,1,0,"div",7),j(1,"div",8),we(2),U(),Fe(3,Nve,1,0,"div",7)),t&2){let n=e.$implicit,i=e.$index,r=Te(2);Lr(0,i>0?0:-1),ee(2),zn(" ",r.i18n.getMonthLabel(n.firstDate)," "),ee(),Lr(3,i!==r.months.length-1?3:-1)}}function Vve(t,e){if(t&1&&tu(0,Lve,4,3,null,null,eu),t&2){let n=Te();nu(n.months)}}function Bve(t,e){if(t&1&&(j(0,"div",1),we(1),U()),t&2){let n=Te(2);ee(),pr(n.i18n.getWeekLabel())}}function Gve(t,e){if(t&1&&(j(0,"div",2),we(1),U()),t&2){let n=e.$implicit;ee(),pr(n)}}function Hve(t,e){if(t&1&&(j(0,"div",0),Fe(1,Bve,2,1,"div",1),tu(2,Gve,2,1,"div",2,eu),U()),t&2){let n=Te();ee(),Lr(1,n.datepicker.showWeekNumbers?1:-1),ee(),nu(n.viewModel.weekdays)}}function Uve(t,e){if(t&1&&(j(0,"div",4),we(1),U()),t&2){let n=Te(2).$implicit,i=Te();ee(),pr(i.i18n.getWeekNumerals(n.number))}}function jve(t,e){}function Wve(t,e){if(t&1&&Fe(0,jve,0,0,"ng-template",7),t&2){let n=Te().$implicit,i=Te(3);de("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function zve(t,e){if(t&1){let n=xt();j(0,"div",6),De("click",function(r){let s=We(n).$implicit;return Te(3).doSelect(s),ze(r.preventDefault())}),Fe(1,Wve,1,2,null,7),U()}if(t&2){let n=e.$implicit;fs("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),de("tabindex",n.tabindex),Bl("aria-label",n.ariaLabel),ee(),Lr(1,n.hidden?-1:1)}}function qve(t,e){if(t&1&&(j(0,"div",3),Fe(1,Uve,2,1,"div",4),tu(2,zve,2,9,"div",5,eu),U()),t&2){let n=Te().$implicit,i=Te();ee(),Lr(1,i.datepicker.showWeekNumbers?1:-1),ee(),nu(n.days)}}function Kve(t,e){if(t&1&&Fe(0,qve,4,1,"div",3),t&2){let n=e.$implicit;Lr(0,n.collapsed?-1:0)}}var Yve=["defaultDayTemplate"],Qve=["content"],Xve=t=>({$implicit:t});function $ve(t,e){if(t&1&&fe(0,"div",8),t&2){let n=e.date,i=e.currentMonth,r=e.selected,s=e.disabled,o=e.focused;de("date",n)("currentMonth",i)("selected",r)("disabled",s)("focused",o)}}function Zve(t,e){if(t&1&&(j(0,"div",10),we(1),U()),t&2){let n=Te().$implicit,i=Te(2);ee(),zn(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function Jve(t,e){if(t&1&&(j(0,"div",9),Fe(1,Zve,2,1,"div",10),fe(2,"ngb-datepicker-month",11),U()),t&2){let n=e.$implicit,i=Te(2);ee(),Lr(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),ee(),de("month",n.firstDate)}}function eye(t,e){if(t&1&&tu(0,Jve,3,2,"div",9,eu),t&2){let n=Te();nu(n.model.months)}}function tye(t,e){if(t&1){let n=xt();j(0,"ngb-datepicker-navigation",12),De("navigate",function(r){We(n);let s=Te();return ze(s.onNavigateEvent(r))})("select",function(r){We(n);let s=Te();return ze(s.onNavigateDateSelect(r))}),U()}if(t&2){let n=Te();de("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function nye(t,e){}function iye(t,e){}var rye=["dialog"];var Xq={animation:!0,transitionTimerDelayMs:5},$q=(()=>{let e=class e{constructor(){this.animation=Xq.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sye(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function rT(t){return parseInt(`${t}`,10)}function _N(t){return typeof t=="string"}function Cs(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function yN(t){return t!=null}function oye(t){return t&&t.then}function aye(t,e){return!e||typeof t.closest>"u"?null:t.closest(e)}function Zq(t){return(t||document.body).getBoundingClientRect()}function lye(t){return e=>new pe(n=>{let i=o=>t.run(()=>n.next(o)),r=o=>t.run(()=>n.error(o)),s=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:s})})}var cye=()=>{},{transitionTimerDelayMs:uye}=Xq,eT=new Map,rc=(t,e,n,i)=>{let r=i.context||{},s=eT.get(e);if(s)switch(i.runningTransition){case"continue":return Di;case"stop":t.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),eT.delete(e)}let o=n(e,i.animation,r)||cye;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>o()),ae(void 0).pipe(lye(t));let a=new ot,l=new ot,c=a.pipe(vx(!0));eT.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=sye(e);return t.runOutsideAngular(()=>{let d=ui(e,"transitionend").pipe(xn(c),Tt(({target:p})=>p===e)),h=Vc(u+uye).pipe(xn(c));YS(h,d,l).pipe(xn(c)).subscribe(()=>{eT.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var Ks=class t{static from(e){return e instanceof t?e:e?new t(e.year,e.month,e.day):null}constructor(e,n,i){this.year=Cs(e)?e:null,this.month=Cs(n)?n:null,this.day=Cs(i)?i:null}equals(e){return e!=null&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return e?this.year===e.year?this.month===e.month?this.day===e.day?!1:this.day<e.day:this.month<e.month:this.year<e.year:!1}after(e){return e?this.year===e.year?this.month===e.month?this.day===e.day?!1:this.day>e.day:this.month>e.month:this.year>e.year:!1}};function zq(t){return new Ks(t.getFullYear(),t.getMonth()+1,t.getDate())}function tT(t){let e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function dye(){return new hye}var jC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>dye(),providedIn:"root"});let t=e;return t})(),hye=(()=>{let e=class e extends jC{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(i,r="d",s=1){let o=tT(i),a=!0,l=o.getMonth();switch(r){case"y":o.setFullYear(o.getFullYear()+s);break;case"m":l+=s,o.setMonth(l),l=l%12,l<0&&(l=l+12);break;case"d":o.setDate(o.getDate()+s),a=!1;break;default:return i}return a&&o.getMonth()!==l&&o.setDate(0),zq(o)}getPrev(i,r="d",s=1){return this.getNext(i,r,-s)}getWeekday(i){let s=tT(i).getDay();return s===0?7:s}getWeekNumber(i,r){r===7&&(r=0);let s=(11-r)%7,o=i[s],a=tT(o);a.setDate(a.getDate()+4-(a.getDay()||7));let l=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((l-a.getTime())/864e5)/7)+1}getToday(){return zq(new Date)}isValid(i){if(!i||!Cs(i.year)||!Cs(i.month)||!Cs(i.day)||i.year===0)return!1;let r=tT(i);return!isNaN(r.getTime())&&r.getFullYear()===i.year&&r.getMonth()+1===i.month&&r.getDate()===i.day}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();function jg(t,e){return!fye(t,e)}function Jq(t,e){return!t&&!e?!1:!t||!e?!0:t.year!==e.year||t.month!==e.month}function fye(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}function pye(t,e){if(e&&t&&e.before(t))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${t}`)}function nT(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t||null}function vN(t,e){let{minDate:n,maxDate:i,disabled:r,markDisabled:s}=e;return!(t==null||r||s&&s(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}function gye(t,e,n,i){if(!e)return[];let r=t.getMonths(e.year);if(n&&e.year===n.year){let s=r.findIndex(o=>o===n.month);r=r.slice(s)}if(i&&e.year===i.year){let s=r.findIndex(o=>o===i.month);r=r.slice(0,s+1)}return r}function mye(t,e,n){if(!t)return[];let i=e?Math.max(e.year,t.year-500):t.year-10,s=(n?Math.min(n.year,t.year+500):t.year+10)-i+1,o=Array(s);for(let a=0;a<s;a++)o[a]=i+a;return o}function vye(t,e,n){let i=Object.assign(t.getNext(e,"m"),{day:1});return n!=null&&i.after(n)}function yye(t,e,n){let i=Object.assign(t.getPrev(e,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function Cye(t,e,n,i,r){let{displayMonths:s,months:o}=n,a=o.splice(0,o.length);return Array.from({length:s},(c,u)=>{let d=Object.assign(t.getNext(e,"m",u),{day:1});if(o[u]=null,!r){let h=a.findIndex(p=>p.firstDate.equals(d));h!==-1&&(o[u]=a.splice(h,1)[0])}return d}).forEach((c,u)=>{o[u]===null&&(o[u]=wye(t,c,n,i,a.shift()||{}))}),o}function wye(t,e,n,i,r={}){let{dayTemplateData:s,minDate:o,maxDate:a,firstDayOfWeek:l,markDisabled:c,outsideDays:u,weekdayWidth:d,weekdaysVisible:h}=n,p=t.getToday();r.firstDate=null,r.lastDate=null,r.number=e.month,r.year=e.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],e=Sye(t,e,l),h||(r.weekdays.length=0);for(let g=0;g<t.getWeeksPerMonth();g++){let m=r.weeks[g];m||(m=r.weeks[g]={number:0,days:[],collapsed:!0});let v=m.days;for(let C=0;C<t.getDaysPerWeek();C++){g===0&&h&&(r.weekdays[C]=i.getWeekdayLabel(t.getWeekday(e),d));let b=new Ks(e.year,e.month,e.day),E=t.getNext(b),T=i.getDayAriaLabel(b),P=!!(o&&b.before(o)||a&&b.after(a));!P&&c&&(P=c(b,{month:r.number,year:r.year}));let x=b.equals(p),_=s?s(b,{month:r.number,year:r.year}):void 0;r.firstDate===null&&b.month===r.number&&(r.firstDate=b),b.month===r.number&&E.month!==r.number&&(r.lastDate=b);let S=v[C];S||(S=v[C]={}),S.date=b,S.context=Object.assign(S.context||{},{$implicit:b,date:b,data:_,currentMonth:r.number,currentYear:r.year,disabled:P,focused:!1,selected:!1,today:x}),S.tabindex=-1,S.ariaLabel=T,S.hidden=!1,e=E}m.number=t.getWeekNumber(v.map(C=>C.date),l),m.collapsed=u==="collapsed"&&v[0].date.month!==r.number&&v[v.length-1].date.month!==r.number}return r}function Sye(t,e,n){let i=t.getDaysPerWeek(),r=new Ks(e.year,e.month,1),s=t.getWeekday(r)%i;return t.getPrev(r,"d",(i+s-n)%i)}var kh=(()=>{let e=class e{getMonthLabel(i){return`${this.getMonthFullName(i.month,i.year)} ${this.getYearNumerals(i.year)}`}getDayNumerals(i){return`${i.day}`}getWeekNumerals(i){return`${i}`}getYearNumerals(i){return`${i}`}getWeekLabel(){return""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>new bye,providedIn:"root"});let t=e;return t})(),bye=(()=>{let e=class e extends kh{constructor(){super(...arguments),this._locale=Q(fy),this._monthsShort=b_(this._locale,Ti.Standalone,Gt.Abbreviated),this._monthsFull=b_(this._locale,Ti.Standalone,Gt.Wide)}getWeekdayLabel(i,r){let s=X1(this._locale,Ti.Standalone,r===void 0?Gt.Short:r);return s.map((a,l)=>s[(l+1)%7])[i-1]||""}getMonthShortName(i){return this._monthsShort[i-1]||""}getMonthFullName(i){return this._monthsFull[i-1]||""}getDayAriaLabel(i){let r=new Date(i.year,i.month-1,i.day);return m3(r,"fullDate",this._locale)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),CN=(()=>{let e=class e{constructor(){this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(i=rT(i),Cs(i)&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(i=rT(i),Cs(i)&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{let r=this.toValidDate(i,null);if(jg(this._state.maxDate,r))return{maxDate:r}},minDate:i=>{let r=this.toValidDate(i,null);if(jg(this._state.minDate,r))return{minDate:r}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{let r=i===!0||i===!1?Gt.Short:i,s=i===!0||i===!1?i:!0;if(this._state.weekdayWidth!==r||this._state.weekdaysVisible!==s)return{weekdayWidth:r,weekdaysVisible:s}}},this._calendar=Q(jC),this._i18n=Q(kh),this._model$=new ot,this._dateSelect$=new ot,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Gt.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(Tt(i=>i.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Tt(i=>i!==null))}set(i){let r=Object.keys(i).map(s=>this._VALIDATORS[s](i[s])).reduce((s,o)=>W(W({},s),o),{});Object.keys(r).length>0&&this._nextState(r)}focus(i){let r=this.toValidDate(i,null);r!=null&&!this._state.disabled&&jg(this._state.focusDate,r)&&this._nextState({focusDate:i})}focusSelect(){vN(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(i){let r=this.toValidDate(i,this._calendar.getToday());r!=null&&!this._state.disabled&&(!this._state.firstDate||Jq(this._state.firstDate,r))&&this._nextState({firstDate:r})}select(i,r={}){let s=this.toValidDate(i,null);s!=null&&!this._state.disabled&&(jg(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),r.emitEvent&&vN(s,this._state)&&this._dateSelect$.next(s))}toValidDate(i,r){let s=Ks.from(i);return r===void 0&&(r=this._calendar.getToday()),this._calendar.isValid(s)?s:r}getMonth(i){for(let r of this._state.months)if(i.month===r.number&&i.year===r.year)return r;throw new Error(`month ${i.month} of year ${i.year} not found`)}_nextState(i){let r=this._updateState(i);this._patchContexts(r),this._state=r,this._model$.next(this._state)}_patchContexts(i){let{months:r,displayMonths:s,selectedDate:o,focusDate:a,focusVisible:l,disabled:c,outsideDays:u}=i;i.months.forEach(d=>{d.weeks.forEach(h=>{h.days.forEach(p=>{a&&(p.context.focused=a.equals(p.date)&&l),p.tabindex=!c&&a&&p.date.equals(a)&&a.month===d.number?0:-1,c===!0&&(p.context.disabled=!0),o!==void 0&&(p.context.selected=o!==null&&o.equals(p.date)),d.number!==p.date.month&&(p.hidden=u==="hidden"||u==="collapsed"||s>1&&p.date.after(r[0].firstDate)&&p.date.before(r[s-1].lastDate))})})})}_updateState(i){let r=Object.assign({},this._state,i),s=r.firstDate;if(("minDate"in i||"maxDate"in i)&&(pye(r.minDate,r.maxDate),r.focusDate=nT(r.focusDate,r.minDate,r.maxDate),r.firstDate=nT(r.firstDate,r.minDate,r.maxDate),s=r.focusDate),"disabled"in i&&(r.focusVisible=!1),"selectedDate"in i&&this._state.months.length===0&&(s=r.selectedDate),"focusVisible"in i||"focusDate"in i&&(r.focusDate=nT(r.focusDate,r.minDate,r.maxDate),s=r.focusDate,r.months.length!==0&&r.focusDate&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in i&&(r.firstDate=nT(r.firstDate,r.minDate,r.maxDate),s=r.firstDate),s){let o="dayTemplateData"in i||"firstDayOfWeek"in i||"markDisabled"in i||"minDate"in i||"maxDate"in i||"disabled"in i||"outsideDays"in i||"weekdaysVisible"in i,a=Cye(this._calendar,s,r,this._i18n,o);r.months=a,r.firstDate=a[0].firstDate,r.lastDate=a[a.length-1].lastDate,"selectedDate"in i&&!vN(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in i&&(!r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=s);let l=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,c=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;r.navigation==="select"?(("minDate"in i||"maxDate"in i||r.selectBoxes.years.length===0||l)&&(r.selectBoxes.years=mye(r.firstDate,r.minDate,r.maxDate)),("minDate"in i||"maxDate"in i||r.selectBoxes.months.length===0||l)&&(r.selectBoxes.months=gye(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},(r.navigation==="arrows"||r.navigation==="select")&&(c||l||"minDate"in i||"maxDate"in i||"disabled"in i)&&(r.prevDisabled=r.disabled||yye(this._calendar,r.firstDate,r.minDate),r.nextDisabled=r.disabled||vye(this._calendar,r.lastDate,r.maxDate))}return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),sT=function(t){return t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT",t}(sT||{}),_ye=(()=>{let e=class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Gt.Short}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Eye(){return new Dye}var e9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:()=>Eye(),providedIn:"root"});let t=e;return t})(),Dye=(()=>{let e=class e extends e9{fromModel(i){return i&&Cs(i.year)&&Cs(i.month)&&Cs(i.day)?{year:i.year,month:i.month,day:i.day}:null}toModel(i){return i&&Cs(i.year)&&Cs(i.month)&&Cs(i.day)?{year:i.year,month:i.month,day:i.day}:null}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),ys=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(ys||{}),Tye=(()=>{let e=class e{processKey(i,r){let{state:s,calendar:o}=r;switch(i.which){case ys.PageUp:r.focusDate(o.getPrev(s.focusedDate,i.shiftKey?"y":"m",1));break;case ys.PageDown:r.focusDate(o.getNext(s.focusedDate,i.shiftKey?"y":"m",1));break;case ys.End:r.focusDate(i.shiftKey?s.maxDate:s.lastDate);break;case ys.Home:r.focusDate(i.shiftKey?s.minDate:s.firstDate);break;case ys.ArrowLeft:r.focusDate(o.getPrev(s.focusedDate,"d",1));break;case ys.ArrowUp:r.focusDate(o.getPrev(s.focusedDate,"d",o.getDaysPerWeek()));break;case ys.ArrowRight:r.focusDate(o.getNext(s.focusedDate,"d",1));break;case ys.ArrowDown:r.focusDate(o.getNext(s.focusedDate,"d",o.getDaysPerWeek()));break;case ys.Enter:case ys.Space:r.focusSelect();break;default:return}i.preventDefault(),i.stopPropagation()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rye=(()=>{let e=class e{constructor(){this.i18n=Q(kh)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(r,s){r&2&&fs("bg-primary",s.selected)("text-white",s.selected)("text-muted",s.isMuted())("outside",s.isMuted())("active",s.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[qe],attrs:xve,decls:1,vars:1,template:function(r,s){r&1&&we(0),r&2&&pr(s.i18n.getDayNumerals(s.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),Iye=(()=>{let e=class e{constructor(){this._month=-1,this._year=-1,this.i18n=Q(kh),this.select=new X}changeMonth(i){this.select.emit(new Ks(this.date.year,rT(i),1))}changeYear(i){this.select.emit(new Ks(rT(i),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(r,s){if(r&1&&(uo(Fve,7,Fn),uo(Ave,7,Fn)),r&2){let o;ps(o=gs())&&(s.monthSelect=o.first),ps(o=gs())&&(s.yearSelect=o.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[qe],decls:8,vars:2,consts:()=>{let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let r;r=$localize`:@@ngb.datepicker.select-month:Select month`;let s;s=$localize`:@@ngb.datepicker.select-year:Select year`;let o;return o=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",i,"title",r,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",s,"title",o,1,"form-select",3,"change","disabled"]]},template:function(r,s){if(r&1){let o=xt();j(0,"select",2,0),De("change",function(l){return We(o),ze(s.changeMonth(l.target.value))}),tu(2,Pve,2,3,"option",3,eu),U(),j(4,"select",4,1),De("change",function(l){return We(o),ze(s.changeYear(l.target.value))}),tu(6,Mve,2,2,"option",3,eu),U()}r&2&&(de("disabled",s.disabled),ee(2),nu(s.months),ee(2),de("disabled",s.disabled),ee(2),nu(s.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),xye=(()=>{let e=class e{constructor(){this.navigation=sT,this.i18n=Q(kh),this.months=[],this.navigate=new X,this.select=new X}onClickPrev(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[qe],decls:8,vars:4,consts:()=>{let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let r;r=$localize`:@@ngb.datepicker.previous-month:Previous month`;let s;s=$localize`:@@ngb.datepicker.next-month:Next month`;let o;return o=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",i,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",s,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(r,s){r&1&&(j(0,"div",0)(1,"button",1),De("click",function(a){return s.onClickPrev(a)}),fe(2,"span",2),U()(),Fe(3,Ove,1,4,"ngb-datepicker-navigation-select",3)(4,Vve,2,0),j(5,"div",4)(6,"button",5),De("click",function(a){return s.onClickNext(a)}),fe(7,"span",2),U()()),r&2&&(ee(),de("disabled",s.prevDisabled),ee(2),Lr(3,s.showSelect?3:-1),ee(),Lr(4,s.showSelect?-1:4),ee(2),de("disabled",s.nextDisabled))},dependencies:[Iye],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),Fye=(()=>{let e=class e{constructor(){this.templateRef=Q(na)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=on({type:e,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0});let t=e;return t})(),Aye=(()=>{let e=class e{constructor(){this._keyboardService=Q(Tye),this._service=Q(CN),this.i18n=Q(kh),this.datepicker=Q(EN)}set month(i){this.viewModel=this._service.getMonth(i)}onKeyDown(i){this._keyboardService.processKey(i,this.datepicker)}doSelect(i){!i.context.disabled&&!i.hidden&&this.datepicker.onDateSelect(i.date)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(r,s){r&1&&De("keydown",function(a){return s.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[qe],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){r&1&&(Fe(0,Hve,4,1,"div",0),tu(1,Kve,1,1,null,null,eu)),r&2&&(Lr(0,s.viewModel.weekdays.length>0?0:-1),ee(),nu(s.viewModel.weeks))},dependencies:[Z1],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2});let t=e;return t})(),EN=(()=>{let e=class e{constructor(){this.injector=Q(_t),this._service=Q(CN),this._calendar=Q(jC),this._i18n=Q(kh),this._config=Q(_ye),this._nativeElement=Q(Fn).nativeElement,this._ngbDateAdapter=Q(e9),this._ngZone=Q(Re),this._destroyRef=Q(bp),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new X,this.dateSelect=new X,this.onChange=r=>{},this.onTouched=()=>{};let i=Q(Br);this._service.dateSelect$.pipe(NC()).subscribe(r=>{this.dateSelect.emit(r)}),this._service.model$.pipe(NC()).subscribe(r=>{let s=r.firstDate,o=this.model?this.model.firstDate:null;this._publicState={maxDate:r.maxDate,minDate:r.minDate,firstDate:r.firstDate,lastDate:r.lastDate,focusedDate:r.focusDate,months:r.months.map(d=>d.firstDate)};let a=!1;if(!s.equals(o)&&(this.navigate.emit({current:o?{year:o.year,month:o.month}:null,next:{year:s.year,month:s.month},preventDefault:()=>a=!0}),a&&o!==null)){this._service.open(o);return}let l=r.selectedDate,c=r.focusDate,u=this.model?this.model.focusDate:null;this.model=r,jg(l,this._controlValue)&&(this._controlValue=l,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(l))),jg(c,u)&&u&&r.focusVisible&&this.focus(),i.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(i){this._service.focus(Ks.from(i))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(It(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(i){this._service.open(Ks.from(i?i.day?i:Se(W({},i),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let i=ui(this._contentEl.nativeElement,"focusin"),r=ui(this._contentEl.nativeElement,"focusout");Bc(i,r).pipe(Tt(s=>{let o=s.target,a=s.relatedTarget;return!(o?.classList.contains("ngb-dp-day")&&a?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(o)&&this._nativeElement.contains(a))}),NC(this._destroyRef)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:s==="focusin"})))})}ngOnInit(){if(this.model===void 0){let i={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(r=>i[r]=this[r]),this._service.set(i),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(i){let r={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in i).forEach(s=>r[s]=this[s]),this._service.set(r),"startDate"in i){let{currentValue:s,previousValue:o}=i.startDate;Jq(o,s)&&this.navigateTo(this.startDate)}}onDateSelect(i){this._service.focus(i),this._service.select(i,{emitEvent:!0})}onNavigateDateSelect(i){this._service.open(i)}onNavigateEvent(i){switch(i){case sT.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case sT.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this._service.set({disabled:i})}writeValue(i){this._controlValue=Ks.from(this._ngbDateAdapter.fromModel(i)),this._service.select(this._controlValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(r,s,o){if(r&1&&O1(o,Fye,7),r&2){let a;ps(a=gs())&&(s.contentTemplateFromContent=a.first)}},viewQuery:function(r,s){if(r&1&&(uo(Yve,7),uo(Qve,7)),r&2){let o;ps(o=gs())&&(s._defaultDayTemplate=o.first),ps(o=gs())&&(s._contentEl=o.first)}},hostVars:2,hostBindings:function(r,s){r&2&&fs("disabled",s.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[Vr([{provide:zl,useExisting:Os(()=>e),multi:!0},CN]),Vn,qe],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(r,s){if(r&1&&(Fe(0,$ve,1,5,"ng-template",null,0,tr)(2,eye,2,0,"ng-template",null,1,tr),j(4,"div",3),Fe(5,tye,1,7,"ngb-datepicker-navigation",4),U(),j(6,"div",5,2),Fe(8,nye,0,0,"ng-template",6),U(),Fe(9,iye,0,0,"ng-template",7)),r&2){let o=za(3);ee(5),Lr(5,s.navigation!=="none"?5:-1),ee(),fs("ngb-dp-months",!s.contentTemplate),ee(2),de("ngTemplateOutlet",s.contentTemplate||(s.contentTemplateFromContent==null?null:s.contentTemplateFromContent.templateRef)||o)("ngTemplateOutletContext",Tp(7,Xve,s))("ngTemplateOutletInjector",s.injector),ee(),de("ngTemplateOutlet",s.footerTemplate)}},dependencies:[Z1,Rye,Aye,xye],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),iT=(t,e)=>e?e.some(n=>n.contains(t)):!1,qq=(t,e)=>!e||aye(t,e)!=null,Pye=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})(),Mye=t=>Pye?()=>setTimeout(()=>t(),100):t;function Oye(t,e,n,i,r,s,o,a){n&&t.runOutsideAngular(Mye(()=>{let l=h=>{let p=h.target;return h.button===2||iT(p,o)?!1:n==="inside"?iT(p,s)&&qq(p,a):n==="outside"?!iT(p,s):qq(p,a)||!iT(p,s)},c=ui(e,"keydown").pipe(xn(r),Tt(h=>h.which===ys.Escape),rn(h=>h.preventDefault())),u=ui(e,"mousedown").pipe(le(l),xn(r)),d=ui(e,"mouseup").pipe(jv(u),Tt(([h,p])=>p),Uv(0),xn(r));YS([c.pipe(le(h=>0)),d.pipe(le(h=>1))]).subscribe(h=>t.run(()=>i(h)))}))}var kye=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function t9(t){let e=Array.from(t.querySelectorAll(kye)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var Nye=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=ui(e,"focusin").pipe(xn(n),le(s=>s.target));ui(e,"keydown").pipe(xn(n),Tt(s=>s.which===ys.Tab),jv(r)).subscribe(([s,o])=>{let[a,l]=t9(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&ui(e,"click").pipe(xn(n),jv(r),le(s=>s[1])).subscribe(s=>s.focus())})},Lye=(()=>{let e=class e{constructor(){this._element=Q(hi).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vye=/\s+/,Bye=/  +/gi,Gye={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function Hye(t,e){let[n,i]=Gye[t];return e&&i||n}var Uye=/^left/,jye=/^right/,Wye=/^start/,zye=/^end/;function qye(t,e){let[n,i]=e.split("-"),r=n.replace(Uye,"start").replace(jye,"end"),s=[r];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(Wye,"top").replace(zye,"bottom")),s.push(`${r}-${o}`)}return t&&(s=s.map(o=>`${t}-${o}`)),s.join(" ")}function Kq({placement:t,baseClass:e},n){let i=Array.isArray(t)?t:t.split(Vye),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(c=>c==="auto");s>=0&&r.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(s++,1,c)});let o=i.map(c=>Hye(c,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:c}){let u=new RegExp(e+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement,p=d.className;p=p.replace(u,""),p+=` ${qye(e,h)}`,p=p.trim().replace(Bye," "),d.className=p}},oN,cN,tN,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Yq(t){return t}function Kye(){let t=Q(Lye),e=null;return{createPopper(n){if(!e){let r=(n.updatePopperOptions||Yq)(Kq(n,t));e=mN(n.hostElement,n.targetElement,r)}},update(){e&&e.update()},setOptions(n){if(e){let r=(n.updatePopperOptions||Yq)(Kq(n,t));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}function Yye(t){return e=>(e.modifiers.push(aN,{name:"offset",options:{offset:()=>t}}),e)}var a$e=new Date(1882,10,12),l$e=new Date(2174,10,25);var c$e=1e3*60*60*24;var DN=1080,Qye=24*DN,Xye=12*DN+793,u$e=29*Qye+Xye,d$e=11*DN+204;var $ye=(()=>{let e=class e{constructor(){this._ngbConfig=Q($q),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sc=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}},wN=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=Q(hi),this._applicationRef=Q(Gs),this._injector=Q(_t),this._viewContainerRef=Q(Ls),this._ngZone=Q(Re)}open(e,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(It(1),dn(()=>rc(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?rc(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:e,runningTransition:"stop"}).pipe(rn(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):ae(void 0)}_getContentRef(e,n){if(e)if(e instanceof na){let i=e.createEmbeddedView(n);return this._applicationRef.attachView(i),new sc([i.rootNodes],i)}else return new sc([[this._document.createTextNode(`${e}`)]]);else return new sc([])}},Zye=(()=>{let e=class e{constructor(){this._document=Q(hi)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,s=r.style,{overflow:o,paddingRight:a}=s;if(i>0){let l=parseFloat(window.getComputedStyle(r).paddingRight);s.paddingRight=`${l+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=a),s.overflow=o}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jye=(()=>{let e=class e{constructor(){this._nativeElement=Q(Fn).nativeElement,this._zone=Q(Re)}ngOnInit(){this._zone.onStable.asObservable().pipe(It(1)).subscribe(()=>{rc(this._zone,this._nativeElement,(i,r)=>{r&&Zq(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return rc(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,s){r&2&&(er("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),fs("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[qe],decls:0,vars:0,template:function(r,s){},encapsulation:2});let t=e;return t})(),oT=class{update(e){}close(e){}dismiss(e){}},eCe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],tCe=["animation","backdropClass"],SN=class{_applyWindowOptions(e,n){eCe.forEach(i=>{yN(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){tCe.forEach(i=>{yN(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(xn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(xn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ot,this._dismissed=new ot,this._hidden=new ot,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();oye(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ae(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Gv(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},bN=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(bN||{}),nCe=(()=>{let e=class e{constructor(){this._document=Q(hi),this._elRef=Q(Fn),this._zone=Q(Re),this._closed$=new ot,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new X,this.shown=new ot,this.hidden=new ot}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":_N(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(It(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=rc(this._zone,i,()=>i.classList.remove("show"),r),o=rc(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Gv(s,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=rc(this._zone,this._elRef.nativeElement,(o,a)=>{a&&Zq(o),o.classList.add("show")},i),s=rc(this._zone,this._dialogEl.nativeElement,()=>{},i);Gv(r,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{ui(i,"keydown").pipe(xn(this._closed$),Tt(s=>s.which===ys.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(bN.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;ui(this._dialogEl.nativeElement,"mousedown").pipe(xn(this._closed$),rn(()=>r=!1),Ge(()=>ui(i,"mouseup").pipe(xn(this._closed$),It(1))),Tt(({target:s})=>i===s)).subscribe(()=>{r=!0}),ui(i,"click").pipe(xn(this._closed$)).subscribe(({target:s})=>{i===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(bN.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),s=t9(i)[0];(r||s||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,s;r&&r.focus&&i.contains(r)?s=r:s=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&rc(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,s){if(r&1&&uo(rye,7),r&2){let o;ps(o=gs())&&(s._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,s){r&2&&(Bl("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),er("modal d-block"+(s.windowClass?" "+s.windowClass:"")),fs("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[qe],ngContentSelectors:Qq,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,s){r&1&&(P1(),j(0,"div",1,0)(2,"div",2),M1(3),U()()),r&2&&er("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),iCe=(()=>{let e=class e{constructor(){this._applicationRef=Q(Gs),this._injector=Q(_t),this._environmentInjector=Q(Or),this._document=Q(hi),this._scrollBar=Q(Zye),this._activeWindowCmptHasChanged=new ot,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new X;let i=Q(Re);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];Nye(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,s){let o=s.container instanceof HTMLElement?s.container:yN(s.container)?this._document.querySelector(s.container):this._document.body;if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new oT;i=s.injector||i;let l=i.get(Or,null)||this._environmentInjector,c=this._getContentRef(i,l,r,a,s),u=s.backdrop!==!1?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,c.nodes),h=new SN(d,c,u,s.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe(It(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=p=>{h.close(p)},a.dismiss=p=>{h.dismiss(p)},a.update=p=>{h.update(p)},h.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=c_(Jye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let s=c_(nCe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,r,s,o,a){return s?s instanceof na?this._createFromTemplateRef(s,o):_N(s)?this._createFromString(s):this._createFromComponent(i,r,s,o,a):new sc([])}_createFromTemplateRef(i,r){let s={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},o=i.createEmbeddedView(s);return this._applicationRef.attachView(o),new sc([o.rootNodes],o)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new sc([[r]])}_createFromComponent(i,r,s,o,a){let l=_t.create({providers:[{provide:oT,useValue:o}],parent:i}),c=c_(s,{environmentInjector:r,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new sc([[u]],c.hostView,c)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(s=>{s!==i&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wg=(()=>{let e=class e{constructor(){this._injector=Q(_t),this._modalStack=Q(iCe),this._config=Q($ye)}open(i,r={}){let s=W(Se(W({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rCe={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function sCe(t){let e=(t||"").trim();if(e.length===0)return[];let n=e.split(/\s+/).map(r=>r.split(":")).map(r=>rCe[r[0]]||r),i=n.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function oCe(t,e,n,i,r,s=0,o=0){let a=sCe(e);if(a.length===0)return()=>{};let l=new Set,c=[],u;function d(p,g){t.addEventListener(p,g),c.push(()=>t.removeEventListener(p,g))}function h(p,g){clearTimeout(u),g>0?u=setTimeout(p,g):p()}for(let[p,g]of a)g?(d(p,()=>{l.add(p),h(()=>l.size>0&&i(),s)}),d(g,()=>{l.delete(p),h(()=>l.size===0&&r(),o)})):d(p,()=>n()?h(r,o):h(i,s));return()=>c.forEach(p=>p())}var aCe=(()=>{let e=class e{constructor(){this._ngbConfig=Q($q),this.autoClose=!0,this.placement="auto",this.popperOptions=i=>i,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lCe=0,cCe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(r,s){r&2&&(A1("id",s.id),er("tooltip"+(s.tooltipClass?" "+s.tooltipClass:"")),fs("fade",s.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[qe],ngContentSelectors:Qq,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(r,s){r&1&&(P1(),fe(0,"div",0),j(1,"div",1),M1(2),U())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),aT=(()=>{let e=class e{constructor(){this._config=Q(aCe),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new X,this.hidden=new X,this._nativeElement=Q(Fn).nativeElement,this._ngZone=Q(Re),this._document=Q(hi),this._changeDetector=Q(Br),this._ngbTooltipWindowId=`ngb-tooltip-${lCe++}`,this._popupService=new wN(cCe),this._windowRef=null,this._positioning=Kye()}set ngbTooltip(i){this._ngbTooltip=i,!i&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(i){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:r,transition$:s}=this._popupService.open(this._ngbTooltip,i??this.tooltipContext,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(Yye([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),Oye(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),s.subscribe(()=>this.shown.emit())}}close(i=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(i).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=oCe(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:i}){i&&this.isOpen()&&this._windowRef.setInput("tooltipClass",i.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(_N(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=on({type:e,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[Vn]});let t=e;return t})(),n9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Zi({});let t=e;return t})();var h$e=new ue("live announcer delay",{providedIn:"root",factory:()=>100});function uCe(t,e){if(t&1){let n=xt();Vs(0),j(1,"div",2),De("click",function(){let r=We(n).$implicit;return ze(r.action())}),fe(2,"i"),U(),Bs()}if(t&2){let n=e.$implicit;ee(),er(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),de("ngbTooltip",n.label),ee(),er(n.icon)}}var i9=(()=>{let e=class e{constructor(){this.sidebarItems=[]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[qe],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(r,s){r&1&&(j(0,"div",0),Fe(1,uCe,3,5,"ng-container",1),U()),r&2&&(ee(),de("ngForOf",s.sidebarItems))},dependencies:[En,fo,n9,aT],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]});let t=e;return t})();var zg=(()=>{let e=class e{constructor(){this.dateRangeSubject=new qt(null),this.dateRange$=this.dateRangeSubject.asObservable()}setDateRange(i){this.dateRangeSubject.next(i)}clearDateRange(){this.dateRangeSubject.next(null)}getDateRange(){return this.dateRange$}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dCe(t,e){if(t&1){let n=xt();j(0,"span",9),De("mouseenter",function(){let r=We(n).$implicit,s=Te();return ze(s.hoveredDate=r)})("mouseleave",function(){We(n);let r=Te();return ze(r.hoveredDate=null)}),we(1),U()}if(t&2){let n=e.$implicit,i=e.focused,r=Te();fs("focused",i)("range",r.isRange(n))("faded",r.isHovered(n)||r.isInside(n)),ee(),zn(" ",n.day," ")}}var lT=(()=>{let e=class e{constructor(i,r){this.calendar=i,this.dateSelectorService=r,this.hoveredDate=null,this.fromDate=null,this.toDate=null,this.startDate=this.calendar.getToday(),this.dateSelectorService.dateRange$.subscribe(s=>{s&&s.from&&s.to?(this.fromDate=this.convertDateToNgbDate(s.from),this.toDate=this.convertDateToNgbDate(s.to)):(this.fromDate=null,this.toDate=null),this.updateStartDate()})}onDateSelection(i){let r=this.fromDate?this.convertNgbDateToDate(this.fromDate):null,s=this.toDate?this.convertNgbDateToDate(this.toDate):null;!this.fromDate&&!this.toDate?(this.fromDate=i,r=this.convertNgbDateToDate(this.fromDate)):this.fromDate&&!this.toDate&&i.after(this.fromDate)?(this.toDate=i,s=this.convertNgbDateToDate(this.toDate)):(this.toDate=null,s=null,this.fromDate=i,r=this.convertNgbDateToDate(this.fromDate)),r&&s&&this.dateSelectorService.setDateRange({from:r,to:s})}selectRange(i){let r=new Date,s=null,o=null;switch(i){case"thisWeek":s=this.getStartOfWeek(r),o=new Date(s),o.setDate(s.getDate()+6);break;case"lastWeek":let a=this.getStartOfWeek(r);o=new Date(a),o.setDate(a.getDate()-1),s=new Date(o),s.setDate(o.getDate()-6);break;case"thisMonth":s=new Date(r.getFullYear(),r.getMonth(),1),o=this.getLastDayOfCurrentMonth();break;case"lastMonth":s=new Date(r.getFullYear(),r.getMonth()-1,1),o=new Date(r.getFullYear(),r.getMonth(),0);break;case"thisYear":s=new Date(r.getFullYear(),0,1),o=this.getLastDayOfCurrentYear();break;case"lastYear":s=new Date(r.getFullYear()-1,0,1),o=new Date(r.getFullYear()-1,11,31);break;case"clear":this.clearDateRange();break;default:return}s&&o&&(this.fromDate=this.convertDateToNgbDate(s),this.toDate=this.convertDateToNgbDate(o),this.dateSelectorService.setDateRange({from:s,to:o}),this.updateStartDate())}getStartOfWeek(i){let r=i.getDay(),s=i.getDate()-r+(r===0?-6:1);return new Date(i.setDate(s))}clearDateRange(){this.dateSelectorService.clearDateRange()}getLastDayOfCurrentMonth(){let i=new Date;return new Date(i.getFullYear(),i.getMonth()+1,0)}getLastDayOfCurrentYear(){let i=new Date;return new Date(i.getFullYear(),11,31)}convertNgbDateToDate(i){return new Date(i.year,i.month-1,i.day)}convertDateToNgbDate(i){return new Ks(i.getFullYear(),i.getMonth()+1,i.getDate())}isHovered(i){return this.fromDate&&!this.toDate&&this.hoveredDate&&i.after(this.fromDate)&&i.before(this.hoveredDate)}isInside(i){return this.toDate&&i.after(this.fromDate)&&i.before(this.toDate)}isRange(i){return i.equals(this.fromDate)||this.toDate&&i.equals(this.toDate)||this.isInside(i)||this.isHovered(i)}updateStartDate(){this.fromDate?this.startDate=this.fromDate:this.startDate=this.calendar.getToday()}};e.\u0275fac=function(r){return new(r||e)(J(jC),J(zg))},e.\u0275cmp=je({type:e,selectors:[["app-date-selector"]],standalone:!0,features:[qe],decls:22,vars:3,consts:[["dp",""],["t",""],[1,"container",2,"max-width","260px"],[1,"row"],["outsideDays","hidden",3,"dateSelect","startDate","displayMonths","dayTemplate"],[1,"date-selector"],[1,"row","d-flex","justify-content-center","align-items-center","pe-2"],[1,"btn","btn-sm","btn-warning","col-5","m-1",3,"click"],[1,"btn","btn-sm","col-5","m-1","bg-danger",3,"click"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(r,s){if(r&1){let o=xt();j(0,"div",2)(1,"div",3)(2,"ngb-datepicker",4,0),De("dateSelect",function(l){return We(o),ze(s.onDateSelection(l))}),U(),Fe(4,dCe,2,7,"ng-template",5,1,tr),U(),fe(6,"hr"),j(7,"div",6)(8,"button",7),De("click",function(){return We(o),ze(s.selectRange("thisWeek"))}),we(9," This Week "),U(),j(10,"button",7),De("click",function(){return We(o),ze(s.selectRange("lastWeek"))}),we(11," Last Week "),U(),j(12,"button",7),De("click",function(){return We(o),ze(s.selectRange("thisMonth"))}),we(13," This Month "),U(),j(14,"button",7),De("click",function(){return We(o),ze(s.selectRange("lastMonth"))}),we(15," Last Month "),U(),j(16,"button",7),De("click",function(){return We(o),ze(s.selectRange("thisYear"))}),we(17," This Year "),U(),j(18,"button",7),De("click",function(){return We(o),ze(s.selectRange("lastYear"))}),we(19," Last Year "),U(),j(20,"button",8),De("click",function(){return We(o),ze(s.selectRange("clear"))}),we(21," Clear "),U()()()}if(r&2){let o=za(5);ee(2),de("startDate",s.startDate)("displayMonths",1)("dayTemplate",o)}},dependencies:[EN],styles:[".custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]});let t=e;return t})();function hCe(t,e){if(t&1){let n=xt();Vs(0),j(1,"div",3),De("click",function(){let r=We(n).$implicit;return ze(r.action())}),fe(2,"i"),U(),Bs()}if(t&2){let n=e.$implicit;ee(),er(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"topbar-item"),de("ngbTooltip",n.label),ee(),er(n.icon)}}function fCe(t,e){if(t&1){let n=xt();j(0,"div",4),De("click",function(){We(n);let r=Te();return ze(r.preventCloseOnClick())}),fe(1,"app-date-selector"),U()}}var r9=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.dateSelectorService=r,this.renderer=s,this.showSidebar=!1,this.topbarItems=[{label:"",icon:"bi bi-three-dots-vertical",action:()=>{this.showSidebar=!this.showSidebar,this.toggleSidebar.emit(this.showSidebar)}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"",icon:"bi bi-calendar-fill",action:()=>{this.toggleDateSelector(),this.preventCloseOnClick()}}],this.toggleSidebar=new X,this.showDateSelector=!1,this.dateSelectorClicked=!1,this.dateSelectorService.dateRange$.subscribe(()=>{this.showDateSelector=!1}),this.renderer.listen("window","click",o=>{this.dateSelectorClicked||(this.showDateSelector=!1),this.dateSelectorClicked=!1})}toggleDateSelector(){this.showDateSelector=!this.showDateSelector}preventCloseOnClick(){this.dateSelectorClicked=!0}};e.\u0275fac=function(r){return new(r||e)(J(fi),J(zg),J(Nr))},e.\u0275cmp=je({type:e,selectors:[["app-topbar"]],inputs:{showSidebar:"showSidebar",topbarItems:"topbarItems"},outputs:{toggleSidebar:"toggleSidebar"},standalone:!0,features:[qe],decls:3,vars:2,consts:[[1,"topbar"],[4,"ngFor","ngForOf"],["class","date-selector-container-mobile d-flex justify-content-center align-items-center position-absolute",3,"click",4,"ngIf"],["placement","bottom",3,"click","ngbTooltip"],[1,"date-selector-container-mobile","d-flex","justify-content-center","align-items-center","position-absolute",3,"click"]],template:function(r,s){r&1&&(j(0,"div",0),Fe(1,hCe,3,5,"ng-container",1),U(),Fe(2,fCe,2,0,"div",2)),r&2&&(ee(),de("ngForOf",s.topbarItems),ee(),de("ngIf",s.showDateSelector))},dependencies:[En,fo,Gi,aT,lT],styles:[".topbar[_ngcontent-%COMP%]{height:60px;width:100vw;background-color:#1f1f1f;display:flex;justify-content:flex-start;align-items:center;padding:0 20px;position:fixed;top:0;z-index:1000}.topbar-item[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc;z-index:1001}.topbar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}"]});let t=e;return t})();var pCe=t=>({"dim-content":t});function gCe(t,e){if(t&1){let n=xt();j(0,"aside",7),De("click",function(){We(n);let r=Te();return ze(r.preventCloseOnClick())}),fe(1,"app-sidebar",2),U()}if(t&2){let n=Te();ee(),de("sidebarItems",n.sidebarContent)}}var s9=(()=>{let e=class e{constructor(i,r,s){this.renderer=i,this.authService=r,this.router=s,this.showSidebar=!1,this.mobileSidebarTogglerClicked=!1,this.sidebarContent=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}],this.handleAdminUser(),this.renderer.listen("window","click",o=>{this.mobileSidebarTogglerClicked||(this.showSidebar=!1),this.mobileSidebarTogglerClicked=!1})}handleAdminUser(){this.authService.currentUser$.subscribe(i=>{if(i&&i.isAdmin){if(this.sidebarContent.some(s=>s.label==="Form Filler"))return;this.sidebarContent.unshift({label:"Form Filler",icon:"bi bi-file-earmark-text",action:()=>{this.router.navigateByUrl("/dashboard/fill-form")}})}})}toggleSidebar(i){this.showSidebar=i}preventCloseOnClick(){this.mobileSidebarTogglerClicked=!0}logout(){this.authService.logout()}};e.\u0275fac=function(r){return new(r||e)(J(Nr),J(vs),J(fi))},e.\u0275cmp=je({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[qe],decls:8,vars:6,consts:[[1,"app-container"],[1,"d-none","d-md-block"],[3,"sidebarItems"],["class","d-md-none sidebar-transition","style","z-index: 1002",3,"click",4,"ngIf"],[1,"d-md-none"],[3,"toggleSidebar","showSidebar"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5",3,"ngClass"],[1,"d-md-none","sidebar-transition",2,"z-index","1002",3,"click"]],template:function(r,s){r&1&&(j(0,"div",0)(1,"aside",1),fe(2,"app-sidebar",2),U(),Fe(3,gCe,2,1,"aside",3),j(4,"header",4)(5,"app-topbar",5),De("toggleSidebar",function(a){return s.toggleSidebar(a),s.preventCloseOnClick()}),U()(),j(6,"main",6),fe(7,"router-outlet"),U()()),r&2&&(ee(2),de("sidebarItems",s.sidebarContent),ee(),de("ngIf",s.showSidebar),ee(2),de("showSidebar",s.showSidebar),ee(),de("ngClass",Tp(4,pCe,s.showSidebar)))},dependencies:[ky,i9,r9,En,E_,Gi],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding-top:80px}.dim-content[_ngcontent-%COMP%]{opacity:.3}}"]});let t=e;return t})();var RN=class{constructor(){this.subject=new xl(1),this.subscriptions=new Ln}doFilter(e){this.subject.next(e)}dispose(){this.subscriptions.unsubscribe()}notEmpty(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]){let r=i[e].currentValue;r!=null&&n(r)}}))}has(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]){let r=i[e].currentValue;n(r)}}))}notFirst(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]&&!i[e].isFirstChange()){let r=i[e].currentValue;n(r)}}))}notFirstAndEmpty(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]&&!i[e].isFirstChange()){let r=i[e].currentValue;r!=null&&n(r)}}))}},o9=new ue("NGX_ECHARTS_CONFIG"),a9=(()=>{let e=class e{constructor(i,r,s){this.el=r,this.ngZone=s,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new X,this.optionsError=new X,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new xl(1),this.resize$=new ot,this.changeFilter=new RN,this.resizeObFired=!1,this.echarts=i.echarts,this.theme=i.theme||null}ngOnChanges(i){this.changeFilter.doFilter(i)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(bx(100,os,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(i=>{for(let r of i)r.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",i=>this.onOptionsChange(i)),this.changeFilter.notFirstAndEmpty("merge",i=>this.setOption(i)),this.changeFilter.has("loading",i=>this.toggleLoading(!!i)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(i){this.chart?i?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(r=>i?r.showLoading(this.loadingType,this.loadingOpts):r.hideLoading())}setOption(i,r){if(this.chart)try{this.chart.setOption(i,r)}catch(s){console.error(s),this.optionsError.emit(s)}}refreshChart(){return N(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let i=this.el.nativeElement;if(window&&window.getComputedStyle){let r=window.getComputedStyle(i,null).getPropertyValue("height");(!r||r==="0px")&&(!i.style.height||i.style.height==="0px")&&(i.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:s})=>s(i,this.theme,this.initOpts)))}initChart(){return N(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(i){return N(this,null,function*(){i&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(i){return this.chartInit.pipe(Ge(r=>new pe(s=>(r.on(i,o=>this.ngZone.run(()=>s.next(o))),()=>{this.chart&&(this.chart.isDisposed()||r.off(i))}))))}};e.\u0275fac=function(r){return new(r||e)(J(o9),J(Fn),J(Re))},e.\u0275dir=on({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[Vn]});let t=e;return t})(),l9=(t={})=>({provide:o9,useFactory:()=>Se(W({},t),{echarts:()=>import("./chunk-CF2AHGHN.js")})});var cT=function(){return cT=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cT.apply(this,arguments)};var vCe={includeMetadataChanges:!1};function c9(t,e){return e===void 0&&(e=vCe),new pe(function(n){var i=Mg(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function u9(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:cT(cT({},i),(n={},n[e.idField]=t.id,n))}function d9(t){return c9(t,{includeMetadataChanges:!0}).pipe(le(function(e){return e.docs}))}function h9(t,e){return e===void 0&&(e={}),d9(t).pipe(le(function(n){return n.map(function(i){return u9(i,e)})}))}var oc=class{constructor(e){return e}},f9="firestore",IN=class{constructor(){return ir(f9)}};var xN=new ue("angularfire2.firestore-instances");function yCe(t,e){let n=gr(f9,t,e);return n&&new oc(n)}function CCe(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new oc(i)}}var wCe={provide:IN,deps:[[new mt,xN]]},SCe={provide:oc,useFactory:yCe,deps:[[new mt,xN],ei]};function p9(t,...e){return Qe("angularfire",An.full,"fst"),fn([SCe,wCe,{provide:xN,useFactory:CCe(t),multi:!0,deps:[Re,_t,Pn,Ii,[new mt,oa],[new mt,Ri],...e]}])}var zC=Ft(h9,!0);var uT=Ft(kD,!0);var g9=Ft(LD,!0),m9=Ft(ND,!0);var Nh=Ft(PC,!0);var dT=Ft(OD,!0);var ac=Ft(Ch,!0);var v9=Ft(PD,!0);var y9=Ft(rq,!0);var C9=Ft(xD,!0);var w9=Ft(ha,!0);var qg=Ft(OC,!0);var ku=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.fs=r,this.userId=null,this.incomeTags=new qt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new qt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(Ge(s=>s?(this.userId=s.uid,this.getTags()):(this.userId=null,ae([])))).subscribe(s=>{this.separateTagsByType(s)})}getTagFromId(i,r){return(r==="income"?this.incomeTags$:this.expenseTags$).pipe(Ge(s=>{let o=s.find(a=>a.id===i);return ae(o||{id:"",name:"",type:r})}))}synchronousGetTagFromId(i,r){return(r==="income"?this.incomeTags.value:this.expenseTags.value).find(a=>a.id===i)||{id:"",name:"",type:r}}separateTagsByType(i){this.incomeTags.next(i.filter(r=>r.type==="income")),this.expenseTags.next(i.filter(r=>r.type==="expense"))}getTags(){if(!this.userId)return ae([]);let i=Nh(this.fs,`tags/${this.userId}/userTags`);return zC(i,{idField:"id"})}addTag(i,r){if(!this.userId)return ae("");let s={name:i,type:r};return new pe(o=>{uT(Nh(this.fs,`tags/${this.userId}/userTags`),s).then(a=>{o.next(a.id),o.complete()}).catch(a=>o.error(a))})}updateTag(i,r){if(!this.userId)return ae();let s=ac(this.fs,`tags/${this.userId}/userTags/${i}`);return new pe(o=>{qg(s,r).then(()=>{o.next(),o.complete()}).catch(a=>o.error(a))})}deleteTag(i){if(!this.userId)return ae();let r=ac(this.fs,`tags/${this.userId}/userTags/${i}`);return new pe(s=>{dT(r).then(()=>{s.next(),s.complete()}).catch(o=>s.error(o))})}addTagToTransaction(i,r,s){if(!this.userId)return ae();let o=ac(this.fs,`transactions/${this.userId}/${s}/${i}`);return new pe(a=>{qg(o,{tagIds:m9(r)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}removeTagFromTransaction(i,r,s){if(!this.userId)return ae();let o=ac(this.fs,`transactions/${this.userId}/${s}/${i}`);return new pe(a=>{qg(o,{tagIds:g9(r)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}getTagsForTransaction(i,r){if(!this.userId)return ae([]);let s=ac(this.fs,`transactions/${this.userId}/${r}/${i}`);return new pe(o=>{v9(s).then(a=>{if(a.exists()){let l=W({id:a.id},a.data());this.getTags().pipe(le(c=>c.filter(u=>l.tagIds.includes(u.id)))).subscribe(c=>{o.next(c),o.complete()},c=>o.error(c))}else o.next([]),o.complete()}).catch(a=>o.error(a))})}getTransactionsByTag(i,r){if(!this.userId)return ae([]);let s=Nh(this.fs,`transactions/${this.userId}/${r}`);return zC(s,{idField:"id"}).pipe(le(o=>o.filter(a=>{let l=a.tagIds||[];return Array.isArray(l)&&l.includes(i)})))}};e.\u0275fac=function(r){return new(r||e)(Z(Xa),Z(oc))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fT=(()=>{let e=class e{constructor(i){this.tagService=i}formatDateToDayMonthYearWeekday(i){let r={day:"2-digit",month:"short",year:"numeric",weekday:"short"},s=i.toLocaleDateString("en-GB",r),[o,a,l,c]=s.replace(",","").split(" ");return`${l} ${a} ${c} (${o})`}moneyToLineBarData(i){return i.map(r=>({tag:r.tags[0],value:[r.date,r.amount],title:r.title??""}))}dateToMilli(i){return new Date(i).getTime()}milliToDate(i){return new Date(i).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(i,r=!0){let s={weekday:"short",year:"numeric",month:"long",day:r?"numeric":void 0};return new Date(i).toLocaleDateString("en-US",s)}groupLineBarDataByDay(i){let r={};return i.forEach(s=>{let o=new Date(s.value[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;r[a]||(r[a]=[]),r[a].push({tag:s.tag,value:s.value[1],title:s.title})}),Object.entries(r).map(([s,o])=>{let a=o,[l,c,u]=s.split("-");return{value:[new Date(parseInt(l),parseInt(c)-1,parseInt(u)).getTime(),a.reduce((h,p)=>h+Number(p.value),0)],points:a}})}groupBarDataByMonth(i){let r=[];return i.forEach(s=>{let o=new Date(s[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;r[a]||(r[a]=0),r[a]+=s[1]}),Object.entries(r).map(([s,o])=>{let[a,l]=s.split("-");return[new Date(parseInt(a),parseInt(l)-1).getTime(),o]})}groupPointsByTags(i){return i.reduce((r,s)=>(r[s.tag]||(r[s.tag]={tag:s.tag,points:[]}),r[s.tag].points.push({title:s.title,value:s.value}),r),{})}formatTooltipBySortedPoints(i,r=!1){return Object.values(i).map(s=>{let o=this.tagService.synchronousGetTagFromId(s.tag,r?"income":"expense").name,a=s.points.map(l=>`${l.title}: \u20B1${l.value.toLocaleString()}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${a}`}).join("<br/>")}};e.\u0275fac=function(r){return new(r||e)(Z(ku))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bCe(t,e){if(t&1&&fe(0,"i"),t&2){let n=Te(2);er(n.percentChangeSymbol)}}function _Ce(t,e){if(t&1){let n=xt();j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),we(4),U(),j(5,"p",4),we(6),j(7,"span",5),we(8),Fe(9,bCe,1,2,"i",6),U()()(),j(10,"div",7)(11,"button",8),De("click",function(){We(n);let r=Te();return ze(r.toggleChartType())}),fe(12,"i"),U()()(),j(13,"div"),fe(14,"div",9),U()()}if(t&2){let n=Te();ee(4),pr(n.title),ee(2),zn(" ",n.percentChangeMessage," "),ee(),er(n.percentChangeClass),ee(),zn(" ",n.percentChange.toFixed(0),"% "),ee(),Lr(9,n.percentChange!==0?9:-1),ee(3),er(n.toggleChartTypeSymbol),ee(2),jd("height",n.height),de("options",n.options)}}var _9=(()=>{let e=class e{constructor(i){this.utilService=i,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="150px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{confine:!0,trigger:"axis",formatter:r=>{r=r[0];let s=this.utilService.groupPointsByTags(r.data.points),o=this.utilService.dateToMonthDateYearDay(r.value[0]),a=this.utilService.formatTooltipBySortedPoints(s,this.isIncome);return`<small>${o}</small><br/>${a}<br/>${r.data.points.length>1?`<small>Total: \u20B1${r.value[1].toLocaleString()}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:r=>this.utilService.milliToDate(Number(r))},show:!1},grid:{bottom:"5%",top:"5%",left:0,right:0},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let i=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=Se(W({},this.options),{series:[{data:i,type:this.type,itemStyle:{color:"#c23531"}}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(i){if(i.length<2)return 0;let r=i[0].value[1];return(i[i.length-1].value[1]-r)/r*100}get percentChangeSymbol(){return this.percentChange>0?"bi bi-arrow-up":"bi bi-arrow-down"}get percentChangeClass(){let i="";if(this.percentChange!==0){let r=this.percentChange>0;this.isIncome?i=r?"text-success":"text-danger":i=r?"text-danger":"text-success"}return`${i}`}};e.\u0275fac=function(r){return new(r||e)(J(fT))},e.\u0275cmp=je({type:e,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[Vn,qe],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],[3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6",3,"click"],["echarts","",1,"demo-chart",3,"options"]],template:function(r,s){r&1&&Fe(0,_Ce,15,11,"div",0),r&2&&Lr(0,s.isLoading?-1:0)},dependencies:[a9],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn[_ngcontent-%COMP%]{width:50px;height:50px}"]});let t=e;return t})();var E9=(()=>{let e=class e{constructor(){this.title="Title",this.value=0,this.percentChange=0,this.isIncome=!0}get roundedPercentChange(){let i=Math.round(this.percentChange);return`${i>0?"+":""}${i}`}get percentChangeClass(){return this.percentChange===0?"":this.isIncome?this.percentChange>0?"text-success":"text-danger":this.percentChange>0?"text-danger":"text-success"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=je({type:e,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange",isIncome:"isIncome"},standalone:!0,features:[qe],decls:7,vars:5,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"small","mb-0"]],template:function(r,s){r&1&&(j(0,"div",0)(1,"h3",1),we(2),U(),j(3,"p",2),we(4),U(),j(5,"p",3),we(6),U()()),r&2&&(ee(2),pr(s.title),ee(2),pr(s.value.toLocaleString()),ee(),er(s.percentChangeClass),ee(),zn(" ",s.roundedPercentChange,"% "))}});let t=e;return t})();var ECe=t=>({"add-tag":t});function DCe(t,e){if(t&1){let n=xt();j(0,"div",3),we(1),j(2,"i",4),De("click",function(){We(n);let r=Te();return ze(r.removeExistingTag())}),U()()}if(t&2){let n=Te();ee(),zn(" ",n.selectedTag.name," ")}}function TCe(t,e){if(t&1){let n=xt();j(0,"textarea",5),De("keydown.enter",function(r){We(n);let s=Te();return ze(s.onEnterKey(r))}),U()}if(t&2){let n=Te();de("formControl",n.tagForm)}}function RCe(t,e){if(t&1&&(j(0,"li",10),we(1),U()),t&2){let n=Te(2);ee(),zn(' Add tag "',n.tagForm.value,'" ')}}function ICe(t,e){if(t&1){let n=xt();j(0,"li",11),De("click",function(){let r=We(n).$implicit,s=Te(2);return ze(s.addExistingTag(r))}),we(1),fe(2,"i",12),U()}if(t&2){let n=e.$implicit,i=Te(2);de("ngClass",Tp(2,ECe,i.isOptionHighlighted(n.name))),ee(),zn(" ",n.name," ")}}function xCe(t,e){if(t&1&&(j(0,"div",6)(1,"ul",7),Fe(2,RCe,2,1,"li",8)(3,ICe,3,4,"li",9),U()()),t&2){let n=Te();ee(2),de("ngIf",n.showAddTagOption()),ee(),de("ngForOf",n.suggestions)}}var D9=(()=>{let e=class e{constructor(i){this.tagService=i,this.type="income",this.tagId=null,this.tagAdded=new X,this.incomeTags=[],this.expenseTags=[],this.tagForm=new jl(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.tagService.incomeTags$.subscribe(r=>{this.incomeTags=r}),this.tagService.expenseTags$.subscribe(r=>{this.expenseTags=r}),this.tagForm.valueChanges.pipe(op(this.searchDelay)).subscribe(r=>{this.filterSuggestions(r)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.tagService.getTagFromId(this.tagId,this.type).subscribe(i=>{this.selectedTag=i}))}filterSuggestions(i){if(!i)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let r=i.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(s=>s.name.toLowerCase().includes(r)).sort((s,o)=>s.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(i){console.log("Adding tag:",i),this.tagService.addTag(i,this.type).subscribe(r=>{console.log("Tag added successfully"),this.tagAdded.emit(r),this.tagForm.setValue(""),this.selectedTag=this.tagService.synchronousGetTagFromId(r,this.type),this.removeTagFromSuggestions(r)},r=>{console.error("Error adding tag:",r)})}addExistingTag(i){console.log("Adding existing tag:",i.name),this.tagAdded.emit(i.id),this.tagForm.setValue(""),this.selectedTag=i,this.removeTagFromSuggestions(i.id)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(i){this.suggestions=this.suggestions.filter(r=>r.id.toLowerCase()!==i.toLowerCase())}showAddTagOption(){return!this.suggestions.some(i=>i.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(i){if(!this.tagForm.value)return;if(i.preventDefault(),this.suggestions.find(s=>s.name.toLowerCase()===this.tagForm.value.toLowerCase())){this.addExistingTag(this.suggestions[0]);return}this.addTag(this.tagForm.value)}isOptionHighlighted(i){return i.toLowerCase()===this.tagForm.value.toLowerCase()}};e.\u0275fac=function(r){return new(r||e)(J(ku))},e.\u0275cmp=je({type:e,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[qe],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],[1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(r,s){r&1&&Fe(0,DCe,3,1,"div",0)(1,TCe,1,1,"textarea",1)(2,xCe,4,2,"div",2),r&2&&(de("ngIf",s.selectedTag),ee(),de("ngIf",s.selectedTag===null),ee(),de("ngIf",s.tagForm.value))},dependencies:[Qa,mo,vo,Uy,En,E_,fo,Gi],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();var Nu=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.fs=r,this.userId=null,this.incomeTransactionsSubject=new qt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new qt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.initialize()}initialize(){this.afAuth.authState.pipe(Ge(i=>i?(this.userId=i.uid,this.getAllTransactions()):(this.userId=null,ae({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:i,expenseTransactions:r})=>{this.incomeTransactionsSubject.next(i),this.expenseTransactionsSubject.next(r)},error:i=>{console.error("Error fetching transactions:",i)}})}getTransactionFromId(i,r){return(r==="income"?this.incomeTransactionsSubject:this.expenseTransactionsSubject).value.find(s=>s.id===i)}getAllTransactions(){if(!this.userId)return ae({incomeTransactions:[],expenseTransactions:[]});let i=this.getIncomeTransactions(),r=this.getExpenseTransactions();return Fr([i,r]).pipe(le(([s,o])=>({incomeTransactions:s,expenseTransactions:o})))}getTransactions(i){if(!this.userId)return ae([]);let r=Nh(this.fs,`transactions/${this.userId}/${i}`),s=w9(r,C9("date"));return zC(s,{idField:"id"}).pipe(le(o=>o.map(a=>Se(W({},a),{date:a.date instanceof Cn?a.date.toDate():a.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(i){let r=uT(Nh(this.fs,`transactions/${this.userId}/${i.type}`),i);return ae(r)}updateTransaction(i,r){let s=ac(this.fs,`transactions/${this.userId}/${r.type}`,i),o=qg(s,Se(W({},r),{date:Cn.fromDate(r.date)}));return ae(o)}deleteTransaction(i){let r=ac(this.fs,`transactions/${this.userId}/${i.type}`,i.id);return ae(dT(r))}};e.\u0275fac=function(r){return new(r||e)(Z(Xa),Z(oc))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FCe=["deleteConfirmationModal"];function ACe(t,e){t&1&&(j(0,"div",21),we(1," Title is required. "),U())}function PCe(t,e){t&1&&(j(0,"div",21),we(1," Amount is required and must be greater than or equal to 0. "),U())}function MCe(t,e){t&1&&(j(0,"div",21),we(1," Date is required. "),U())}function OCe(t,e){if(t&1){let n=xt();j(0,"div",22)(1,"span",23),De("click",function(){We(n);let r=Te();return ze(r.deleteConfirmation())}),fe(2,"i",24),we(3," Delete Transaction "),U()()}}function kCe(t,e){if(t&1){let n=xt();j(0,"div",1)(1,"div",2)(2,"i",3),De("click",function(){We(n);let r=Te();return ze(r.closeDeleteConfirmation())}),U(),j(3,"h4",25),we(4,"Delete Confirmation"),U(),j(5,"p",26),we(6," Are you sure you want to delete this transaction? "),U(),j(7,"div",27)(8,"button",28),De("click",function(){We(n);let r=Te();return ze(r.deleteTransaction())}),we(9," Delete "),U(),j(10,"button",29),De("click",function(){We(n);let r=Te();return ze(r.closeDeleteConfirmation())}),we(11," Cancel "),U()()()()}}var gT=(()=>{let e=class e{constructor(i,r,s){this.ngbModal=i,this.fb=r,this.transactionService=s,this.transactionForm=this.fb.group({title:["",go.required],amount:[0,[go.required,go.min(0)]],type:["income",go.required],description:[""],date:["",go.required],tagIds:[[]]}),this.transactionType="income",this.selectedTransaction=null}ngOnInit(){this.initializeForm()}ngOnChanges(i){i&&i.transactionType&&(this.transactionType=i.transactionType.currentValue,this.transactionForm.get("type")?.setValue(this.transactionType)),i&&i.selectedTransaction&&(this.selectedTransaction=i.selectedTransaction.currentValue,this.initializeForm())}initializeForm(){this.selectedTransaction?this.transactionForm.patchValue(Se(W({},this.selectedTransaction),{date:this.formatDate(new Date(this.selectedTransaction.date))})):this.transactionForm.patchValue({amount:null,type:this.transactionType,description:"",date:this.formatDate(new Date),tagIds:[]})}formatDate(i){return i.toISOString().split("T")[0]}deleteConfirmation(){this.deleteConfirmationModalReference=this.ngbModal.open(this.deleteConfirmationModal,{centered:!0,backdrop:!0,size:"sm"})}closeDeleteConfirmation(){this.deleteConfirmationModalReference.close()}deleteTransaction(){this.selectedTransaction&&this.transactionService.deleteTransaction(this.selectedTransaction).subscribe({next:()=>{console.log("Transaction deleted successfully")},error:i=>{console.error("Error deleting transaction",i)}}),this.closeModal()}parseDate(i){return new Date(i)}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(i){if(console.log("Tag ID:",i),!i){this.transactionForm.get("tagIds")?.setValue([]);return}this.transactionForm.get("tagIds")?.setValue([i])}onSubmit(){if(this.transactionForm.valid){let i=this.transactionForm.value,r={title:i.title??"",amount:i.amount??0,type:i.type,description:i.description??"",date:this.parseDate(i.date??""),tagIds:i.tagIds??[]};this.selectedTransaction?this.transactionService.updateTransaction(this.selectedTransaction.id,r).subscribe({next:()=>{console.log("Transaction updated successfully")},error:s=>{console.error("Error updating transaction",s)}}):this.transactionService.addTransaction(r).subscribe({next:()=>{console.log("Transaction added successfully")},error:s=>{console.error("Error adding transaction",s)}}),this.closeModal()}else console.error("Form is invalid")}get isPost(){return this.selectedTransaction===null}};e.\u0275fac=function(r){return new(r||e)(J(Wg),J(Up),J(Nu))},e.\u0275cmp=je({type:e,selectors:[["app-transaction-form"]],viewQuery:function(r,s){if(r&1&&uo(FCe,5),r&2){let o;ps(o=gs())&&(s.deleteConfirmationModal=o.first)}},inputs:{transactionType:"transactionType",selectedTransaction:"selectedTransaction"},standalone:!0,features:[Vn,qe],decls:36,vars:13,consts:[["deleteConfirmationModal",""],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","tagId","type"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-warning",3,"disabled"],["class","modal-footer d-flex justify-content-center",4,"ngIf"],[1,"text-danger"],[1,"modal-footer","d-flex","justify-content-center"],["role","button",1,"text-danger",3,"click"],[1,"bi","bi-trash"],[1,"modal-title","fw-bold"],[1,"text-muted","mb-3"],[1,"d-flex","justify-content-center"],["type","button",1,"bg-danger","text-white","border-0","rounded-3","col-5",3,"click"],["type","button",1,"col-5","bg-white","rounded-3","offset-2","border-1",3,"click"]],template:function(r,s){if(r&1){let o=xt();j(0,"div",1)(1,"div",2)(2,"i",3),De("click",function(){return We(o),ze(s.closeModal())}),U(),j(3,"h4",4),we(4),dy(5,"titlecase"),U(),j(6,"p",5),we(7),U(),j(8,"form",6),De("ngSubmit",function(){return We(o),ze(s.onSubmit())}),j(9,"div",7)(10,"label",8),we(11,"Title"),U(),fe(12,"input",9),Fe(13,ACe,2,0,"div",10),U(),j(14,"div",7)(15,"label",11),we(16,"Amount"),U(),fe(17,"input",12),Fe(18,PCe,2,0,"div",10),U(),j(19,"div",7)(20,"label",13),we(21,"Description"),U(),fe(22,"textarea",14),U(),j(23,"div",7)(24,"label",15),we(25,"Date"),U(),fe(26,"input",16),Fe(27,MCe,2,0,"div",10),U(),j(28,"div",7)(29,"app-tag-input",17),De("tagAdded",function(l){return We(o),ze(s.updateTransactionTag(l))}),U()(),j(30,"div",18)(31,"button",19),we(32),U()()(),Fe(33,OCe,4,0,"div",20),U()(),Fe(34,kCe,12,0,"ng-template",null,0,tr)}r&2&&(ee(4),zn(" ",hy(5,11,s.isPost?s.transactionType:"Update Transaction")," "),ee(3),zn("Enter your ",s.transactionType," details below."),ee(),de("formGroup",s.transactionForm),ee(5),de("ngIf",s.transactionForm.controls.title.invalid&&s.transactionForm.controls.title.touched),ee(5),de("ngIf",s.transactionForm.controls.amount.invalid&&s.transactionForm.controls.amount.touched),ee(9),de("ngIf",s.transactionForm.controls.date.invalid&&s.transactionForm.controls.date.touched),ee(2),de("tagId",(s.selectedTransaction==null||s.selectedTransaction.tagIds==null?null:s.selectedTransaction.tagIds[0])||null)("type",s.transactionType),ee(2),de("disabled",s.transactionForm.invalid),ee(),zn(" ",s.isPost?"Submit":"Update"," "),ee(),de("ngIf",!s.isPost))},dependencies:[Qa,Hp,mo,rP,vo,Gp,Xd,$d,En,Gi,S3,D9]});let t=e;return t})();var rm=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,n){let i=e?this.allAsyncListeners:this.allSyncListeners,r=i.get(t);return!r&&n&&(r=new Set,i.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,n=!1){this.getListeners(t,n,!0).add(e)}removeEventListener(t,e,n=!1){let i=this.getListeners(t,n,!1);i&&(i.delete(e),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)}removeGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)}dispatchEvent(t){let e=t;this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){let n=t.type;if(e&&"event"in t){let a=t.event;a instanceof Event&&(t.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(t)):()=>c(t);e?this.dispatchAsync(u):u()}),r=this.getListeners(n,e,!1)??new Set,s=new Set(r);s.size>0&&i(s,r),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,t)):()=>a(n,t);e?this.dispatchAsync(l):l()})}dispatchAsync(t){if(this.asyncFunctionsQueue.push(t),!this.scheduled){let e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};function Rt(t){if(!(!t||!t.length))return t[t.length-1]}function zh(t,e,n){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((i,r)=>n?n(i,e[r]):e[r]===i)}function NCe(t){return t.sort((e,n)=>e-n)}function Z9(t,e){let n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.pop())}function qr(t,e){let n=t.indexOf(e);n>=0&&t.splice(n,1)}function LCe(t,e){for(let n=0;n<e.length;n++)Z9(t,e[n])}function VCe(t,e){for(let n=0;n<e.length;n++)qr(t,e[n])}function FT(t,e,n){t.splice(n,0,e)}function J9(t,e,n){VCe(t,e),e.slice().reverse().forEach(i=>FT(t,i,n))}function Gh(t,e){return t.indexOf(e)>-1}function BCe(t){return[].concat.apply([],t)}function T9(t,e){e==null||t==null||e.forEach(n=>t.push(n))}var eK="__ag_Grid_Stop_Propagation",GCe=["touchstart","touchend","touchmove","touchcancel","scroll"],FN={};function em(t){t[eK]=!0}function Vu(t){return t[eK]===!0}var tK=(()=>{let t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof FN[n]=="boolean")return FN[n];let i=document.createElement(t[n]||"div");return n="on"+n,FN[n]=n in i}})();function qN(t,e,n){let i=e;for(;i;){let r=t.getDomData(i,n);if(r)return r;i=i.parentElement}return null}function HCe(t,e){return!e||!t?!1:jCe(e).indexOf(t)>=0}function UCe(t){let e=[],n=t.target;for(;n;)e.push(n),n=n.parentElement;return e}function jCe(t){let e=t;return e.path?e.path:e.composedPath?e.composedPath():UCe(e)}function WCe(t,e,n,i){let s=Gh(GCe,n)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,n,i,s)}var q=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(t){this.gridId=t.context.getGridId(),this.frameworkOverrides=t.frameworkOverrides,this.stubContext=t.context,this.eventService=t.eventService,this.gos=t.gos,this.localeService=t.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(t,e){this.localEventService||(this.localEventService=new rm),this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)}dispatchLocalEvent(t){this.localEventService&&this.localEventService.dispatchEvent(t)}addManagedElementListeners(t,e){return this._setupListeners(t,e)}addManagedEventListeners(t){return this._setupListeners(this.eventService,t)}addManagedListeners(t,e){return this._setupListeners(t,e)}_setupListeners(t,e){let n=[];for(let i in e){let r=e[i];r&&n.push(this._setupListener(t,i,r))}return n}_setupListener(t,e,n){if(this.destroyed)return()=>null;t instanceof HTMLElement?WCe(this.getFrameworkOverrides(),t,e,n):t.addEventListener(e,n);let i=()=>(t.removeEventListener(e,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupGridOptionListener(t,e){this.gos.addPropertyEventListener(t,e);let n=()=>(this.gos.removePropertyEventListener(t,e),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(t,e){return this.destroyed?()=>null:this.setupGridOptionListener(t,e)}addManagedPropertyListeners(t,e){if(this.destroyed)return;let n=t.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}let s={type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source};e(s)};t.forEach(r=>this.setupGridOptionListener(r,i))}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createManagedBean(t,e){let n=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),n}createBean(t,e,n){return(e||this.stubContext).createBean(t,n)}destroyBean(t,e){return(e||this.stubContext).destroyBean(t)}destroyBeans(t,e){return(e||this.stubContext).destroyBeans(t)}},cL=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=n=>{this.frameworkOverrides.wrapOutgoing(()=>t(n))},this.wrappedListeners.set(t,e)),e}wrapGlobal(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(n,i)=>{this.frameworkOverrides.wrapOutgoing(()=>t(n,i))},this.wrappedGlobalListeners.set(t,e)),e}unwrap(t){return this.wrappedListeners.get(t)??t}unwrapGlobal(t){return this.wrappedGlobalListeners.get(t)??t}};function Hh(t){return t==null||t===""?null:t}function ne(t,e=!1){return t!=null&&(t!==""||e)}function vt(t){return!ne(t)}function zi(t){return t==null||t.length===0}function KN(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function Uh(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;let e=parseInt(t,10);return isNaN(e)?void 0:e}function YN(t){if(t!==void 0)return t===null||t===""?!1:QN(t)}function QN(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1}function AT(t,e){let n=t?JSON.stringify(t):null,i=e?JSON.stringify(e):null;return n===i}function zCe(t,e,n=!1){let i=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function s(o,a){return o>a?1:o<a?-1:0}if(typeof t!="string"||!n)return s(t,e);try{return t.localeCompare(e)}catch{return s(t,e)}}function TT(t){if(t instanceof Set||t instanceof Map){let e=[];return t.forEach(n=>e.push(n)),e}return Object.values(t)}var uL=new Set(["__proto__","constructor","prototype"]);function Do(t,e){if(t!=null){if(Array.isArray(t)){for(let n=0;n<t.length;n++)e(n.toString(),t[n]);return}for(let[n,i]of Object.entries(t))e(n,i)}}function nK(t){let e={},n=Object.keys(t);for(let i=0;i<n.length;i++){if(uL.has(n[i]))continue;let r=n[i],s=t[r];e[r]=s}return e}function XN(t,e){if(!t)return;let n=t,i={};return Object.keys(n).forEach(r=>{if(e&&e.indexOf(r)>=0||uL.has(r))return;let s=n[r];$N(s)&&s.constructor===Object?i[r]=XN(s):i[r]=s}),i}function Gu(t){if(!t)return[];let e=Object;if(typeof e.values=="function")return e.values(t);let n=[];for(let i in t)t.hasOwnProperty(i)&&t.propertyIsEnumerable(i)&&n.push(t[i]);return n}function To(t,e,n=!0,i=!1){ne(e)&&Do(e,(r,s)=>{if(uL.has(r))return;let o=t[r];o!==s&&(i&&o==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(o={},t[r]=o),$N(s)&&$N(o)&&!Array.isArray(o)?To(o,s,n,i):(n||s!==void 0)&&(t[r]=s))})}function $C(t,e,n){if(!e||!t)return;if(!n)return t[e];let i=e.split("."),r=t;for(let s=0;s<i.length;s++){if(r==null)return;r=r[i[s]]}return r}function $N(t){return typeof t=="object"&&t!==null}var qCe={resizable:!0,sortable:!0},KCe=0;function iK(){return KCe++}function Hu(t){return t instanceof sK}var rK=20,sK=class extends q{constructor(t,e,n,i){super(),this.isColumn=!0,this.instanceId=iK(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new rm,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=n,this.primary=i,this.setState(t)}wireBeans(t){this.columnHoverService=t.columnHoverService}getInstanceId(){return this.instanceId}setState(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);let e=t.sortIndex,n=t.initialSortIndex;e!==void 0?e!==null&&(this.sortIndex=e):n!==null&&(this.sortIndex=n);let i=t.hide,r=t.initialHide;i!==void 0?this.visible=!i:this.visible=!r,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);let s=t.flex,o=t.initialFlex;s!==void 0?this.flex=s:o!==void 0&&(this.flex=o)}setColDef(t,e,n){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(t){this.parent=t}getParent(){return this.parent}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let t=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=ne(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=ne(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t}initMinAndMaxWidths(){let t=this.colDef;this.minWidth=t.minWidth??rK,this.maxWidth=t.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=ne(this.colDef.tooltipField)||ne(this.colDef.tooltipValueGetter)||ne(this.colDef.tooltipComponent)}resetActualWidth(t){let e=this.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)}calculateColInitialWidth(t){let e,n=Uh(t.width),i=Uh(t.initialWidth);return n!=null?e=n:i!=null?e=i:e=200,Math.max(Math.min(e,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){if(vt(this.colDef)||vt(this.colDef.showRowGroup))return!1;let e=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===t;return e||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(t,e){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new cL(this.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(e)??e;this.columnEventService.addEventListener(t,n)}removeEventListener(t,e){let n=this.frameworkEventListenerService?.unwrap(e)??e;this.columnEventService.removeEventListener(t,n)}createColumnFunctionCallbackParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let e=this.createColumnFunctionCallbackParams(t),n=this.colDef.suppressNavigable;return n(e)}return!1}isCellEditable(t){return t.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){return this.colDef[t]??qCe[t]}isColumnFunc(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){let n=this.createColumnFunctionCallbackParams(t);return e(n)}return!1}setMoving(t,e){this.moving=t,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",e))}createColumnEvent(t,e){return this.gos.addGridCommonParams({type:t,column:this,columns:[this],source:e})}isMoving(){return this.moving}getSort(){return this.sort}setSort(t,e){this.sort!==t&&(this.sort=t,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return vt(this.sort)}isSorting(){return ne(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(t,e){this.menuVisible!==t&&(this.menuVisible=t,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))}isMenuVisible(){return this.menuVisible}setAggFunc(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,e){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))}isFilterActive(){return this.filterActive}setFilterActive(t,e,n){this.filterActive!==t&&(this.filterActive=t,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));let i=this.createColumnEvent("filterChanged",e);n&&To(i,n),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(t,e){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))}setLastLeftPinned(t,e){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,e){let n=t===!0;this.visible!==n&&(this.visible=n,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let e=t.getPaddingLevel()+1,n=!0;for(;t;){if(!t.isPadding()){n=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){let e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}createBaseColDefParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(vt(this.colDef.colSpan))return 1;let e=this.createBaseColDefParams(t),n=this.colDef.colSpan(e);return Math.max(n,1)}getRowSpan(t){if(vt(this.colDef.rowSpan))return 1;let e=this.createBaseColDefParams(t),n=this.colDef.rowSpan(e);return Math.max(n,1)}setActualWidth(t,e,n=!1){t=Math.max(t,this.minWidth),t=Math.min(t,this.maxWidth),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",t))}isGreaterThanMax(t){return t>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")}setMinimum(t){this.setActualWidth(this.minWidth,t)}setRowGroupActive(t,e){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(t,e){this.pivotActive!==t&&(this.pivotActive=t,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(t,e){this.aggregationActive!==t&&(this.aggregationActive=t,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(t){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:t})}};function Wr(t){return t instanceof RT}var RT=class extends q{constructor(t,e,n,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=iK(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}addLeafColumns(t){this.children&&this.children.forEach(e=>{Hu(e)?t.push(e):Wr(e)&&e.addLeafColumns(t)})}getColumnGroupShow(){let t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(e=>e.addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(e=>e.removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,e=!1,n=!1,i=this.findChildrenRemovingPadding();for(let s=0,o=i.length;s<o;s++){let a=i[s];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(t=!0,n=!0):l==="closed"?(e=!0,n=!0):(t=!0,e=!0)}let r=t&&e&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let t=[],e=n=>{n.forEach(i=>{Wr(i)&&i.isPadding()?e(i.children):t.push(i)})};return e(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}},YCe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},R9={};function dL(t,e){R9[e]||(t(),R9[e]=!0)}function Ro(t,...e){console.log("AG Grid: "+t,...e)}function $(t,...e){dL(()=>console.warn("AG Grid: "+t,...e),t+e?.join(""))}function Pt(t,...e){dL(()=>console.error("AG Grid: "+t,...e),t+e?.join(""))}function hL(t){return!!(t&&t.constructor&&t.call&&t.apply)}function QCe(t){XCe(t,400)}var AN=[],PN=!1;function I9(t){AN.push(t),!PN&&(PN=!0,window.setTimeout(()=>{let e=AN.slice();AN.length=0,PN=!1,e.forEach(n=>n())},0))}function XCe(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(n=>n()),e)}function Kr(t,e){let n;return function(...i){let r=this;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(r,i)},e)}}function x9(t,e){let n=0;return function(...i){let r=this,s=new Date().getTime();s-n<e||(n=s,t.apply(r,i))}}function $Ce(t,e,n=100,i){let r=new Date().getTime(),s=null,o=!1,a=()=>{let l=new Date().getTime()-r>n;(t()||l)&&(e(),o=!0,s!=null&&(window.clearInterval(s),s=null),l&&i&&$(i))};a(),o||(s=window.setInterval(a,10))}function ZCe(...t){return e=>t.reduce((n,i)=>i(n),e)}var JCe=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=KN(t);let n=0;for(;;){let i;if(t?(i=t,n!==0&&(i+="_"+n)):e?(i=e,n!==0&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},ow="ag-Grid-AutoColumn";function fL(t){let e=[],n=i=>{for(let r=0;r<i.length;r++){let s=i[r];Hu(s)?e.push(s):Wr(s)&&n(s.getChildren())}};return n(t),e}function uc(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}function Xg(t,e,n){let i={};if(!e)return;fc(null,e,s=>{i[s.getInstanceId()]=s}),n&&fc(null,n,s=>{i[s.getInstanceId()]=null});let r=Object.values(i).filter(s=>s!=null);t.destroyBeans(r)}function F9(t){return t.getId().startsWith(ow)}function IT(t){let e=[];return t instanceof Array?t.some(i=>typeof i!="string")?$("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:typeof t=="string"?e=t.split(","):$("colDef.type should be of type 'string' | 'string[]'"),e}var ewe=class extends q{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(t){this.dataTypeService=t.dataTypeService}createColumnTree(t,e,n,i){let r=new JCe,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);r.addExistingKeys(a);let l=this.recursivelyCreateColumns(t,0,e,s,r,o,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,r);return fc(null,u,(h,p)=>{Wr(h)&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(t){let e=[],n=[],i=[];return t&&fc(null,t,r=>{if(Wr(r)){let s=r;n.push(s)}else{let s=r;i.push(s.getId()),e.push(s)}}),{existingCols:e,existingGroups:n,existingColKeys:i}}createForAutoGroups(t,e){let n=[],i=this.findDepth(e);return t.forEach(r=>{let s=r;for(let o=i-1;o>=0;o--){let a=new RT(null,`FAKE_PATH_${r.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([s]),s.setOriginalParent(a),s=a}i===0&&r.setOriginalParent(null),n.push(s)}),[n,i]}findDepth(t){let e=0,n=t;for(;n&&n[0]&&Wr(n[0]);)e++,n=n[0].getChildren();return e}balanceColumnTree(t,e,n,i){let r=[];for(let s=0;s<t.length;s++){let o=t[s];if(Wr(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),e+1,n,i);a.setChildren(l),r.push(a)}else{let a,l;for(let c=n-1;c>=e;c--){let u=i.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new RT(d,u,!0,e);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),t.some(u=>Wr(u))){l.setChildren([o]);continue}else{l.setChildren(t);break}r.push(o)}}return r}findMaxDept(t,e){let n=e;for(let i=0;i<t.length;i++){let r=t[i];if(Wr(r)){let s=r,o=this.findMaxDept(s.getChildren(),e+1);n<o&&(n=o)}}return n}recursivelyCreateColumns(t,e,n,i,r,s,o){if(!t)return[];let a=new Array(t.length);for(let l=0;l<a.length;l++){let c=t[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,e,i,r,s,o):a[l]=this.createColumn(n,c,i,r,o)}return a}createColumnGroup(t,e,n,i,r,s,o){let a=this.createMergedColGroupDef(e),l=r.getUniqueKey(a.groupId||null,null),c=new RT(a,l,!1,n);this.createBean(c);let u=this.findExistingGroup(e,s);u&&s.splice(u.idx,1);let d=u?.group;d&&c.setExpanded(d.isExpanded());let h=this.recursivelyCreateColumns(a.children,n+1,t,i,r,s,o);return c.setChildren(h),c}createMergedColGroupDef(t){let e={};return Object.assign(e,this.gos.get("defaultColGroupDef")),Object.assign(e,t),e}createColumn(t,e,n,i,r){let s=this.findExistingColumn(e,n);s&&n?.splice(s.idx,1);let o=s?.column;if(o){let a=this.addColumnDefaultAndTypes(e,o.getColId());o.setColDef(a,e,r),this.applyColumnState(o,a,r)}else{let a=i.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,a);o=new sK(l,e,a,t),this.createBean(o)}return this.dataTypeService?.addColumnListeners(o),o}applyColumnState(t,e,n){let i=Uh(e.flex);if(i!==void 0&&t.setFlex(i),t.getFlex()<=0){let a=Uh(e.width);if(a!=null)t.setActualWidth(a,n);else{let l=t.getActualWidth();t.setActualWidth(l,n)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?t.setSort(e.sort,n):t.setSort(void 0,n));let s=Uh(e.sortIndex);s!==void 0&&t.setSortIndex(s);let o=YN(e.hide);o!==void 0&&t.setVisible(!o,n),e.pinned!==void 0&&t.setPinned(e.pinned)}findExistingColumn(t,e){if(e)for(let n=0;n<e.length;n++){let i=e[n].getUserProvidedColDef();if(!i)continue;if(t.colId!=null){if(e[n].getId()===t.colId)return{idx:n,column:e[n]};continue}if(t.field!=null){if(i.field===t.field)return{idx:n,column:e[n]};continue}if(i===t)return{idx:n,column:e[n]}}}findExistingGroup(t,e){if(t.groupId!=null)for(let i=0;i<e.length;i++){let r=e[i];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:i,group:r}}}addColumnDefaultAndTypes(t,e){let n={},i=this.gos.get("defaultColDef");To(n,i,!1,!0);let r=this.updateColDefAndGetColumnType(n,t,e);r&&this.assignColumnTypes(r,n),To(n,t,!1,!0);let s=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return t.rowGroup&&s&&o&&To(n,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService?.validateColDef(n),n}updateColDefAndGetColumnType(t,e,n){let i=this.dataTypeService?.updateColDefAndGetColumnType(t,e,n),r=e.type??i??t.type;return t.type=r,r?IT(r):void 0}assignColumnTypes(t,e){if(!t.length)return;let n=Object.assign({},YCe),i=this.gos.get("columnTypes")||{};Do(i,(r,s)=>{r in n?$(`the column type '${r}' is a default column type and cannot be overridden.`):(s.type&&$("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[r]=s)}),t.forEach(r=>{let s=n[r.trim()];s?To(e,s,!1,!0):$("colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(t){return t.children!==void 0}};function fc(t,e,n){if(e)for(let i=0;i<e.length;i++){let r=e[i];Wr(r)&&fc(r,r.getChildren(),n),n(r,t)}}var twe=class extends q{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(t){this.context=t.context,this.columnFactory=t.columnFactory,this.columnSizeService=t.columnSizeService,this.visibleColsService=t.visibleColsService,this.columnViewportService=t.columnViewportService,this.pivotResultColsService=t.pivotResultColsService,this.columnAnimationService=t.columnAnimationService,this.autoColService=t.autoColService,this.valueCache=t.valueCache,this.columnDefFactory=t.columnDefFactory,this.columnApplyStateService=t.columnApplyStateService,this.columnGroupStateService=t.columnGroupStateService,this.eventDispatcher=t.columnEventDispatcher,this.columnMoveService=t.columnMoveService,this.columnAutosizeService=t.columnAutosizeService,this.funcColsService=t.funcColsService,this.quickFilterService=t.quickFilterService,this.showRowGroupColsService=t.showRowGroupColsService,this.environment=t.environment}postConstruct(){let t=this.gos.get("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.refreshAll($g(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged($g(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.recreateColumnDefs($g(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),$g(e.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(t,e){let n=t?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();let i=this.colDefCols&&this.colDefCols.list,r=this.colDefCols&&this.colDefCols.tree,s=this.columnFactory.createColumnTree(this.colDefs,!0,r,e);Xg(this.context,this.colDefCols?.tree,s.columnTree);let o=s.columnTree,a=s.treeDept,l=fL(o),c={};l.forEach(d=>c[d.getId()]=d),this.colDefCols={tree:o,treeDepth:a,list:l,map:c},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(),t&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),n&&(this.changeEventsDispatching=!0,n(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!zh(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let t=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=t!=null,t){let{map:e,list:n,tree:i,treeDepth:r}=t;this.cols={list:n.slice(),map:W({},e),tree:i.slice(),treeDepth:r},t.list.some(o=>this.cols?.map[o.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:e,list:n,tree:i,treeDepth:r}=this.colDefCols;this.cols={list:n.slice(),map:W({},e),tree:i.slice(),treeDepth:r}}}getColsToShow(){let t=this.isPivotMode()&&!this.isShowingPivotResult(),e=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let r=F9(i);if(t){let s=e&&Gh(e,i);return r||s}else return r||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),nwe(this.cols))}createAutoCols(){let t=this.gos.isGroupUseEntireRow(this.pivotMode),e=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),r=!(n.length>0||this.gos.get("treeData"))||e||t,s=()=>{this.autoCols&&(Xg(this.context,this.autoCols.tree),this.autoCols=null)};if(r||!this.autoColService){s();return}let o=this.autoColService.createAutoCols(n)??[],a=iwe(o,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;s();let[d,h]=this.columnFactory.createForAutoGroups(o,this.cols?.tree);this.autoCols={list:o,tree:d,treeDepth:h,map:{}};let p=g=>{if(!g)return null;let m=g.filter(v=>!F9(v));return[...o,...m]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}refreshAll(t){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(t))}setColsVisible(t,e=!1,n){this.columnApplyStateService.applyColumnState({state:t.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!e}))},n)}setColsPinned(t,e,n){if(!this.cols||zi(t))return;if(this.gos.isDomLayout("print")){$("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;e===!0||e==="left"?i="left":e==="right"?i="right":i=null;let r=[];t.forEach(s=>{if(!s)return;let o=this.getCol(s);o&&o.getPinned()!==i&&(o.setPinned(i),r.push(o))}),r.length&&(this.visibleColsService.refresh(n),this.eventDispatcher.columnPinned(r,n)),this.columnAnimationService.finish()}setColumnGroupOpened(t,e,n){let i;Wr(t)?i=t.getId():i=t||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:e}],n)}getProvidedColGroup(t){let e=null;return fc(null,this.cols?.tree,n=>{Wr(n)&&n.getId()===t&&(e=n)}),e}isColGroupLocked(t){let e=this.gos.get("groupLockGroupColumns");if(!t.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(r=>r.getColId()===t.getColId());return e>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(t=>t.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||$("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let e=new Map(t.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>e.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),r=t.filter(l=>i.has(l)),s=new Map(r.map(l=>[l,!0])),o=this.cols.list.filter(l=>!s.has(l)),a=r.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(g=>{let m=a.indexOf(g)>=0,v=u.indexOf(g)<0;m&&v&&u.push(g)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let d=u.map(p=>a.indexOf(p)),h=Math.max(...d);FT(a,l,h+1)}),this.cols.list=a}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;let t=this.colDefCols.list.filter(n=>this.cols.list.indexOf(n)>=0),e=this.cols.list.filter(n=>t.indexOf(n)<0);this.cols.list=[...e,...t],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(t){if(this.cols==null)return;let e=[],n={};t.forEach(r=>{if(n[r])return;let s=this.cols.map[r];s&&(e.push(s),n[r]=!0)});let i=0;if(this.cols.list.forEach(r=>{let s=r.getColId();if(n[s]!=null)return;s.startsWith(ow)?FT(e,r,i++):e.push(r)}),e=this.columnMoveService.placeLockedColumns(e),!this.columnMoveService.doesMovePassMarryChildren(e)){$("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=e}sortColsLikeCols(t){!t||t.length<=1||t.filter(n=>this.cols.list.indexOf(n)<0).length>0||t.sort((n,i)=>{let r=this.cols.list.indexOf(n),s=this.cols.list.indexOf(i);return r-s})}resetColDefIntoCol(t,e){let n=t.getUserProvidedColDef();if(!n)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(n,t.getColId());return t.setColDef(i,n,e),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(t=>t()),this.resizeOperationQueue=[]}pushResizeOperation(t){this.resizeOperationQueue.push(t)}moveInCols(t,e,n){J9(this.cols?.list,t,e),this.visibleColsService.refresh(n)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let t=this.colDefCols.list.slice();this.showingPivotResult?t.sort((i,r)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(r)):this.lastOrder&&t.sort((i,r)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(r));let e=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(t,e,n)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(t=>t.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(t,e){t===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=t,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(e),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(t){return t&&this.gos.get("treeData")?($("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let t=this.funcColsService.getPivotColumns();return this.pivotMode&&!zi(t)}recreateColumnDefs(t){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,t),this.createColsFromColDefs(!0,t))}setColumnDefs(t,e){let n=!!this.colDefs;this.colDefs=t,this.createColsFromColDefs(n,e)}destroy(){Xg(this.context,this.colDefCols?.tree),Xg(this.context,this.autoCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let e=this.pivotResultColsService.getPivotResultCols()?.list;return[].concat(this.colDefCols?.list||[],this.autoCols?.list||[],e||[])}getColsForKeys(t){return t?t.map(n=>this.getCol(n)).filter(n=>n!=null):[]}getColDefCol(t){return this.colDefCols?.list?this.getColFromCollection(t,this.colDefCols):null}getCol(t){return t==null?null:this.getColFromCollection(t,this.cols)}getColFromCollection(t,e){if(e==null)return null;let{map:n,list:i}=e;if(typeof t=="string"&&n[t])return n[t];for(let r=0;r<i.length;r++)if(A9(i[r],t))return i[r];return this.getAutoCol(t)}getAutoCol(t){return this.autoCols==null?null:this.autoCols.list.find(e=>A9(e,t))||null}getAutoCols(){return this.autoCols?.list||null}setColHeaderHeight(t,e){t.setAutoHeaderHeight(e)&&this.eventDispatcher.headerHeight(t)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(t,...n)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let t=this.gos.get("autoSizeStrategy");if(t?.type!=="fitCellContents")return;let{colIds:e,skipHeader:n}=t;setTimeout(()=>{e?this.columnAutosizeService.autoSizeCols({colKeys:e,skipHeader:n,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",n)})}onAutoGroupColumnDefChanged(t){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,t)}};function $g(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function nwe(t){t.map={},t.list.forEach(e=>t.map[e.getId()]=e)}function A9(t,e){let n=t===e,i=t.getColDef()===e,r=t.getColId()==e;return n||i||r}function iwe(t,e){return zh(t,e,(n,i)=>n.getColId()===i.getColId())}var rwe=class extends q{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(t){this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.animationFrameService=t.animationFrameService,this.autoWidthCalculator=t.autoWidthCalculator,this.eventDispatcher=t.columnEventDispatcher,this.ctrlsService=t.ctrlsService,this.renderStatusService=t.renderStatusService}autoSizeCols(t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(t));return}let{colKeys:e,skipHeader:n,skipHeaderGroups:i,stopAtGroup:r,source:s="api"}=t;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(t));return}this.timesDelayed=0;let o=[],a=-1,l=n??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;a!==0;){a=0;let u=[];e.forEach(d=>{if(!d)return;let h=this.columnModel.getCol(d);if(!h||o.indexOf(h)>=0)return;let p=this.autoWidthCalculator.getPreferredWidthForColumn(h,l);if(p>0){let g=this.normaliseColumnWidth(h,p);h.setActualWidth(g,s),o.push(h),a++}u.push(h)}),u.length&&this.visibleColsService.refresh(s)}c||this.autoSizeColumnGroupsByColumns(e,s,r),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(t,e,n){t&&this.autoSizeCols({colKeys:[t],skipHeader:n,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(t,e,n){let i=new Set;this.columnModel.getColsForKeys(t).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||i.add(l),l=l.getParent()});let s,o=[];for(let a of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(s=l.getHeaderCtrlForColumn(a),s)break;s&&s.resizeLeafColumnsToFit(e)}return o}autoSizeAllColumns(t,e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(t,e));return}let n=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:n,skipHeader:e,source:t})}normaliseColumnWidth(t,e){let n=t.getMinWidth();e<n&&(e=n);let i=t.getMaxWidth();return t.isGreaterThanMax(e)&&(e=i),e}},swe=class extends q{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(t){this.columnModel=t.columnModel,this.eventDispatcher=t.columnEventDispatcher,this.aggFuncService=t.aggFuncService,this.visibleColsService=t.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:t=>this.rowGroupCols.push(t),removeGroupCol:t=>qr(this.rowGroupCols,t),addPivotCol:t=>this.pivotCols.push(t),removePivotCol:t=>qr(this.pivotCols,t),addValueCol:t=>this.valueCols.push(t),removeValueCol:t=>qr(this.valueCols,t)}}getSourceColumnsForGroupColumn(t){let e=t.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupCols.slice(0);let n=this.columnModel.getColDefCol(e);return n?[n]:null}sortRowGroupColumns(t){this.rowGroupCols.sort(t)}sortPivotColumns(t){this.pivotCols.sort(t)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return zi(this.rowGroupCols)}setColumnAggFunc(t,e,n){if(!t)return;let i=this.columnModel.getColDefCol(t);i&&(i.setAggFunc(e),this.eventDispatcher.columnChanged("columnValueChanged",[i],n))}setRowGroupColumns(t,e){this.setColList(t,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(n,i)=>this.setRowGroupActive(n,i,e),e)}setRowGroupActive(t,e,n){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,n),t&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([e],!1,n),!t&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([e],!0,n))}addRowGroupColumns(t,e){this.updateColList(t,this.rowGroupCols,!0,!0,n=>this.setRowGroupActive(!0,n,e),"columnRowGroupChanged",e)}removeRowGroupColumns(t,e){this.updateColList(t,this.rowGroupCols,!1,!0,n=>this.setRowGroupActive(!1,n,e),"columnRowGroupChanged",e)}addPivotColumns(t,e){this.updateColList(t,this.pivotCols,!0,!1,n=>n.setPivotActive(!0,e),"columnPivotChanged",e)}setPivotColumns(t,e){this.setColList(t,this.pivotCols,"columnPivotChanged",!0,!1,(n,i)=>{i.setPivotActive(n,e)},e)}removePivotColumns(t,e){this.updateColList(t,this.pivotCols,!1,!1,n=>n.setPivotActive(!1,e),"columnPivotChanged",e)}setValueColumns(t,e){this.setColList(t,this.valueCols,"columnValueChanged",!1,!1,(n,i)=>this.setValueActive(n,i,e),e)}setValueActive(t,e,n){if(t!==e.isValueActive()&&(e.setValueActive(t,n),t&&!e.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(i)}}addValueColumns(t,e){this.updateColList(t,this.valueCols,!0,!1,n=>this.setValueActive(!0,n,e),"columnValueChanged",e)}removeValueColumns(t,e){this.updateColList(t,this.valueCols,!1,!1,n=>this.setValueActive(!1,n,e),"columnValueChanged",e)}moveRowGroupColumn(t,e,n){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[t],r=this.rowGroupCols.slice(t,e);this.rowGroupCols.splice(t,1),this.rowGroupCols.splice(e,0,i),this.eventDispatcher.rowGroupChanged(r,n)}setColList(t,e,n,i,r,s,o){let a=this.columnModel.getCols();if(zi(a))return;let l=new Map;e.forEach((u,d)=>l.set(u,d)),e.length=0,ne(t)&&t.forEach(u=>{let d=this.columnModel.getColDefCol(u);d&&e.push(d)}),e.forEach((u,d)=>{let h=l.get(u);if(h===void 0){l.set(u,0);return}i&&h!==d||l.delete(u)}),(this.columnModel.getColDefCols()||[]).forEach(u=>{let d=e.indexOf(u)>=0;s(d,u)}),r&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(n,[...l.keys()],o)}updateColList(t,e,n,i,r,s,o){if(!t||zi(t))return;let a=!1;t.forEach(l=>{if(!l)return;let c=this.columnModel.getColDefCol(l);if(c){if(n){if(e.indexOf(c)>=0)return;e.push(c)}else{if(e.indexOf(c)<0)return;qr(e,c)}r(c),a=!0}}),a&&(i&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(s,e,o))}extractCols(t,e){this.extractRowGroupCols(t,e),this.extractPivotCols(t,e),this.extractValueCols(t,e)}extractValueCols(t,e){this.valueCols=this.extractColsCommon(e,this.valueCols,(n,i)=>n.setValueActive(i,t),()=>{},()=>{},n=>{let i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueCols.forEach(n=>{let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(t,e){this.rowGroupCols=this.extractColsCommon(e,this.rowGroupCols,(n,i)=>n.setRowGroupActive(i,t),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractPivotCols(t,e){this.pivotCols=this.extractColsCommon(e,this.pivotCols,(n,i)=>n.setPivotActive(i,t),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}extractColsCommon(t=[],e=[],n,i,r,s,o){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{let p=t.indexOf(h)<0,g=h.getColDef(),m=YN(s(g)),v=YN(o(g)),C=Uh(i(g)),b=Uh(r(g)),E;m!==void 0?E=m:C!==void 0?C===null?E=!1:E=C>=0:p?v!==void 0?E=v:b!==void 0?E=b!=null&&b>=0:E=!1:E=e.indexOf(h)>=0,E&&((p?C!=null||b!=null:C!=null)?a.push(h):l.push(h))});let u=h=>{let p=i(h.getColDef()),g=r(h.getColDef());return p??g};a.sort((h,p)=>{let g=u(h),m=u(p);return g===m?0:g<m?-1:1});let d=[].concat(a);return e.forEach(h=>{l.indexOf(h)>=0&&d.push(h)}),l.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),e.forEach(h=>{d.indexOf(h)<0&&n(h,!1)}),d.forEach(h=>{e.indexOf(h)<0&&n(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(t,e){let n={},i=(r,s,o,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!s.length||!u)return[];let d=Object.keys(r),h=new Set(d),p=new Set(d),g=new Set(s.map(x=>{let _=x.getColId();return p.delete(_),_}).concat(d)),m=[],v={},C=0;for(let x=0;x<u.length;x++){let _=u[x].getColId();g.has(_)&&(m.push(_),v[_]=C++)}let b=1e3,E=!1,T=0,P=x=>{let _=v[x];for(let S=T;S<_;S++){let D=m[S];p.has(D)&&(r[D][l]=b++,p.delete(D))}T=_};s.forEach(x=>{let _=x.getColId();if(h.has(_))P(_),r[_][l]=b++;else{let S=x.getColDef();(S[l]===null||S[l]===void 0&&S[c]==null)&&(E||(S[o]||S[o]===void 0&&S[a]?P(_):(p.forEach(F=>{r[F][l]=b+v[F]}),b+=m.length,E=!0)),n[_]||(n[_]={colId:_}),n[_][l]=b++)}})};return i(t,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(e,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}},owe=class extends q{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(t){this.columnModel=t.columnModel,this.eventDispatcher=t.columnEventDispatcher,this.sortController=t.sortController,this.columnGetStateService=t.columnGetStateService,this.funcColsService=t.funcColsService,this.visibleColsService=t.visibleColsService,this.columnAnimationService=t.columnAnimationService,this.pivotResultColsService=t.pivotResultColsService}applyColumnState(t,e){let n=this.columnModel.getColDefCols()||[];if(zi(n))return!1;if(t&&t.state&&!t.state.forEach)return $("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),r=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(e),d=l.slice(),h={},p={},g=[],m=[],v=0,C=this.funcColsService.getRowGroupColumns().slice(),b=this.funcColsService.getPivotColumns().slice();a.forEach(x=>{let _=x.colId||"";if(_.startsWith(ow)){g.push(x),m.push(x);return}let D=c(_);D?(this.syncColumnWithStateItem(D,x,t.defaultState,h,p,!1,e,i),qr(d,D)):(m.push(x),v+=1)});let E=x=>this.syncColumnWithStateItem(x,null,t.defaultState,h,p,!1,e,i);d.forEach(E),this.funcColsService.sortRowGroupColumns(P9.bind(this,h,C)),this.funcColsService.sortPivotColumns(P9.bind(this,p,b)),this.columnModel.refreshCols();let P=(this.columnModel.getAutoCols()||[]).slice();return g.forEach(x=>{let _=this.columnModel.getAutoCol(x.colId);qr(P,_),this.syncColumnWithStateItem(_,x,t.defaultState,null,null,!0,e,i)}),P.forEach(E),this.orderLiveColsLikeState(t),this.visibleColsService.refresh(e),this.eventDispatcher.everythingChanged(e),u(),{unmatchedAndAutoStates:m,unmatchedCount:v}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:o}=r(t.state||[],n,a=>this.columnModel.getColDefCol(a));if(s.length>0||ne(t.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;o=r(s,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(t){let e=this.columnModel.getColDefCols();if(zi(e))return;let n=this.columnModel.getColDefColTree(),i=fL(n),r=[],s=1e3,o=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),i&&(a=a.concat(i)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);vt(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=s++),vt(u.pivotIndex)&&u.pivot&&(u.pivotIndex=o++),r.push(u)}),this.applyColumnState({state:r,applyOrder:!0},t)}getColumnStateFromColDef(t){let e=(g,m)=>g??m??null,n=t.getColDef(),i=e(n.sort,n.initialSort),r=e(n.sortIndex,n.initialSortIndex),s=e(n.hide,n.initialHide),o=e(n.pinned,n.initialPinned),a=e(n.width,n.initialWidth),l=e(n.flex,n.initialFlex),c=e(n.rowGroupIndex,n.initialRowGroupIndex),u=e(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=e(n.pivotIndex,n.initialPivotIndex),h=e(n.pivot,n.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);let p=e(n.aggFunc,n.initialAggFunc);return{colId:t.getColId(),sort:i,sortIndex:r,hide:s,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(t,e,n,i,r,s,o,a){if(!t)return;let l=(T,P)=>{let x={value1:void 0,value2:void 0},_=!1;return e&&(e[T]!==void 0&&(x.value1=e[T],_=!0),ne(P)&&e[P]!==void 0&&(x.value2=e[P],_=!0)),!_&&n&&(n[T]!==void 0&&(x.value1=n[T]),ne(P)&&n[P]!==void 0&&(x.value2=n[P])),x},c=l("hide").value1;c!==void 0&&t.setVisible(!c,o);let u=l("pinned").value1;u!==void 0&&t.setPinned(u);let d=t.getColDef().minWidth??rK,h=l("flex").value1;if(h!==void 0&&t.setFlex(h),h==null){let T=l("width").value1;T!=null&&d!=null&&T>=d&&t.setActualWidth(T,o)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?t.setSort(p,o):t.setSort(void 0,o));let g=l("sortIndex").value1;if(g!==void 0&&t.setSortIndex(g),s||!t.isPrimary())return;let m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(t.setAggFunc(m),t.isValueActive()||(t.setValueActive(!0,o),a.addValueCol(t))):(ne(m)&&$("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,o),a.removeValueCol(t))));let{value1:v,value2:C}=l("rowGroup","rowGroupIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(t.isRowGroupActive()||(t.setRowGroupActive(!0,o),a.addGroupCol(t)),i&&typeof C=="number"&&(i[t.getId()]=C)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,o),a.removeGroupCol(t)));let{value1:b,value2:E}=l("pivot","pivotIndex");(b!==void 0||E!==void 0)&&(typeof E=="number"||b?(t.isPivotActive()||(t.setPivotActive(!0,o),a.addPivotCol(t)),r&&typeof E=="number"&&(r[t.getId()]=E)):t.isPivotActive()&&(t.setPivotActive(!1,o),a.removePivotCol(t)))}orderLiveColsLikeState(t){if(!t.applyOrder||!t.state)return;let e=[];t.state.forEach(n=>{n.colId!=null&&e.push(n.colId)}),this.columnModel.sortColsLikeKeys(e)}compareColumnStatesAndDispatchEvents(t){let e={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},n=this.columnGetStateService.getColumnState(),i={};return n.forEach(r=>{i[r.colId]=r}),()=>{let r=this.columnModel.getAllCols(),s=(m,v,C,b)=>{let E=v.map(b),T=C.map(b);if(zh(E,T))return;let x=new Set(v);C.forEach(D=>{x.delete(D)||x.add(D)});let _=[...x],S={type:m,columns:_,column:_.length===1?_[0]:null,source:t};this.eventService.dispatchEvent(S)},o=m=>{let v=[];return r.forEach(C=>{let b=i[C.getColId()];b&&m(b,C)&&v.push(C)}),v},a=m=>m.getColId();s("columnRowGroupChanged",e.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),s("columnPivotChanged",e.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=o((m,v)=>{let C=m.aggFunc!=null,b=C!=v.isValueActive(),E=C&&m.aggFunc!=v.getAggFunc();return b||E});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,t);let u=(m,v)=>m.width!=v.getActualWidth();this.eventDispatcher.columnResized(o(u),!0,t);let d=(m,v)=>m.pinned!=v.getPinned();this.eventDispatcher.columnPinned(o(d),t);let h=(m,v)=>m.hide==v.isVisible();this.eventDispatcher.columnVisible(o(h),t);let g=o((m,v)=>m.sort!=v.getSort()||m.sortIndex!=v.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(t,g),this.normaliseColumnMovedEventForColumnState(n,t)}}normaliseColumnMovedEventForColumnState(t,e){let n=this.columnGetStateService.getColumnState(),i={};n.forEach(l=>i[l.colId]=l);let r={};t.forEach(l=>{i[l.colId]&&(r[l.colId]=!0)});let s=t.filter(l=>r[l.colId]),o=n.filter(l=>r[l.colId]),a=[];o.forEach((l,c)=>{let u=s&&s[c];if(u&&u.colId!==l.colId){let d=this.columnModel.getCol(u.colId);d&&a.push(d)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:e,finished:!0})}},P9=(t,e,n,i)=>{let r=t[n.getId()],s=t[i.getId()],o=r!=null,a=s!=null;if(o&&a)return r-s;if(o)return-1;if(a)return 1;let l=e.indexOf(n),c=e.indexOf(i),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},awe=class extends q{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(t){this.columnModel=t.columnModel,this.columnAnimationService=t.columnAnimationService,this.eventDispatcher=t.columnEventDispatcher}moveColumnByIndex(t,e,n){let i=this.columnModel.getCols();if(!i)return;let r=i[t];this.moveColumns([r],e,n)}moveColumns(t,e,n,i=!0){let r=this.columnModel.getCols();if(!r)return;if(this.columnAnimationService.start(),e>r.length-t.length){$("tried to insert columns in invalid location, toIndex = ",e),$("remember that you should not count the moving columns when calculating the new index");return}let s=this.columnModel.getColsForKeys(t);this.doesMovePassRules(s,e)&&(this.columnModel.moveInCols(s,e,n),this.eventDispatcher.columnMoved({movedColumns:s,source:n,toIndex:e,finished:i}),this.columnAnimationService.finish())}doesMovePassRules(t,e){let n=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(n)}doesOrderPassRules(t){return!(!this.doesMovePassMarryChildren(t)||!this.doesMovePassLockedPositions(t))}getProposedColumnOrder(t,e){let i=this.columnModel.getCols().slice();return J9(i,t,e),i}doesMovePassLockedPositions(t){let e=s=>s?s==="left"||s===!0?-1:1:0,n=this.gos.get("enableRtl"),i=n?1:-1,r=!0;return t.forEach(s=>{let o=e(s.getColDef().lockPosition);n?o>i&&(r=!1):o<i&&(r=!1),i=o}),r}doesMovePassMarryChildren(t){let e=!0,n=this.columnModel.getColTree();return fc(null,n,i=>{if(!Wr(i))return;let r=i,s=r.getColGroupDef();if(!(s&&s.marryChildren))return;let a=[];r.getLeafColumns().forEach(h=>{let p=t.indexOf(h);a.push(p)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=r.getLeafColumns().length-1;u>d&&(e=!1)}),e}placeLockedColumns(t){let e=[],n=[],i=[];return t.forEach(s=>{let o=s.getColDef().lockPosition;o==="right"?i.push(s):o==="left"||o===!0?e.push(s):n.push(s)}),this.gos.get("enableRtl")?[...i,...n,...e]:[...e,...n,...i]}},lwe=/[&<>"']/g,cwe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function uwe(t){let e=String.fromCharCode;function n(d){let h=[];if(!d)return[];let p=d.length,g=0,m,v;for(;g<p;)m=d.charCodeAt(g++),m>=55296&&m<=56319&&g<p?(v=d.charCodeAt(g++),(v&64512)==56320?h.push(((m&1023)<<10)+(v&1023)+65536):(h.push(m),g--)):h.push(m);return h}function i(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,h){return e(d>>h&63|128)}function s(d){if(!(d&4294967168))return e(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=e(d>>18&7|240),h+=r(d,12),h+=r(d,6)):(i(d),h=e(d>>12&15|224),h+=r(d,6)):h=e(d>>6&31|192),h+=e(d&63|128),h}let o=n(t),a=o.length,l=-1,c,u="";for(;++l<a;)c=o[l],u+=s(c);return u}function ul(t,e){if(t==null)return null;let n=t.toString().toString();return e?n:n.replace(lwe,i=>cwe[i])}function dwe(t){if(!t||t==null)return null;let e=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function hwe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var fwe=class extends q{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(t){this.expressionService=t.expressionService,this.funcColsService=t.funcColsService,this.columnModel=t.columnModel}getDisplayNameForColumn(t,e,n=!1){if(!t)return null;let i=this.getHeaderName(t.getColDef(),t,null,null,e);return n?this.wrapHeaderNameWithAggFunc(t,i):i}getDisplayNameForProvidedColumnGroup(t,e,n){let i=e?e.getColGroupDef():null;return i?this.getHeaderName(i,null,t,e,n):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,n,i,r){let s=t.headerValueGetter;if(s){let o=this.gos.addGridCommonParams({colDef:t,column:e,columnGroup:n,providedColumnGroup:i,location:r});return typeof s=="function"?s(o):typeof s=="string"?this.expressionService.evaluate(s,o):($("headerValueGetter must be a function or a string"),"")}else{if(t.headerName!=null)return t.headerName;if(t.field)return dwe(t.field)}return""}wrapHeaderNameWithAggFunc(t,e){if(this.gos.get("suppressAggFuncInHeader"))return e;let n=t.getColDef().pivotValueColumn,i=ne(n),r=null,s;if(i){let o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=t.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return e;r=n?n.getAggFunc():null,s=!0}else{let o=t.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(r=t.getAggFunc(),s=!0):s=!1}if(s){let o=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${e})`}return e}},pwe=class extends q{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(t){this.context=t.context,this.columnModel=t.columnModel,this.columnFactory=t.columnFactory,this.visibleColsService=t.visibleColsService}destroy(){Xg(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(t,e){if(this.pivotResultCols==null)return null;let n=this.columnModel.getColDefCol(e),i=null;return this.pivotResultCols.list.forEach(r=>{let s=r.getColDef().pivotKeys,o=r.getColDef().pivotValueColumn;zh(s,t)&&o===n&&(i=r)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(t){return this.pivotResultCols?this.columnModel.getColFromCollection(t,this.pivotResultCols):null}setPivotResultCols(t,e){if(this.columnModel.isReady()&&!(t==null&&this.pivotResultCols==null)){if(t){this.processPivotResultColDef(t);let n=this.columnFactory.createColumnTree(t,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,e);Xg(this.context,this.pivotResultCols?.tree,n.columnTree);let i=n.columnTree,r=n.treeDept,s=fL(i),o={};this.pivotResultCols={tree:i,treeDepth:r,list:s,map:o},this.pivotResultCols.list.forEach(a=>this.pivotResultCols.map[a.getId()]=a),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(e)}}processPivotResultColDef(t){let e=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!e&&!n)return;let i=r=>{r.forEach(s=>{if(ne(s.children)){let a=s;n&&n(a),i(a.children)}else e&&e(s)})};t&&i(t)}},gwe=class extends q{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(t){this.columnModel=t.columnModel,this.columnViewportService=t.columnViewportService,this.eventDispatcher=t.columnEventDispatcher,this.visibleColsService=t.visibleColsService,this.ctrlsService=t.ctrlsService}setColumnWidths(t,e,n,i){let r=[];t.forEach(s=>{let o=this.columnModel.getColDefCol(s.key)||this.columnModel.getCol(s.key);if(!o)return;if(r.push({width:s.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(e=!e),e){let l=this.visibleColsService.getColAfter(o);if(!l)return;let c=o.getActualWidth()-s.newWidth,u=l.getActualWidth()+c;r.push({width:u,ratios:[1],columns:[l]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(t){let{resizeSets:e,finished:n,source:i}=t;if(!(!e||e.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(n){let u=e&&e.length>0?e[0].columns:null;this.eventDispatcher.columnResized(u,n,i)}return}let s=[],o=[];e.forEach(u=>{let{width:d,columns:h,ratios:p}=u,g={},m={};h.forEach(b=>o.push(b));let v=!0,C=0;for(;v;){if(C++,C>1e3){Pt("infinite loop in resizeColumnSets");break}v=!1;let b=[],E=0,T=d;h.forEach((x,_)=>{if(m[x.getId()])T-=g[x.getId()];else{b.push(x);let D=p[_];E+=D}});let P=1/E;b.forEach((x,_)=>{let S=_===b.length-1,D;S?D=T:(D=Math.round(p[_]*d*P),T-=D);let O=x.getMinWidth(),F=x.getMaxWidth();D<O?(D=O,m[x.getId()]=!0,v=!0):F>0&&D>F&&(D=F,m[x.getId()]=!0,v=!0),g[x.getId()]=D})}h.forEach(b=>{let E=g[b.getId()];b.getActualWidth()!==E&&(b.setActualWidth(E,i),s.push(b))})});let a=s.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=o.concat(l);(a||n)&&this.eventDispatcher.columnResized(c,n,i,l)}checkMinAndMaxWidthsForSet(t){let{columns:e,width:n}=t,i=0,r=0,s=!0;e.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?r+=u:s=!1});let o=n>=i,a=!s||n<=r;return o&&a}refreshFlexedColumns(t={}){let e=t.source?t.source:"flex";if(t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];let n=this.visibleColsService.getCenterCols(),i=-1;if(t.resizingCols){let h=new Set(t.resizingCols);for(let p=n.length-1;p>=0;p--)if(h.has(n[p])){i=p;break}}let r=0,s=[],o=0,a=0;for(let h=0;h<n.length;h++)n[h].getFlex()&&h>i?(s.push(n[h]),a+=n[h].getFlex(),o+=n[h].getMinWidth()):r+=n[h].getActualWidth();if(!s.length)return[];let l=[];r+o>this.flexViewportWidth&&(s.forEach(h=>h.setActualWidth(h.getMinWidth(),e)),l=s,s=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-r;let h=u/a;for(let p=0;p<s.length;p++){let g=s[p],m=h*g.getFlex(),v=0,C=g.getMinWidth(),b=g.getMaxWidth();if(m<C?v=C:m>b&&(v=b),v){g.setActualWidth(v,e),Z9(s,g),a-=g.getFlex(),l.push(g),r+=g.getActualWidth();continue e}c[p]=Math.round(m)}break}let d=u;return s.forEach((h,p)=>{h.setActualWidth(Math.min(c[p],d),e),l.push(h),d-=c[p]}),t.skipSetLeft||this.visibleColsService.setLeftValues(e),t.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),t.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,e,s),s}sizeColumnsToFit(t,e="sizeColumnsToFit",n,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(t,e,n,i));return}let r={};i&&i?.columnLimits?.forEach(g=>{var m=g,{key:h}=m,p=mS(m,["key"]);r[typeof h=="string"?h:h.getColId()]=p});let s=this.visibleColsService.getAllCols(),o=t===uc(s);if(t<=0||!s.length||o)return;let a=[],l=[];s.forEach(h=>{h.getColDef().suppressSizeToFit===!0?l.push(h):a.push(h)});let c=a.slice(0),u=!1,d=h=>{qr(a,h),l.push(h)};for(a.forEach(h=>{h.resetActualWidth(e);let p=r?.[h.getId()],g=p?.minWidth??i?.defaultMinWidth,m=p?.maxWidth??i?.defaultMaxWidth,v=h.getActualWidth();typeof g=="number"&&v<g?h.setActualWidth(g,e,!0):typeof m=="number"&&v>m&&h.setActualWidth(m,e,!0)});!u;){u=!0;let h=t-uc(l);if(h<=0)a.forEach(p=>{let g=r?.[p.getId()]?.minWidth??i?.defaultMinWidth;if(typeof g=="number"){p.setActualWidth(g,e,!0);return}p.setMinimum(e)});else{let p=h/uc(a),g=h;for(let m=a.length-1;m>=0;m--){let v=a[m],C=r?.[v.getId()],b=C?.minWidth??i?.defaultMinWidth,E=C?.maxWidth??i?.defaultMaxWidth,T=v.getMinWidth(),P=v.getMaxWidth(),x=typeof b=="number"&&b>T?b:T,_=typeof E=="number"&&E<P?E:P,S=Math.round(v.getActualWidth()*p);S<x?(S=x,d(v),u=!1):S>_?(S=_,d(v),u=!1):m===0&&(S=g),v.setActualWidth(S,e,!0),g-=S}}}c.forEach(h=>{h.fireColumnWidthChangedEvent(e)}),this.visibleColsService.setLeftValues(e),this.visibleColsService.updateBodyWidths(),!n&&this.eventDispatcher.columnResized(c,!0,e)}applyAutosizeStrategy(){let t=this.gos.get("autoSizeStrategy");if(!t)return;let{type:e}=t;setTimeout(()=>{if(e==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:r}=t,s=n?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:r,columnLimits:s})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(t.width,"sizeColumnsToFit")})}};function oK(t,e){return t+"_"+e}function si(t){return t instanceof aK}var aK=class extends q{constructor(t,e,n,i){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=e,this.partId=n,this.providedColumnGroup=t,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(t){this.parent=t}getUniqueId(){return oK(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(e=>e.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{si(t)&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let e=Rt(this.displayedChildren).getLeft();this.setLeft(e)}else{let t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let t=0;return this.displayedChildren&&this.displayedChildren.forEach(e=>{t+=e.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(e=>{e.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(e=>{t+=e.getMinWidth()}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){let t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}addDisplayedLeafColumns(t){this.displayedChildren.forEach(e=>{Hu(e)?t.push(e):si(e)&&e.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(e=>{Hu(e)?t.push(e):si(e)&&e.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(si(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":t.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},lK=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){let e=this.existingIds[t],n;return typeof e!="number"?n=0:n=e+1,this.existingIds[t]=n,n}},mwe=class extends q{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(t){this.columnModel=t.columnModel,this.columnSizeService=t.columnSizeService,this.columnViewportService=t.columnViewportService,this.eventDispatcher=t.columnEventDispatcher}refresh(t,e=!1){e||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=MN(this.treeLeft),this.columnsCenter=MN(this.treeCenter),this.columnsRight=MN(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(t),this.autoHeightCols=this.columns.filter(n=>n.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(t),this.eventDispatcher.visibleCols()}updateBodyWidths(){let t=uc(this.columnsCenter),e=uc(this.columnsLeft),n=uc(this.columnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==n){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=n;let r={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(r);let s={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(s)}}setLeftValues(t){this.setLeftValuesOfCols(t),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(t){let e,n;this.gos.get("enableRtl")?(e=this.columnsLeft?this.columnsLeft[0]:null,n=this.columnsRight?Rt(this.columnsRight):null):(e=this.columnsLeft?Rt(this.columnsLeft):null,n=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===e,t),i.setFirstRightPinned(i===n,t)})}buildTrees(){let t=this.columnModel.getColsToShow(),e=t.filter(s=>s.getPinned()=="left"),n=t.filter(s=>s.getPinned()=="right"),i=t.filter(s=>s.getPinned()!="left"&&s.getPinned()!="right"),r=new lK;this.treeLeft=this.createGroups({columns:e,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let t=this.columnModel.getCols(),e=[],n=[],i=[];for(let r of t){let s=r.getPinned();s?s===!0||s==="left"?e.push(r):i.push(r):n.push(r)}this.ariaOrderColumns=e.concat(n).concat(i)}getAriaColIndex(t){let e;return si(t)?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(t=>{t.forEach(e=>{si(e)&&e.checkLeft()})})}setLeftValuesOfCols(t){if(!this.columnModel.getColDefCols())return;let n=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(r=>{if(i){let s=uc(r);r.forEach(o=>{s-=o.getActualWidth(),o.setLeft(s,t)})}else{let s=0;r.forEach(o=>{o.setLeft(s,t),s+=o.getActualWidth()})}LCe(n,r)}),n.forEach(r=>{r.setLeft(null,t)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(t){return this.getAllCols().indexOf(t)>=0}getLeftColsForRow(t){return this.columnModel.isColSpanActive()?this.getColsForRow(t,this.columnsLeft):this.columnsLeft}getRightColsForRow(t){return this.columnModel.isColSpanActive()?this.getColsForRow(t,this.columnsRight):this.columnsRight}getColsForRow(t,e,n,i){let r=[],s=null;for(let o=0;o<e.length;o++){let a=e[o],l=e.length-o,c=Math.min(a.getColSpan(t),l),u=[a];if(c>1){let h=c-1;for(let p=1;p<=h;p++)u.push(e[o+p]);o+=h}let d;n?(d=!1,u.forEach(h=>{n(h)&&(d=!0)})):d=!0,d&&(r.length===0&&s&&(i&&i(a))&&r.push(s),r.push(a)),s=a}return r}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(t){let e=this.getAllCols(),n=e.indexOf(t);return n>0?e[n-1]:null}getGroupAtDirection(t,e){let n=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),i=t.getDisplayedLeafColumns(),r=e==="After"?Rt(i):i[0],s=`getCol${e}`;for(;;){let o=this[s](r);if(!o)return null;let a=this.getColGroupAtLevel(o,n);if(a!==t)return a}}getColGroupAtLevel(t,e){let n=t.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=e);)n=n.getParent();return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let t=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Vh(this.treeCenter,!1,t),Vh(this.treeLeft,!1,t),Vh(this.treeRight,!1,t)}isVisible(t){return this.colsAndGroupsMap[t.getUniqueId()]===t}updateOpenClosedVisibilityInColumnGroups(){let t=this.getAllTrees();Vh(t,!1,e=>{si(e)&&e.calculateDisplayedColumns()})}getFirstColumn(){let t=this.gos.get("enableRtl"),e=["getLeftCols","getCenterCols","getRightCols"];t&&e.reverse();for(let n=0;n<e.length;n++){let i=this[e[n]]();if(i.length)return t?Rt(i):i[0]}return null}getColumnGroup(t,e){if(!t)return null;if(si(t))return t;let n=this.getAllTrees(),i=typeof e=="number",r=null;return Vh(n,!1,s=>{if(si(s)){let o=s,a;i?a=t===o.getGroupId()&&e===o.getPartId():a=t===o.getGroupId(),a&&(r=o)}}),r}getColAfter(t){let e=this.getAllCols(),n=e.indexOf(t);return n<e.length-1?e[n+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return uc(this.columnsLeft)}getDisplayedColumnsRightWidth(){return uc(this.columnsRight)}isColAtEdge(t,e){let n=this.getAllCols();if(!n.length)return!1;let i=e==="first",r;if(si(t)){let s=t.getDisplayedLeafColumns();if(!s.length)return!1;r=i?s[0]:Rt(s)}else r=t;return(i?n[0]:Rt(n))===r}createGroups(t){let{columns:e,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:s}=t,o=this.mapOldGroupsById(r),a=[],l=e;for(;l.length;){let c=l;l=[];let u=0,d=h=>{let p=u;u=h;let g=c[p],v=(si(g)?g.getProvidedColumnGroup():g).getOriginalParent();if(v==null){for(let b=p;b<h;b++)a.push(c[b]);return}let C=this.createColGroup(v,n,o,i,s);for(let b=p;b<h;b++)C.addChild(c[b]);l.push(C)};for(let h=1;h<c.length;h++){let p=c[h],m=(si(p)?p.getProvidedColumnGroup():p).getOriginalParent(),v=c[u],b=(si(v)?v.getProvidedColumnGroup():v).getOriginalParent();m!==b&&d(h)}u<c.length&&d(c.length)}return s||this.setupParentsIntoCols(a,null),a}createColGroup(t,e,n,i,r){let s=t.getGroupId(),o=e.getInstanceIdForKey(s),a=oK(s,o),l=n[a];return l&&l.getProvidedColumnGroup()!==t&&(l=null),ne(l)?l.reset():(l=new aK(t,s,o,i),r||this.createBean(l)),l}mapOldGroupsById(t){let e={},n=i=>{i.forEach(r=>{if(si(r)){let s=r;e[r.getUniqueId()]=s,n(s.getChildren())}})};return t&&n(t),e}setupParentsIntoCols(t,e){t.forEach(n=>{if(n.setParent(e),si(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}};function Vh(t,e,n){if(t)for(let i=0;i<t.length;i++){let r=t[i];if(si(r)){let s=e?r.getDisplayedChildren():r.getChildren();Vh(s,e,n)}n(r)}}function MN(t){let e=[];return Vh(t,!0,n=>{Hu(n)&&e.push(n)}),e}var cK=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],vwe=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],ywe=[...cK,...vwe],Cwe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},Cr=class{};Cr.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];Cr.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];Cr.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Cr.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Cr.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"];Cr.OTHER_PROPERTIES=["suppressStickyTotalRow"];Cr.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];Cr.ALL_PROPERTIES=[...Cr.ARRAY_PROPERTIES,...Cr.OBJECT_PROPERTIES,...Cr.STRING_PROPERTIES,...Cr.NUMBER_PROPERTIES,...Cr.FUNCTION_PROPERTIES,...Cr.BOOLEAN_PROPERTIES,...Cr.OTHER_PROPERTIES];var nw=Cr,xo=class{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}};xo.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";xo.PUBLIC_EVENTS=cK;xo.EVENT_CALLBACKS=ywe.map(t=>xo.getCallbackForEvent(t));xo.BOOLEAN_PROPERTIES=nw.BOOLEAN_PROPERTIES;xo.ALL_PROPERTIES=nw.ALL_PROPERTIES;xo.ALL_PROPERTIES_AND_CALLBACKS=[...xo.ALL_PROPERTIES,...xo.EVENT_CALLBACKS];xo.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(xo.ALL_PROPERTIES_AND_CALLBACKS);var iw=xo;function uK(t,e){typeof t!="object"&&(t={});let n=W({},t);return iw.ALL_PROPERTIES_AND_CALLBACKS.forEach(r=>{let s=e[r];typeof s<"u"&&s!==iw.VUE_OMITTED_PROPERTY&&(n[r]=s)}),n}function dK(t,e){if(!t)return;let n={},i=!1;if(Object.keys(t).filter(o=>iw.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{n[o]=t[o],i=!0}),!i)return;let r={type:"gridOptionsChanged",options:n};e.dispatchEvent(r);let s={type:"componentStateChanged"};Do(n,(o,a)=>{s[o]=a}),e.dispatchEvent(s)}var wwe=class{constructor(t){this.cssClassStates={},this.getGui=t}addCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[t]!==!0&&t.length){let i=this.getGui();i&&i.classList.add(t),this.cssClassStates[t]=!0}}removeCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[t]!==!1&&t.length){let i=this.getGui();i&&i.classList.remove(t),this.cssClassStates[t]=!1}}containsCssClass(t){let e=this.getGui();return e?e.classList.contains(t):!1}addOrRemoveCssClass(t,e){if(!t)return;if(t.indexOf(" ")>=0){let i=(t||"").split(" ");if(i.length>1){i.forEach(r=>this.addOrRemoveCssClass(r,e));return}}if(this.cssClassStates[t]!==e&&t.length){let i=this.getGui();i&&i.classList.toggle(t,e),this.cssClassStates[t]=e}}};function gc(t,e,n){n==null||typeof n=="string"&&n==""?hK(t,e):ya(t,e,n)}function ya(t,e,n){t.setAttribute(fK(e),n.toString())}function hK(t,e){t.removeAttribute(fK(e))}function fK(t){return`aria-${t}`}function bs(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Swe(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function bwe(t){return t.getAttribute("aria-label")}function tm(t,e){gc(t,"label",e)}function rw(t,e){gc(t,"labelledby",e)}function pK(t,e){gc(t,"live",e)}function _we(t,e){gc(t,"atomic",e)}function Ewe(t,e){gc(t,"relevant",e)}function Dwe(t,e){gc(t,"disabled",e)}function pL(t,e){gc(t,"hidden",e)}function PT(t,e){ya(t,"expanded",e)}function Twe(t,e){ya(t,"setsize",e)}function Rwe(t,e){ya(t,"posinset",e)}function Iwe(t,e){ya(t,"multiselectable",e)}function xwe(t,e){ya(t,"rowcount",e)}function gK(t,e){ya(t,"rowindex",e)}function Fwe(t,e){ya(t,"colcount",e)}function mK(t,e){ya(t,"colindex",e)}function Awe(t,e){ya(t,"colspan",e)}function Pwe(t,e){ya(t,"sort",e)}function Mwe(t){hK(t,"sort")}function MT(t,e){gc(t,"selected",e)}function Owe(t,e){gc(t,"controls",e.id),rw(e,t.id)}function gL(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var ON,mT,kN,NN,LN,VN,ZN,JN;function pc(){return ON===void 0&&(ON=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ON}function vK(){if(mT===void 0)if(pc()){let t=navigator.userAgent.match(/version\/(\d+)/i);t&&(mT=t[1]!=null?parseFloat(t[1]):0)}else mT=0;return mT}function mL(){if(kN===void 0){let t=window;kN=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return kN}function yK(){return NN===void 0&&(NN=/(firefox)/i.test(navigator.userAgent)),NN}function CK(){return LN===void 0&&(LN=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),LN}function Uu(){return VN===void 0&&(VN=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),VN}function eL(){return!pc()||vK()>=15}function tL(t){if(!t)return null;let e=t.tabIndex,n=t.getAttribute("tabIndex");return e===-1&&(n===null||n===""&&!yK())?null:e.toString()}function kwe(){if(!document.body)return-1;let t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=t*2;if(n.style.height=i+"px",i>e||n.clientHeight!==i)break;t=i}return document.body.removeChild(n),t}function Nwe(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function Lwe(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function Vwe(){return JN==null&&wK(),JN}function wK(){let t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let n=e.offsetWidth-e.clientWidth;n===0&&e.clientWidth===0&&(n=null),e.parentNode&&e.parentNode.removeChild(e),n!=null&&(JN=n,ZN=n===0)}function SK(){return ZN==null&&wK(),ZN}var vT;var Bwe="[tabindex], input, select, button, textarea, [href]",bK="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function vL(t){let e=Element.prototype.matches||Element.prototype.msMatchesSelector,i=e.call(t,"input, select, button, textarea"),r=e.call(t,bK),s=va(t);return i&&!r&&s}function Tn(t,e,n={}){let{skipAriaHidden:i}=n;t.classList.toggle("ag-hidden",!e),i||pL(t,!e)}function Gwe(t,e,n={}){let{skipAriaHidden:i}=n;t.classList.toggle("ag-invisible",!e),i||pL(t,!e)}function sw(t,e){let n="disabled",i=e?r=>r.setAttribute(n,""):r=>r.removeAttribute(n);i(t),xK(t.querySelectorAll("input"),r=>i(r))}function Jg(t,e,n){let i=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof n=="number"){if(++i>n)break}else if(t===n)break}return!1}function qh(t){let{height:e,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function yL(t){let e=qh(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function aw(t){let e=qh(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function _K(t){let{height:e,marginBottom:n,marginTop:i}=qh(t);return Math.floor(e+n+i)}function OT(t){let{width:e,marginLeft:n,marginRight:i}=qh(t);return Math.floor(e+n+i)}function EK(t){let e=t.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:s}=qh(t);return{top:e.top+(n||0),left:e.left+(i||0),right:e.right+(r||0),bottom:e.bottom+(s||0)}}function kT(){if(typeof vT=="boolean")return vT;let t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,vT=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),vT}function NT(t,e){let n=t.scrollLeft;return e&&(n=Math.abs(n),mL()&&!kT()&&(n=t.scrollWidth-t.clientWidth-n)),n}function LT(t,e,n){n&&(kT()?e*=-1:(pc()||mL())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function wr(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function Io(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function DK(t){return!!t.offsetParent}function va(t){let e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!DK(t)||window.getComputedStyle(t).visibility!=="visible")}function nm(t){let e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function TK(t,e,n){n&&n.nextSibling===e||(n?n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function RK(t,e){for(let n=0;n<e.length;n++){let i=e[n],r=t.children[n];r!==i&&t.insertBefore(i,r)}}function Hwe(t,e,n){n?n.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function IK(t,e){if(e)for(let[n,i]of Object.entries(e)){if(!n||!n.length||i==null)continue;let r=hwe(n),s=i.toString(),o=s.replace(/\s*!important/g,""),a=o.length!=s.length?"important":void 0;t.style.setProperty(r,o,a)}}function Uwe(t){return t.clientWidth<t.scrollWidth}function jwe(t){return t.clientHeight<t.scrollHeight}function VT(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):ma(t,e)}function ma(t,e){e=CL(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function ZC(t,e){e=CL(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function CL(t){return typeof t=="number"?`${t}px`:t}function wL(t){return t instanceof Node||t instanceof HTMLElement}function Wwe(t){if(t==null)return[];let e=[];return xK(t,n=>e.push(n)),e}function zwe(t,e){if(t)for(let n=0;n<t.length;n++){let i=t[n];e(i.name,i.value)}}function dc(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n.toString())}function xK(t,e){if(t!=null)for(let n=0;n<t.length;n++)e(t[n])}var im=class{constructor(t=0,e=1){this.nextValue=t,this.step=e}next(){let t=this.nextValue;return this.nextValue+=this.step,t}peek(){return this.nextValue}skip(t){this.nextValue+=t}},qwe=1e3,Kwe=1e3,M9=100,FK=class Lh extends q{constructor(e,n,i,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=r,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){let n=this.gos.get(e);return n<0&&$(`${e} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(e){return e==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Uu()&&(Lh.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},M9):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let n=e.relatedTarget,i=this.parentComp.getGui(),r=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&r?.contains(n)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Lh.isLocked)return;let n=0;e&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let e=new Date().getTime(),n=Lh.lastTooltipHideTime;return e-n<qwe}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=W({},this.parentComp.getTooltipParams());if(!ne(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(n)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),Lh.lastTooltipHideTime=new Date().getTime());let n={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),e&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(e,n){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(n);return}let r=n.getGui();this.tooltipComp=n,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");let s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:r,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let l=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:l,columnMoved:l})}this.interactionEnabled&&(this.tooltipTrigger===0?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(r,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(r,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));let a={type:"tooltipShow",tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){let n=this.parentComp.getGui(),i=this.tooltipComp?.getGui(),r=e.relatedTarget;i?.contains(r)||(this.isInteractingWithTooltip=!1,n.contains(r)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Se(W({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Se(W({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===0?Kwe:0;window.setTimeout(()=>{e(),this.destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Lh.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},M9)}unlockService(){Lh.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};FK.isLocked=!1;var Ywe=FK,sm=class extends q{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}wireBeans(t){this.beans=t}postConstruct(){this.refreshToolTip()}setBrowserTooltip(t){let e="title",n=this.ctrl.getGui();n&&(t!=null&&t!=""?n.setAttribute(e,t):n.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let t={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new Ywe(t,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let t=this.ctrl,e=t.getColumn?t.getColumn():void 0,n=t.getColDef?t.getColDef():void 0,i=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:n,column:e,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:i,data:i?i.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},Qwe=new im,ve=null,kt=class AK extends q{constructor(e,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Qwe.next(),this.cssClassManager=new wwe(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(i=>[i.selector,i])),e&&this.setTemplate(e)}preWireBeans(e){super.preWireBeans(e)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(e,n){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,n))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){let{newTooltipText:n,showDelayOverride:i,hideDelayOverride:r,location:s,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);let a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new sm({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>s??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,n,i,r=null){if(n===void 0&&(n=this.getDataRefAttribute(e)),n){let s=this[n];if(s===ve)this[n]=r??e;else{let o=i&&i[n];!this.suppressDataRefValidation&&!o&&$(`Issue with data-ref: ${n} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,n){Wwe(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;let s=this.createComponentFromElement(r,o=>{o.getGui()&&this.copyAttributesFromNode(r,o.getGui())},n);if(s){if(s.addItems&&r.children.length){this.createChildComponentsFromTags(r,n);let o=Array.prototype.slice.call(r.children);s.addItems(o)}this.swapComponentForNode(s,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,n)})}createComponentFromElement(e,n,i){let r=e.nodeName,s=this.getDataRefAttribute(e),o=r.indexOf("AG-")===0,a=o?this.componentSelectors.get(r):null,l=null;if(a){AK.elementGettingCreated=e;let c=i&&s?i[s]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,n)}else o&&$(`Missing selector: ${r}`);return this.applyElementsToComponent(e,s,i,l),l}copyAttributesFromNode(e,n){zwe(e.attributes,(i,r)=>n.setAttribute(i,r))}swapComponentForNode(e,n,i){let r=e.getGui();n.replaceChild(r,i),n.insertBefore(document.createComment(i.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){let n=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(e,n,i){let r=nm(e);this.setTemplateFromElement(r,n,i)}setTemplateFromElement(e,n,i,r=!1){if(this.eGui=e,this.suppressDataRefValidation=r,n)for(let s=0;s<n.length;s++){let o=n[s];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,n){let i=n;return e==null?null:(i||(i=this.eGui),wL(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,n){let{element:i,parent:r}=this.getContainerAndElement(e,n)||{};!i||!r||r.insertAdjacentElement("afterbegin",i)}appendChild(e,n){let{element:i,parent:r}=this.getContainerAndElement(e,n)||{};!i||!r||r.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,n={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:i}=n;Gwe(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,n={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:i}=n;Tn(this.eGui,e,{skipAriaHidden:i});let r={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(e,n,i){this.eGui.addEventListener(e,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,n))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,n){this.cssClassManager.addOrRemoveCssClass(e,n)}},Xwe={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function lc(t,e,n){let i=$s(t,e,n);if(i){let{className:s}=i;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return i}let r=document.createElement("span");return r.appendChild(i),r}function $s(t,e,n,i){let r=null,s=n&&n.getColDef().icons;if(s&&(r=s[t]),e&&!r){let o=e.get("icons");o&&(r=o[t])}if(r){let o;if(typeof r=="function")o=r();else if(typeof r=="string")o=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return nm(o);if(wL(o))return o;$("iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=Xwe[t];return a||(i?a=t:($(`Did not find icon ${t}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),bs(o,"presentation"),o}}function PK(t,e,n){if(n===0)return!1;let i=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(i,r)<=n}var Bu=class{constructor(t,e=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new rm,this.eElement=t,this.preventMouseClick=e;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}addEventListener(t,e){this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService.removeEventListener(t,e)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;let e=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===e;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:t};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(t){if(!this.touching)return;let e=this.getActiveTouch(t.touches);if(!e)return;!PK(e,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){let e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){let t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}},$we=`<span class="ag-sort-indicator-container">
        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
    </span>`,SL=class extends kt{constructor(t){super(),this.eSortOrder=ve,this.eSortAsc=ve,this.eSortDesc=ve,this.eSortMixed=ve,this.eSortNone=ve,t||this.setTemplate($we)}wireBeans(t){this.sortController=t.sortController}attachCustomElements(t,e,n,i,r){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r}setupSort(t,e=!1){this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(t,e,n){if(e==null)return;let i=$s(t,this.gos,n);i&&e.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let e=t==="asc";Tn(this.eSortAsc,e,{skipAriaHidden:!0})}if(this.eSortDesc){let e=t==="desc";Tn(this.eSortDesc,e,{skipAriaHidden:!0})}if(this.eSortNone){let e=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=t==null;Tn(this.eSortNone,!e&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let t=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&t&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let t=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Tn(this.eSortMixed,t,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let t=this.sortController.getColumnsWithSortingOrdered(),e=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,n=t.some(r=>this.sortController.getDisplaySortIndexForColumn(r)??!1),i=e>=0&&n;Tn(this.eSortOrder,i,{skipAriaHidden:!0}),e>=0?this.eSortOrder.textContent=(e+1).toString():wr(this.eSortOrder)}},Zwe={selector:"AG-SORT-INDICATOR",component:SL},Jwe=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,nL=class extends kt{constructor(){super(...arguments),this.eFilter=ve,this.eFilterButton=ve,this.eSortIndicator=ve,this.eMenu=ve,this.eLabel=ve,this.eText=ve,this.eSortOrder=ve,this.eSortAsc=ve,this.eSortDesc=ve,this.eSortMixed=ve,this.eSortNone=ve,this.lastMovingChanged=0}wireBeans(t){this.sortController=t.sortController,this.menuService=t.menuService,this.funcColsService=t.funcColsService}destroy(){super.destroy()}refresh(t){let e=this.params;return this.params=t,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||e.enableFilterButton!=t.enableFilterButton||e.enableFilterIcon!=t.enableFilterIcon?!1:(this.setDisplayName(t),!0)}workOutTemplate(){let t=this.params.template??Jwe;return t=t&&t.trim?t.trim():t,t}init(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[Zwe]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(t)}setDisplayName(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;let e=ul(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=e)}}addInIcon(t,e,n){if(e==null)return;let i=$s(t,this.gos,n);i&&e.appendChild(i)}setupTap(){let{gos:t}=this;if(t.get("suppressTouch"))return;let e=new Bu(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&ne(this.eMenu),r=i?new Bu(this.eMenu,!0):e;if(this.params.enableMenu){let s=i?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(r,{[s]:o})}if(this.params.enableSorting){let s=o=>{let a=o.touchStart.target;n&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(e,{tap:s})}if(this.params.enableFilterButton){let s=new Bu(this.eFilterButton,!0);this.addManagedListeners(s,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>s.destroy())}this.addDestroyFunc(()=>e.destroy()),i&&this.addDestroyFunc(()=>r.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Io(this.eMenu),this.eMenu=void 0;return}let t=this.menuService.isLegacyMenuEnabled();this.addInIcon(t?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!t),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(t){let e=this.params.column,n=this.menuService.isLegacyMenuEnabled();if(t&&!n){if(this.menuService.isFilterMenuInHeaderEnabled(e))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new SL(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:e=>{let n=this.params.column.isMoving(),r=new Date().getTime()-this.lastMovingChanged<50;if(!(n||r)){let a=this.gos.get("multiSortKey")==="ctrl"?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(a)}}});let t=()=>{let e=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",e==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",e==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!e),this.params.column.getColDef().showRowGroup){let r=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(s=>this.params.column.getSort()==s.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedEventListeners({sortChanged:t,columnRowGroupChanged:t})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(t,e,n){if(!t)return Io(e),!1;let i=this.params.column;return this.addInIcon("filter",e,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let t=this.params.column.isFilterActive();Tn(this.eFilter,t,{skipAriaHidden:!0})}onFilterChangedButton(){let t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){return t?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},e0e=class extends kt{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=ve,this.agClosed=ve,this.agLabel=ve}wireBeans(t){this.columnModel=t.columnModel}destroy(){super.destroy()}init(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&$("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let t=r=>{if(Vu(r))return;let s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,t),this.addTouchAndClickListeners(this.agOpened,t);let e=r=>{em(r)};this.addManagedElementListeners(this.agClosed,{dblclick:e}),this.addManagedElementListeners(this.agOpened,{dblclick:e}),this.addManagedElementListeners(this.getGui(),{dblclick:t}),this.updateIconVisibility();let n=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(n,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(t,e){let n=new Bu(t,!0);this.addManagedListeners(n,{tap:e}),this.addDestroyFunc(()=>n.destroy()),this.addManagedElementListeners(t,{click:e})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let e=this.params.columnGroup.isExpanded();Tn(this.agOpened,e),Tn(this.agClosed,!e)}else Tn(this.agOpened,!1),Tn(this.agClosed,!1)}addInIcon(t,e){let n=$s(t,this.gos,null);n&&e.appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Tn(this.agOpened,!1),Tn(this.agClosed,!1);return}}setupLabel(){let{displayName:t,columnGroup:e}=this.params;if(ne(t)){let n=ul(t,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!e.getColGroupDef()?.suppressStickyLabel)}},MK=(t=>(t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue",t))(MK||{}),GT=class Yt{static register(e){Yt.__register(e,!0,void 0)}static registerModules(e){Yt.__registerModules(e,!0,void 0)}static __register(e,n,i){Yt.runVersionChecks(e),i!==void 0?(Yt.areGridScopedModules=!0,Yt.gridModulesMap[i]===void 0&&(Yt.gridModulesMap[i]={}),Yt.gridModulesMap[i][e.moduleName]=e):Yt.globalModulesMap[e.moduleName]=e,Yt.setModuleBased(n)}static __unRegisterGridModules(e){delete Yt.gridModulesMap[e]}static __registerModules(e,n,i){Yt.setModuleBased(n),e&&e.forEach(r=>Yt.__register(r,n,i))}static isValidModuleVersion(e){let[n,i]=e.version.split(".")||[],[r,s]=Yt.currentModuleVersion.split(".")||[];return n===r&&i===s}static runVersionChecks(e){Yt.currentModuleVersion||(Yt.currentModuleVersion=e.version);let n=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(e.version?Yt.isValidModuleVersion(e)||Pt(n(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Yt.currentModuleVersion}.`)):Pt(n(`'${e.moduleName}' is incompatible.`)),e.validate){let i=e.validate();i.isValid||Pt(`${i.message}`)}}static setModuleBased(e){Yt.moduleBased===void 0?Yt.moduleBased=e:Yt.moduleBased!==e&&(Pt("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Pt("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Yt.isBundled=!0}static __assertRegistered(e,n,i){if(this.__isRegistered(e,i))return!0;let r;if(Yt.isBundled)r=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Yt.moduleBased||Yt.moduleBased===void 0){let s=Object.entries(MK).find(([o,a])=>a===e)?.[0];r=`AG Grid: unable to use ${n} as the ${s} is not registered${Yt.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${s} } from '${e}';
    
    ModuleRegistry.registerModules([ ${s} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else r=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Pt(r),!1}static __isRegistered(e,n){return!!Yt.globalModulesMap[e]||!!Yt.gridModulesMap[n]?.[e]}static __getRegisteredModules(e){return[...TT(Yt.globalModulesMap),...TT(Yt.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){return TT(Yt.gridModulesMap[e]??{})||[]}static __isPackageBased(){return!Yt.moduleBased}};GT.globalModulesMap={};GT.gridModulesMap={};GT.areGridScopedModules=!1;var zr=GT,t0e="\u2191",n0e="\u2193",i0e=class extends kt{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),t.appendChild(e),t.appendChild(n),this.setTemplateFromElement(t)}wireBeans(t){this.filterManager=t.filterManager}init(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)}showDelta(t,e){let n=Math.abs(e),i=t.formatValue(n),r=ne(i)?i:n,s=e>=0;s?this.eDelta.textContent=t0e+r:this.eDelta.textContent=n0e+r,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;let t=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),wr(this.eDelta)}refresh(t,e=!1){let n=t.value;if(n===this.lastValue||(ne(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:ne(t.value)?this.eValue.textContent=n:wr(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){let i=n-this.lastValue;this.showDelta(t,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},r0e=class extends kt{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),t.appendChild(e),this.setTemplateFromElement(t),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(t){this.filterManager=t.filterManager}init(t){this.refresh(t,!0)}addSlideAnimation(){this.refreshCount++;let t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{t===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(t,e=!1){let n=t.value;return vt(n)&&(n=""),n===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=n,ne(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:ne(t.value)?this.eCurrent.textContent=n:wr(this.eCurrent),!0)}},G=class{};G.BACKSPACE="Backspace";G.TAB="Tab";G.ENTER="Enter";G.ESCAPE="Escape";G.SPACE=" ";G.LEFT="ArrowLeft";G.UP="ArrowUp";G.RIGHT="ArrowRight";G.DOWN="ArrowDown";G.DELETE="Delete";G.F2="F2";G.PAGE_UP="PageUp";G.PAGE_DOWN="PageDown";G.PAGE_HOME="Home";G.PAGE_END="End";G.A="KeyA";G.C="KeyC";G.D="KeyD";G.V="KeyV";G.X="KeyX";G.Y="KeyY";G.Z="KeyZ";var s0e=class extends kt{constructor(t,e,n){super(e,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:t,label:e,labelWidth:n,labelAlignment:i,disabled:r}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){wr(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Tn(this.eLabel,!1),bs(this.eLabel,"presentation")):(Tn(this.eLabel,!0),bs(this.eLabel,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){let n=this.getGui().classList;return n.toggle("ag-label-align-left",t==="left"),n.toggle("ag-label-align-right",t==="right"),n.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(VT(this.eLabel,t),this)}setDisabled(t){t=!!t;let e=this.getGui();return sw(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}},OK=class extends s0e{constructor(t,e,n,i){super(t,e,n),this.className=i}postConstruct(){super.postConstruct();let{width:t,value:e,onValueChange:n}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(t){return super.setLabel(t),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let t=this.getAriaElement(),e=this.getLabelId(),n=this.getLabel();n==null||n==""||bwe(t)!==null?rw(t,""):rw(t,e??"")}setAriaLabel(t){return tm(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListeners(this,{fieldValueChanged:()=>t(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return ma(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},Bh=class extends OK{constructor(t,e,n="text",i="input"){super(t,t?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],e),this.inputType=n,this.displayFieldTag=i,this.eLabel=ve,this.eWrapper=ve,this.eInput=ve}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:t,inputWidth:e}=this.config;t!=null&&this.setInputName(t),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:t=>this.setValue(t.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(t){return VT(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){let e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return dc(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return tm(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return sw(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)dc(this.eInput,"autocomplete",null);else{let e=typeof t=="string"?t:"off";dc(this.eInput,"autocomplete",e)}return this}},bL=class extends Bh{constructor(t,e="ag-checkbox",n="checkbox"){super(t,e,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;let t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){let e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(t,e,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:t,previousValue:e,event:n});let i=this.getInputElement(),r={type:"checkboxChanged",id:i.id,name:i.name,selected:t,previousValue:e};this.eventService.dispatchEvent(r)}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;let e=this.isSelected(),n=this.selected=t.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,e,t)}refreshSelectedClass(t){this.eWrapper.classList.toggle("ag-checked",t===!0),this.eWrapper.classList.toggle("ag-indeterminate",t==null)}},_L={selector:"AG-CHECKBOX",component:bL},o0e=class extends kt{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[_L]),this.eCheckbox=ve}init(t){this.params=t,this.updateCheckbox(t);let e=this.eCheckbox.getInputElement();e.setAttribute("tabindex","-1"),pK(e,"polite"),this.addManagedListeners(e,{click:n=>{if(em(n),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:n=>{em(n)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:n=>{if(n.key===G.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){let e,n=!0;if(t.node.group&&t.column){let a=t.column.getColId();a.startsWith(ow)?e=t.value==null||t.value===""?void 0:t.value==="true":t.node.aggData&&t.node.aggData[a]!==void 0?e=t.value??void 0:n=!1}else e=t.value??void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(e);let i=t.disabled!=null?t.disabled:!t.column?.isCellEditable(t.node);this.eCheckbox.setDisabled(i);let r=this.localeService.getLocaleTextFunc(),s=gL(r,e),o=i?s:`${r("ariaToggleCellValue","Press SPACE to toggle cell value")} (${s})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(t){let{column:e,node:n,value:i}=this.params,r={type:"cellEditingStarted",column:e,colDef:e?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i};this.eventService.dispatchEvent(r);let s=this.params.node.setDataValue(this.params.column,t,"edit"),o={type:"cellEditingStopped",column:e,colDef:e?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:t,valueChanged:s};this.eventService.dispatchEvent(o)}},a0e=class extends kt{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=ve,this.eLoadingText=ve}init(t){t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")}setupLoading(){let t=$s("groupLoading",this.gos,null);t&&this.eLoadingIcon.appendChild(t);let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingOoo","Loading")}refresh(t){return!1}destroy(){super.destroy()}},l0e=class extends kt{constructor(){super('<div class="ag-skeleton-container"></div>')}init(t){let e=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",e),this.addDestroyFunc(()=>rw(t.eParentOfValue)),rw(t.eParentOfValue,e),t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){let t=this.localeService.getLocaleTextFunc();this.getGui().innerText=t("loadingError","ERR");let e=t("ariaSkeletonCellLoadingFailed","Row failed to load");tm(this.getGui(),e)}setupLoading(t){let n=this.gos.getDocument().createElement("div");n.classList.add("ag-skeleton-effect");let i=t.node.rowIndex;if(i!=null){let o=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${o}%`}this.getGui().appendChild(n);let s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");tm(this.getGui(),s)}refresh(t){return!1}destroy(){super.destroy()}},kK=class extends kt{constructor(){super()}destroy(){super.destroy()}},c0e=class extends kK{init(){let t=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(t??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!t){let e=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("loadingOoo","Loading...")})}}},u0e=class extends kK{init(){let t=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(t??'<span class="ag-overlay-no-rows-center"></span>'),!t){let e=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")})}}},om=class extends kt{isPopup(){return!0}setParentComponent(t){t.addCssClass("ag-has-popup"),super.setParentComponent(t)}destroy(){let t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}},d0e=class extends om{constructor(){super('<div class="ag-tooltip"></div>')}init(t){let{value:e}=t;this.getGui().textContent=ul(e,!0)}};function h0e(t,e,n){let i={},r=t.filter(s=>!e.some(o=>o===s));return r.length>0&&r.forEach(s=>i[s]=NK(s,n).values),i}function NK(t,e,n,i){let r=e.map((a,l)=>({value:a,relevance:f0e(t.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(r.sort((a,l)=>l.relevance-a.relevance),n&&(r=r.filter(a=>a.relevance!==0)),r.length>0&&i&&i>0){let l=r[0].relevance*i;r=r.filter(c=>l-c.relevance<0)}let s=[],o=[];for(let a of r)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function f0e(t,e){let n=t.replace(/\s/g,""),i=e.replace(/\s/g,""),r=0,s=-1;for(let o=0;o<n.length;o++){let a=i.indexOf(n[o],s+1);a!==-1&&(s=a,r+=100-s*100/1e4*100)}return r}var p0e=class extends q{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:nL,agColumnGroupHeader:e0e,agSortIndicator:SL,agAnimateShowChangeCellRenderer:i0e,agAnimateSlideCellRenderer:r0e,agLoadingCellRenderer:a0e,agSkeletonCellRenderer:l0e,agCheckboxCellRenderer:o0e,agLoadingOverlay:c0e,agNoRowsOverlay:u0e,agTooltipComponent:d0e},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let t=this.gos.get("components");t!=null&&Do(t,(e,n)=>this.registerJsComponent(e,n))}registerDefaultComponent(t,e){this.agGridDefaults[t]=e}registerJsComponent(t,e){this.jsComps[t]=e}retrieve(t,e){let n=(a,l)=>({componentFromFramework:l,component:a}),i=this.getFrameworkOverrides().frameworkComponent(e,this.gos.get("components"));if(i!=null)return n(i,!0);let r=this.jsComps[e];if(r){let a=this.getFrameworkOverrides().isFrameworkComponent(r);return n(r,a)}let s=this.agGridDefaults[e];if(s)return n(s,!1);let o=this.enterpriseAgDefaultCompsModule[e];return o?zr.__assertRegistered(o,`AG Grid '${t}' component: ${e}`,this.gridId):dL(()=>{this.warnAboutMissingComponent(t,e)},"MissingComp"+e),null}warnAboutMissingComponent(t,e){let n=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],i=NK(e,n,!0,.8).values;$(`Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.`),i.length>0&&$(`         Did you mean: [${i.slice(0,3)}]?`),$(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Xs=class QC{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(n=>this.onDone(n),n=>this.onReject(n))}static all(e){return e.length?new QC(n=>{let i=e.length,r=new Array(i);e.forEach((s,o)=>{s.then(a=>{r[o]=a,i--,i===0&&n(r)})})}):QC.resolve()}static resolve(e=null){return new QC(n=>n(e))}then(e){return new QC(n=>{this.status===1?n(e(this.resolution)):this.waiters.push(i=>n(e(i)))})}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(n=>n(e))}onReject(e){}},g0e={propertyName:"dateComponent",cellRenderer:!1},m0e={propertyName:"headerComponent",cellRenderer:!1},v0e={propertyName:"headerGroupComponent",cellRenderer:!1},O9={propertyName:"cellRenderer",cellRenderer:!0},y0e={propertyName:"cellRenderer",cellRenderer:!1},C0e={propertyName:"loadingCellRenderer",cellRenderer:!0},w0e={propertyName:"cellEditor",cellRenderer:!1},k9={propertyName:"innerRenderer",cellRenderer:!0},S0e={propertyName:"loadingOverlayComponent",cellRenderer:!1},b0e={propertyName:"noRowsOverlayComponent",cellRenderer:!1},_0e={propertyName:"tooltipComponent",cellRenderer:!1},EL={propertyName:"filter",cellRenderer:!1},E0e={propertyName:"floatingFilterComponent",cellRenderer:!1},D0e={propertyName:"toolPanel",cellRenderer:!1},T0e={propertyName:"statusPanel",cellRenderer:!1},R0e={propertyName:"fullWidthCellRenderer",cellRenderer:!0},I0e={propertyName:"loadingCellRenderer",cellRenderer:!0},x0e={propertyName:"groupRowRenderer",cellRenderer:!0},F0e={propertyName:"detailCellRenderer",cellRenderer:!0},A0e={propertyName:"menuItem",cellRenderer:!1},LK=class VK extends q{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(e){this.agComponentUtils=e.agComponentUtils,this.componentMetadataProvider=e.componentMetadataProvider,this.userComponentRegistry=e.userComponentRegistry,this.frameworkComponentWrapper=e.frameworkComponentWrapper,this.gridOptions=e.gridOptions}getHeaderCompDetails(e,n){return this.getCompDetails(e,m0e,"agColumnHeader",n)}getHeaderGroupCompDetails(e){let n=e.columnGroup.getColGroupDef();return this.getCompDetails(n,v0e,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,R0e,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,I0e,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,x0e,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,F0e,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,n){return this.getCompDetails(e,k9,null,n)}getFullWidthGroupRowInnerCellRenderer(e,n){return this.getCompDetails(e,k9,null,n)}getCellRendererDetails(e,n){return this.getCompDetails(e,O9,null,n)}getEditorRendererDetails(e,n){return this.getCompDetails(e,y0e,null,n)}getLoadingCellRendererDetails(e,n){return this.getCompDetails(e,C0e,"agSkeletonCellRenderer",n,!0)}getCellEditorDetails(e,n){return this.getCompDetails(e,w0e,"agCellEditor",n,!0)}getFilterDetails(e,n,i){return this.getCompDetails(e,EL,i,n,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,g0e,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,S0e,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,b0e,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,_0e,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,n){return this.getCompDetails(e,O9,null,n)}getFloatingFilterCompDetails(e,n,i){return this.getCompDetails(e,E0e,i,n)}getToolPanelCompDetails(e,n){return this.getCompDetails(e,D0e,null,n,!0)}getStatusPanelCompDetails(e,n){return this.getCompDetails(e,T0e,null,n,!0)}getMenuItemCompDetails(e,n){return this.getCompDetails(e,A0e,"agMenuItem",n,!0)}getCompDetails(e,n,i,r,s=!1){let{propertyName:o,cellRenderer:a}=n,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:p}=VK.getCompKeys(this.frameworkOverrides,e,n,r),g=b=>{let E=this.userComponentRegistry.retrieve(o,b);E&&(c=E.componentFromFramework?void 0:E.component,u=E.componentFromFramework?E.component:void 0)};if(l!=null&&g(l),c==null&&u==null&&i!=null&&g(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!u){s&&Pt(`Could not find component ${l}, did you forget to configure this component?`);return}let m=this.mergeParamsWithApplicationProvidedParams(e,n,r,d),v=c==null,C=c||u;return{componentFromFramework:v,componentClass:C,params:m,type:n,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(C,v,m,n)}}static getCompKeys(e,n,i,r){let{propertyName:s}=i,o,a,l,c,u,d;if(n){let h=n,p=h[s+"Selector"],g=p?p(r):null,m=v=>{typeof v=="string"?o=v:v!=null&&v!==!0&&(e.isFrameworkComponent(v)?l=v:a=v)};g?(m(g.component),c=g.params,u=g.popup,d=g.popupPosition):m(h[s])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(e,n,i,r){let s=r.propertyName,o=!n,a;if(o)a=new e;else{let c=this.componentMetadataProvider.retrieve(s);a=this.frameworkComponentWrapper.wrap(e,c.mandatoryMethodList,c.optionalMethodList,r)}let l=this.initComponent(a,i);return l==null?Xs.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(e,n,i,r=null){let s=this.gos.getGridCommonParams();To(s,i);let o=e,a=o&&o[n.propertyName+"Params"];if(typeof a=="function"){let l=a(i);To(s,l)}else typeof a=="object"&&To(s,a);return To(s,r),s}initComponent(e,n){if(this.createBean(e),e.init!=null)return e.init(n)}};function JC(t){let e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var P0e=class{constructor(t){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!t||!t.beanClasses)&&(this.beanDestroyComparator=t.beanDestroyComparator,this.init(t))}init(t){Object.entries(t.providedBeanInstances).forEach(([e,n])=>{this.beans[e]=n}),t.beanClasses.forEach(e=>{let n=new e;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(n)}),t.derivedBeans?.forEach(e=>{let{beanName:n,bean:i}=e(this);this.beans[n]=i,this.createdBeans.push(i)}),t.beanInitComparator&&this.createdBeans.sort(t.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.initBeans([t],e),t}initBeans(t,e){t.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),t.forEach(n=>n.preConstruct?.()),e&&t.forEach(e),t.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(t){return this.beans[t]}destroy(){if(this.destroyed)return;this.destroyed=!0;let t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[]}destroyBean(t){t?.destroy?.()}destroyBeans(t){if(t)for(let e=0;e<t.length;e++)this.destroyBean(t[e]);return[]}isDestroyed(){return this.destroyed}},M0e=class extends P0e{init(t){this.gridId=t.gridId,this.beans.context=this,super.init(t)}destroy(){super.destroy(),zr.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var BK=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(BK||{});var O0e=`<div class="ag-dnd-ghost ag-unselectable">
<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
<div class="ag-dnd-ghost-label"></div>
</div>`,k0e=class extends q{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(t){this.dragService=t.dragService,this.mouseEventService=t.mouseEventService,this.environment=t.environment}postConstruct(){this.dropIconMap={pinned:lc("columnMovePin",this.gos,null),hide:lc("columnMoveHide",this.gos,null),move:lc("columnMoveMove",this.gos,null),left:lc("columnMoveLeft",this.gos,null),right:lc("columnMoveRight",this.gos,null),group:lc("columnMoveGroup",this.gos,null),aggregate:lc("columnMoveValue",this.gos,null),pivot:lc("columnMovePivot",this.gos,null),notAllowed:lc("dropNotAllowed",this.gos,null)}}addDragSource(t,e=!1){let n={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:n,dragSource:t}),this.dragService.addDragSource(n)}removeDragSource(t){let e=this.dragSourceAndParamsList.find(n=>n.dragSource===t);e&&(this.dragService.removeDragSource(e.params),qr(this.dragSourceAndParamsList,e))}destroy(){this.dragSourceAndParamsList.forEach(t=>this.dragService.removeDragSource(t.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(t,e){let n=this.getHorizontalDirection(t),i=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);let r=this.dropTargets.filter(o=>this.isMouseOnDropTarget(t,o)),s=this.findCurrentDropTarget(t,r);if(s!==this.lastDropTarget)this.leaveLastTargetIfExists(t,n,i,e),this.lastDropTarget!==null&&s===null&&this.dragSource.onGridExit?.(this.dragItem),this.lastDropTarget===null&&s!==null&&this.dragSource.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(s,t,n,i,e),this.lastDropTarget=s;else if(s&&s.onDragging){let o=this.createDropTargetEvent(s,t,n,i,e);s.onDragging(o)}}getAllContainersFromDropTarget(t){let e=t.getSecondaryContainers?t.getSecondaryContainers():null,n=[[t.getContainer()]];return e?n.concat(e):n}allContainersIntersect(t,e){for(let n of e){let i=n.getBoundingClientRect();if(i.width===0||i.height===0)return!1;let r=t.clientX>=i.left&&t.clientX<i.right,s=t.clientY>=i.top&&t.clientY<i.bottom;if(!r||!s)return!1}return!0}isMouseOnDropTarget(t,e){let n=this.getAllContainersFromDropTarget(e),i=!1;for(let r of n)if(this.allContainersIntersect(t,r)){i=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:i&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(t,e){let n=e.length;if(n===0)return null;if(n===1)return e[0];let r=this.gos.getRootNode().elementsFromPoint(t.clientX,t.clientY);for(let s of r)for(let o of e)if(BCe(this.getAllContainersFromDropTarget(o)).indexOf(s)!==-1)return o;return null}enterDragTargetIfExists(t,e,n,i,r){if(t){if(t.onDragEnter){let s=this.createDropTargetEvent(t,e,n,i,r);t.onDragEnter(s)}this.setGhostIcon(t.getIconName?t.getIconName():null)}}leaveLastTargetIfExists(t,e,n,i){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let r=this.createDropTargetEvent(this.lastDropTarget,t,e,n,i);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===t.getContainer())||null}getHorizontalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientX,n=t.clientX;return e===n?null:e>n?0:1}getVerticalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientY,n=t.clientY;return e===n?null:e>n?0:1}createDropTargetEvent(t,e,n,i,r){let s=t.getContainer(),o=s.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=e.clientX-o.left,u=e.clientY-o.top;return this.gos.addGridCommonParams({event:e,x:c,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:r,dragItem:a,dropZoneTarget:s})}positionGhost(t){let e=this.eGhost;if(!e)return;let i=e.getBoundingClientRect().height,r=Nwe()-2,s=Lwe()-2,o=EK(e.offsetParent),{clientY:a,clientX:l}=t,c=a-o.top-i/2,u=l-o.left-10,d=this.gos.getDocument(),h=d.defaultView||window,p=h.pageYOffset||d.documentElement.scrollTop,g=h.pageXOffset||d.documentElement.scrollLeft;r>0&&u+e.clientWidth>r+g&&(u=r+g-e.clientWidth),u<0&&(u=0),s>0&&c+e.clientHeight>s+p&&(c=s+p-e.clientHeight),c<0&&(c=0),e.style.left=`${u}px`,e.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=nm(O0e),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let t=this.eGhost.querySelector(".ag-dnd-ghost-label"),e=this.dragSource.dragItemName;hL(e)&&(e=e()),t.innerHTML=ul(e)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let n=this.gos.getDocument(),i=null,r=null;try{i=n.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());let s=i.querySelector("body");s?r=s:i instanceof ShadowRoot?r=i:i instanceof Document?r=i?.documentElement:r=i}this.eGhostParent=r,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):$("Could not find document body, it is needed for dragging columns")}setGhostIcon(t,e=!1){wr(this.eGhostIcon);let n=null;t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),n=this.dropIconMap[t],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(n===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eGhostIcon.appendChild(n)}},N0e=class{constructor(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>!1)}check(t,e=!1){let n=e||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=t.clientX<i.left+r,this.tickRight=t.clientX>i.right-r,this.tickUp=t.clientY<i.top+r&&!n,this.tickDown=t.clientY>i.bottom-r&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let t=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){let e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-t),this.tickRight&&this.setHorizontalPosition(e+t)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var L0e=class extends q{wireBeans(t){this.dragAndDropService=t.dragAndDropService,this.rowModel=t.rowModel,this.pageBoundsService=t.pageBoundsService,this.focusService=t.focusService,this.sortController=t.sortController,this.filterManager=t.filterManager,this.selectionService=t.selectionService,this.mouseEventService=t.mouseEventService,this.ctrlsService=t.ctrlsService,this.funcColsService=t.funcColsService,this.rangeService=t.rangeService}constructor(t){super(),this.eContainer=t}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{let e=t.gridBodyCtrl;this.autoScrollService=new N0e({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>e.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];let e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((r,s)=>r.rowIndex==null||s.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(s));if(i.indexOf(e)!==-1)return i}return[e]}onDragEnter(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent("rowDragEnter",t),this.getRowNodes(t).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(t)}onDragging(t){this.onEnterOrDragging(t)}isFromThisGrid(t){let{dragSourceDomDataKey:e}=t.dragSource;return e===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(t){let n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=t;return!n.contains(i)}onEnterOrDragging(t){this.dispatchGridEvent("rowDragMove",t),this.lastDraggingEvent=t;let e=this.mouseEventService.getNormalisedPosition(t).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)}doManagedDrag(t,e){let n=this.isFromThisGrid(t),i=this.gos.get("rowDragManaged"),r=t.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))}getRowIndexNumber(t){let e=t.getRowIndexString();return parseInt(Rt(e.split("-")),10)}moveRowAndClearHighlight(t){let e=this.clientSideRowModel.getLastHighlightedRowNode(),n=e&&e.highlighted===1,i=this.mouseEventService.getNormalisedPosition(t).y,r=t.dragItem.rowNodes,s=n?1:0;if(this.isFromThisGrid(t))r.forEach(o=>{o.rowTop<i&&(s-=1)}),this.moveRows(r,i,s);else{let o=this.gos.getRowIdCallback(),a=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&a--,this.clientSideRowModel.updateRowData({add:r.filter(l=>!this.clientSideRowModel.getRowNode(o?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(t,e,n=0){this.clientSideRowModel.ensureRowsAtPixel(t,e,n)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(t){if(!t.getContainer()){$("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(t)){$("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:t.getContainer};t.fromGrid?e=t:(t.onDragEnter&&(e.onDragEnter=n=>{t.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),t.onDragLeave&&(e.onDragLeave=n=>{t.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),t.onDragging&&(e.onDragging=n=>{t.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),t.onDragStop&&(e.onDragStop=n=>{t.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))})),this.dragAndDropService.addDropTarget(W({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},e))}getRowDropZone(t){let e=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),r=this.onDragging.bind(this),s=this.onDragStop.bind(this);return t?{getContainer:e,onDragEnter:t.onDragEnter?o=>{n(o),t.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}:n,onDragLeave:t.onDragLeave?o=>{i(o),t.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}:i,onDragging:t.onDragging?o=>{r(o),t.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}:r,onDragStop:t.onDragStop?o=>{s(o),t.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}:s,fromGrid:!0}:{getContainer:e,onDragEnter:n,onDragLeave:i,onDragging:r,onDragStop:s,fromGrid:!0}}draggingToRowDragEvent(t,e){let n=this.mouseEventService.getNormalisedPosition(e).y,i=n>this.pageBoundsService.getCurrentPageHeight(),r=-1,s;i||(r=this.rowModel.getRowIndexAtPixel(n),s=this.rowModel.getRow(r));let o;switch(e.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:r,overNode:s,y:n,vDirection:o})}dispatchGridEvent(t,e){let n=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(n)}onDragLeave(t){this.dispatchGridEvent("rowDragLeave",t),this.stopDragging(t),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(t){this.dispatchGridEvent("rowDragEnd",t),this.stopDragging(t),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)}stopDragging(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(e=>{e.setDragging(!1)})}},V0e=class extends q{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(t){this.mouseEventService=t.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(t){let e=t.dragSource.eElement,n=t.mouseDownListener;if(e.removeEventListener("mousedown",n),t.touchEnabled){let i=t.touchStartListener;e.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(t){let e=this.dragSources.find(n=>n.dragSource===t);e&&(this.removeListener(e),qr(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(t){let e=this.onMouseDown.bind(this,t),{eElement:n,includeTouch:i,stopPropagationForTouch:r}=t;n.addEventListener("mousedown",e);let s=null,o=this.gos.get("suppressTouch");i&&!o&&(s=a=>{vL(a.target)||(a.cancelable&&(a.preventDefault(),r&&a.stopPropagation()),this.onTouchStart(t,a))},n.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:s,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;let n=e.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,t.eElement),r=l=>this.onTouchUp(l,t.eElement),s=l=>{l.cancelable&&l.preventDefault()},o=e.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:s,options:{passive:!1}},{target:o,type:"touchmove",listener:i,options:{passive:!0}},{target:o,type:"touchend",listener:r,options:{passive:!0}},{target:o,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,t.eElement)}onMouseDown(t,e){let n=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;let i=l=>this.onMouseMove(l,t.eElement),r=l=>this.onMouseUp(l,t.eElement),s=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:i},{target:o,type:"mouseup",listener:r},{target:o,type:"contextmenu",listener:s}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{let{target:n,type:i,listener:r,options:s}=e;n.addEventListener(i,r,s)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{let{target:n,type:i,listener:r,options:s}=e;n.removeEventListener(i,r,s)})})}isEventNearStartEvent(t,e){let{dragStartPixels:n}=this.currentDragParams,i=ne(n)?n:4;return PK(t,e,i)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;let i={type:"dragStarted",target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)}onTouchMove(t,e){let n=this.getFirstActiveTouch(t.touches);n&&this.onCommonMove(n,this.touchStart,e)}onMouseMove(t,e){pc()&&this.gos.getDocument().getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){let e=this.gos.get("enableCellTextSelection"),n=t.type==="mousemove";return e&&n&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)}isOverFormFieldElement(t){return!!t.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(t,e){let n=this.getFirstActiveTouch(t.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);let n={type:"dragStopped",target:e};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(n=>n()),this.dragEndFunctions.length=0}},iL=class extends kt{constructor(t,e,n,i,r,s){super(),this.cellValueFn=t,this.rowNode=e,this.column=n,this.customGui=i,this.dragStartPixels=r,this.suppressVisibilityChange=s,this.dragSource=null}wireBeans(t){this.beans=t}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild($s("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let t=this.gos.get("rowDragManaged")?new G0e(this,this.beans,this.rowNode,this.column):new B0e(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}}setDragElement(t,e){this.setTemplateFromElement(t),this.addDragSource(e)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){let t=this.gos.get("rowDragManaged");this.gos.get("treeData")&&t&&$("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){let e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gos.get("rowDragText")}addDragSource(t=4){this.dragSource&&this.removeDragSource();let e=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(e,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:e,dragItemName:()=>{let i=this.getDragItem(),r=i.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(i,r):r===1?this.cellValueFn():`${r} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},GK=class extends q{constructor(t,e,n){super(),this.parent=t,this.rowNode=e,this.column=n}setDisplayedOrVisible(t){let e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{let n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=hL(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,e),this.parent.setVisible(n,e)):(this.parent.setDisplayed(n,e),this.parent.setVisible(!0,e))}}},B0e=class extends GK{constructor(t,e,n,i){super(t,n,i),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let t=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:t,cellChanged:t}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:t}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(t)}},G0e=class extends GK{constructor(t,e,n,i){super(t,n,i),this.beans=e}postConstruct(){let t=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:t,filterChanged:t,columnRowGroupChanged:t,newColumnsLoaded:t}),this.addManagedListeners(this.rowNode,{dataChanged:t,cellChanged:t}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=e&&e.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),s=n&&!r||i;this.setDisplayedOrVisible(s)}},lw=class Qg{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Qg.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,n){let i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let r=this.createDataChangedEvent(e,i,n);this.localEventService?.dispatchEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,n,i){return{type:"dataChanged",node:this,oldData:n,newData:e,update:i}}getRowIndexString(){return this.rowIndex==null?(Pt("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let e=new Qg(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,n){let i=ne(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let s=this.createDataChangedEvent(e,r,!1);this.localEventService?.dispatchEvent(s)}checkRowSelectable(){let e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,n){if(this.selectable!==e){if(this.selectable=e,this.dispatchRowEvent("selectableChanged"),n)return;if(this.beans.gos.get("groupSelectsChildren")){let r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){let n=this.beans.gos.getRowIdCallback();if(n)if(this.data){let i=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Qg.ID_PREFIX_ROW_GROUP)&&Pt(`Row IDs cannot start with ${Qg.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){let n=[],i=this;for(e&&(i=i.parent);i&&i.level>=0;)n.push(i.key),i=i.parent;return n.reverse(),n}isPixelInRange(e){return!ne(this.rowTop)||!ne(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}updateIfDifferent(e,n,i){this[e]!==n&&(this[e]=n,this.dispatchRowEvent(i))}setFirstChild(e){this.updateIfDifferent("firstChild",e,"firstChildChanged")}setLastChild(e){this.updateIfDifferent("lastChild",e,"lastChildChanged")}setChildIndex(e){this.updateIfDifferent("childIndex",e,"childIndexChanged")}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.updateIfDifferent("displayed",e,"displayedChanged")}setDragging(e){this.updateIfDifferent("dragging",e,"draggingChanged")}setHighlighted(e){this.updateIfDifferent("highlighted",e,"rowHighlightChanged")}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.updateIfDifferent("allChildrenCount",e,"allChildrenCountChanged")}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.dispatchRowEvent("masterChanged"))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(e,n=!1){this.rowHeight=e,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(e,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Kr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,n=!0,i=0,r=this.__autoHeights;if(r==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){e=!0;return}l=-1}else{e=!0;return}else n=!1;l>i&&(i=l)}),e)||((n||i<10)&&(i=this.beans.gos.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);let o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.updateIfDifferent("rowIndex",e,"rowIndexChanged")}setUiLevel(e){this.updateIfDifferent("uiLevel",e,"uiLevelChanged")}setExpanded(e,n,i){if(this.expanded===e)return;this.expanded=e,this.dispatchRowEvent("expandedChanged");let r=Se(W({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:e,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(e,n,i){let s=typeof e!="string"?e:this.beans.columnModel.getCol(e)??this.beans.columnModel.getColDefCol(e),o=this.getValueFromValueService(s);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,o,n,i),!1;let a=this.beans.valueService.setValue(this,s,n,i);return this.dispatchCellChangedEvent(s,n,o),this.checkRowSelectable(),a}getValueFromValueService(e){let n=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!n,r=!1,s=this.beans.gos.get("groupTotalRow")??this.beans.gos.get("groupIncludeFooter");typeof s!="function"?r=!!s:r=!!(this.beans.gos.getCallback("groupTotalRow")??this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let o=this.beans.gos.get("groupSuppressBlankHeader"),a=i&&r&&!o;return this.beans.valueService.getValue(e,this,!1,a)}dispatchEventForSaveValueReadOnly(e,n,i,r){let s=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:n,newValue:i,value:i,source:r});this.beans.eventService.dispatchEvent(s)}setGroupValue(e,n){let i=this.beans.columnModel.getCol(e);vt(this.groupData)&&(this.groupData={});let r=i.getColId(),s=this.groupData[r];s!==n&&(this.groupData[r]=n,this.dispatchCellChangedEvent(i,n,s))}setAggData(e){let n=this.aggData;if(this.aggData=e,this.localEventService){let i=r=>{let s=this.aggData?this.aggData[r]:void 0,o=n?n[r]:void 0;if(s===o)return;let a=this.beans.columnModel.getCol(r);a&&this.dispatchCellChangedEvent(a,s,o)};for(let r in this.aggData)i(r);for(let r in e)r in this.aggData||i(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let i=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(i?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return(this.group&&zi(this.childrenAfterGroup))??!1}dispatchCellChangedEvent(e,n,i){let r={type:"cellChanged",node:this,column:e,newValue:n,oldValue:i};this.localEventService?.dispatchEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){let e=!1,n=!1,i=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let r=0;r<this.childrenAfterGroup.length;r++){let s=this.childrenAfterGroup[r],o=s.isSelected();if(!s.selectable){let a=s.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:e=!0;break;case!1:n=!0;break;default:i=!0;break}}if(!(i||e&&n))return e?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}dispatchRowEvent(e){let n={type:e,node:this};this.localEventService?.dispatchEvent(n)}selectThisNode(e,n,i="api"){let r=!this.selectable&&e,s=this.selected===e;if(r||s)return!1;this.selected=e,this.dispatchRowEvent("rowSelected");let o=this.sibling;o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected");let a=Se(W({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e,n=!1,i="api"){if(typeof i=="boolean"){$("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(e){return this.rowPinned?($("cannot select pinned rows"),0):this.id===void 0?($("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Se(W({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}addEventListener(e,n){this.localEventService||(this.localEventService=new rm),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new cL(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(e,i)}removeEventListener(e,n){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(e,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(e){let n=this,i=!0,r=!1,s=null;for(;i&&!r;){let o=n.parent;ne(o)&&n.firstChild?o.rowGroupColumn===e&&(r=!0,s=o):i=!1,n=o}return r?s:null}isFullWidthCell(){if(this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;let e=[],n=this;for(;n&&n.key!=null;)e.push(n.key),n=n.parent;return e.reverse()}createFooter(){if(this.sibling)return;let e=new Set(["eventService","__objectId","sticky"]),n=new Qg(this.beans);Object.keys(this).forEach(i=>{e.has(i)||(n[i]=this[i])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};lw.ID_PREFIX_ROW_GROUP="row-group-";lw.ID_PREFIX_TOP_PINNED="t-";lw.ID_PREFIX_BOTTOM_PINNED="b-";lw.OBJECT_ID_SEQUENCE=0;var hc=lw,H0e=class extends q{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(t){this.columnModel=t.columnModel,this.dataTypeService=t.dataTypeService,this.quickFilterService=t.quickFilterService,this.advancedFilterService=t.advancedFilterService,this.columnFilterService=t.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:({enabled:t})=>this.onAdvancedFilterEnabledChanged(t),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",t=>this.setAdvancedFilterModel(t.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"?t({}):!1}doesExternalFilterPass(t){let e=this.gos.get("doesExternalFilterPass");return typeof e=="function"?e(t):!1}setFilterModel(t,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(t,e)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(t){t?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(t={}){let{source:e,additionalEventAttributes:n,columns:i=[]}=t;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(t):Xs.resolve()).then(()=>{let r={source:e,type:"filterChanged",columns:i};n&&To(r,n),this.eventService.dispatchEvent(r),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})}doesRowPassAggregateFilters(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))}doesRowPassFilter(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))}isFilterActive(t){return!!this.columnFilterService?.isFilterActive(t)}getOrCreateFilterWrapper(t){return this.columnFilterService?.getOrCreateFilterWrapper(t)??null}getDefaultFloatingFilter(t){return this.columnFilterService.getDefaultFloatingFilter(t)}createFilterParams(t,e){return this.columnFilterService.createFilterParams(t,e)}isFilterAllowed(t){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(t)}getFloatingFilterCompDetails(t,e){return this.columnFilterService?.getFloatingFilterCompDetails(t,e)}getCurrentFloatingFilterParentModel(t){return this.columnFilterService?.getCurrentFloatingFilterParentModel(t)}destroyFilter(t,e="api"){this.columnFilterService?.destroyFilter(t,e)}areFilterCompsDifferent(t,e){return!!this.columnFilterService?.areFilterCompsDifferent(t,e)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(t){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(t);return}this.advancedFilterService.setModel(t??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(t,e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,t)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(t,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(t,e)}getColumnFilterInstance(t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(t)??Promise.resolve(void 0)}warnAdvancedFilters(){$("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(t){this.advancedFilterService?.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(t=>this.setAdvancedFilterModel(t)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(t){return this.columnFilterService?.getColumnFilterModel(t)}setColumnFilterModel(t,e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(t,e)??Promise.resolve()}},U0e=class extends kt{constructor(t,e){super('<div class="ag-filter"></div>'),this.column=t,this.source=e,this.filterWrapper=null}wireBeans(t){this.filterManager=t.filterManager,this.columnModel=t.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Xs.resolve()}afterGuiAttached(t){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiAttached?.(t)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiDetached?.()})}createFilter(t){let{column:e,source:n}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(e)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let r=i.getGui();if(ne(r)||$(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),t){let s={type:"filterOpened",column:e,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(s)}})}onFilterDestroyed(t){(t.source==="api"||t.source==="paramsUpdated")&&t.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(wr(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},HK="ag-resizer-wrapper",j0e=`<div class="${HK}">
        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,W0e=class extends q{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}wireBeans(t){this.popupService=t.popupService,this.resizeObserverService=t.resizeObserverService,this.dragService=t.dragService}center(){let{clientHeight:t,clientWidth:e}=this.offsetParent,n=e/2-this.getWidth()/2,i=t/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:e,minWidth:n,width:i,minHeight:r,height:s,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=va(this.element);if(u){let d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){let p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=r||l,this.minWidth=n||c,i&&this.setWidth(i),s&&this.setHeight(s),(!i||!s)&&this.refreshSize(),t)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&e){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){let p=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;let n=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{let i=!!t[e],r=this.getResizerElement(e),s={dragStartPixels:0,eElement:r,onDragStart:o=>this.onResizeStart(o,e),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,e)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(s),this.resizeListeners.push(s),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){let{popup:e}=this.config,n=this.element,i=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)ZC(n,t),t=_K(n),i=!0;else if(t=Math.max(this.minHeight,t),this.positioned){let r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):e?ZC(n,t):(n.style.height=`${t}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){let{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=t?this.position.y:i.top,o=t?0:r.top,a=0;if(e){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+o-s-a}getWidth(){return this.element.offsetWidth}setWidth(t){let e=this.element,{popup:n}=this.config,i=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)ma(e,t),t=OT(e),i=!0;else if(this.positioned){t=Math.max(this.minWidth,t);let{clientWidth:r}=this.offsetParent,s=n?this.position.x:this.element.getBoundingClientRect().left;r&&t+s>r&&(t=r-s)}this.getWidth()!==t&&(i?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?ma(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;let e=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){let{e,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:s}=t,o=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!n,!!r,o)?0:o,c=this.shouldSkipY(e,!!i,s,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(t,e,n,i){let r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&s.left>=t.clientX||s.right<=t.clientX&&s.right<=o.right;return l?!0:(e?l=i<0&&t.clientX>a+s.left||i>0&&t.clientX<a+s.left:n?l=i<0&&t.clientX>o.right||i>0&&t.clientX<a+s.left:l=i<0&&t.clientX>o.right||i>0&&t.clientX<o.right,l)}shouldSkipY(t,e,n=0,i){let r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&s.top>=t.clientY||s.bottom<=t.clientY&&s.bottom<=o.bottom;return l?!0:(e?l=i<0&&t.clientY>a+s.top+n||i>0&&t.clientY<a+s.top:l=i<0&&t.clientY>o.bottom||i>0&&t.clientY<o.bottom,l)}createResizeMap(){let t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[data-ref=eTopLeftResizer]")},top:{element:t.querySelector("[data-ref=eTopResizer]")},topRight:{element:t.querySelector("[data-ref=eTopRightResizer]")},right:{element:t.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:t.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:t.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let t=this.element;if(!t)return;let n=new DOMParser().parseFromString(j0e,"text/html").body;t.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let t=this.element.querySelector(`.${HK}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let t=this.getSiblings()||[],e=0,n=0;for(let i=0;i<t.length;i++){let r=t[i],s=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(s){let l=window.getComputedStyle(r);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=r.offsetHeight,a=r.offsetWidth;e+=o,n+=a}return{height:e,width:n}}applySizeToSiblings(t){let e=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let r=n[i];r!==e&&(t?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=n[i+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;let{popup:e,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:s,isLeft:o}=this.currentResizer,a=r||o,l=s||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e:t,isLeft:o,isTop:i}),d=this.position.x,h=this.position.y,p=0,g=0;if(a&&c){let m=o?-1:1,v=this.getWidth(),C=v+c*m,b=!1;o&&(p=v-C,(d+p<=0||C<=this.minWidth)&&(b=!0,p=0)),b||this.setWidth(C)}if(l&&u){let m=i?-1:1,v=this.getHeight(),C=v+u*m,b=!1;i?(g=v-C,(h+g<=0||C<=this.minHeight)&&(b=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(b=!0),b||this.setHeight(C)}this.updateDragStartPosition(t.clientX,t.clientY),((e||n)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;let{x:e,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:r,movementY:s}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(e+r,n+s),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},UK=class jK extends q{constructor(e,n={}){super(),this.eFocusableElement=e,this.callbacks=n,this.callbacks=W({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())}},n)}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.eFocusableElement.classList.add(jK.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:n=>{if(!(n.defaultPrevented||Vu(n))){if(this.callbacks.shouldStopEventPropagation(n)){em(n);return}n.key===G.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};UK.FOCUS_MANAGED_CLASS="ag-focus-managed";var Kh=UK,WK={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function DL(t,e){return BT(t)?(t.debounceMs!=null&&$("debounceMs is ignored when apply button is present"),0):t.debounceMs!=null?t.debounceMs:e}function BT(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0}var z0e=class extends kt{constructor(t){super(),this.filterNameKey=t,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=ve,this.buttonListeners=[]}wireBeans(t){this.rowModel=t.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Kh(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new W0e(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(t){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(t){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),t),e=this.getGui(),e&&e.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(t){this.setParams(t),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(t){this.providedFilterParams=t,this.applyActive=BT(t),this.resetButtonsPanel()}updateParams(t){this.providedFilterParams=t,this.applyActive=BT(t),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:t}=this.providedFilterParams,e=t&&t.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(wr(this.eButtonsPanel),this.buttonListeners.forEach(r=>r()),this.buttonListeners=[]):e&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!e){this.eButtonsPanel&&Io(this.eButtonsPanel);return}let n=document.createDocumentFragment(),i=r=>{let s,o;switch(r){case"apply":s=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":s=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":s=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":s=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:$("Unknown button type specified");return}let l=nm(`<button
                    type="${r==="apply"?"submit":"button"}"
                    data-ref="${r}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${s}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(l,{click:o})),n.append(l)};t.forEach(r=>i(r)),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let t=DL(this.providedFilterParams,this.getDefaultDebounceMs()),e=Kr(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=()=>{this.debouncePending=!0,e()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(t){return(t!=null?this.setModelIntoUi(t):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(t){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(t)})}handleCancelEnd(t){this.providedFilterParams.closeOnApply&&this.close(t)}resetUiToActiveModel(t,e){let n=()=>{this.onUiChanged(!1,"prevent"),e?.()};t!=null?this.setModelIntoUi(t).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(t="api"){let e=this.getModelFromUi();if(!this.isModelValid(e))return!1;let n=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(n,e)}isModelValid(t){return!0}onFormSubmit(t){t.preventDefault()}onBtApply(t=!1,e=!1,n){n&&n.preventDefault(),this.applyModel(e?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:e,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!t&&!e&&this.close(n)}onNewRowsLoaded(){}close(t){if(!this.hidePopup)return;let e=t,n=e&&e.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:e}),this.hidePopup(i),this.hidePopup=null}onUiChanged(t=!1,e){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&sw(i,!n)}t&&!e||e==="immediately"?this.onBtApply(t):(!this.applyActive&&!e||e==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(t?.container)}refreshFilterResizer(t){if(!this.positionableFeature||t==="toolPanel")return;let e=t==="floatingFilter"||t==="columnFilter",{positionableFeature:n,gos:i}=this;e?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(t){return this.providedFilterParams=t,!0}destroy(){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(t){return this.localeService.getLocaleTextFunc()(t,WK[t])}getCellValue(t){return this.providedFilterParams.getValue(t)}getPositionableElement(){return this.eFilterBody}},q0e=class extends bL{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)}},K0e=class extends kt{constructor(t="default",e=!1){super(`<div class="ag-list ag-${t}-list" role="listbox"></div>`),this.cssIdentifier=t,this.unFocusable=e,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let t=this.getGui();this.addManagedElementListeners(t,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(t,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(t){let e=t.key;switch(e){case G.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case G.DOWN:case G.UP:t.preventDefault(),this.navigate(e);break;case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:t.preventDefault(),this.navigateToPage(e);break}}navigate(t){let e=t===G.DOWN,n;if(!this.highlightedEl)n=this.itemEls[e?0:this.itemEls.length-1];else{let r=this.itemEls.indexOf(this.highlightedEl)+(e?1:-1);r=Math.min(Math.max(r,0),this.itemEls.length-1),n=this.itemEls[r]}this.highlightItem(n)}navigateToPage(t){if(!this.highlightedEl||this.itemEls.length===0)return;let e=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/i),s=-1;t===G.PAGE_HOME?s=0:t===G.PAGE_END?s=n:t===G.PAGE_DOWN?s=Math.min(e+r,n):t===G.PAGE_UP&&(s=Math.max(e-r,0)),s!==-1&&this.highlightItem(this.itemEls[s])}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){let{value:e,text:n}=t,i=n||e;return this.options.push({value:e,text:i}),this.renderOption(e,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(t=>{Io(t)}),this.itemEls=[]}updateIndices(){let t=this.getGui().querySelectorAll(".ag-list-item");t.forEach((e,n)=>{Rwe(e,n+1),Twe(e,t.length)})}renderOption(t,e){let n=this.gos.getDocument(),i=n.createElement("div");bs(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let r=n.createElement("span");i.appendChild(r),r.textContent=e,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:s=>{s.preventDefault(),s.stopPropagation(),this.setValue(t)}}),this.createManagedBean(new sm({getTooltipValue:()=>e,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(i)}setValue(t,e){if(this.value===t)return this.fireItemSelected(),this;if(t==null)return this.reset(e),this;let n=this.options.findIndex(i=>i.value===t);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),e||this.fireChangeEvent()}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let t=this.options.findIndex(e=>e.value===this.value);t!==-1&&this.highlightItem(this.itemEls[t])}reset(t){this.value=null,this.displayValue=null,this.clearHighlighted(),t||this.fireChangeEvent()}highlightItem(t){if(!va(t))return;this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(this.activeClass),MT(this.highlightedEl,!0);let e=this.getGui(),{scrollTop:n,clientHeight:i}=e,{offsetTop:r,offsetHeight:s}=t;(r+s>n+i||r<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!va(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),MT(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Y0e=class extends OK{constructor(t){if(super(t,t?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,t?.agComponents||[],t?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ve,this.eWrapper=ve,this.eDisplayField=ve,this.eIcon=ve,this.ariaRole=t?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;let{pickerGap:e,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:s}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),r!=null&&this.setPickerMinWidth(r),s!=null&&this.setPickerMaxWidth(s)}wireBeans(t){this.popupService=t.popupService}postConstruct(){super.postConstruct(),this.setupAria();let t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);let e=this.getAriaElement();this.addManagedElementListeners(e,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let r=$s(n,this.gos);r&&this.eIcon.appendChild(r)}i!=null&&this.setInputWidth(i)}setupAria(){let t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),PT(t,!1),this.ariaRole&&bs(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){let e=this.getFocusableElement();if(e!==this.eWrapper&&t?.target===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case G.UP:case G.DOWN:case G.ENTER:case G.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case G.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let t=this.gos.getDocument(),e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:r,modalPicker:s=!0}=this.config,o={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{let p=this.gos.getActiveDomElement(),g=!p||p===t.body;this.beforeHidePicker(),g&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(i,r)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:d}=this;d?(c&&(e.style.minWidth=c),e.style.width=CL(OT(this.eWrapper)),u&&(e.style.maxWidth=u)):VT(e,u??OT(this.eWrapper));let h=l??`${yL(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",h),e.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:t}=this.config,{pickerGap:e}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;let e=this.getAriaElement();PT(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){this.pickerComponent?.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(t){return VT(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}},TL=class extends Y0e{constructor(t){super(W({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},t))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:t,value:e,placeholder:n}=this.config;t!=null&&this.addOptions(t),e!=null&&this.setValue(e,!0),n&&e==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new K0e("select",!0)),this.listComponent.setParentComponent(this);let t=this.listComponent.getAriaElement(),e=`ag-select-list-${this.listComponent.getCompId()}`;t.setAttribute("id",e),Owe(this.getAriaElement(),t),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(t){let{key:e}=t;switch(e===G.TAB&&this.hidePicker(),e){case G.ENTER:case G.UP:case G.DOWN:case G.PAGE_UP:case G.PAGE_DOWN:case G.PAGE_HOME:case G.PAGE_END:t.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(t):super.onKeyDown(t);break;case G.ESCAPE:super.onKeyDown(t);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){return this.listComponent.addOption(t),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(t,e,n){if(this.value===t||!this.listComponent)return this;if(n||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue())return this;let r=this.listComponent.getDisplayValue();return r==null&&this.config.placeholder&&(r=this.config.placeholder),this.eDisplayField.textContent=r,this.setTooltip({newTooltipText:r??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(t,e)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},Q0e={selector:"AG-SELECT",component:TL},zK=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(t=>{if(typeof t=="string")return;let e=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(r=>t[r]!=null)?!0:($(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!e.every(n)){this.filterOptions=this.filterOptions.filter(i=>i===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){let e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:$("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else $("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(t){return this.customFilterOptions[t]}},qK=class extends z0e{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){let e=this.optionsFactory.getCustomOption(t);if(e){let{numberOfInputs:i}=e;return i??1}return t&&["empty","notBlank","blank"].indexOf(t)>=0?0:t==="inRange"?2:1}onFloatingFilterChanged(t,e){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(e),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((e,n)=>{n===0?e.setValue(t,!0):e.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(t,e){if(!t&&!e)return!0;if(!t&&e||t&&!e)return!1;let n=!t.operator,i=!e.operator;if(!n&&i||n&&!i)return!1;let s;if(n){let o=t,a=e;s=this.areSimpleModelsEqual(o,a)}else{let o=t,a=e;s=o.operator===a.operator&&zh(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return s}shouldRefresh(t){let e=this.getModel(),n=e?e.conditions??[e]:null,i=t.filterOptions?.map(s=>typeof s=="string"?s:s.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(s=>i.find(o=>o===s.type)!==void 0))||typeof t.maxNumConditions=="number"&&n&&n.length>t.maxNumConditions)}refresh(t){return!this.shouldRefresh(t)||!super.refresh(t)?!1:(this.setParams(t),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(t){if(t.operator){let n=t,i=n.conditions;i==null&&(i=[],$("Filter model is missing 'conditions'"));let r=this.validateAndUpdateConditions(i),s=this.getNumConditions();if(r<s)this.removeConditionsAndOperators(r);else if(r>s)for(let a=s;a<r;a++)this.createJoinOperatorPanel(),this.createOption();let o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Xs.resolve()}validateAndUpdateConditions(t){let e=t.length;return e>this.maxNumConditions&&(t.splice(this.maxNumConditions),$('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),e=this.maxNumConditions),e}doesFilterPass(t){let e=this.getModel();if(e==null)return!0;let{operator:n}=e,i=[];if(n){let s=e;i.push(...s.conditions??[])}else i.push(e);return i[n&&n==="OR"?"some":"every"](s=>this.individualConditionPasses(t,s))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new zK,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){this.maxNumConditions=t.maxNumConditions??2,this.maxNumConditions<1&&($('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=t.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&($('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&($('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let t=this.createManagedBean(new TL);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());let e=this.createValueElement();this.eConditionBodies.push(e),this.eFilterBody.appendChild(e),this.putOptionsIntoDropdown(t),this.resetType(t);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){let t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");let e=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);let i=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(e,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(e.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(t,e,n){let i=this.createManagedBean(new q0e);return t.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),e.appendChild(i.getGui()),i}getDefaultJoinOperator(t){return t==="AND"||t==="OR"?t:"AND"}createFilterListOptions(){let t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(e=>{t.addOption(e)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){let{displayKey:e}=t,n=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(e)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){let t=-1,e=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?t=n:e=!1;if(this.shouldAddNewConditionAtEnd(e))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(t<n){this.removeConditionsAndOperators(n+1);let i=t+1,r=n-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(t,e){this.eTypes.forEach((i,r)=>{let s=this.isConditionDisabled(r,t);i.setDisabled(s||this.filterListOptions.length<=1),r===1&&(sw(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((i,r)=>{Tn(i,this.isConditionBodyVisible(r))});let n=(e??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,r,s,o)=>{this.setElementDisplayed(i,r<o),this.setElementDisabled(i,this.isConditionDisabled(s,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,e){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,e),this.removeElements(this.eConditionBodies,t,e),this.removeValueElements(t,e);let n=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,n,e),this.removeComponents(this.eJoinOperatorsAnd,n,e),this.removeComponents(this.eJoinOperatorsOr,n,e)}removeElements(t,e,n){this.removeItems(t,e,n).forEach(r=>Io(r))}removeComponents(t,e,n){this.removeItems(t,e,n).forEach(r=>{Io(r.getGui()),this.destroyBean(r)})}removeItems(t,e,n){return n==null?t.splice(e):t.splice(e,n)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let e=this.getInputs(0)[0];if(!e)return;e instanceof Bh&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let t=this.getModel();this.resetUiToActiveModel(t);let e=-1,n=-1,i=!1,r=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))e===-1&&(e=o,n=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<e;(a||l)&&(this.removeConditionsAndOperators(o,1),i=!0,l&&n--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(t,e){let n=this.translate(t);if(hL(this.filterPlaceholder)){let i=this.filterPlaceholder,r=this.eTypes[e].getValue(),s=this.translate(r);n=i({filterOptionKey:r,filterOption:s,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let t=this.localeService.getLocaleTextFunc();this.forEachInput((e,n,i,r)=>{if(!(e instanceof Bh))return;let s=n===0&&r>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",o=n===0&&r>1?t("ariaFilterFromValue","Filter from value"):n===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");e.setInputPlaceholder(this.getPlaceholderText(s,i)),e.setInputAriaLabel(o)})}setElementValue(t,e,n){t instanceof Bh&&t.setValue(e!=null?String(e):null,!0)}setElementDisplayed(t,e){t instanceof kt&&Tn(t.getGui(),e)}setElementDisabled(t,e){t instanceof kt&&sw(t.getGui(),e)}attachElementOnChange(t,e){t instanceof Bh&&t.onValueChange(e)}forEachInput(t){this.getConditionTypes().forEach((e,n)=>{this.forEachPositionTypeInput(n,e,t)})}forEachPositionInput(t,e){let n=this.getConditionType(t);this.forEachPositionTypeInput(t,n,e)}forEachPositionTypeInput(t,e,n){let i=this.getNumberOfInputs(e),r=this.getInputs(t);for(let s=0;s<r.length;s++){let o=r[s];o!=null&&n(o,s,t,i)}}isConditionDisabled(t,e){return this.isReadOnly()?!0:t===0?!1:t>e+1}isConditionBodyVisible(t){let e=this.getConditionType(t);return this.getNumberOfInputs(e)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)==="empty"||this.getValues(t).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let t=[];for(let e=0;e<this.getNumConditions();e++)this.isConditionUiComplete(e)&&t.push(this.createCondition(e));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinOperatorsAnd.forEach((e,n)=>this.resetJoinOperatorAnd(e,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((e,n)=>this.resetJoinOperatorOr(e,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),Xs.resolve()}resetType(t){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,e,n){this.resetJoinOperator(t,e,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(t,e,n){this.resetJoinOperator(t,e,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(t,e,n,i,r){this.updateJoinOperatorDisabled(t.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(i),e)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,e)=>this.updateJoinOperatorDisabled(t,e)),this.eJoinOperatorsOr.forEach((t,e)=>this.updateJoinOperatorDisabled(t,e))}updateJoinOperatorDisabled(t,e){t.setDisabled(this.isReadOnly()||e>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,e){let n=this.mapValuesFromModel(t);this.forEachInput((i,r,s)=>{s===e&&this.setElementValue(i,n[r]!=null?n[r]:null)})}setValueFromFloatingFilter(t){this.forEachInput((e,n,i)=>{this.setElementValue(e,n===0&&i===0?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,e){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(e,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(t,e){let n=this.getCellValue(t.node),i=this.mapValuesFromModel(e),r=this.optionsFactory.getCustomOption(e.type),s=this.evaluateCustomFilter(r,i,n);return s??(n==null?this.evaluateNullValue(e.type):this.evaluateNonNullValue(i,n,e,t))}evaluateCustomFilter(t,e,n){if(t==null)return;let{predicate:i}=t;if(i!=null&&!e.some(r=>r==null))return i(e,n)}isBlank(t){return t==null||typeof t=="string"&&t.trim().length===0}hasInvalidInputs(){return!1}},KK=class extends qK{setParams(t){super.setParams(t),this.scalarFilterParams=t}evaluateNullValue(t){switch(t){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(t,e,n){let i=this.comparator(),r=t[0]!=null?i(t[0],e):0;switch(n.type){case"equals":return r===0;case"notEqual":return r!==0;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{let s=i(t[1],e);return this.scalarFilterParams.inRangeInclusive?r>=0&&s<=0:r>0&&s<0}case"blank":return this.isBlank(e);case"notBlank":return!this.isBlank(e);default:return $('Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},X0e=65,$0e=67,Z0e=86,J0e=68,eSe=90,tSe=89;function YK(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function rL(t,e,n,i,r){let s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;let o=t.addGridCommonParams({event:e,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(s&&s(o))}function nSe(t,e,n,i){let r=i.getDefinition(),s=r&&r.suppressHeaderKeyboardEvent;if(!ne(s))return!1;let o=t.addGridCommonParams({colDef:r,column:i,headerRowIndex:n,event:e});return!!s(o)}function iSe(t){let{keyCode:e}=t,n;switch(e){case X0e:n=G.A;break;case $0e:n=G.C;break;case Z0e:n=G.V;break;case J0e:n=G.D;break;case eSe:n=G.Z;break;case tSe:n=G.Y;break;default:n=t.code}return n}function rSe(t,e=!1){return t===G.DELETE?!0:!e&&t===G.BACKSPACE?CK():!1}var Yh=class extends Bh{constructor(t,e="ag-text-field",n="text"){super(t,e,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){return this.eInput.value!==t&&(this.eInput.value=ne(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){let t=new RegExp(`[${this.config.allowedCharPattern}]`),e=n=>{YK(n)&&n.key&&!t.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:e,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(r=>!t.test(r))&&n.preventDefault()}})}},HT={selector:"AG-INPUT-TEXT-FIELD",component:Yh},RL=class extends Yh{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let r=parseFloat(this.eInput.value),s=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:t,min:e,max:n,step:i}=this.config;typeof t=="number"&&this.setPrecision(t),typeof e=="number"&&this.setMin(e),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}normalizeValue(t){if(t==="")return"";this.precision!=null&&(t=this.adjustPrecision(t));let e=parseFloat(t);return this.min!=null&&e<this.min?t=this.min.toString():this.max!=null&&e>this.max&&(t=this.max.toString()),t}adjustPrecision(t,e){if(this.precision==null)return t;if(e){let i=parseFloat(t).toFixed(this.precision);return parseFloat(i).toString()}let n=String(t).split(".");if(n.length>1){if(n[1].length<=this.precision)return t;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(t){return this.min===t?this:(this.min=t,dc(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,dc(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,dc(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(n=>super.setValue(n,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,n){if(ne(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return t(n);if(!i){n=this.adjustPrecision(n);let r=this.normalizeValue(n);i=n!=r}if(i)return e(n)}return t(n)}getValue(){if(!this.eInput.validity.valid)return;let t=this.eInput.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}},sSe={selector:"AG-INPUT-NUMBER-FIELD",component:RL},QK=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],IL=class{constructor(t,e,n){this.localeService=t,this.optionsFactory=e,this.valueFormatter=n}getModelAsString(t){if(!t)return null;let e=t.operator!=null,n=this.localeService.getLocaleTextFunc();if(e){let i=t,s=(i.conditions??[]).map(a=>this.getModelAsString(a)),o=i.operator==="AND"?"andCondition":"orCondition";return s.join(` ${n(o,WK[o])} `)}else{if(t.type==="blank"||t.type==="notBlank")return n(t.type,t.type);{let i=t,r=this.optionsFactory.getCustomOption(i.type),{displayKey:s,displayName:o,numberOfInputs:a}=r||{};return s&&o&&a===0?(n(s,o),o):this.conditionToString(i,r)}}}updateParams(t){this.optionsFactory=t.optionsFactory}formatValue(t){return this.valueFormatter?this.valueFormatter(t??null)??"":String(t)}},XK=class extends IL{conditionToString(t,e){let{numberOfInputs:n}=e||{};return t.type=="inRange"||n===2?`${this.formatValue(t.filter)}-${this.formatValue(t.filterTo)}`:t.filter!=null?this.formatValue(t.filter):`${t.type}`}};function sL(t){let{allowedCharPattern:e}=t??{};return e??null}var oSe=class extends KK{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(t){return this.numberFilterParams.allowedCharPattern!==t.allowedCharPattern?!1:super.refresh(t)}mapValuesFromModel(t){let{filter:e,filterTo:n,type:i}=t||{};return[this.processValue(e),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(t,e)=>t===e?0:t<e?1:-1}setParams(t){this.numberFilterParams=t,super.setParams(t),this.filterModelFormatter=new XK(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return QK}setElementValue(t,e,n){let i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(e??null):e;super.setElementValue(t,i)}createValueElement(){let t=sL(this.numberFilterParams),e=document.createElement("div");return e.classList.add("ag-filter-body"),bs(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from",t),this.createFromToElement(e,this.eValuesTo,"to",t),e}createFromToElement(t,e,n,i){let r=this.createManagedBean(i?new Yh({allowedCharPattern:i}):new RL);r.addCssClass(`ag-filter-${n}`),r.addCssClass("ag-filter-filter"),e.push(r),t.appendChild(r.getGui())}removeValueElements(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)}getValues(t){let e=[];return this.forEachPositionInput(t,(n,i,r,s)=>{i<s&&e.push(this.processValue(this.stringToFloat(n.getValue())))}),e}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getFilterType(){return"number"}processValue(t){return t==null||isNaN(t)?null:t}stringToFloat(t){if(typeof t=="number")return t;let e=Hh(t);return e!=null&&e.trim()===""&&(e=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(e):e==null||e.trim()==="-"?null:parseFloat(e)}createCondition(t){let e=this.getConditionType(t),n={filterType:this.getFilterType(),type:e},i=this.getValues(t);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getModelAsString(t){return this.filterModelFormatter.getModelAsString(t)??""}hasInvalidInputs(){let t=!1;return this.forEachInput(e=>{if(!e.getInputElement().validity.valid){t=!0;return}}),t}},$K=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],ZK=class extends IL{conditionToString(t,e){let{numberOfInputs:n}=e||{};return t.type=="inRange"||n===2?`${t.filter}-${t.filterTo}`:t.filter!=null?`${t.filter}`:`${t.type}`}};function JK(t){let e=t&&t.trim();return e===""?t:e}var aSe=class extends qK{constructor(){super("textFilter"),this.defaultFormatter=t=>t,this.defaultLowercaseFormatter=t=>t==null?null:t.toString().toLowerCase(),this.defaultMatcher=({filterOption:t,value:e,filterText:n})=>{if(n==null)return!1;switch(t){case"contains":return e.indexOf(n)>=0;case"notContains":return e.indexOf(n)<0;case"equals":return e===n;case"notEqual":return e!=n;case"startsWith":return e.indexOf(n)===0;case"endsWith":{let i=e.lastIndexOf(n);return i>=0&&i===e.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(t){this.textFilterParams=t,super.setParams(t),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new ZK(this.localeService,this.optionsFactory)}getTextMatcher(){let t=this.textFilterParams.textCustomComparator;return t?($("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:e,value:n,filterText:i})=>t(e,n,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(t){let e=this.getConditionType(t),n={filterType:this.getFilterType(),type:e},i=this.getValuesWithSideEffects(t,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getValues(t){return this.getValuesWithSideEffects(t,!1)}getValuesWithSideEffects(t,e){let n=[];return this.forEachPositionInput(t,(i,r,s,o)=>{if(r<o){let a=Hh(i.getValue());e&&this.textFilterParams.trimInput&&(a=JK(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return $K}createValueElement(){let t=document.createElement("div");return t.classList.add("ag-filter-body"),bs(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t}createFromToElement(t,e,n){let i=this.createManagedBean(new Yh);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),e.push(i),t.appendChild(i.getGui())}removeValueElements(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)}mapValuesFromModel(t){let{filter:e,filterTo:n,type:i}=t||{};return[e||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(t){return t?["notEqual","notContains","blank"].indexOf(t)>=0:!1}evaluateNonNullValue(t,e,n,i){let r=t.map(h=>this.formatter(h))||[],s=this.formatter(e),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return this.isBlank(e);if(n.type==="notBlank")return!this.isBlank(e);let d={api:o,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:s,textFormatter:u};return r.some(h=>this.matcher(Se(W({},d),{filterText:h})))}getModelAsString(t){return this.filterModelFormatter.getModelAsString(t)??""}};function e7(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=parseInt(t);return isNaN(e)?void 0:e}}function al(t,e=Number.MAX_VALUE){return n=>{let i=e7(n);if(!(i==null||i<t||i>e))return i}}function ew(t,e){return t.toString().padStart(e,"0")}function lSe(t,e){let n=[];for(let i=t;i<=e;i++)n.push(i);return n}function cSe(t,e,n){return typeof t!="number"?"":t.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function Fo(t,e=!0,n="-"){if(!t)return null;let i=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>ew(r,2)).join(n);return e&&(i+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>ew(r,2)).join(":")),i}var BN=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function tw(t,e="YYYY-MM-DD"){let n=ew(t.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>i[t.getMonth()],MMM:()=>i[t.getMonth()].slice(0,3),MM:()=>ew(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${BN(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${BN(t.getDate())}`,DD:()=>ew(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>r[t.getDay()],ddd:()=>r[t.getDay()].slice(0,3),dd:()=>r[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${BN(t.getDay())}`,d:()=>`${t.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return e.replace(o,a=>a in s?s[a]():a)}function Ss(t){if(!t)return null;let[e,n]=t.split(" ");if(!e)return null;let i=e.split("-").map(d=>parseInt(d,10));if(i.filter(d=>!isNaN(d)).length!==3)return null;let[r,s,o]=i,a=new Date(r,s-1,o);if(a.getFullYear()!==r||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var t7=class{constructor(t,e,n,i,r){this.alive=!0,this.context=t,this.eParent=i,e.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){t.destroyBean(a);return}this.dateComp=a,a&&(i.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t}setDisabled(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t}setDisplayed(t){Tn(this.eParent,t)}setInputPlaceholder(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)}setInputAriaLabel(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)}afterGuiAttached(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)}updateParams(t){let e=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(t)!==null&&(e=!0),!e&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)!==null&&$("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)}},n7=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],i7=class extends IL{constructor(t,e,n){super(e,n),this.dateFilterParams=t}conditionToString(t,e){let{type:n}=t,{numberOfInputs:i}=e||{},r=n=="inRange"||i===2,s=Ss(t.dateFrom),o=Ss(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){let l=s!==null?tw(s,a):"null",c=o!==null?tw(o,a):"null";return`${l}-${c}`}return s!=null?tw(s,a):`${n}`}updateParams(t){super.updateParams(t),this.dateFilterParams=t.dateFilterParams}},N9=1e3,L9=1/0,uSe=class extends KK{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=N9,this.maxValidYear=L9,this.minValidDate=null,this.maxValidDate=null}wireBeans(t){super.wireBeans(t),this.context=t.context,this.userComponentFactory=t.userComponentFactory}afterGuiAttached(t){super.afterGuiAttached(t),this.dateConditionFromComps[0].afterGuiAttached(t)}mapValuesFromModel(t){let{dateFrom:e,dateTo:n,type:i}=t||{};return[e&&Ss(e)||null,n&&Ss(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(t,e){let n=e;return e==null||n<t?-1:n>t?1:0}setParams(t){this.dateFilterParams=t,super.setParams(t);let e=(n,i)=>{if(t[n]!=null)if(isNaN(t[n]))$(`DateFilter ${n} is not a number`);else return t[n]==null?i:Number(t[n]);return i};this.minValidYear=e("minValidYear",N9),this.maxValidYear=e("maxValidYear",L9),this.minValidYear>this.maxValidYear&&$("DateFilter minValidYear should be <= maxValidYear"),t.minValidDate?this.minValidDate=t.minValidDate instanceof Date?t.minValidDate:Ss(t.minValidDate):this.minValidDate=null,t.maxValidDate?this.maxValidDate=t.maxValidDate instanceof Date?t.maxValidDate:Ss(t.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&$("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new i7(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(t){let e=new t7(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},t);return this.addDestroyFunc(()=>e.destroy()),e}setElementValue(t,e){t.setDate(e)}setElementDisplayed(t,e){t.setDisplayed(e)}setElementDisabled(t,e){t.setDisabled(e)}getDefaultFilterOptions(){return n7}createValueElement(){let e=this.gos.getDocument().createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(t,e,n,i){let s=this.gos.getDocument().createElement("div");s.classList.add(`ag-filter-${i}`),s.classList.add(`ag-filter-date-${i}`),e.push(s),t.appendChild(s),n.push(this.createDateCompWrapper(s))}removeValueElements(t,e){this.removeDateComps(this.dateConditionFromComps,t,e),this.removeDateComps(this.dateConditionToComps,t,e),this.removeItems(this.eConditionPanelsFrom,t,e),this.removeItems(this.eConditionPanelsTo,t,e)}removeDateComps(t,e,n){this.removeItems(t,e,n).forEach(r=>r.destroy())}isValidDateValue(t){if(t===null)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(t){if(!super.isConditionUiComplete(t))return!1;let e=!0;return this.forEachInput((n,i,r,s)=>{r!==t||!e||i>=s||(e=e&&this.isValidDateValue(n.getDate()))}),e}areSimpleModelsEqual(t,e){return t.dateFrom===e.dateFrom&&t.dateTo===e.dateTo&&t.type===e.type}getFilterType(){return"date"}createCondition(t){let e=this.getConditionType(t),n={},i=this.getValues(t);return i.length>0&&(n.dateFrom=Fo(i[0])),i.length>1&&(n.dateTo=Fo(i[1])),W({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:e},n)}resetPlaceholder(){let t=this.localeService.getLocaleTextFunc(),e=this.translate("dateFormatOoo"),n=t("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(e),i.setInputAriaLabel(n)})}getInputs(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]}getValues(t){let e=[];return this.forEachPositionInput(t,(n,i,r,s)=>{i<s&&e.push(n.getDate())}),e}translate(t){return t==="lessThan"?super.translate("before"):t==="greaterThan"?super.translate("after"):super.translate(t)}getModelAsString(t){return this.filterModelFormatter.getModelAsString(t)??""}},xL=class extends q{constructor(t,e,n,i){super(),this.columnOrGroup=t,this.columnOrGroup=t,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Rt(this.colsSpanning):this.columnOrGroup}postConstruct(){let t=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:t}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}setLeftFirstTime(){let t=this.beans.gos.get("suppressColumnMoveAnimation"),e=ne(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let t=this.getColumnOrGroup(),e=t.getLeft(),n=t.getOldLeft(),i=this.modifyLeftForPrintLayout(t,n),r=this.modifyLeftForPrintLayout(t,e);this.setLeft(i),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){let t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){if(!this.beans.gos.isDomLayout("print")||t.getPinned()==="left")return e;let i=this.beans.visibleColsService.getColsLeftWidth();if(t.getPinned()==="right"){let r=this.beans.visibleColsService.getBodyContainerWidth();return i+r+e}return i+e}setLeft(t){if(ne(t)&&(this.eCell.style.left=`${t}px`),si(this.columnOrGroup)){let e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&Awe(this.ariaEl,e.length)}}},dSe="ag-column-first",hSe="ag-column-last";function r7(t,e,n,i){return vt(t)?[]:pSe(t.headerClass,t,e,n,i)}function s7(t,e,n){t.addOrRemoveCssClass(dSe,n.isColAtEdge(e,"first")),t.addOrRemoveCssClass(hSe,n.isColAtEdge(e,"last"))}function fSe(t,e,n,i){return e.addGridCommonParams({colDef:t,column:n,columnGroup:i})}function pSe(t,e,n,i,r){if(vt(t))return[];let s;if(typeof t=="function"){let o=fSe(e,n,i,r);s=t(o)}else s=t;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}var gSe=0,o7=class a7 extends q{constructor(e,n,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=n,this.instanceId=e.getUniqueId()+"-"+gSe++}wireBeans(e){this.pinnedWidthService=e.pinnedWidthService,this.focusService=e.focusService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.dragAndDropService=e.dragAndDropService,this.menuService=e.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){let{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return nSe(this.gos,e,n,i)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){let e={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:e,column:n,beans:i}=this;s7(e,n,i.visibleColsService)}refreshAriaColIndex(){let{beans:e,column:n}=this,i=e.visibleColsService.getAriaColIndex(n);mK(this.eGui,i)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){let n=this.gos.getActiveDomElement(),i=e.key===G.LEFT||e.key===G.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),n!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i))return;let r=e.key===G.LEFT!==this.gos.get("enableRtl"),s=BK[r?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(o,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}getViewportAdjustedResizeDiff(e){let n=this.getResizeDiff(e);if(this.column.getPinned()){let r=this.pinnedWidthService.getPinnedLeftWidth(),s=this.pinnedWidthService.getPinnedRightWidth(),o=aw(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+s+n>o)if(o>r+s)n=o-r-s;else return 0}return n}getResizeDiff(e){let n=e.key===G.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),r=this.gos.get("enableRtl");return i&&r!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let n=this.getWrapperHasFocus();switch(e.key){case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:n&&e.preventDefault()}}addDomData(){let e=a7.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,n,i){let r=e??n;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault();let s=Hu(i)?i:void 0;this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,e,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,n){let i={type:e,column:n};this.eventService.dispatchEvent(i)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};o7.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var UT=o7,FL=class extends q{wireBeans(t){this.columnHoverService=t.columnHoverService}constructor(t,e){super(),this.columns=t,this.element=e}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},mSe=class extends UT{constructor(t,e,n){super(t,e,n),this.iconCreated=!1,this.column=t}setComp(t,e,n,i){this.comp=t,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){let t=this.column.getColDef(),e=!!t.filter,n=!!t.floatingFilter;this.active=e&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let t=$s("filter",this.gos,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(){this.createManagedBean(new Kh(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let t=this.localeService.getLocaleTextFunc();tm(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){if(this.gos.getActiveDomElement()===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),i.focus();return}let r=this.findNextColumnWithFloatingFilter(t.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){let e=this.beans.visibleColsService,n=this.column;do if(n=t?e.getColBefore(n):e.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();switch(t.key){case G.UP:case G.DOWN:e||t.preventDefault();case G.LEFT:case G.RIGHT:if(e)return;t.stopPropagation();case G.ENTER:e&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case G.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;let n=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),i=!!t.relatedTarget&&Jg(t.relatedTarget,"ag-floating-filter");if(n&&i&&t.target===this.eGui){let s=this.lastFocusEvent,o=!!(s&&s.key===G.TAB);if(s&&o){let a=s.shiftKey;this.focusService.focusInto(this.eGui,a)}}let r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(){this.createManagedBean(new FL([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(){let t=new xL(this.column,this.eGui,this.beans);this.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let t=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){let t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:t}=this.beans,e=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let i=this.comp.getFloatingFilterComp();i&&i.then(r=>{if(r){let s=t?.getCurrentFloatingFilterParentModel(this.column),o=n?Se(W({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;r.onParentModelChanged(s,o)}})};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:e}),t?.isFilterActive(this.column)&&e(null)}setupWidth(){let t=()=>{let e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let t=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){let t=this.active;this.setupActive();let e=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!n?this.updateCompDetails(n,e):i.then(r=>{!r||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(n,e):this.updateFloatingFilterParams(n)})}updateCompDetails(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(t){if(!t)return;let e=t.params;this.comp.getFloatingFilterComp()?.then(n=>{let i=!1;n?.refresh&&typeof n.refresh=="function"&&n.refresh(e)!==null&&(i=!0),!i&&n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(e)!==null&&$("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Xe="32.0.2";function vSe(t){return!!t.filterManager?.isColumnFilterPresent()||!!t.filterManager?.isAggregateFilterPresent()}function ySe(t,e,n){return t.filterManager?.getFilterInstance(e,n)}function CSe(t,e){return t.filterManager?.getColumnFilterInstance(e)??Promise.resolve(void 0)}function wSe(t,e){let n=t.columnModel.getColDefCol(e);if(n)return t.filterManager?.destroyFilter(n,"api")}function SSe(t,e){t.frameworkOverrides.wrapIncoming(()=>t.filterManager?.setFilterModel(e))}function bSe(t){return t.filterManager?.getFilterModel()??{}}function _Se(t,e){return t.filterManager?.getColumnFilterModel(e)??null}function ESe(t,e,n){return t.filterManager?.setColumnFilterModel(e,n)??Promise.resolve()}function DSe(t,e){let n=t.columnModel.getCol(e);if(!n){Pt(`column '${e}' not found`);return}t.menuService.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function TSe(t,e,n){if(e==null)return null;let i=null,{compName:r,jsComp:s,fwComp:o}=LK.getCompKeys(t,e,EL);return r?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:s==null&&o==null&&e.filter===!0&&(i=n()),i}var RSe=class extends q{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(t){this.valueService=t.valueService,this.columnModel=t.columnModel,this.rowModel=t.rowModel,this.userComponentFactory=t.userComponentFactory,this.rowRenderer=t.rowRenderer,this.dataTypeService=t.dataTypeService,this.filterManager=t.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=W({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(t,e="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:t,source:e});return}let n=[],i=this.getFilterModel();if(t){let r=new Set(Object.keys(t));this.allColumnFilters.forEach((s,o)=>{let a=t[o];n.push(this.setModelOnFilterWrapper(s.filterPromise,a)),r.delete(o)}),r.forEach(s=>{let o=this.columnModel.getColDefCol(s)||this.columnModel.getCol(s);if(!o){$("setFilterModel() - no column found for colId: "+s);return}if(!o.isFilterAllowed()){$("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}let a=this.getOrCreateFilterWrapper(o);if(!a){$("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,t[s]))})}else this.allColumnFilters.forEach(r=>{n.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Xs.all(n).then(()=>{let r=this.getFilterModel(),s=[];this.allColumnFilters.forEach((o,a)=>{let l=i?i[a]:null,c=r?r[a]:null;AT(l,c)||s.push(o.column)}),s.length>0&&this.filterManager?.onFilterChanged({columns:s,source:e})})}setModelOnFilterWrapper(t,e){return new Xs(n=>{t.then(i=>{typeof i.setModel!="function"&&($("filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(e)||Xs.resolve()).then(()=>n())})})}getFilterModel(){let t={};return this.allColumnFilters.forEach((e,n)=>{let i=this.getModelFromFilterWrapper(e);ne(i)&&(t[n]=i)}),t}getModelFromFilterWrapper(t){let{filter:e}=t;return e?typeof e.getModel!="function"?($("filter API missing getModel method, which is needed for getFilterModel"),null):e.getModel():this.getModelFromInitialState(t.column)}getModelFromInitialState(t){return this.initialFilterModel[t.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(t,e){return this.doColumnFiltersPass(t,e,!0)}updateActiveFilters(){let t=s=>s?s.isFilterActive?s.isFilterActive():($("Filter is missing isFilterActive() method"),!1):!1,e=!!this.gos.getGroupAggFiltering(),n=s=>{if(!s.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!s.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:e},i=[],r=[];return this.forEachColumnFilter((s,o)=>{t(s)&&(n(o.column)?i.push(s):r.push(s))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=r})}updateFilterFlagInColumns(t,e){return this.forEachColumnFilter((n,i)=>i.column.setFilterActive(n.isFilterActive(),t,e))}forEachColumnFilter(t){return Xs.all(Array.from(this.allColumnFilters.values()).map(e=>e.filterPromise.then(n=>t(n,e))))}doColumnFiltersPass(t,e,n){let{data:i,aggData:r}=t,s=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?r:i;for(let a=0;a<s.length;a++){let l=s[a];if(!(l==null||l===e)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(t){let e=()=>this.filterManager?.onFilterChanged(t);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}updateBeforeFilterChanged(t={}){let{filterInstance:e,additionalEventAttributes:n}=t;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(r=>{r&&r!==e&&r.onAnyFilterChanged&&r.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(t){this.forEachColumnFilter(e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(t,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(t){return({node:e})=>this.valueService.getValue(t,e,!0)}createGetValue(t){return(e,n)=>{let i=n?this.columnModel.getCol(n):t;return i?this.valueService.getValue(i,e,!0):void 0}}isFilterActive(t){let{filter:e}=this.cachedFilter(t)??{};return e?e.isFilterActive():this.getModelFromInitialState(t)!=null}getOrCreateFilterWrapper(t){if(!t.isFilterAllowed())return null;let e=this.cachedFilter(t);return e||(e=this.createFilterWrapper(t),this.setColumnFilterWrapper(t,e)),e}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t){let e;if(zr.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))e="agSetColumnFilter";else{let n=this.dataTypeService?.getBaseDataType(t);n==="number"?e="agNumberColumnFilter":n==="date"||n==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(t){let e;if(zr.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))e="agSetColumnFloatingFilter";else{let n=this.dataTypeService?.getBaseDataType(t);n==="number"?e="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(t,e){let n=this.getDefaultFilter(t),i=t.getColDef(),r,s=Se(W({},this.createFilterParams(t,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,t)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(r,t)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),o=this.userComponentFactory.getFilterDetails(i,s,n);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a?.then(l=>{r=l,e&&(e.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(t,e){return this.gos.addGridCommonParams({column:t,colDef:nK(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(t){let e={column:t,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(t,e);return e.filterPromise=n?.()??null,e.compDetails=i,e}onColumnsChanged(){let t=[];this.allColumnFilters.forEach((e,n)=>{let i;e.column.isPrimary()?i=this.columnModel.getColDefCol(n):i=this.columnModel.getCol(n),!(i&&i===e.column)&&(t.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(n))}),t.length>0?this.filterManager?.onFilterChanged({columns:t,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e)})}isFilterAllowed(t){if(!t.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(t.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(t,e){let n=l=>{let c=this.getOrCreateFilterWrapper(t)?.filterPromise;c?.then(u=>{l(JC(u))})},i=t.getColDef(),r=Se(W({},this.createFilterParams(t,i)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,t)())}),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,EL,r),o=TSe(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(t));o==null&&(o="agReadOnlyFloatingFilter");let a={column:t,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:n,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,o)}getCurrentFloatingFilterParentModel(t){return this.getModelFromFilterWrapper(this.cachedFilter(t)??{column:t})}destroyFilter(t,e="api"){let n=t.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,e),this.filterManager?.onFilterChanged({columns:[t],source:"api"}))}disposeColumnListener(t){let e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){t.filterPromise.then(n=>{this.destroyBean(n),t.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(t.column.getColId());let i={type:"filterDestroyed",source:e,column:t.column};this.eventService.dispatchEvent(i)})}filterModifiedCallbackFactory(t,e){return()=>{let n={type:"filterModified",column:e,filterInstance:t};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(t,e){return n=>{let i=n?.source??"columnFilter",r={filter:t,additionalEventAttributes:n,columns:[e],source:i};this.callOnFilterChangedOutsideRenderCycle(r)}}checkDestroyFilter(t){let e=this.allColumnFilters.get(t);if(!e)return;let n=e.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let r=n.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(n,"paramsUpdated");return}e.filterPromise.then(s=>{(s?.refresh?s.refresh(W(Se(W({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(s,n),filterChangedCallback:this.filterChangedCallbackFactory(s,n),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,a):!0}),r)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(t,e){let n=t.getColId();this.allColumnFilters.set(n,e),this.allColumnListeners.set(n,this.addManagedListeners(t,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(t,e){if(!e||!t)return!0;let{componentClass:n}=t,{componentClass:i}=e;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t,e){e&&this.getFilterInstanceImpl(t).then(n=>{let i=JC(n);e(i)})}getColumnFilterInstance(t){return new Promise(e=>{this.getFilterInstanceImpl(t).then(n=>{e(JC(n))})})}getFilterInstanceImpl(t){let e=this.columnModel.getColDefCol(t);return e?this.getOrCreateFilterWrapper(e)?.filterPromise??Xs.resolve(null):Xs.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:t,source:e})=>this.setFilterModel(t,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:t,model:e,resolve:n})=>{this.setColumnFilterModel(t,e).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(t){let e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(t,e){if(this.dataTypeService?.isPendingInference()){let s=()=>{},o=new Promise(a=>{s=a});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:s}),o}let n=this.columnModel.getColDefCol(t),i=n?this.getOrCreateFilterWrapper(n):null;return i?(s=>new Promise(o=>{s.then(a=>o(a))}))(this.setModelOnFilterWrapper(i.filterPromise,e)):Promise.resolve()}getFilterWrapper(t){let e=this.columnModel.getColDefCol(t);return e?this.cachedFilter(e)??null:null}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear()}};function ISe(t){return!!t.filterManager?.isAnyFilterPresent()}function xSe(t,e="api"){t.filterManager?.onFilterChanged({source:e})}var FSe=class extends kt{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[HT]),this.eFloatingFilterText=ve}wireBeans(t){this.columnNameService=t.columnNameService}destroy(){super.destroy()}init(t){this.params=t;let e=this.columnNameService.getDisplayNameForColumn(t.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){let n=e.getModelAsString(t);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.init(t)}},l7=class extends kt{wireBeans(t){this.columnNameService=t.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(t){return t&&t.afterFloatingFilter}isEventFromDataChange(t){return t?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.getDefaultOption();return}let e=t.operator,n;e?n=t.conditions[0]:n=t,this.lastType=n.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;let n=t;return this.isTypeEditable(n.type)}init(t){this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){this.optionsFactory=new zK,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;let n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.setSimpleParams(t)}doesFilterHaveSingleInput(t){let e=this.optionsFactory.getCustomOption(t),{numberOfInputs:n}=e||{};return n==null||n==1}isTypeEditable(t){let e=["inRange","empty","blank","notBlank"];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){let e=this.columnNameService.getDisplayNameForColumn(t.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${e} ${n("ariaFilterInput","Filter Input")}`}},ASe=class extends l7{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[HT]),this.eReadOnlyText=ve,this.eDateWrapper=ve}wireBeans(t){super.wireBeans(t),this.context=t.context,this.userComponentFactory=t.userComponentFactory}getDefaultFilterOptions(){return n7}init(t){super.init(t),this.params=t,this.filterParams=t.filterParams,this.createDateComponent(),this.filterModelFormatter=new i7(this.filterParams,this.localeService,this.optionsFactory);let e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.params=t,this.filterParams=t.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){let e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){let n=t;this.dateComp.setDate(Ss(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)}setEditable(t){Tn(this.eDateWrapper,t),Tn(this.eReadOnlyText.getGui(),!t)}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(t),this.updateCompOnModelChange(t))}onDateChanged(){let t=this.dateComp.getDate(),e=Fo(t);this.params.parentFilterInstance(n=>{if(n){let i=Ss(e);n.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let t=DL(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Kr(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new t7(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,t=>{t.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)}getFilterModelFormatter(){return this.filterModelFormatter}},PSe=class extends kt{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[HT]),this.eDateInput=ve}destroy(){super.destroy()}init(t){this.params=t,this.setParams(t);let e=this.eDateInput.getInputElement();this.addManagedListeners(e,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||e.focus()},input:n=>{n.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(t){let e=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=n&&pc(),e.type=n?"date":"text";let{minValidYear:i,maxValidYear:r,minValidDate:s,maxValidDate:o}=t.filterParams||{};if(s&&i&&$("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&r&&$("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&o){let[a,l]=[s,o].map(c=>c instanceof Date?c:Ss(c));a&&l&&a.getTime()>l.getTime()&&$("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?s instanceof Date?e.min=tw(s):e.min=s:i&&(e.min=`${i}-01-01`),o?o instanceof Date?e.max=tw(o):e.max=o:r&&(e.max=`${r}-12-31`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}getDate(){return Ss(this.eDateInput.getValue())}setDate(t){this.eDateInput.setValue(Fo(t,!1))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(t){return t.filterParams&&t.filterParams.browserDatePicker!=null?t.filterParams.browserDatePicker:mL()||yK()||pc()&&vK()>=14.1}},c7=class extends q{constructor(t){super(),this.params=t,this.eFloatingFilterTextInput=ve,this.valueChangedListener=()=>{}}setupGui(t){this.eFloatingFilterTextInput=this.createManagedBean(new Yh(this.params?.config));let e=this.eFloatingFilterTextInput.getGui();t.appendChild(e);let n=i=>this.valueChangedListener(i);this.addManagedListeners(e,{input:n,keydown:n})}setEditable(t){this.eFloatingFilterTextInput.setDisabled(!t)}setAutoComplete(t){this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(t,e){this.eFloatingFilterTextInput.setValue(t,e)}setValueChangedListener(t){this.valueChangedListener=t}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)}},u7=class extends l7{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ve}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))}init(t){this.setupFloatingFilterInputService(t),super.init(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){this.params=t;let e=t.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:e}),this.applyActive=BT(this.params.filterParams),!this.isReadOnly()){let n=DL(this.params.filterParams,this.getDefaultDebounceMs()),i=Kr(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){let e=this.floatingFilterInputService.getValue();wr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)}syncUpWithParentFilter(t){let e=t.key===G.ENTER;if(this.applyActive&&!e)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=JK(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(t){this.floatingFilterInputService.setEditable(t)}},MSe=class extends q{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(t){this.eFloatingFilterNumberInput=this.createManagedBean(new RL),this.eFloatingFilterTextInput=this.createManagedBean(new Yh),this.eFloatingFilterTextInput.setDisabled(!0);let e=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();t.appendChild(e),t.appendChild(n),this.setupListeners(e,i=>this.valueChangedListener(i)),this.setupListeners(n,i=>this.valueChangedListener(i))}setEditable(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(t){this.valueChangedListener=t}setupListeners(t,e){this.addManagedListeners(t,{input:e,keydown:e})}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)}},OSe=class extends u7{init(t){super.init(t),this.filterModelFormatter=new XK(this.localeService,this.optionsFactory,t.filterParams?.numberFormatter)}onParamsUpdated(t){this.refresh(t)}refresh(t){sL(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return QK}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(t){return this.allowedCharPattern=sL(t.filterParams),this.allowedCharPattern?this.createManagedBean(new c7({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new MSe)}},kSe=class extends u7{init(t){super.init(t),this.filterModelFormatter=new ZK(this.localeService,this.optionsFactory)}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return $K}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new c7)}};function NSe(t){return!!t.filterManager?.isQuickFilterPresent()}function LSe(t){return t.gos.get("quickFilterText")}function VSe(t){t.filterManager?.resetQuickFilterCache()}var BSe=class extends q{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(t){this.valueService=t.valueService,this.columnModel=t.columnModel,this.rowModel=t.rowModel,this.pivotResultColsService=t.pivotResultColsService}postConstruct(){let t=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:t,columnRowGroupChanged:t,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let t=this.columnModel.isPivotMode(),e=this.columnModel.getAutoCols(),n=this.columnModel.getColDefCols(),i=(t&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:n)??[];e&&(i=i.concat(e)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(t){let e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,t):this.quickFilterParts.every(n=>e?this.doesRowPassQuickFilterCache(t,n):this.doesRowPassQuickFilterNoCache(t,n))}resetQuickFilterCache(){this.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseQuickFilter(t){return ne(t)?this.gos.isRowModelType("clientSide")?t.toUpperCase():($("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(t){if(t!=null&&typeof t!="string"){$(`Grid option quickFilterText only supports string inputs, received: ${typeof t}`);return}let e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),n=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,n&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(t,e){return this.colsForQuickFilter.some(n=>{let i=this.getQuickFilterTextForColumn(n,t);return ne(i)&&i.indexOf(e)>=0})}doesRowPassQuickFilterCache(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(t,e){let n;t?(this.checkGenerateQuickFilterAggregateText(e),n=e.quickFilterAggregateText):n=this.getQuickFilterAggregateText(e);let{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateQuickFilterAggregateText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))}getQuickFilterTextForColumn(t,e){let n=this.valueService.getValue(t,e,!0),i=t.getColDef();if(i.getQuickFilterText){let r=this.gos.addGridCommonParams({value:n,node:e,data:e.data,column:t,colDef:i});n=i.getQuickFilterText(r)}return ne(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(t){let e=[];return this.colsForQuickFilter.forEach(n=>{let i=this.getQuickFilterTextForColumn(n,t);ne(i)&&e.push(i)}),e.join(`
`)}},AL={version:Xe,moduleName:"@ag-grid-community/filter-core",beans:[H0e]},GSe={version:Xe,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:ISe,onFilterChanged:xSe},dependantModules:[AL]},PL={version:Xe,moduleName:"@ag-grid-community/column-filter",beans:[RSe],dependantModules:[AL]},HSe={version:Xe,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:vSe,getFilterInstance:ySe,getColumnFilterInstance:CSe,destroyFilter:wSe,setFilterModel:SSe,getFilterModel:bSe,getColumnFilterModel:_Se,setColumnFilterModel:ESe,showColumnFilter:DSe},dependantModules:[PL,GSe]},d7={version:Xe,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:mSe}],dependantModules:[PL]};var USe={version:Xe,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:FSe}],dependantModules:[d7]},jSe={version:Xe,moduleName:"@ag-grid-community/simple-filter",dependantModules:[PL],userComponents:[{name:"agTextColumnFilter",classImp:aSe},{name:"agNumberColumnFilter",classImp:oSe},{name:"agDateColumnFilter",classImp:uSe},{name:"agDateInput",classImp:PSe}]},WSe={version:Xe,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[jSe,d7],userComponents:[{name:"agTextColumnFloatingFilter",classImp:kSe},{name:"agNumberColumnFloatingFilter",classImp:OSe},{name:"agDateColumnFloatingFilter",classImp:ASe}]},h7={version:Xe,moduleName:"@ag-grid-community/quick-filter-core",beans:[BSe],dependantModules:[AL]},zSe={version:Xe,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:NSe,getQuickFilter:LSe,resetQuickFilter:VSe},dependantModules:[h7]},qSe={version:Xe,moduleName:"@ag-grid-community/quick-filter",dependantModules:[h7,zSe]},KSe={version:Xe,moduleName:"@ag-grid-community/filter",dependantModules:[WSe,USe,qSe,HSe]},ML=class extends kt{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},YSe=class extends ML{constructor(t){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,t),this.eFloatingFilterBody=ve,this.eButtonWrapper=ve,this.eButtonShowMainFilter=ve}postConstruct(){let t=this.getGui(),e={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>Tn(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>t.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(e,t,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=t.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(t){if(t){if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()}}},QSe=class extends ML{constructor(t){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,t),this.eResize=ve,this.eHeaderCompWrapper=ve,this.headerCompVersion=0,this.column=t.getColumnGroupChild(),this.pinned=t.getPinned()}postConstruct(){let t=this.getGui();((r,s)=>{s!=null&&s!=""?t.setAttribute(r,s):t.removeAttribute(r)})("col-id",this.column.getColId());let n={setWidth:r=>t.style.width=r,addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),setAriaSort:r=>r?Pwe(t,r):Mwe(t),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(t){this.headerCompVersion++;let e=this.headerCompVersion;t.newAgStackInstance().then(n=>this.afterCompCreated(e,n))}afterCompCreated(t,e){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(e);return}this.destroyHeaderComp(),this.headerComp=e,this.headerCompGui=e.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},XSe=class extends ML{constructor(t){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,t),this.eResize=ve}postConstruct(){let t=this.getGui(),e=(i,r)=>r!=null?t.setAttribute(i,r):t.removeAttribute(i);t.setAttribute("col-id",this.ctrl.getColId());let n={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),setResizableDisplayed:i=>Tn(this.eResize,i),setWidth:i=>t.style.width=i,setAriaExpanded:i=>e("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,t,this.eResize)}setUserCompDetails(t){t.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(t){let e=()=>this.destroyBean(t);if(!this.isAlive()){e();return}let n=this.getGui(),i=t.getGui();n.appendChild(i),this.addDestroyFunc(e),this.headerGroupComp=t,this.ctrl.setDragSource(n)}};var $Se=class extends kt{constructor(t){super(),this.headerComps={},this.ctrl=t,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){gK(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,n)=>this.setHeaderCtrls(e,n),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(t)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(t,e){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},t.forEach(i=>{let r=i.getInstanceId(),s=n[r];delete n[r],s==null&&(s=this.createHeaderComp(i),this.getGui().appendChild(s.getGui())),this.headerComps[r]=s}),Do(n,(i,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),e){let i=Gu(this.headerComps);i.sort((s,o)=>{let a=s.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let r=i.map(s=>s.getGui());RK(this.getGui(),r)}}createHeaderComp(t){let e;switch(this.ctrl.getType()){case"group":e=new XSe(t);break;case"filter":e=new YSe(t);break;default:e=new QSe(t);break}return this.createBean(e),e.setParentComponent(this),e}};var ZSe=class extends q{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(t){this.focusService=t.focusService,this.headerPositionUtils=t.headerPositionUtils,this.ctrlsService=t.ctrlsService,this.columnModel=t.columnModel,this.visibleColService=t.visibleColsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});let t=this.gos.getDocument();this.addManagedElementListeners(t,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){let t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0}getHeaderPositionForColumn(t,e){let n;if(typeof t=="string"?(n=this.columnModel.getCol(t),n||(n=this.visibleColService.getColumnGroup(t))):n=t,!n)return null;let r=this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls(),s=Rt(r).getType()==="filter",o=this.getHeaderRowCount()-1,a=-1,l=n;for(;l;)a++,l=l.getParent();let c=a;return e&&s&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:n}}navigateVertically(t,e,n){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;let{headerRowIndex:i}=e,r=e.column,s=this.getHeaderRowCount(),o=t===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(r,i):this.headerPositionUtils.getColumnVisibleChild(r,i),u=!1;return a<0&&(a=0,l=r,u=!0),a>=s?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(t){this.currentHeaderRowWithoutSpan=t}navigateHorizontally(t,e=!1,n){let i=this.focusService.getFocusedHeader(),r=t===2,s=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,r!==s?(a="Before",o=this.headerPositionUtils.findHeader(i,a)):(a="After",o=this.headerPositionUtils.findHeader(i,a)),o||!e)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:e,allowUserOverride:!0,event:n});if(e){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(t,e,n){let i=t.headerRowIndex,r=null,s;if(e==="Before"?i>0&&(s=i-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),!r)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:e,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(t,e="After"){if(t.getPinned())return;let n;if(si(t)){let i=t.getDisplayedLeafColumns();n=e==="Before"?Rt(i):i[0]}else n=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},JSe=class extends q{wireBeans(t){this.headerNavigationService=t.headerNavigationService,this.focusService=t.focusService,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.menuService=t.menuService}setComp(t,e,n){this.comp=t,this.eGui=e,this.createManagedBean(new Kh(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedEventListeners({displayedColumnsChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:t}=this,e=0,n=t.getHeaderRowCount(),i;this.filterManager?.hasFloatingFilters()&&(n++,e=1);let s=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+e,l=n-a;if(i=e*t.getFloatingFiltersHeight(),i+=l*s,i+=o,this.headerHeight===i)return;this.headerHeight=i;let c=`${i+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(){let e=this.visibleColsService.getAllCols().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(t){let e=this.gos.get("enableRtl"),n=t.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()}handleKeyDown(t){let e=null;switch(t.key){case G.LEFT:e=2;case G.RIGHT:{ne(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,t);break}case G.UP:e=0;case G.DOWN:{ne(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break}default:return}}onFocusOut(t){let{relatedTarget:e}=t;!e&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(e)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(t,e,n){if(!t&&!n||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=t??e;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,t,n)}mockContextMenuForIPad(t){if(!Uu())return;let e=new Bu(this.eGui),n=i=>{t(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(e,{longTap:n}),this.addDestroyFunc(()=>e.destroy())}},OL=class extends q{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}wireBeans(t){this.visibleColsService=t.visibleColsService,this.scrollVisibleService=t.scrollVisibleService}postConstruct(){let t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedEventListeners({columnContainerWidthChanged:t,displayedColumnsChanged:t,leftPinnedWidthChanged:t}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:t,scrollVisibilityChanged:t,scrollbarWidthChanged:t}),this.setWidth()}setWidth(){let t=this.gos.isDomLayout("print"),e=this.visibleColsService.getBodyContainerWidth(),n=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),r;t?r=e+n+i:(r=e,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(r+=this.gos.getScrollbarWidth())),this.callback(r)}},ebe=class extends q{constructor(t){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}wireBeans(t){this.funcColsService=t.funcColsService}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let e=t.dragItem.columns;e&&e.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function kL(t){let{isFromHeader:e,hDirection:n,xPosition:i,fromEnter:r,fakeEvent:s,pinned:o,gos:a,columnModel:l,columnMoveService:c,presentedColsService:u}=t,d=n===0,h=n===1,{allMovingColumns:p}=t;if(e){let x=[];p.forEach(_=>{let S=null,D=_.getParent();for(;D!=null&&D.getDisplayedLeafColumns().length===1;)S=D,D=D.getParent();S!=null?(!!S.getColGroupDef()?.marryChildren?S.getProvidedColumnGroup().getLeafColumns():S.getLeafColumns()).forEach(k=>{x.includes(k)||x.push(k)}):x.includes(_)||x.push(_)}),p=x}let g=p.slice();l.sortColsLikeCols(g);let m=rbe({movingCols:g,draggingRight:h,xPosition:i,pinned:o,gos:a,columnModel:l,presentedColsService:u}),v=tbe(g,l);if(m.length===0)return;let C=m[0],b=v!==null&&!r;if(e&&(b=v!==null),b&&!s&&(d&&C>=v||h&&C<=v))return;let E=u.getAllCols(),T=[],P=null;for(let x=0;x<m.length;x++){let _=m[x],S=c.getProposedColumnOrder(g,_);if(!c.doesOrderPassRules(S))continue;let D=S.filter(F=>E.includes(F));if(P===null)P=D;else if(!zh(D,P))break;let O=nbe(S);T.push({move:_,fragCount:O})}if(T.length!==0)return T.sort((x,_)=>x.fragCount-_.fragCount),f7(p,T[0].move,"uiColumnMoved",!1,c)}function f7(t,e,n,i,r){return r.moveColumns(t,e,n,i),i?null:{columns:t,toIndex:e}}function tbe(t,e){let n=e.getCols(),i=NCe(t.map(l=>n.indexOf(l))),r=i[0];return Rt(i)-r!==i.length-1?null:r}function nbe(t){function e(i){let r=[],s=i.getOriginalParent();for(;s!=null;)r.push(s),s=s.getOriginalParent();return r}let n=0;for(let i=0;i<t.length-1;i++){let r=e(t[i]),s=e(t[i+1]);[r,s]=r.length>s.length?[r,s]:[s,r],r.forEach(o=>{s.indexOf(o)===-1&&n++})}return n}function ibe(t,e){switch(e){case"left":return t.getLeftCols();case"right":return t.getRightCols();default:return t.getCenterCols()}}function rbe(t){let{movingCols:e,draggingRight:n,xPosition:i,pinned:r,gos:s,columnModel:o,presentedColsService:a}=t;if(s.get("suppressMovableColumns")||e.some(E=>E.getColDef().suppressMovable))return[];let c=ibe(a,r),u=o.getCols(),d=c.filter(E=>Gh(e,E)),h=c.filter(E=>!Gh(e,E)),p=u.filter(E=>!Gh(e,E)),g=0,m=i;if(n){let E=0;d.forEach(T=>E+=T.getActualWidth()),m-=E}if(m>0){for(let E=0;E<h.length;E++){let T=h[E];if(m-=T.getActualWidth(),m<0)break;g++}n&&g++}let v;if(g>0){let E=h[g-1];v=p.indexOf(E)+1}else v=p.indexOf(h[0]),v===-1&&(v=0);let C=[v],b=(E,T)=>E-T;if(n){let E=v+1,T=u.length-1;for(;E<=T;)C.push(E),E++;C.sort(b)}else{let E=v,T=u.length-1,P=u[E];for(;E<=T&&c.indexOf(P)<0;)E++,C.push(E),P=u[E];E=v-1;let x=0;for(;E>=x;)C.push(E),E--;C.sort(b).reverse()}return C}function NL(t,e,n,i,r){let s=r.getHeaderRowContainerCtrl(e).getViewport();return n&&(t-=s.getBoundingClientRect().left),i.get("enableRtl")&&(t=s.clientWidth-t),e==null&&(t+=r.get("center").getCenterViewportScrollLeft()),t}var sbe=class extends q{constructor(t){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.isCenterContainer=!ne(t)}wireBeans(t){this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.columnMoveService=t.columnMoveService,this.dragAndDropService=t.dragAndDropService,this.ctrlsService=t.ctrlsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(t){let e=t.dragItem.columns;if(t.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{let i=t.dragItem.visibleState,r=(e||[]).filter(s=>i[s.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,n){if(t){let i=t.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColsVisible(i,e,n)}}setColumnsPinned(t,e,n){if(t){let i=t.filter(r=>!r.getColDef().lockPinned);this.columnModel.setColsPinned(i,e,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(t){if(this.isCenterContainer){let e=this.ctrlsService.get("center"),n=e.getCenterViewportScrollLeft(),i=n+e.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=t<n+50,this.needToMoveLeft=t>i-50):(this.needToMoveLeft=t<n+50,this.needToMoveRight=t>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(t=this.lastDraggingEvent,e=!1,n=!1,i=!1){if(i){if(this.lastMovedInfo){let{columns:c,toIndex:u}=this.lastMovedInfo;f7(c,u,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=t,vt(t.hDirection))return;let r=NL(t.x,this.pinned,!1,this.gos,this.ctrlsService);e||this.checkCenterForScrolling(r);let s=this.normaliseDirection(t.hDirection),o=t.dragSource.type,a=t.dragSource.getDragItem().columns?.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0)||[],l=kL({allMovingColumns:a,isFromHeader:o===1,hDirection:s,xPosition:r,pinned:this.pinned,fromEnter:e,fakeEvent:n,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});l&&(this.lastMovedInfo=l)}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case 0:return 1;case 1:return 0;default:Pt(`Unknown direction ${t}`)}else return t}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);let e=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=n.scrollHorizontally(-t):this.needToMoveRight&&(e=n.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let r=this.lastDraggingEvent.dragItem.columns.filter(s=>!s.getColDef().lockPinned);if(r.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){let s=this.needToMoveLeft?"left":"right";this.setColumnsPinned(r,s,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},obe=class extends q{wireBeans(t){this.dragAndDropService=t.dragAndDropService,this.columnModel=t.columnModel,this.ctrlsService=t.ctrlsService}constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(t=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.left.getContainerElement()],[t.bottomLeft.getContainerElement()],[t.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.right.getContainerElement()],[t.bottomRight.getContainerElement()],[t.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.center.getViewportElement()],[t.bottomCenter.getViewportElement()],[t.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new sbe(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new ebe(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.columnModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}},abe=class extends q{wireBeans(t){this.horizontalResizeService=t.horizontalResizeService,this.pinnedWidthService=t.pinnedWidthService,this.ctrlsService=t.ctrlsService,this.columnSizeService=t.columnSizeService,this.columnAutosizeService=t.columnAutosizeService}constructor(t,e,n,i,r){super(),this.pinned=t,this.column=e,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){let t=[],e,n,i=()=>{if(Tn(this.eResize,e),!e)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(o),n){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new Bu(this.eResize);c.addEventListener("doubleTap",l),t.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},r=()=>{t.forEach(o=>o()),t.length=0},s=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==e||a!==n)&&(e=o,n=a,r(),i())};s(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(s)}onResizing(t,e){let{column:n,lastResizeAmount:i,resizeStartWidth:r}=this,s=this.normaliseResizeAmount(e),o=r+s,a=[{key:n,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=aw(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(s-i)>u)return}this.lastResizeAmount=s,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(e*=-1):i&&(e*=-1),e}},lbe=class extends q{constructor(t){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=t}wireBeans(t){this.rowModel=t.rowModel,this.selectionService=t.selectionService}onSpaceKeyDown(t){let e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(this.gos.getActiveDomElement())&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new bL),this.cbSelectAll.addCssClass("ag-header-select-all"),bs(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),pL(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);let e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let t=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),i=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${i} (${n})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(t){return this.gos.get("rowSelection")==="multiple"?!0:($(`${t} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(t){let e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:($(`${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":e&&(i="uiSelectAllFiltered");let r={source:i,justFiltered:e,justCurrentPage:n};t?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let t=this.column.getColDef().headerCheckboxSelection;if(typeof t=="function"){let e=t,n=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});t=e(n)}return t?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},cbe=class extends UT{constructor(t,e,n){super(t,e,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=t}setComp(t,e,n,i){this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new abe(this.getPinned(),this.column,n,t,this)),this.createManagedBean(new FL([this.column],e)),this.createManagedBean(new xL(this.column,e,this.beans)),this.createManagedBean(new Kh(e,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(t,e){if(!this.column.isResizable())return;let n=this.column.getActualWidth(),i=this.column.getMinWidth(),r=this.column.getMaxWidth(),s=Math.min(Math.max(n+t,i),r);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:s}],e,!0,"uiColumnResized")}moveHeader(t){let{eGui:e,column:n,gos:i,ctrlsService:r}=this,s=this.getPinned(),o=e.getBoundingClientRect().left,a=n.getActualWidth(),l=i.get("enableRtl"),u=NL(t===0!==l?o-20:o+a+20,s,!0,i,r);kL({allMovingColumns:[n],isFromHeader:!0,hDirection:t,xPosition:u,pinned:s,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){let t=this.lookupUserCompDetails();this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){let t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,n)=>{this.beans.sortController.setSortForColumn(this.column,e,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,n)=>{this.setupTooltip(e,n)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new lbe(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===G.SPACE&&this.selectAllFeature.onSpaceKeyDown(t),t.key===G.ENTER&&this.onEnterKeyDown(t),t.key===G.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){let e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(t,e){let n=this.comp.getUserCompInstance();!n||!(n instanceof nL)||n.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){if(!this.getGui().contains(t.relatedTarget)){let e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui,r=this.column.getColDef();!e&&n&&!r.headerComponent&&(e=()=>{let a=i.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>i,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},o=this.createManagedBean(new sm(s));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){let t=()=>{let e=this.column.getColDef(),n=r7(e,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(r=>{i.has(r)?i.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),i.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.refreshFunctions.push(t),t()}setDragSource(t){if(this.dragSourceElement=t,this.removeDragSource(),!t||!this.draggable)return;let{column:e,beans:n,displayName:i,dragAndDropService:r,gos:s}=this,{columnModel:o}=n,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(e),dragItemName:i,onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];o.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];o.setColsVisible(u,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(t){let e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(t){this.refreshFunctions.push(t)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(t=>t())}refreshHeaderComp(){let t=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){let e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let t=()=>{let e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.addRefreshFunction(t),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){let t=()=>{let e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let t=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};t(),this.addRefreshFunction(t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:t,column:e,comp:n,beans:i}=this;if(!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:r,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",r>0);let{columnModel:o}=i,a=o.getColumnHeaderRowHeight();if(r===0){n.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${a}px`);return}n.addOrRemoveCssClass("ag-header-span-total",s);let c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=r*c;t.style.setProperty("top",`${-u}px`),t.style.setProperty("height",`${a+u}px`)}setupAutoHeight(t){let{columnModel:e,resizeObserverService:n}=this.beans,i=c=>{if(!this.isAlive())return;let{paddingTop:u,paddingBottom:d,borderBottomWidth:h,borderTopWidth:p}=qh(this.getGui()),g=u+d+h+p,v=t.offsetHeight+g;if(c<5){let C=this.beans.gos.getDocument(),b=!C||!C.contains(t),E=v==0;if(b||E){window.setTimeout(()=>i(c+1),0);return}}e.setColHeaderHeight(this.column,v)},r=!1,s,o=()=>{let c=this.column.isAutoHeaderHeight();c&&!r&&a(),!c&&r&&l()},a=()=>{r=!0,i(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=n.observeResize(t,()=>i(0))},l=()=>{r=!1,s&&s(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListeners(this.column,{widthChanged:()=>r&&i(0)}),this.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>i(0))}}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){let t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Swe(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,n)=>e==="filter"?-1:n.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let t=i=>this.handleMouseOverChange(i.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);this.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:e,contextmenu:n})}handleMouseOverChange(t){this.setActiveHeader(t);let n={type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(n)}setActiveHeader(t){this.comp.addOrRemoveCssClass("ag-header-active",t)}getAnchorElementForMenu(t){let e=this.comp.getUserCompInstance();return e instanceof nL?e.getAnchorElementForMenu(t):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},ube=class extends q{wireBeans(t){this.horizontalResizeService=t.horizontalResizeService,this.autoWidthCalculator=t.autoWidthCalculator,this.visibleColsService=t.visibleColsService,this.columnSizeService=t.columnSizeService,this.columnAutosizeService=t.columnAutosizeService}constructor(t,e,n,i){super(),this.eResize=e,this.comp=t,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gos.get("suppressAutoSize")){let e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let n=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||n.push(r.getColId())}),n.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:n,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(t){let e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(t,e,n="uiColumnResized"){let i=this.normaliseDragChange(e),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,t)}getInitialValues(t){let e=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(e),i=this.getSizeRatiosOfColumns(e,n),r={columnsToResize:e,resizeStartWidth:n,resizeRatios:i},s=null;if(t&&(s=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),s){let o=s.getDisplayedLeafColumns(),a=r.groupAfterColumns=o.filter(c=>c.isResizable()),l=r.groupAfterStartWidth=this.getInitialSizeOfColumns(a);r.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(t){let{columnsToResize:e,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:s,groupAfterRatios:o}=t;this.resizeCols=e,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(t){let e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();e>n.resizeStartWidth&&this.resizeColumns(n,e,t,!0)}resizeColumnsFromLocalValues(t,e,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,t,e,n)}resizeColumns(t,e,n,i=!0){let{columnsToResize:r,resizeStartWidth:s,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=t,u=[];if(u.push({columns:r,ratios:o,width:e}),a){let d=e-s;u.push({columns:a,ratios:c,width:l-d})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}getSizeRatiosOfColumns(t,e){return t.map(n=>n.getActualWidth()/e)}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}},dbe=class extends q{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",t),e.addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",t),e.removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.addOrRemoveCssClass("ag-hidden",t===0)}},hbe=class extends UT{constructor(t,e,n){super(t,e,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=t}setComp(t,e,n){this.comp=t,this.setGui(e),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let i=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new FL(r,e)),this.createManagedBean(new xL(this.column,e,this.beans)),this.createManagedBean(new dbe(t,this.column)),this.resizeFeature=this.createManagedBean(new ube(t,n,i,this.column)),this.createManagedBean(new Kh(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(t,e){if(!this.resizeFeature)return;let n=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+t,"uiColumnResized",!0)}moveHeader(t){let{beans:e,eGui:n,column:i,gos:r,ctrlsService:s}=this,o=r.get("enableRtl"),a=t===0,l=this.getPinned(),c=n.getBoundingClientRect(),u=c.left,d=c.width,h=NL(a!==o?u-20:u+d+20,l,!0,r,s),p=i.getGroupId(),g=this.focusService.getFocusedHeader();kL({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:e.columnModel,columnMoveService:e.columnMoveService,presentedColsService:e.visibleColsService});let m=i.getDisplayedLeafColumns(),v=a?m[0]:Rt(m);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(v,"auto"),!this.isAlive()&&g&&this.restoreFocus(p,i,g)}restoreFocus(t,e,n){let i=e.getLeafColumns();if(!i.length)return;let r=i[0].getParent();if(!r)return;let s=this.findGroupWidthId(r,t);s&&this.focusService.focusHeaderPosition({headerPosition:Se(W({},n),{column:s})})}findGroupWidthId(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null}resizeLeafColumnsToFit(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)}setupUserComp(){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,i)=>{this.setupTooltip(n,i)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){let t=i=>this.handleMouseOverChange(i.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());this.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:e,contextmenu:n})}handleMouseOverChange(t){let n={type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(n)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),i=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!e&&i&&!n?.headerGroupComponent&&(e=()=>{let o=r.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});let s={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(n&&n.headerTooltip),shouldDisplayTooltip:e};n&&(s.getColDef=()=>n),this.createManagedBean(new sm(s))}setupExpandable(){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let e=this.refreshExpanded.bind(this);this.addManagedListeners(t,{expandedChanged:e,expandableChanged:e})}refreshExpanded(){let{column:t}=this;this.expandable=t.isExpandable();let e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let t=this.column.getColGroupDef(),e=r7(t,this.gos,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(){let e=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(i=>{this.addManagedListeners(i,{movingChanged:n})}),n()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){let e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===G.ENTER){let n=this.column,i=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!t))return;let{beans:e,column:n,displayName:i,gos:r,dragAndDropService:s}=this,{columnModel:o}=e,a=n.getProvidedColumnGroup().getLeafColumns(),l=!r.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{if(l){let d=u?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(d,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let d=u?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(d,!1,"uiColumnMoved")}}};s.addDragSource(c,!0)}getDragItemForGroup(t){let e=t.getProvidedColumnGroup().getLeafColumns(),n={};e.forEach(r=>n[r.getId()]=r.isVisible());let i=[];return this.beans.visibleColsService.getAllCols().forEach(r=>{e.indexOf(r)>=0&&(i.push(r),qr(e,r))}),e.forEach(r=>i.push(r)),{columns:i,visibleState:n}}isSuppressMoving(){let t=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(t=!0)}),t||this.gos.get("suppressMovableColumns")}},fbe=0,GN=class extends q{constructor(t,e,n){super(),this.instanceId=fbe++,this.rowIndex=t,this.pinned=e,this.type=n;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(t){this.beans=t}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(t=>t.getGui()!=null):!1}setComp(t,e=!0){this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){let t=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(t){if(this.headerCellCtrls)return TT(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===t)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){let{visibleColsService:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){let{columnModel:t,filterManager:e}=this.beans,n=t.getHeaderRowCount(),i=[],r=0;e?.hasFloatingFilters()&&(n++,r=1);let s=t.getColumnGroupHeaderRowHeight(),o=t.getColumnHeaderRowHeight(),a=1+r,l=n-a;for(let d=0;d<l;d++)i.push(s);i.push(o);for(let d=0;d<r;d++)i.push(t.getFloatingFiltersHeight());let c=0;for(let d=0;d<this.rowIndex;d++)c+=i[d];let u=i[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(t=!1){let e=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,n,t)}getHeaderCtrls(){let t=this.headerCellCtrls;this.headerCellCtrls=new Map;let e=this.getColumnsInViewport();for(let i of e)this.recycleAndCreateHeaderCtrls(i,t);let n=i=>{let{focusService:r,visibleColsService:s}=this.beans;return r.isHeaderWrapperFocused(i)?s.isVisible(i.getColumnGroupChild()):!1};if(t)for(let[i,r]of t)n(r)?this.headerCellCtrls.set(i,r):this.destroyBean(r);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(t,e){if(!this.headerCellCtrls||t.isEmptyGroup())return;let n=t.getUniqueId(),i;if(e&&(i=e.get(n),e.delete(n)),i&&i.getColumnGroupChild()!=t&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",t,this.beans,this));break}case"group":i=this.createBean(new hbe(t,this.beans,this));break;default:i=this.createBean(new cbe(t,this.beans,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[],e=this.getActualDepth(),{columnViewportService:n}=this.beans;return["left",null,"right"].forEach(i=>{let r=n.getHeadersToRender(i,e);t=t.concat(r)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(t){return this.headerCellCtrls?this.getHeaderCellCtrls().find(i=>i.getColumnGroupChild()==t):void 0}focusHeader(t,e){let n=this.findHeaderCellCtrl(t);return n?n.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},pbe=class extends q{constructor(t){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=t}wireBeans(t){this.ctrlsService=t.ctrlsService,this.scrollVisibleService=t.scrollVisibleService,this.pinnedWidthService=t.pinnedWidthService,this.columnModel=t.columnModel,this.focusService=t.focusService,this.filterManager=t.filterManager}setComp(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:n,advancedFilterEnabledChanged:n}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}refresh(t=!1){let e=new im,n=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new GN(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},r=()=>{let a=e.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new GN(a,this.pinned,"column")))},s=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=e.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!t||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new GN(l,this.pinned,"filter")))};i(),r(),s();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(n)}getHeaderCtrlForColumn(t){if(Hu(t))return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(t):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){let n=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(n)return n}}getHtmlElementForColumnHeader(t){let e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null}getRowType(t){let n=this.getAllCtrls()[t];return n?n.getType():void 0}focusHeader(t,e,n){let r=this.getAllCtrls()[t];return r?r.focusHeader(e,n):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(t){let e=new obe(this.pinned,t);this.createManagedBean(e)}restoreFocusOnHeader(t){if(!t)return;let{column:e}=t;e.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let t=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new OL(t=>this.comp.setCenterWidth(`${t}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let t=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;let n=()=>{let i=t?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let r=i==0,s=this.hidden!==r,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&t||!o&&e)?i+a:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!r),s&&(this.hidden=r,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}},gbe='<div class="ag-pinned-left-header" role="rowgroup"></div>',mbe='<div class="ag-pinned-right-header" role="rowgroup"></div>',vbe=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,HN=class extends kt{constructor(t){super(),this.eCenterContainer=ve,this.headerRowComps={},this.rowCompsList=[],this.pinned=t}postConstruct(){this.selectAndSetTemplate();let t={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new pbe(this.pinned)).setComp(t,this.getGui())}selectAndSetTemplate(){let t=this.pinned=="left",e=this.pinned=="right",n=t?gbe:e?mbe:vbe;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==ve?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())}setCtrls(t){let e=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=r=>{let s=r.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),n&&TK(this.eRowContainer,s,n),n=s};t.forEach(r=>{let s=r.getInstanceId(),o=e[s];delete e[s];let a=o||this.createBean(new $Se(r));this.headerRowComps[s]=a,this.rowCompsList.push(a),i(a)}),Gu(e).forEach(r=>this.destroyRowComp(r))}},ybe=class extends kt{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let t={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new JSe).setComp(t,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new HN("left")),n(new HN(null)),n(new HN("right"))}},Cbe={selector:"AG-HEADER-ROOT",component:ybe};var LL=class extends q{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let t=this.getDomLayout(),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},n=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,e)}getDomLayout(){let t=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(t)===-1?($(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}},wbe=class extends kt{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=ve,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(t){this.overlayService=t.overlayService}updateLayoutClasses(t,e){let n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",e.autoHeight),n.toggle("ag-layout-normal",e.normal),n.toggle("ag-layout-print",e.print)}postConstruct(){this.createManagedBean(new LL(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(t){let e=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&e.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=t,e.toggle(t,!0)}showOverlay(t,e,n){this.setWrapperTypeClass(e),this.destroyActiveOverlay(),this.activePromise=t,t?.then(i=>{if(this.activePromise!==t){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i&&this.activeOverlay!=i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,n)){let r=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:s})=>{r.refresh?.(this.gos.addGridCommonParams(W({},s??{})))})}}),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;let t=this.activeOverlay;if(!t)return;this.activeOverlay=null;let e=this.updateListenerDestroyFunc;e&&(e(),this.updateListenerDestroyFunc=null),this.destroyBean(t),wr(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},Sbe={selector:"AG-OVERLAY-WRAPPER",component:wbe},p7=class extends kt{constructor(t,e){super(),this.direction=e,this.eViewport=ve,this.eContainer=ve,this.hideTimeout=null,this.setTemplate(t)}wireBeans(t){this.animationFrameService=t.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",CK()||Uu())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=SK(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let t=this.getGui(),e=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(t,{mouseenter:e,mousedown:e,touchstart:e,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:t=>{t.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(t){let e=this.getViewport();$Ce(()=>va(e),()=>this.setScrollPosition(t),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(t){this.addManagedElementListeners(this.getViewport(),{scroll:t})}},bbe=class extends p7{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=ve,this.eRightSpacer=ve}wireBeans(t){super.wireBeans(t),this.visibleColsService=t.visibleColsService,this.pinnedRowModel=t.pinnedRowModel,this.ctrlsService=t.ctrlsService,this.scrollVisibleService=t.scrollVisibleService}postConstruct(){super.postConstruct();let t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",t),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new OL(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.visibleColsService.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&t,i=this.gos.getScrollbarWidth();n&&(e+=i),ma(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=i);let r=this.visibleColsService.getColsLeftWidth();this.enableRtl&&t&&(r+=i),ma(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){let t=this.scrollVisibleService.isHorizontalScrollShowing(),e=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=t&&this.gos.getScrollbarWidth()||0,s=n?0:i===0&&e?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),ZC(this.getGui(),s),ZC(this.eViewport,s),ZC(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}getScrollPosition(){return NT(this.getViewport(),this.enableRtl)}setScrollPosition(t){va(this.getViewport())||this.attemptSettingScrollPosition(t),LT(this.getViewport(),t,this.enableRtl)}},_be={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:bbe},g7=class extends q{wireBeans(t){this.maxDivHeightScaler=t.rowContainerHeightService}constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let t=this.maxDivHeightScaler.getUiContainerHeight(),e=t!=null?`${t}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}},Ebe=class extends p7{wireBeans(t){super.wireBeans(t),this.ctrlsService=t.ctrlsService,this.scrollVisibleService=t.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new g7(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.invisibleScrollbar,n=t&&this.gos.getScrollbarWidth()||0,i=n===0&&e?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),ma(this.getGui(),i),ma(this.eViewport,i),ma(this.eContainer,i),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:t}=this,n=t.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(t,e){!e&&!va(this.getViewport())&&this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t}},Dbe={selector:"AG-FAKE-VERTICAL-SCROLL",component:Ebe},Tbe=class extends q{constructor(t){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=t,this.resetLastHScrollDebounced=Kr(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Kr(()=>this.lastScrollSource[0]=null,500)}wireBeans(t){this.ctrlsService=t.ctrlsService,this.animationFrameService=t.animationFrameService,this.paginationService=t.paginationService,this.pageBoundsService=t.pageBoundsService,this.rowModel=t.rowModel,this.heightScaler=t.rowContainerHeightService,this.rowRenderer=t.rowRenderer,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:t,fakeVScrollComp:e}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),t.onScrollCallback(this.onFakeHScroll.bind(this));let n=this.gos.get("debounceVerticalScrollbar"),i=n?Kr(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=n?Kr(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),e.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){if(this.centerRowsCtrl==null)return;t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft());let n=this.enableRtl?t:-t,{topCenter:i,stickyTopCenter:r,stickyBottomCenter:s,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-n),a.setContainerTranslateX(n),i.setContainerTranslateX(n),r.setContainerTranslateX(n),s.setContainerTranslateX(n);let c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;t=Math.abs(t),u?l.setScrollPosition(t):LT(c,t,this.enableRtl)}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(t){let e=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=e;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i;t===0?i=NT(e,this.enableRtl):i=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(t){let e;t===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(t){let e=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(t){let e={type:"bodyScroll",direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let n=Se(W({},e),{type:"bodyScrollEnd"});this.eventService.dispatchEvent(n)},100)}shouldBlockScrollUpdate(t,e,n=!1){return n&&!Uu()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){let e=yL(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return t<0||t+e>n}shouldBlockHorizontalScroll(t){let e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&kT()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(t,e=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl&&kT()?t=t>0?0:i:t=Math.min(Math.max(t,0),i)),LT(this.centerRowsCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.eBodyViewport.scrollTop=t}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(t){let e=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){let n=this.rowModel.getRowCount(),i=-1;for(let r=0;r<n;r++){let s=this.rowModel.getRow(r);if(typeof t=="function"){if(s&&t(s)){i=r;break}}else if(t===s||t===s.data){i=r;break}}i>=0&&this.ensureIndexVisible(i,e)}ensureIndexVisible(t,e){if(this.gos.isDomLayout("print"))return;let n=this.rowModel.getRowCount();if(typeof t!="number"||t<0||t>=n){$("Invalid row index for ensureIndexVisible: "+t);return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationService?.goToPageWithIndex(t);let s=this.ctrlsService.getGridBodyCtrl(),o=s.getStickyTopHeight(),a=s.getStickyBottomHeight(),l=this.rowModel.getRow(t),c;do{let u=l.rowTop,d=l.rowHeight,h=this.pageBoundsService.getPixelOffset(),p=l.rowTop-h,g=p+l.rowHeight,m=this.getVScrollPosition(),v=this.heightScaler.getDivStretchOffset(),C=m.top+v,b=m.bottom+v,E=b-C,T=this.heightScaler.getScrollPositionForPixel(p),P=this.heightScaler.getScrollPositionForPixel(g-E),x=Math.min((T+P)/2,p),_=C+o>p,S=b-a<g,D=null;e==="top"?D=T:e==="bottom"?D=P:e==="middle"?D=x:_?D=T-o:S&&(D=P+a),D!==null&&(this.setVerticalScrollPosition(D),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(t,e="auto"){let n=this.columnModel.getCol(t);if(!n||n.isPinned()||!this.visibleColsService.isColDisplayed(n))return;let i=this.getPositionedHorizontalScroll(n,e);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(t,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(t),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(t,e){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?n:i)||r,l=o?i:n;e!=="auto"&&(a=e==="start",l=e==="end");let c=e==="middle";if(a||l||c){let{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(t);return c?d-s/2:a?o?h:u:o?u-s:h-s}return null}isColumnOutsideViewport(t){let{start:e,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(t),s=this.enableRtl,o=s?e>r:n<r,a=s?n<i:e>i;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(t){let e=this.enableRtl,n=this.visibleColsService.getBodyContainerWidth(),i=t.getActualWidth(),r=t.getLeft(),s=e?-1:1,o=e?n-r:r,a=o+i*s,l=o+i/2*s;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=e,i=t+e;return{start:n,end:i,width:t}}},m7="ag-force-vertical-scroll",Rbe="ag-selectable",Ibe="ag-column-moving",xbe=class extends q{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(t){this.animationFrameService=t.animationFrameService,this.rowContainerHeightService=t.rowContainerHeightService,this.ctrlsService=t.ctrlsService,this.columnModel=t.columnModel,this.columnSizeService=t.columnSizeService,this.scrollVisibleService=t.scrollVisibleService,this.menuService=t.menuService,this.headerNavigationService=t.headerNavigationService,this.dragAndDropService=t.dragAndDropService,this.pinnedRowModel=t.pinnedRowModel,this.rowRenderer=t.rowRenderer,this.popupService=t.popupService,this.mouseEventService=t.mouseEventService,this.rowModel=t.rowModel,this.filterManager=t.filterManager,this.environment=t.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(t,e,n,i,r,s,o){this.comp=t,this.eGridBody=e,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=s,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new LL(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Tbe(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(t){t.forEach(e=>{this.addManagedElementListeners(e,{focusin:n=>{let{target:i}=n,r=Jg(i,"ag-root",e);e.classList.toggle("ag-has-focus",!r)},focusout:n=>{let{target:i,relatedTarget:r}=n,s=e.contains(r),o=Jg(r,"ag-root",e);Jg(i,"ag-root",e)||(!s||o)&&e.classList.remove("ag-has-focus")}})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(Ibe,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(Rbe,t)}onScrollVisibilityChanged(){let t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let e=t&&this.gos.getScrollbarWidth()||0,n=SK()?16:0,i=`calc(100% + ${e+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i))}onGridColumnsChanged(){let t=this.columnModel.getCols();this.comp.setColumnCount(t.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let t=n=>{let i=n.relatedTarget;if(tL(i)===null){this.rowRenderer.stopEditing();return}let r=e.some(s=>s.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!r){let s=this.popupService;r=s.getActivePopups().some(o=>o.contains(i))||s.isElementWithinCustomPopup(i)}r||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];e.forEach(n=>this.addManagedElementListeners(n,{focusout:t}))}updateRowCount(){let t=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=e===-1?-1:t+e;this.comp.setRowCount(n)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){let e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){let t=this.gos.get("alwaysShowVerticalScroll"),e=t?m7:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||n&&jwe(this.eBodyViewport)}setupRowAnimationCssClass(){let t=this.environment.hasMeasuredSizes(),e=()=>{let n=t&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,n)};e(),this.addManagedEventListeners({heightScaleChanged:e}),this.addManagedPropertyListener("animateRows",e),this.addManagedEventListeners({gridStylesChanged:()=>{!t&&this.environment.hasMeasuredSizes()&&(t=!0,e())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let t=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:t}),this.mockContextMenuForIPad(t),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let t=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&e&&this.addManagedElementListeners(t,{wheel:n=>this.onFullWidthContainerWheel(n,e)})}onFullWidthContainerWheel(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))}onBodyViewportContextMenu(t,e,n){if(!t&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(t||n).preventDefault();let{target:i}=t||e;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:t,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(t){if(!Uu())return;let e=new Bu(this.eBodyViewport),n=i=>{t(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(e,{longTap:n}),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()}onStickyWheel(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)}getGui(){return this.eGridBody}scrollVertically(t){let e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new L0e(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:t}=this,e=t.getPinnedTopTotalHeight(),n=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(n),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;e>0&&(i+=e),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let t=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,i=t+n;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(t,e){let i=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,s=aw(this.eGridBody)-i;if(s>0){this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,t);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(t,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(t,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(t,-1)},500):$("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})}removeScrollEventListener(t){this.eBodyViewport.removeEventListener("scroll",t)}},Fbe=class extends kt{constructor(t,e,n,i,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.rowCtrl=e.getRowCtrl(),this.eRow=i,this.cellCtrl=e;let s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(s);let o=this.getGui();this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);let a=(u,d)=>{d!=null&&d!=""?o.setAttribute(u,d):o.removeAttribute(u)};bs(o,e.getCellAriaRole()),a("col-id",e.getColumnIdSanitised());let l=e.getTabIndex();l!==void 0&&a("tabindex",l.toString());let c={addOrRemoveCssClass:(u,d)=>this.addOrRemoveCssClass(u,d),setUserStyles:u=>IK(o,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,d,h)=>this.setRenderDetails(u,d,h),setEditDetails:(u,d,h)=>this.setEditDetails(u,d,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};e.setComp(c,this.getGui(),this.eCellWrapper,n,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(t,e,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(n||r)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(t,e,n){t?this.createCellEditorInstance(t,e,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(t){let e=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=e||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let r=!n&&this.eCellWrapper!=null;r&&(Io(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);let s=!t&&n,o=s&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!s&&this.eCellValue!=null;a&&(Io(this.eCellValue),this.eCellValue=void 0);let l=i||r||o||a;return l&&this.removeControls(),t||e&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(t,e,n){let i=this.editorVersion,r=t.newAgStackInstance();if(r==null)return;let{params:s}=t;r.then(a=>this.afterCellEditorCreated(i,a,s,e,n)),vt(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){let e=this.getParentOfValue();wr(e);let n=t!=null?ul(t,!0):null;n!=null&&(e.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),Io(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:t}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),Io(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==t.componentClass)return!1;let e=this.cellRenderer.refresh(t.params);return e===!0||e===void 0}createCellRendererInstance(t){let n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:r}=t,s=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=t.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,r);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameService.createTask(s,this.rowNode.rowIndex,"createTasksP2"):s()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(t,e,n){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let r=this.getParentOfValue();wr(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(t,e,n,i,r){if(t!==this.editorVersion){this.beans.context.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){this.beans.context.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){$(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();let a=i||e.isPopup!==void 0&&e.isPopup();a?this.addPopupCellEditor(n,r):this.addInCellEditor(),this.refreshEditStyles(!0,a),e.afterGuiAttached&&e.afterGuiAttached()}refreshEditStyles(t,e){this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),this.rowCtrl?.setInlineEditingCss(t)}addInCellEditor(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,e){this.beans.gos.get("editType")==="fullRow"&&$("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(t));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let r=this.beans.popupService,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=e??(n.getPopupPosition?n.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=r.positionPopupByComponent.bind(r,l),u=this.beans.localeService.getLocaleTextFunc(),d=r.addPopup({modal:s,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&eL()&&t.focus({preventScroll:!0}),wr(this.getParentOfValue())}},Abe=class extends kt{constructor(t,e,n){super(),this.cellComps={},this.beans=e,this.rowCtrl=t;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);let r=this.getGui(),s=r.style;this.domOrder=this.rowCtrl.getDomOrder(),bs(r,"row");let o=this.rowCtrl.getTabIndex();o!=null&&r.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>IK(r,l),setTop:l=>s.top=l,setTransform:l=>s.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};t.setComp(a,this.getGui(),n),this.addDestroyFunc(()=>{t.unsetComp(n)})}getInitialStyle(t){let e=this.rowCtrl.getInitialTransform(t);return e?`transform: ${e}`:`top: ${this.rowCtrl.getInitialRowTop(t)}`}showFullWidth(t){let e=i=>{if(this.isAlive()){let r=i.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=t.newAgStackInstance();n&&n.then(e)}setCellCtrls(t){let e=Object.assign({},this.cellComps);t.forEach(i=>{let r=i.getInstanceId();this.cellComps[r]==null?this.newCellComp(i):e[r]=null});let n=Gu(e).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;let e=[];t.forEach(n=>{let i=this.cellComps[n.getInstanceId()];i&&e.push(i.getGui())}),RK(this.getGui(),e)}newCellComp(t){let e=new Fbe(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let t=Gu(this.cellComps).filter(e=>e!=null);this.destroyCells(t)}setFullWidthRowComp(t){this.fullWidthCellRenderer&&Pt("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(t){t.forEach(e=>{if(!e)return;let n=e.getCtrl().getInstanceId();this.cellComps[n]===e&&(e.detach(),e.destroy(),this.cellComps[n]=null)})}refreshFullWidth(t){let{fullWidthCellRenderer:e}=this;if(!e||!e.refresh)return!1;let n=t();return e.refresh(n)}},Pbe=class extends q{wireBeans(t){this.ctrlsService=t.ctrlsService,this.pinnedWidthService=t.pinnedWidthService,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.columnSizeService=t.columnSizeService,this.scrollVisibleService=t.scrollVisibleService,this.columnViewportService=t.columnViewportService}constructor(t){super(),this.centerContainerCtrl=t}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let t=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=aw(t);if(e<=50)return;let n=this.getPinnedColumnsOverflowingViewport(e-50),i=this.gos.getCallback("processUnpinnedColumns");n.length&&(i&&(n=i({columns:n,viewportWidth:e})),this.columnModel.setColsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(t){let e=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=e+n;if(i<t)return[];let r=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()],o=0,a=0,l=0,c=[],u=i-l-t;for(;(a<r.length||o<s.length)&&u>0;){if(o<s.length){let d=s[o++];u-=d.getActualWidth(),c.push(d)}if(a<r.length&&u>0){let d=r[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=yL(t);if(this.bodyHeight!==e){this.bodyHeight=e;let n={type:"bodyHeightChanged"};this.eventService.dispatchEvent(n)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(t,e)}},Mbe=class extends q{wireBeans(t){this.dragService=t.dragService,this.rangeService=t.rangeService}constructor(t){super(),this.eContainer=t}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Obe=class extends kt{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[_L]),this.eCheckbox=ve}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),n=gL(t,e),[i,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=t(i,r);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${s} (${n})`)}onClicked(t,e,n){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:n.shiftKey,groupSelectsFiltered:e,event:n,source:"checkboxSelected"})}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>em(i),click:i=>{em(i);let r=this.gos.get("groupSelectsFiltered"),s=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(s,r)?this.onClicked(!0,r,i||{})===0&&this.onClicked(!1,r,i):s?this.onClicked(!1,r,i):this.onClicked(!0,r,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(t,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||t===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){let t=this.rowNode.selectable,e=this.getIsVisible();if(t)if(typeof e=="function"){let i=this.overrides?.callbackParams;if(!this.column)t=e(Se(W({},i),{node:this.rowNode,data:this.rowNode.data}));else{let r=this.column.createColumnFunctionCallbackParams(this.rowNode);t=e(W(W({},i),r))}}else t=e??!1;if(this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!t),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(t);return}this.setVisible(t)}getIsVisible(){return this.overrides?this.overrides.isVisible:this.column?.getColDef()?.checkboxSelection}},kbe=class extends kt{constructor(t,e,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=t,this.column=e,this.eCell=n}postConstruct(){this.getGui().appendChild($s("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){let e=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);let n=()=>{try{let i=JSON.stringify(this.rowNode.data);t.dataTransfer.setData("application/json",i),t.dataTransfer.setData("text/plain",i)}catch{}};if(e){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:t});e(i)}else n()}checkVisibility(){let t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}},Nbe=class extends q{constructor(t,e){super(),this.staticClasses=[],this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let t=this.column.getColDef(),{cellClassRules:e}=t,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=e}applyUserStyles(){let t=this.column.getColDef();if(!t.cellStyle)return;let e;if(typeof t.cellStyle=="function"){let n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=t.cellStyle;e=i(n)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){let t=this.column.getColDef(),e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,e),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},Lbe=class extends q{constructor(t,e,n,i,r){super(),this.cellCtrl=t,this.beans=e,this.rowNode=i,this.rowCtrl=r}setComp(t){this.eGui=t}onKeyDown(t){let e=t.key;switch(e){case G.ENTER:this.onEnterKeyDown(t);break;case G.F2:this.onF2KeyDown(t);break;case G.ESCAPE:this.onEscapeKeyDown(t);break;case G.TAB:this.onTabKeyDown(t);break;case G.BACKSPACE:case G.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case G.DOWN:case G.UP:case G.RIGHT:case G.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())}onShiftRangeSelect(t){if(!this.beans.rangeService)return;let e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){let{cellCtrl:n,beans:i,rowNode:r}=this,{gos:s,rangeService:o,eventService:a}=i;if(!n.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),rSe(t,s.get("enableCellEditingOnBackspace"))){if(o&&s.get("enableRangeSelection"))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let l=n.getColumn(),c=this.beans.valueService.parseValue(l,r,"",r.getValueFromValueService(l))??null;r.setDataValue(l,c,"cellClear")}}else n.startRowOrCellEdit(t,e);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let e=t.shiftKey?G.UP:G.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(G.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()}onF2KeyDown(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(G.F2,t)}onEscapeKeyDown(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(t){if(t.target!==this.eGui||this.cellCtrl.isEditing())return;let i=t.key;i===" "?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(i,t),t.preventDefault())}onSpaceKeyDown(t){let{gos:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){let n=this.rowNode.isSelected(),i=!n;if(i||!e.get("suppressRowDeselection")){let r=this.beans.gos.get("groupSelectsFiltered"),s=this.rowNode.setSelectedParams({newValue:i,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"});n===void 0&&s===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"})}}t.preventDefault()}destroy(){super.destroy()}},Vbe=class extends q{constructor(t,e,n){super(),this.cellCtrl=t,this.beans=e,this.column=n}onMouseEvent(t,e){if(!Vu(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(t),t.preventDefault();return}let{eventService:e,rangeService:n,gos:i}=this.beans,r=t.ctrlKey||t.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);let s=this.cellCtrl.createEvent(t,"cellClicked");e.dispatchEvent(s);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(s)})},0),(i.get("singleClickEdit")||o.singleClickEdit)&&!i.get("suppressClickEdit")&&!(t.shiftKey&&n?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Uu()||tK("dblclick"))return!1;let t=new Date().getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e}onCellDoubleClicked(t){let{column:e,beans:n,cellCtrl:i}=this,{eventService:r,frameworkOverrides:s,gos:o}=n,a=e.getColDef(),l=i.createEvent(t,"cellDoubleClicked");r.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{s.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&i.startRowOrCellEdit(null,t)}onMouseDown(t){let{ctrlKey:e,metaKey:n,shiftKey:i}=t,r=t.target,{cellCtrl:s,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=o;if(this.isRightClickInExistingRange(t))return;let d=l&&l.getCellRanges().length!=0;if(!i||!d){let p=u.get("enableCellTextSelection")&&t.defaultPrevented,g=(pc()||p)&&!s.isEditing()&&!vL(r);s.focusCell(g)}if(i&&d&&!c.isCellFocused(s.getCellPosition())){t.preventDefault();let h=c.getFocusedCell();if(h){let{column:p,rowIndex:g,rowPinned:m}=h,C=o.rowRenderer.getRowByPosition({rowIndex:g,rowPinned:m})?.getCellCtrl(p);C?.isEditing()&&C.stopEditing(),c.setFocusedCell({column:p,rowIndex:g,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){let h=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(h);else{let p=e||n;l.setRangeToCell(h,p)}}a.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseDown"))}}isRightClickInExistingRange(t){let{rangeService:e}=this.beans;if(e){let n=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=t.button===2||t.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(t){return Jg(t,"ag-selection-checkbox",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,"cellMouseOut");this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,"cellMouseOver");this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;let e=this.cellCtrl.getGui(),n=e.contains(t.target),i=e.contains(t.relatedTarget);return n&&i}destroy(){super.destroy()}},Bbe=class extends q{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(t){this.eGui=t,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let t=this.getColSpanningList();zh(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let t=this.getCellWidth();this.eGui.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let t=this.column.getColSpan(this.rowNode),e=[];if(t===1)e.push(this.column);else{let n=this.column,i=this.column.getPinned();for(let r=0;n&&r<t&&(e.push(n),n=this.beans.visibleColsService.getColAfter(n),!(!n||vt(n)||i!==n.getPinned()));r++);}return e}onLeftChanged(){if(!this.eGui)return;let t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=Rt(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return t;let e=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return e+n+(t||0)}return e+(t||0)}applyRowSpan(t){if(this.rowSpan===1&&!t)return;let n=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var qC="ag-cell-range-selected",Gbe="ag-cell-range-chart",Hbe="ag-cell-range-single-cell",Ube="ag-cell-range-chart-category",jbe="ag-cell-range-handle",Wbe="ag-cell-range-top",zbe="ag-cell-range-right",qbe="ag-cell-range-bottom",Kbe="ag-cell-range-left",Ybe=class{constructor(t,e){this.beans=t,this.rangeService=t.rangeService,this.selectionHandleFactory=t.selectionHandleFactory,this.cellCtrl=e}setComp(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(qC,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${qC}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${qC}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${qC}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${qC}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Gbe,this.hasChartRange),MT(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Hbe,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let t=this.getRangeBorders(),e=this.isSingleCell(),n=!e&&t.top,i=!e&&t.right,r=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass(Wbe,n),this.cellComp.addOrRemoveCssClass(zbe,i),this.cellComp.addOrRemoveCssClass(qbe,r),this.cellComp.addOrRemoveCssClass(Kbe,s)}isSingleCell(){let{rangeService:t}=this.beans;return this.rangeCount===1&&!!t&&!t.isMoreThanOneCell()}getHasChartRange(){let{rangeService:t}=this.beans;if(!this.rangeCount||!t)return!1;let e=t.getCellRanges();return e.length>0&&e.every(n=>Gh([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let t=this.beans.gos.get("enableRtl"),e=!1,n=!1,i=!1,r=!1,s=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService,a,l;t?(a=o.getColAfter(s),l=o.getColBefore(s)):(a=o.getColBefore(s),l=o.getColAfter(s));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(r=!0),l||(n=!0);for(let u=0;u<c.length&&!(e&&n&&i&&r);u++){let d=c[u],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!e&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(e=!0),!i&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(i=!0),!r&&a&&d.columns.indexOf(a)<0&&(r=!0),!n&&l&&d.columns.indexOf(l)<0&&(n=!0)}return{top:e,right:n,bottom:i,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;let t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(jbe,!!this.selectionHandle)}shouldHaveSelectionHandle(){let t=this.beans.gos,e=this.rangeService.getCellRanges(),n=e.length;if(this.rangeCount<1||n<1)return!1;let i=Rt(e),r=this.cellCtrl.getCellPosition(),s=t.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=t.get("enableRangeHandle"),a=n===1&&!this.cellCtrl.isEditing()&&(s||o);if(this.hasChartRange){let c=e[0].type===1&&this.rangeService.isCellInSpecificRange(r,e[0]);this.cellComp.addOrRemoveCssClass(Ube,c),a=i.type===0}return a&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,r)}addSelectionHandle(){let t=this.beans.gos,e=Rt(this.rangeService.getCellRanges()).type,i=t.get("enableFillHandle")&&vt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Qbe="ag-cell",Xbe="ag-cell-auto-height",$be="ag-cell-normal-height",Zbe="ag-cell-focus",Jbe="ag-cell-first-right-pinned",e_e="ag-cell-last-left-pinned",t_e="ag-cell-not-inline-editing",n_e="ag-column-hover",i_e="ag-cell-wrap-text",r_e=0,v7=class oL extends q{constructor(e,n,i,r){super(),this.column=e,this.rowNode=n,this.beans=i,this.rowCtrl=r,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=e.getId()+"-"+r_e++,this.colIdSanitised=ul(this.column.getId()),i.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new Bbe(this,this.beans),this.addDestroyFunc(()=>{this.cellPositionFeature?.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new Nbe(this,this.beans),this.addDestroyFunc(()=>{this.cellCustomStyleFeature?.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new Vbe(this,this.beans,this.column),this.addDestroyFunc(()=>{this.cellMouseListenerFeature?.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new Lbe(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{this.cellKeyboardListenerFeature?.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new Ybe(this.beans,this),this.addDestroyFunc(()=>{this.cellRangeFeature?.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,n){let i=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&ne(a))return $C(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&r&&!this.isCellRenderer()&&(n=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new sm(s,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,n,i,r,s){this.cellComp=e,this.eGui=n,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(e),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,n),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(o=>o()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;let n=e.parentElement,i=this.beans.gos.getRowHeightForNode(this.rowNode).height,r=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:d}=qh(n),h=l+c+u+d,g=e.offsetHeight+h;if(a<5){let v=this.beans.gos.getDocument(),C=!v||!v.contains(e),b=g==0;if(C||b){window.setTimeout(()=>r(a+1),0);return}}let m=Math.max(g,i);this.rowNode.setRowAutoHeight(m,this.column)},s=()=>r(0);s();let o=this.beans.resizeObserverService.observeResize(e,s);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e=!1){let n=this.getValueToDisplay(),i;if(this.rowNode.stub){let r=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),r)}else if(this.isCellRenderer()){let r=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),r)}this.cellComp.setRenderDetails(i,n,e),this.cellRangeFeature?.refreshHandle()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){let e=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return n||i||r||s}startEditing(e=null,n=!1,i=null){let{editService:r}=this.beans;if(!(!this.isCellEditable()||this.editing||!r)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,n,i)});return}r.startEditing(this,e,n,i)}}setEditing(e,n){this.editCompDetails=n,this.editing!==e&&(this.editing=e,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,e)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,r,s)=>this.registerRowDragger(n,i,s),setTooltip:(n,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),i=e!=null&&!!e.newData,r=e!=null&&!!e.suppressFlash||!!n.suppressCellFlash,s=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,o=e&&e.forceRefresh||s||i,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!r&&!u&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(e=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,e,n)}flashCell(e){let n=e?.flashDuration??e?.flashDelay,i=e?.fadeDuration??e?.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(e,n,i){if(!this.cellComp)return;let r=`ag-cell-${e}`,s=`ag-cell-${e}-animation`,{gos:o}=this.beans;n||(n=o.get("cellFlashDuration")),ne(i)||(i=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(s,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(s,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.eGui.style.transition="")},i))},n)})}onFlashCells(e){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let n=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(e,n){let i=this.column.getColDef();return i.equals?i.equals(e,n):e===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let e=this.getGui();this.beans.gos.setDomData(e,oL.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(e,oL.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){this.cellKeyboardListenerFeature?.processCharacter(e)}onKeyDown(e){this.cellKeyboardListenerFeature?.onKeyDown(e)}onMouseEvent(e,n){this.cellMouseListenerFeature?.onMouseEvent(e,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:e,column:n,beans:i}=this;s7(e,n,i.visibleColsService)}refreshAriaColIndex(){let e=this.beans.visibleColsService.getAriaColIndex(this.column);mK(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,n=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,n)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,n)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Jbe,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(e_e,e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&e?.forceBrowserFocus&&(this.focusEventToRestore=e);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Zbe,n),n&&e&&e.forceBrowserFocus){let r=this.cellComp.getFocusableElement();if(this.editing){let s=this.beans.focusService.findFocusableElements(r,null,!0);s.length&&(r=s[0])}r.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Hh(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Qbe,!0),this.cellComp.addOrRemoveCssClass(t_e,!0);let e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Xbe,e),this.cellComp.addOrRemoveCssClass($be,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(n_e,e)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(i_e,e)}dispatchCellContextMenuEvent(e){let n=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu");this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let e=new Obe;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=new kbe(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,n);return}let r=this.createRowDragComp(e,n,i);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,n,i){let r=this.beans.gos.get("pagination"),s=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(s){if(!o){$("managed row dragging is only allowed in the Client Side Row Model");return}if(r){$("managed row dragging is not possible when doing pagination");return}}let a=new iL(()=>this.value,this.rowNode,this.column,e,n,i);return this.beans.context.createBean(a),a}setSuppressRefreshCell(e){this.suppressRefreshCell=e}getEditCompDetails(){return this.editCompDetails}};v7.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var jh=v7,s_e=0,y7=class aL extends q{constructor(e,n,i,r,s){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=e,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=r,this.printLayout=s,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+s_e++,this.rowId=ul(e.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ul(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(e,n){e==="left"?this.leftGui=n:e==="right"?this.rightGui=n:e==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(e,n,i){let r={rowComp:e,element:n,containerType:i};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let n=e?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(e){let n=this.gos;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>i.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&PT(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(e.element,aL.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(e.element,aL.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=ul(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){let{containerType:n}=e;this.slideInAnimation[n]&&(I9(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(I9(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection")){$("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),i=new iL(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(i,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){let n=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!zr.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let i=this.createFullWidthCompDetails(e.element,n);e.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(e){let n=this.getCellCtrl(e);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(n)}areAllContainersReady(){let e=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return e&&n&&i}setRowType(){let e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),n=this.rowNode.isFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,n=!1){if(this.isFullWidth())return;if(e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,n,i=null){let r={list:[],map:{}},s=(o,a)=>{r.list.push(a),r.map[o]=a};return n.forEach(o=>{let a=o.getInstanceId(),l=e.map[a];l||(l=new jh(o,this.rowNode,this.beans,this)),s(a,l)}),e.list.forEach(o=>{if(r.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){s(o.getColumn().getInstanceId(),o);return}o.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(n=>{let i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let r=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");let s=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,n){if(e.getColumn().getPinned()!=n)return!0;let o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){let c=e.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){let n=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(e){if(this.isSticky()||!e)return;let n=ne(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),r=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=e(this.fullWidthGui,null),i=e(this.centerGui,null),r=e(this.leftGui,"left"),s=e(this.rightGui,"right");return n&&i&&r&&s}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())},cellChanged:e=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(e))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let i=e===0,r=e===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){let e=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){let e=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!n),PT(i.element,e&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Hh(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let n=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((n?n.element:null)===e.target))return;let s=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Vu(e))return;let n=this.allRowGuis.find(o=>o.element.contains(e.target)),i=n?n.element:null,r=i===e.target,s=null;r||(s=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&r||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(n=>va(n.element))?.element;return e?e.getBoundingClientRect().top:0}onFullWidthRowFocused(e){let n=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned:!1,r=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;r&&(r.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&r.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,n){let i={list:[],map:{}};return e.list.forEach(r=>{r!==n&&(i.list.push(r),i.map[r.getColumn().getInstanceId()]=r)}),i}onMouseEvent(e,n){switch(e){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(e,n){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(e,n){let i=this.createRowEvent(e,n);return i.source=this,i}onRowDblClick(e){if(Vu(e))return;let n=this.createRowEventWithSource("rowDoubleClicked",e);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Jg(e.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode,i=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let r=this.getFullWidthElement(),s=e.target,o=!0;r&&r.contains(s)&&vL(s)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllCols()[0],rowPinned:n.rowPinned,forceBrowserFocus:o})}onRowClick(e){if(Vu(e)||this.lastMouseDownOnDragger)return;let i=this.createRowEventWithSource("rowClicked",e);this.beans.eventService.dispatchEvent(i);let r=e.ctrlKey||e.metaKey,s=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:c});else{let u=a?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:s,event:e,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let r=e.clientHeight;if(r!=null&&r>0){let s=()=>{this.rowNode.setRowHeight(r),this.beans.rowModel.getType()==="clientSide"?this.beans.rowModel.onRowHeightChanged():this.beans.rowModel.getType()==="serverSide"&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(s,0)}},i=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(i),n()}createFullWidthCompDetails(e,n){let{gos:i,rowNode:r}=this,s=i.addGridCommonParams({fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:e,eParentOfValue:e,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(s);default:return o.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(e,n){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new sm(i,this.beans))}addFullWidthRowDragging(e,n,i="",r){if(!this.isFullWidth())return;let s=new iL(()=>i,this.rowNode,void 0,e,n,r);this.createBean(s,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(s,this.beans.context)})}onUiLevelChanged(){let e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){let n="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(n,!0),r.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(e=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,e)}setInlineEditingCss(e){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e}startRowEditing(e=null,n=null,i=null){this.editingRow||this.beans.rowEditService?.startEditing(this,e,n,i)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,n){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){let n=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let e=this.gos.get("rowStyle");if(e&&typeof e=="function"){$("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),i;if(n){let r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(r)}return i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){let n=!!this.rowNode.isSelected();this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),MT(i.element,n),i.element.contains(this.gos.getActiveDomElement())&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let e=this.rowNode.isSelected();if(e&&this.gos.get("suppressRowDeselection"))return;let i=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i)}addHoverFunctionality(e){if(!this.active)return;let{rowNode:n,beans:i,gos:r}=this;this.addManagedListeners(e,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),this.addManagedListeners(n,{mouseEnter:()=>{!i.dragService.isDragging()&&!r.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{e.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(e){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,r=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,n){e?n(e):this.allRowGuis.forEach(n)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=s?`${Math.min(i,s)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let e=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let e=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let i=this.beans.pageBoundsService.getPixelOffset();return e+i*(n?1:-1)}setRowTop(e){if(!this.printLayout&&ne(e)){let n=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let n=this.rowNode,i;if(this.isSticky())i=n.stickyRowTop;else{let r=this.slideInAnimation[e]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,s=this.applyPaginationOffset(r);i=n.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(e):n.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==e&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(e)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){let n=this.rowNode.getRowIndexString();if(n===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),r=this.rowNode.rowIndex%2===0,s=i+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",r),o.rowComp.addOrRemoveCssClass("ag-row-odd",!r),gK(o.element,s)})}setStoppingRowEdit(e){this.stoppingRowEdit=e}};y7.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Wh=y7,o_e=class extends q{wireBeans(t){this.mouseEventService=t.mouseEventService,this.valueService=t.valueService,this.menuService=t.menuService,this.ctrlsService=t.ctrlsService,this.navigationService=t.navigationService,this.focusService=t.focusService,this.undoRedoService=t.undoRedoService,this.visibleColsService=t.visibleColsService,this.rowModel=t.rowModel,this.pinnedRowModel=t.pinnedRowModel,this.rangeService=t.rangeService,this.clipboardService=t.clipboardService}constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",tK("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(t,e){if(!this.mouseEventService.isEventFromThisGrid(e)||Vu(e))return;let n=this.getRowForEvent(e),i=this.mouseEventService.getRenderedCellForEvent(e);t==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,n,i):(i&&i.onMouseEvent(t,e),n&&n.onMouseEvent(t,e))}mockContextMenuForIPad(){if(!Uu())return;let t=new Bu(this.element),e=n=>{let i=this.getRowForEvent(n.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,i,r)};this.addManagedListeners(t,{longTap:e}),this.addDestroyFunc(()=>t.destroy())}getRowForEvent(t){let e=t.target;for(;e;){let n=this.gos.getDomData(e,Wh.DOM_DATA_KEY_ROW_CTRL);if(n)return n;e=e.parentElement}return null}handleContextMenuMouseEvent(t,e,n,i){let r=n?n.getRowNode():null,s=i?i.getColumn():null,o=null;if(s){let c=t||e;i.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(s,r)}let a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:r,column:s,value:o,anchorToElement:l})}getControlsForEventTarget(t){return{cellCtrl:qN(this.gos,t,jh.DOM_DATA_KEY_CELL_CTRL),rowCtrl:qN(this.gos,t,Wh.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(t,e){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(n?this.processCellKeyboardEvent(n,t,e):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,t,e))}processCellKeyboardEvent(t,e,n){let i=t.getRowNode(),r=t.getColumn(),s=t.isEditing();if(!rL(this.gos,n,i,r,s)&&e==="keydown"&&(!s&&this.navigationService.handlePageScrollingKey(n)||t.onKeyDown(n),this.doGridOperations(n,t.isEditing()),YK(n)&&t.processCharacter(n)),e==="keydown"){let a=t.createEvent(n,"cellKeyDown");this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(t,e,n){let i=t.getRowNode(),r=this.focusService.getFocusedCell(),s=r&&r.column;if(!rL(this.gos,n,i,s,!1)){let a=n.key;if(e==="keydown")switch(a){case G.PAGE_HOME:case G.PAGE_END:case G.PAGE_UP:case G.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case G.UP:case G.DOWN:t.onKeyboardNavigate(n);break;case G.TAB:t.onTabKeyDown(n);break;default:}}if(e==="keydown"){let a=t.createRowEvent("cellKeyDown",n);this.eventService.dispatchEvent(a)}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!this.mouseEventService.isEventFromThisGrid(t))return;let n=iSe(t);if(n===G.A)return this.onCtrlAndA(t);if(n===G.C)return this.onCtrlAndC(t);if(n===G.D)return this.onCtrlAndD(t);if(n===G.V)return this.onCtrlAndV(t);if(n===G.X)return this.onCtrlAndX(t);if(n===G.Y)return this.onCtrlAndY();if(n===G.Z)return this.onCtrlAndZ(t)}onCtrlAndA(t){let{pinnedRowModel:e,rowModel:n,rangeService:i}=this;if(i&&n.isRowsToRender()){let[r,s]=[e.isEmpty("top"),e.isEmpty("bottom")],o=r?null:"top",a,l;s?(a=null,l=n.getRowCount()-1):(a="bottom",l=e.getPinnedBottomRowNodes().length-1);let c=this.visibleColsService.getAllCols();if(zi(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:Rt(c)})}t.preventDefault()}onCtrlAndC(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e?.isEditing()||n?.isEditing()||(t.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e?.isEditing()||n?.isEditing()||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(t){let{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e?.isEditing()||n?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(t){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()}onCtrlAndZ(t){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},a_e=class extends q{wireBeans(t){this.pinnedWidthService=t.pinnedWidthService}constructor(t){super(),this.element=t}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;Tn(this.element,e),ma(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},l_e=class extends q{wireBeans(t){this.pinnedWidthService=t.pinnedWidthService}constructor(t){super(),this.element=t}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;Tn(this.element,e),ma(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},yT=t=>t.getTopRowCtrls(),CT=t=>t.getStickyTopRowCtrls(),wT=t=>t.getStickyBottomRowCtrls(),ST=t=>t.getBottomRowCtrls(),bT=t=>t.getCentreRowCtrls(),c_e={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:bT},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:bT},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:bT},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:bT},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:yT},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:yT},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:yT},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:yT},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:CT},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:CT},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:CT},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:CT},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:wT},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:wT},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:wT},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:wT},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:ST},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:ST},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:ST},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:ST}};function C7(t){return c_e[t]}var u_e=["topCenter","topLeft","topRight"],d_e=["bottomCenter","bottomLeft","bottomRight"],h_e=["center","left","right"],f_e=["center","left","right","fullWidth"],p_e=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],g_e=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],m_e=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],w7=["stickyTopCenter","stickyTopLeft","stickyTopRight"],S7=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],v_e=[...w7,"stickyTopFullWidth",...S7,"stickyBottomFullWidth"],y_e=[...u_e,...d_e,...h_e,...w7,...S7],C_e=class extends q{constructor(t){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=t,this.options=C7(t)}wireBeans(t){this.dragService=t.dragService,this.ctrlsService=t.ctrlsService,this.columnViewportService=t.columnViewportService,this.resizeObserverService=t.resizeObserverService,this.rowRenderer=t.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Pbe(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(t){this.comp.setOffsetTop(`${t.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(t,e){t.indexOf(this.name)>=0&&e()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(t,e,n){this.comp=t,this.eContainer=e,this.eViewport=n,this.createManagedBean(new o_e(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(g_e,()=>{this.pinnedWidthFeature=this.createManagedBean(new a_e(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(m_e,()=>{this.pinnedWidthFeature=this.createManagedBean(new l_e(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(f_e,()=>this.createManagedBean(new g7(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(y_e,()=>this.createManagedBean(new Mbe(this.eContainer))),this.forContainers(p_e,()=>this.createManagedBean(new OL(i=>this.comp.setContainerWidth(`${i}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:t=>this.onDisplayedRowsChanged(t.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(v_e.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let e=()=>{let n=this.gos.get("ensureDomOrder"),i=this.gos.isDomLayout("print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",e),e()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let t=()=>this.eViewport.scrollLeft=0;this.addManagedElementListeners(this.eViewport,{scroll:t})})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let t=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(t=!1){let e=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(e,n,t)}getCenterWidth(){return aw(this.eViewport)}getCenterViewportScrollLeft(){return NT(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){let e=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(()=>e())}isViewportInTheDOMTree(){return DK(this.eViewport)}getViewportScrollLeft(){return NT(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Uwe(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(t){this.eContainer.style.transform=`translateX(${t}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){LT(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){let e=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||e.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=this.gos.isDomLayout("print"),r=this.gos.get("embedFullWidthRows")||n,s=e.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!r&&a:r||!a});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:t})}};function w_e(t){let e;return t.type==="center"?e=`<div class="${t.viewport}" data-ref="eViewport" role="presentation">
                <div class="${t.container}" data-ref="eContainer"></div>
            </div>`:e=`<div class="${t.container}" data-ref="eContainer"></div>`,e}var S_e=class extends kt{constructor(){super(),this.eViewport=ve,this.eContainer=ve,this.rowComps={},this.name=kt.elementGettingCreated.getAttribute("name"),this.options=C7(this.name),this.setTemplate(w_e(this.options))}wireBeans(t){this.beans=t}postConstruct(){let t={setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n,setOffsetTop:n=>this.eContainer.style.transform=`translateY(${n})`};this.createManagedBean(new C_e(this.name)).setComp(t,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(t){let e=W({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let n=i=>{let r=i.getInstanceId(),s=e[r];if(s)this.rowComps[r]=s,delete e[r],this.ensureDomOrder(s.getGui());else{if(!i.getRowNode().displayed)return;let o=new Abe(i,this.beans,this.options.type);this.rowComps[r]=o,this.appendRow(o.getGui())}};t.forEach(n),Gu(e).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),bs(this.eContainer,"rowgroup")}appendRow(t){this.domOrder?Hwe(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t}ensureDomOrder(t){this.domOrder&&(TK(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)}},b_e={selector:"AG-ROW-CONTAINER",component:S_e};function KC(t){return t.map(e=>`<ag-row-container name="${e}"></ag-row-container>`).join("")}var __e=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${KC(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${KC(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${KC(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${KC(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${KC(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,E_e=class extends kt{constructor(){super(__e,[Sbe,_be,Dbe,Cbe,b_e]),this.eBodyViewport=ve,this.eStickyTop=ve,this.eStickyBottom=ve,this.eTop=ve,this.eBottom=ve,this.eBody=ve}wireBeans(t){this.resizeObserverService=t.resizeObserverService,this.rangeService=t.rangeService}postConstruct(){let t=(n,i)=>{let r=`${n}px`;i.style.minHeight=r,i.style.height=r},e={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>Fwe(this.getGui(),n),setRowCount:n=>xwe(this.getGui(),n),setTopHeight:n=>t(n,this.eTop),setBottomHeight:n=>t(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>this.eStickyBottom.style.height=n,setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(s=>{s.toggle("ag-layout-auto-height",i.autoHeight),s.toggle("ag-layout-normal",i.normal),s.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(m7,i),registerBodyViewportResizeListener:n=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new xbe),this.ctrl.setComp(e,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&Iwe(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,e){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",e),n.toggle("ag-row-no-animation",!e)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},D_e={selector:"AG-GRID-BODY",component:E_e},T_e=class extends q{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(t){this.ctrlsService=t.ctrlsService,this.columnAnimationService=t.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let t=this.ctrlsService.get("center");if(!t||this.columnAnimationService.isActive())return;let e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;let n={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(n)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},V9="__ag_grid_instance",b7=class _7 extends q{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=_7.gridInstanceSequence.next()}wireBeans(e){this.ctrlsService=e.ctrlsService}stampTopLevelGridCompWithGridInstance(e){e[V9]=this.gridInstanceId}getRenderedCellForEvent(e){return qN(this.gos,e.target,jh.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let n=e;for(;n;){let i=n[V9];if(ne(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(e){let n=this.getRenderedCellForEvent(e);return n?n.getCellPosition():null}getNormalisedPosition(e){let n=this.gos.isDomLayout("normal"),i=e,r,s;if(i.clientX!=null||i.clientY!=null?(r=i.clientX,s=i.clientY):(r=i.x,s=i.y),n){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();r+=l.left,s+=a.top}return{x:r,y:s}}};b7.gridInstanceSequence=new im;var R_e=b7,I_e=class extends q{constructor(){super(),this.beanName="navigationService",this.onPageDown=x9(this.onPageDown,100),this.onPageUp=x9(this.onPageUp,100)}wireBeans(t){this.mouseEventService=t.mouseEventService,this.pageBoundsService=t.pageBoundsService,this.focusService=t.focusService,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.rowModel=t.rowModel,this.ctrlsService=t.ctrlsService,this.rowRenderer=t.rowRenderer,this.headerNavigationService=t.headerNavigationService,this.rowPositionUtils=t.rowPositionUtils,this.cellNavigationService=t.cellNavigationService,this.pinnedRowModel=t.pinnedRowModel,this.rangeService=t.rangeService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){let n=t.key,i=t.altKey,r=t.ctrlKey||t.metaKey,s=!!this.rangeService&&t.shiftKey,o=this.mouseEventService.getCellPositionForEvent(t),a=!1;switch(n){case G.PAGE_HOME:case G.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case G.LEFT:case G.RIGHT:case G.UP:case G.DOWN:if(!o)return!1;r&&!i&&!s&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case G.PAGE_DOWN:case G.PAGE_UP:!r&&!i&&(a=this.handlePageUpDown(n,o,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,n){return n&&(e=this.focusService.getFocusedCell()),e?(t===G.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){let{scrollIndex:e,scrollType:n,scrollColumn:i,focusIndex:r,focusColumn:s}=t;ne(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),ne(e)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e,n),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:s,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:null,column:s})}onPageDown(t){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),r=this.pageBoundsService.getPixelOffset(),s=n.top+i,o=this.rowModel.getRowIndexAtPixel(s+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,o):this.navigateToNextPage(t,o)}onPageUp(t){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),r=n.top,s=this.rowModel.getRowIndexAtPixel(r+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,s,!0):this.navigateToNextPage(t,s,!0)}navigateToNextPage(t,e,n=!1){let i=this.getViewportHeight(),r=this.pageBoundsService.getFirstRow(),s=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(t.rowIndex),l=n?a?.rowHeight-i-o:i-o,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+o);if(u===t.rowIndex){let h=n?-1:1;e=u=t.rowIndex+h}let d;n?(d="bottom",u<r&&(u=r),e<r&&(e=r)):(d="top",u>s&&(u=s),e>s&&(e=s)),this.isRowTallerThanView(u)&&(e=u,d="top"),this.navigateTo({scrollIndex:e,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,n=!1){this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(t,n);this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){let n=e?-1:1,i=this.getViewportHeight(),r=this.pageBoundsService.getLastRow(),s=0,o=t.rowIndex;for(;o>=0&&o<=r;){let a=this.rowModel.getRow(o);if(a){let l=a.rowHeight??0;if(s+l>i)break;s+=l}o+=n}return Math.max(0,Math.min(o,r))}getViewportHeight(){let{gridBodyCtrl:t,center:e}=this.ctrlsService.getParams(),n=t.getScrollFeature().getVScrollPosition(),i=this.gos.getScrollbarWidth(),r=n.bottom-n.top;return e.isHorizontalScrollShowing()&&(r-=i),r}isRowTallerThanView(t){let e=this.rowModel.getRow(t);if(!e)return!1;let n=e.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){let n=this.cellNavigationService.getNextCellToFocus(t,e,!0),{rowIndex:i}=n,r=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:r,focusIndex:i,focusColumn:r})}onHomeOrEndKey(t){let e=t===G.PAGE_HOME,n=this.visibleColsService.getAllCols(),i=e?n[0]:Rt(n),r=e?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:i,focusIndex:r,focusColumn:i})}onTabKeyDown(t,e){let n=e.shiftKey,i=this.tabToNextCellCommon(t,n,e);if(i!==!1){i&&e.preventDefault();return}if(n){let{rowIndex:r,rowPinned:s}=t.getRowPosition();(s?r===0:r===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof jh&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&e.preventDefault()}tabToNextCell(t,e){let n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,t,e)}tabToNextCellCommon(t,e,n){let i=t.isEditing();if(!i&&t instanceof jh){let o=t.getRowCtrl();o&&(i=o.isEditing())}let r;return i?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(t,e,n):r=this.moveToNextEditingCell(t,e,n):r=this.moveToNextCellNotEditing(t,e),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(t,e,n=null){let i=t.getCellPosition();t.getGui().focus(),t.stopEditing();let r=this.findNextCellToFocusOn(i,e,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,n),r.focusCell(!1),!0)}moveToNextEditingRow(t,e,n=null){let i=t.getCellPosition(),r=this.findNextCellToFocusOn(i,e,!0);if(r===!1)return null;if(r==null)return!1;let s=r.getCellPosition(),o=this.isCellEditable(i),a=this.isCellEditable(s),l=s&&i.rowIndex===s.rowIndex&&i.rowPinned===s.rowPinned;return o&&t.setFocusOutOnEditor(),l||(t.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(t,e){let n=this.visibleColsService.getAllCols(),i;t instanceof Wh?i=Se(W({},t.getRowPosition()),{column:e?n[0]:Rt(n)}):i=t.getCellPosition();let r=this.findNextCellToFocusOn(i,e,!1);if(r===!1)return null;if(r instanceof jh)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),e);return ne(r)}findNextCellToFocusOn(t,e,n){let i=t;for(;;){t!==i&&(t=i),e||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,e);let r=this.gos.getCallback("tabToNextCell");if(ne(r)){let l=r({backwards:e,editing:n,previousCellPosition:t,nextCellPosition:i||null});if(l===!0||l===null)l===null&&$("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=t;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:i.column},fromCell:!0}),null}let s=this.gos.get("editType")==="fullRow";if(n&&!s&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let o=this.getCellByPosition(i);if(!o){let a=this.rowRenderer.getRowByPosition(i);if(!a||!a.isFullWidth()||n)continue;return a}if(!o.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),o}}isCellEditable(t){let e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}getCellByPosition(t){let e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null}lookupRowNodeForCell(t){return t.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.rowModel.getRow(t.rowIndex)}navigateToNextCell(t,e,n,i){let r=n,s=!1;for(;r&&(r===n||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?e===G.LEFT&&(r=this.getLastCellOfColSpan(r)):e===G.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(e,r),s=vt(r);if(s&&t&&t.key===G.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){let a=this.gos.getCallback("navigateToNextCell");if(ne(a)){let c=a({key:e,previousCellPosition:n,nextCellPosition:r||null,event:t});ne(c)?r={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:r=null}}if(!r)return;if(r.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:n.column},event:t||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(r);o?this.focusPosition(o):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){this.ensureCellVisible(t);let e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e=!1){let n=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(t);if(!i||!i.isFullWidth())return!1;let r=this.focusService.getFocusedCell(),s={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?Rt(n):n[0])};this.focusPosition(s);let o=r!=null?this.rowPositionUtils.before(s,r):!1,a={type:"fullWidthRowFocused",rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(t){this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(t)}isValidNavigateCell(t){return!!this.rowPositionUtils.getRowNode(t)}getLastCellOfColSpan(t){let e=this.getCellByPosition(t);if(!e)return t;let n=e.getColSpanningList();return n.length===1?t:{rowIndex:t.rowIndex,column:Rt(n),rowPinned:t.rowPinned}}ensureCellVisible(t){let e=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(t.rowIndex);!(e&&n?.sticky)&&vt(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)}},x_e=class extends q{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(t){this.dragService=t.dragService,this.ctrlsService=t.ctrlsService}addResizeBar(t){let e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();let n=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(n)}setResizeIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}},F_e=class extends q{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(t){this.popupService=t.popupService,this.focusService=t.focusService,this.ctrlsService=t.ctrlsService,this.menuService=t.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(t,e,n){this.showPopup(t,i=>{this.popupService.positionPopupUnderMouseEvent({column:t,type:n,mouseEvent:e,ePopup:i})},n,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(t,e,n){let i=-1,r="left",s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(i=1,r="right");let o=s?void 0:4*i,a=s?void 0:4;this.showPopup(t,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:e,ePopup:l,nudgeX:o,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:t})},n,e,s)}showPopup(t,e,n,i,r){let s=t?this.createBean(new U0e(t,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");bs(o,"presentation"),o.classList.add("ag-menu"),r||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:g=>this.trapFocusWithin(g,o)}),o.appendChild(s?.getGui());let a,l=()=>s?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=g=>{t.setMenuVisible(!1,"contextMenu");let m=g instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),m&&i&&va(i)){let v=this.focusService.findTabbableParent(i);v&&v.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,t)},d=this.localeService.getLocaleTextFunc(),h=r&&n!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>e(o),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),s.afterInit().then(()=>{e(o),s.afterGuiAttached({container:n,hidePopup:a})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,t)}trapFocusWithin(t,e){t.key!==G.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,n){let i={type:"columnMenuVisibleChanged",visible:t,switchingTab:!1,key:e,column:n??null};this.eventService.dispatchEvent(i)}isMenuEnabled(t){return t.isFilterAllowed()&&(t.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},A_e=50,P_e=class extends q{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(t,e){let n=this.gos.getWindow(),i=()=>{let a=new n.ResizeObserver(e);return a.observe(t),()=>a.disconnect()},r=()=>{let a=t?.clientWidth??0,l=t?.clientHeight??0,c=!0,u=()=>{if(c){let d=t?.clientWidth??0,h=t?.clientHeight??0;(d!==a||h!==l)&&(a=d,l=h,e()),this.doNextPolyfillTurn(u)}};return u(),()=>c=!1},s=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!s?i():this.getFrameworkOverrides().wrapIncoming(()=>r(),"resize-observer")}doNextPolyfillTurn(t){this.polyfillFunctions.push(t),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let t=()=>{let e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(n=>n())};this.polyfillScheduled=!0,window.setTimeout(t,A_e)}},M_e=class extends q{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(t){this.ctrlsService=t.ctrlsService,this.paginationService=t.paginationService}setScrollTop(t){let e=this.gos.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&t===0){let n=this.paginationService?.getCurrentPage()??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=t}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(t){this.useAnimationFrame===!1&&$(`AnimationFrameService.${t} called but animation frames are off`)}createTask(t,e,n){this.verifyAnimationFrameOn(n);let i={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(t){this.cancelledTasks.add(t)}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;let e=this.scrollGoingDown?1:-1;t.list.sort((n,i)=>n.index!==i.index?e*(i.index-n.index):i.createOrder-n.createOrder),t.sorted=!0}addDestroyTask(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()}executeFrame(t){this.verifyAnimationFrameOn("executeFrame");let e=this.createTasksP1,n=e.list,i=this.createTasksP2,r=i.list,s=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=t<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<t;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(n.length)this.sortTaskList(e),d=n.pop().task;else if(r.length)this.sortTaskList(i),d=r.pop().task;else if(s.length)d=s.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}n.length||r.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)}requestAnimationFrame(t){let e=this.gos.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)}isQueueEmpty(){return!this.ticking}debounce(t){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(t,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,t()}))}}};var O_e=class extends q{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(t){this.rowModel=t.rowModel}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(t){if(!this.isClientSideRowModel)return;let e=new Set(t);this.rowModel.forEachNode(n=>{n.id&&e.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let t=[];return this.rowModel.forEachNode(({expanded:e,id:n})=>{e&&n&&t.push(n)}),t}expandAll(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)}setRowNodeExpanded(t,e,n,i){t&&(n&&t.parent&&t.parent.level!==-1&&this.setRowNodeExpanded(t.parent,e,n,i),t.setExpanded(e,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},k_e=class extends q{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(t){this.filterMenuFactory=t.filterMenuFactory,this.ctrlsService=t.ctrlsService,this.animationFrameService=t.animationFrameService,this.filterManager=t.filterManager,this.rowRenderer=t.rowRenderer,this.columnChooserFactory=t.columnChooserFactory,this.contextMenuFactory=t.contextMenuFactory,this.enterpriseMenuFactory=t.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){let e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)}showHeaderContextMenu(t,e,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,n)}getContextMenuPosition(t,e){let n=this.getRowCtrl(t),i=this.getCellGui(n,e);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};let r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(t){let{rowNode:e}=t,n=t.column,{anchorToElement:i,value:r}=t;e&&n&&r==null&&(r=e.getValueFromValueService(n)),i==null&&(i=this.getContextMenuAnchorElement(e,n)),this.contextMenuFactory?.onContextMenu(t.mouseEvent??null,t.touchEvent??null,e??null,n??null,r,i)}showColumnChooser(t){this.columnChooserFactory?.showColumnChooser(t)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(t){let{suppressMenu:e,suppressHeaderMenuButton:n}=t.getColDef();return!(n??e)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!t?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let t=!this.isSuppressMenuHide();return!(Uu()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return!!this.filterManager?.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(t){let e=t.getColDef(),n=e.floatingFilterComponentParams?.suppressFilterButton;return n!=null&&$("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),e.suppressFloatingFilterButton==null?!n:!e.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){let t=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(t,e,n,i){let{positionBy:r}=e,s=e.column;if(r==="button"){let{buttonElement:o}=e;t.showMenuAfterButtonClick(s,o,n,i)}else if(r==="mouse"){let{mouseEvent:o}=e;t.showMenuAfterMouseEvent(s,o,n,i)}else s&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getHeaderCtrlForColumn(s);t.showMenuAfterButtonClick(s,o.getAnchorElementForMenu(i),n,!0)}))}getRowCtrl(t){let{rowIndex:e,rowPinned:n}=t||{};if(e!=null)return this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n})||void 0}getCellGui(t,e){return!t||!e?void 0:t.getCellCtrl(e)?.getGui()||void 0}getContextMenuAnchorElement(t,e){let n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(t);if(!i)return n;let r=this.getCellGui(i,e);return r||(i.isFullWidth()?i.getFullWidthElement():n)}},N_e=class extends Bh{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){let n=super.setValue(t,e);return this.eInput.value=t,n}setCols(t){return this.eInput.cols=t,this}setRows(t){return this.eInput.rows=t,this}},L_e={selector:"AG-INPUT-TEXT-AREA",component:N_e},V_e=class extends om{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[L_e]),this.eTextArea=ve}init(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),ne(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(t){let e=t.key;(e===G.LEFT||e===G.UP||e===G.RIGHT||e===G.DOWN||t.shiftKey&&e===G.ENTER)&&t.stopPropagation()}afterGuiAttached(){let t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let t=this.eTextArea.getValue();return!ne(t)&&!ne(this.params.value)?this.params.value:this.params.parseValue(t)}},B_e=class extends om{constructor(t){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=t}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let t=this.getGui(),e=this.params,n=i=>{rL(this.gos,i,e.node,e.column,!0)||e.onKeyDown(i)};this.addManagedElementListeners(t,{keydown:n})}},G_e=class extends om{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[Q0e]),this.eSelect=ve,this.startedByEnter=!1}wireBeans(t){this.valueService=t.valueService}init(t){this.focusAfterAttached=t.cellStartedEdit;let{eSelect:e,valueService:n,gos:i}=this,{values:r,value:s,eventKey:o}=t;if(vt(r)){$("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===G.ENTER:!1;let a=!1;r.forEach(d=>{let h={value:d},p=n.formatValue(t.column,null,d),g=p!=null;h.text=g?p:d,e.addOption(h),a=a||s===d}),a?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=t;l!=null&&e.setPickerGap(l),u!=null&&e.setPickerMaxHeight(u),c!=null&&e.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>t.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},jT=class extends om{constructor(t){super(`
            <div class="ag-cell-edit-wrapper">
                ${t.getTemplate()}
            </div>`,t.getAgComponents()),this.cellEditorInput=t,this.eInput=ve}init(t){this.params=t;let e=this.eInput;this.cellEditorInput.init(e,t);let n;if(t.cellStartedEdit){this.focusAfterAttached=!0;let i=t.eventKey;i===G.BACKSPACE||t.eventKey===G.DELETE?n="":i&&i.length===1?n=i:(n=this.cellEditorInput.getStartValue(),i!==G.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&e.setStartValue(n),this.addManagedElementListeners(e.getGui(),{keydown:i=>{let{key:r}=i;(r===G.PAGE_UP||r===G.PAGE_DOWN)&&i.preventDefault()}})}afterGuiAttached(){let t=this.localeService.getLocaleTextFunc(),e=this.eInput;if(e.setInputAriaLabel(t("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;pc()||e.getFocusableElement().focus();let n=e.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let t=this.eInput,e=t.getFocusableElement(),n=t.getInputElement();e.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},H_e=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[HT]}init(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)}getValue(){let t=this.eInput.getValue();return!ne(t)&&!ne(this.params.value)?this.params.value:this.params.parseValue(t)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let t=this.eInput.getValue(),e=ne(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},E7=class extends jT{constructor(){super(new H_e)}},U_e=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[sSe]}init(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);let n=t.getInputElement();e.preventStepping?t.addManagedElementListeners(n,{keydown:this.preventStepping}):e.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(t){(t.key===G.UP||t.key===G.DOWN)&&t.preventDefault()}getValue(){let t=this.eInput.getValue();if(!ne(t)&&!ne(this.params.value))return this.params.value;let e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},j_e=class extends jT{constructor(){super(new U_e)}},W_e=class extends Yh{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct();let t=pc();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||t||this.eInput.focus()}}),this.eInput.step="any"}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}setMin(t){let e=t instanceof Date?Fo(t??null,!1)??void 0:t;return this.min===e?this:(this.min=e,dc(this.eInput,"min",e),this)}setMax(t){let e=t instanceof Date?Fo(t??null,!1)??void 0:t;return this.max===e?this:(this.max=e,dc(this.eInput,"max",e),this)}setStep(t){return this.step===t?this:(this.step=t,dc(this.eInput,"step",t),this)}getDate(){if(this.eInput.validity.valid)return Ss(this.getValue())??void 0}setDate(t,e){this.setValue(Fo(t??null,!1),e)}},D7={selector:"AG-INPUT-DATE-FIELD",component:W_e},z_e=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[D7]}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.eInput.getDate();return!ne(t)&&!ne(this.params.value)?this.params.value:t??null}getStartValue(){let{value:t}=this.params;if(t instanceof Date)return Fo(t,!1)}},q_e=class extends jT{constructor(){super(new z_e)}},K_e=class{constructor(t){this.getDataTypeService=t}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[D7]}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.formatDate(this.eInput.getDate());return!ne(t)&&!ne(this.params.value)?this.params.value:this.params.parseValue(t??"")}getStartValue(){return Fo(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(t){let e=this.getDataTypeService();return e?e.getDateParserFunction(this.params.column)(t):Ss(t)??void 0}formatDate(t){let e=this.getDataTypeService();return e?e.getDateFormatterFunction(this.params.column)(t):Fo(t??null,!1)??void 0}},Y_e=class extends jT{wireBeans(t){this.dataTypeService=t.dataTypeService}constructor(){super(new K_e(()=>this.dataTypeService))}},Q_e=class extends om{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[_L]),this.eCheckbox=ve}init(t){this.params=t;let e=t.value??void 0;this.eCheckbox.setValue(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(e),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(t){let e=this.localeService.getLocaleTextFunc(),n=gL(e,t),i=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},XC=class{constructor(t){this.cellValueChanges=t}},UN=class extends XC{constructor(t,e,n,i){super(t),this.initialRange=e,this.finalRange=n,this.ranges=i}},X_e=10,B9=class{constructor(t){this.actionStack=[],this.maxStackSize=t||X_e,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},$_e=class extends q{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=t=>{let e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:s,rowIndex:o,column:a,oldValue:l,value:c}=t,u={rowPinned:s,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(t){this.focusService=t.focusService,this.ctrlsService=t.ctrlsService,this.cellPositionUtils=t.cellPositionUtils,this.rowPositionUtils=t.rowPositionUtils,this.columnModel=t.columnModel,this.rangeService=t.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let t=this.gos.get("undoRedoCellEditingLimit");if(t<=0)return;this.undoStack=new B9(t),this.redoStack=new B9(t),this.addListeners();let e=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:e,newColumnsLoaded:e,columnGroupOpened:e,columnRowGroupChanged:e,columnMoved:e,columnPinned:e,columnVisible:e,rowDragEnd:e}),this.ctrlsService.whenReady(n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(t){let e={type:"undoStarted",source:t};this.eventService.dispatchEvent(e);let n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:"undoEnded",source:t,operationPerformed:n};this.eventService.dispatchEvent(i)}redo(t){let e={type:"redoStarted",source:t};this.eventService.dispatchEvent(e);let n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:"redoEnded",source:t,operationPerformed:n};this.eventService.dispatchEvent(i)}undoRedo(t,e,n,i,r){if(!t)return!1;let s=t.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,o=>o[i],r),s instanceof UN?this.processRange(this.rangeService,s.ranges||[s[n]]):this.processCell(s.cellValueChanges),e.push(s),!0)}processAction(t,e,n){t.cellValueChanges.forEach(i=>{let{rowIndex:r,rowPinned:s,columnId:o}=i,a={rowIndex:r,rowPinned:s},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,e(i),n)})}processRange(t,e){let n;t.removeAllCellRanges(!0),e.forEach((i,r)=>{if(!i)return;let s=i.startRow,o=i.endRow;r===e.length-1&&(n={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));let a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};t.addCellRange(a)})}processCell(t){let e=t[0],{rowIndex:n,rowPinned:i}=e,r={rowIndex:n,rowPinned:i},s=this.rowPositionUtils.getRowNode(r),o={rowPinned:e.rowPinned,rowIndex:s.rowIndex,columnId:e.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(t,e){let{rowIndex:n,columnId:i,rowPinned:r}=t,s=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(i);if(!o)return;s.ensureIndexVisible(n),s.ensureColumnVisible(o);let a={rowIndex:n,column:o,rowPinned:r};this.focusService.setFocusedCell(Se(W({},a),{forceBrowserFocus:!0})),e?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}},rowEditingStopped:()=>{let t=new XC(this.cellValueChanges);this.pushActionsToUndoStack(t),this.activeRowEdit=null},cellEditingStarted:t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}},cellEditingStopped:t=>{if(this.activeCellEdit=null,t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new XC(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let t=new XC(this.cellValueChanges);this.pushActionsToUndoStack(t),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:t=>{let e=new UN(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let t;this.rangeService&&this.gos.get("enableRangeSelection")?t=new UN(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):t=new XC(this.cellValueChanges),this.pushActionsToUndoStack(t),this.isRangeInAction=!1}})}pushActionsToUndoStack(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()}};function Z_e(t){return t.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function J_e(t){return t.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function T7(t,e,n="auto"){t.frameworkOverrides.wrapIncoming(()=>t.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(e,n),"ensureVisible")}function R7(t,e,n){t.frameworkOverrides.wrapIncoming(()=>t.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(e,n),"ensureVisible")}function eEe(t,e,n=null){t.frameworkOverrides.wrapIncoming(()=>t.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(e,n),"ensureVisible")}function tEe(t){t.undoRedoService?.undo("api")}function nEe(t){t.undoRedoService?.redo("api")}function iEe(t,e={}){return t.rowRenderer.getCellEditorInstances(e).map(JC)}function rEe(t){return t.rowRenderer.getEditingCells()}function sEe(t,e=!1){t.rowRenderer.stopEditing(e)}function oEe(t,e){let n=t.columnModel.getCol(e.colKey);if(!n){$(`no column found for ${e.colKey}`);return}let i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:n};e.rowPinned==null&&R7(t,e.rowIndex),T7(t,e.colKey);let s=t.navigationService.getCellByPosition(i);s&&(t.focusService.isCellFocused(i)||t.focusService.setFocusedCell(i),s.startRowOrCellEdit(e.key))}function aEe(t){return t.undoRedoService?.getCurrentUndoStackSize()??0}function lEe(t){return t.undoRedoService?.getCurrentRedoStackSize()??0}var cEe=class extends q{constructor(){super(...arguments),this.beanName="editService"}wireBeans(t){this.navigationService=t.navigationService,this.userComponentFactory=t.userComponentFactory,this.valueService=t.valueService}startEditing(t,e=null,n=!1,i=null){let r=this.createCellEditorParams(t,e,n),s=t.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(s,r),a=o?.popupFromSelector!=null?o.popupFromSelector:!!s.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:s.cellEditorPopupPosition;t.setEditing(!0,o),t.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents"));let c=t.createEvent(i,"cellEditingStarted");this.eventService.dispatchEvent(c)}stopEditing(t,e){let n=t.getComp(),{newValue:i,newValueExists:r}=this.takeValueFromCellEditor(e,n),s=t.getRowNode(),o=t.getColumn(),a=s.getValueFromValueService(o),l=!1;r&&(l=this.saveNewValue(t,a,i,s,o)),t.setEditing(!1,void 0),n.setEditDetails(),t.updateAndFormatValue(!1),t.refreshCell({forceRefresh:!0,suppressFlash:!0});let c=Se(W({},t.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:i,valueChanged:l});return this.eventService.dispatchEvent(c),l}handleColDefChanged(t){let e=t.getCellEditor();if(e?.refresh){let{eventKey:n,cellStartedEdit:i}=t.getEditCompDetails().params,r=this.createCellEditorParams(t,n,i),s=t.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(s,r);e.refresh(o.params)}}setFocusOutOnEditor(t){let e=t.getComp().getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(t){let e=t.getComp().getCellEditor();e&&e.focusIn?e.focusIn():t.focusCell(!0)}stopEditingAndFocus(t,e=!1,n=!1){t.stopRowOrCellEdit(),t.focusCell(!0),e||this.navigateAfterEdit(n,t.getCellPosition())}createPopupEditorWrapper(t){return new B_e(t)}takeValueFromCellEditor(t,e){let n={newValueExists:!1};if(t)return n;let i=e.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(t,e,n,i,r){if(n===e)return!1;t.setSuppressRefreshCell(!0);let s=i.setDataValue(r,n,"edit");return t.setSuppressRefreshCell(!1),s}createCellEditorParams(t,e,n){let i=t.getColumn(),r=t.getRowNode();return this.gos.addGridCommonParams({value:r.getValueFromValueService(i),eventKey:e,column:i,colDef:i.getColDef(),rowIndex:t.getCellPosition().rowIndex,node:r,data:r.data,cellStartedEdit:n,onKeyDown:t.onKeyDown.bind(t),stopEditing:t.stopEditingAndFocus.bind(t),eGridCell:t.getGui(),parseValue:s=>this.valueService.parseValue(i,r,s,t.getValue()),formatValue:t.formatValue.bind(t)})}navigateAfterEdit(t,e){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=t?G.UP:G.DOWN;this.navigationService.navigateToNextCell(null,i,e,!1)}}},uEe=class extends q{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(t,e=null,n=null,i=null){t.getAllCellCtrls().reduce((s,o)=>{let a=o===n;return a?o.startEditing(e,a,i):o.startEditing(null,a,i),s?!0:o.isEditing()},!1)&&this.setEditing(t,!0)}stopEditing(t,e=!1){let n=t.getAllCellCtrls(),i=t.isEditing();t.setStoppingRowEdit(!0);let r=!1;for(let s of n){let o=s.stopEditing(e);i&&!e&&!r&&o&&(r=!0)}if(r){let s=t.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(s)}i&&this.setEditing(t,!1),t.setStoppingRowEdit(!1)}setEditing(t,e){t.setEditingRow(e),t.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",e));let n=e?t.createRowEvent("rowEditingStarted"):t.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(n)}},Qh={version:Xe,moduleName:"@ag-grid-community/edit-core",beans:[cEe]},dEe={version:Xe,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:tEe,redoCellEditing:nEe,getCellEditorInstances:iEe,getEditingCells:rEe,stopEditing:sEe,startEditingCell:oEe,getCurrentUndoSize:aEe,getCurrentRedoSize:lEe},dependantModules:[Qh]},hEe={version:Xe,moduleName:"@ag-grid-community/undo-redo-edit",beans:[$_e],dependantModules:[Qh]},fEe={version:Xe,moduleName:"@ag-grid-community/full-row-edit",beans:[uEe],dependantModules:[Qh]},I7={version:Xe,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:E7}],dependantModules:[Qh]},pEe={version:Xe,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:E7},{name:"agNumberCellEditor",classImp:j_e},{name:"agDateCellEditor",classImp:q_e},{name:"agDateStringCellEditor",classImp:Y_e},{name:"agCheckboxCellEditor",classImp:Q_e}],dependantModules:[I7]},gEe={version:Xe,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:G_e}],dependantModules:[Qh]},mEe={version:Xe,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:V_e}],dependantModules:[Qh]},vEe={version:Xe,moduleName:"@ag-grid-community/all-editors",dependantModules:[I7,pEe,gEe,mEe]},yEe={version:Xe,moduleName:"@ag-grid-community/editing",dependantModules:[Qh,hEe,fEe,vEe,dEe]},CEe=class extends q{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(t){this.rowRenderer=t.rowRenderer,this.ctrlsService=t.ctrlsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){let n=this.getHeaderCellForColumn(t);if(!n)return-1;let i=this.rowRenderer.getAllCellsForColumn(t);return e||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(t){let e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(t){let e=document.createElement("form");e.style.position="fixed";let n=this.centerRowContainerCtrl.getContainerElement();t.forEach(s=>this.cloneItemIntoDummy(s,e)),n.appendChild(e);let i=e.offsetWidth;n.removeChild(e);let r=this.getAutoSizePadding();return i+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(t){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(t);i!=null&&(e=i)}),e}cloneItemIntoDummy(t,e){let n=t.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let o=t.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&r.add(c)}break}o=o.parentElement}i.appendChild(n),e.appendChild(i)}},wEe=class extends q{constructor(t,e){super(),this.createRowCon=t,this.destroyRowCtrls=e,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(t){this.rowModel=t.rowModel,this.rowRenderer=t.rowRenderer,this.ctrlsService=t.ctrlsService,this.pageBoundsService=t.pageBoundsService}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(t){if(this.extraTopHeight===t)return;this.extraTopHeight=t;let e={type:"stickyTopOffsetChanged",offset:t};this.eventService.dispatchEvent(e)}setOffsetBottom(t){this.extraBottomHeight!==t&&(this.extraBottomHeight=t)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(t){return this.isClientSide?this.getClientSideLastPixelOfGroup(t):this.getServerSideLastPixelOfGroup(t)}getFirstPixelOfGroup(t){return t.footer?t.sibling.rowTop+t.sibling.rowHeight-1:t.hasChildren()?t.rowTop-1:0}getServerSideLastPixelOfGroup(t){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(t.isExpandable()||t.footer){if(t.master)return t.detailNode.rowTop+t.detailNode.rowHeight;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let n=t.childStore?.getStoreBounds();return t.footer&&(n=t.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(t){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(t.isExpandable()||t.footer){if(t.footer&&t.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let i=t.footer?t.sibling:t;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=Rt(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(t){let e=t==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(t,new Set,n);let i=e?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,r=new Set,s=c=>{if(r.add(c),e){let u=this.getLastPixelOfGroup(c),d=i+n+c.rowHeight;u<d?c.stickyRowTop=n+(u-d):c.stickyRowTop=n}else{let u=this.getFirstPixelOfGroup(c),d=i-(n+c.rowHeight);u>d?c.stickyRowTop=n-(u-d):c.stickyRowTop=n}n=0,r.forEach(u=>{let d=u.stickyRowTop+u.rowHeight;n<d&&(n=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!r.has(c):c.isExpandable()?a===!0?!1:!r.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=i+n;e||(u=i-n);let d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;let g=this.getStickyAncestors(h).find(v=>(e?v.rowIndex<d:v.rowIndex>d)&&l(v));if(g){s(g);continue}if((e?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){s(h);continue}break}return e||r.forEach(c=>{c.stickyRowTop=n-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(t,r,n)}areFooterRowsStickySuppressed(){let t=this.gos.get("suppressStickyTotalRow");if(t===!0)return!0;let e=!!this.gos.get("groupIncludeFooter")||t==="group",n=!!this.gos.get("groupIncludeTotalFooter")||t==="grand";return e&&n?!0:n?"grand":e?"group":!1}canRowsBeSticky(){let t=this.gos.isGroupRowsSticky(),e=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return t&&(!e||!n)}getStickyAncestors(t){let e=[],n=t.footer?t.sibling:t.parent;for(;n;)n.sibling&&e.push(n.sibling),e.push(n),n=n.parent;return e.reverse()}checkStickyRows(){let t=this.updateStickyRows("top"),e=this.updateStickyRows("bottom");return t||e}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(t){let e=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===t)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].getRowNode();i!==t&&e.add(i)}this.refreshNodesAndContainerHeight("top",e,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].getRowNode();i!==t&&e.add(i)}this.refreshNodesAndContainerHeight("bottom",e,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(t,e,n){let i=t==="top",r=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},o=[];for(let h=0;h<r.length;h++){let p=r[h].getRowNode();if(!e.has(p)){s[p.id]=r[h],p.sticky=!1;continue}o.push(r[h])}let a=new Set;for(let h=0;h<o.length;h++)a.add(o[h].getRowNode());let l=[];e.forEach(h=>{a.has(h)||(h.sticky=!0,l.push(this.createRowCon(h,!1,!1)))});let c=!!l.length||o.length!==r.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(s,!1);let u=[...o,...l];u.sort((h,p)=>p.getRowNode().rowIndex-h.getRowNode().rowIndex),i||u.reverse(),u.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return i?(e.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(e.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let t=!1,e=n=>{let i=n.getRowNode();if(i.rowHeightEstimated){let r=this.gos.getRowHeightForNode(i);i.setRowHeight(r.height),t=!0}};return this.stickyTopRowCtrls.forEach(e),this.stickyBottomRowCtrls.forEach(e),t}},SEe=class extends q{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let t=()=>{this.getAllCellCtrls().forEach(s=>s.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener("rangeSelectionChanged",t),this.eventService.addEventListener("columnMoved",e),this.eventService.addEventListener("columnPinned",e),this.eventService.addEventListener("columnVisible",e)},i=()=>{this.eventService.removeEventListener("rangeSelectionChanged",t),this.eventService.removeEventListener("columnMoved",e),this.eventService.removeEventListener("columnPinned",e),this.eventService.removeEventListener("columnVisible",e)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListener("enableRangeSelection",s=>{s.currentValue?n():i()}),this.gos.get("enableRangeSelection")&&n()}}wireBeans(t){this.animationFrameService=t.animationFrameService,this.paginationService=t.paginationService,this.pageBoundsService=t.pageBoundsService,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.pinnedRowModel=t.pinnedRowModel,this.rowModel=t.rowModel,this.focusService=t.focusService,this.beans=t,this.rowContainerHeightService=t.rowContainerHeightService,this.ctrlsService=t.ctrlsService,this.environment=t.environment}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let t=this.rowModel.getType();(t==="clientSide"||t==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new wEe(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new bEe(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let t=Gu(this.rowCtrlsByRowIndex),e=Gu(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||n.length>0?this.allRowCtrls=[...t,...e,...n]:this.allRowCtrls=t}onCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:t=>{this.onCellFocusChanged(t)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:t=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(t))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(e=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===e&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},r=()=>{n(l=>l.onWidthChanged())},s=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",s),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",s),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let t=this.gos.isDomLayout("print"),e=t||this.gos.get("embedFullWidthRows"),n=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){let e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(t){let e=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellElement(t);i&&e.push(i)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(t,e){let n=Object.fromEntries(e.map(r=>[r.id,r])),i=Object.fromEntries(t.map(r=>[r.getRowNode().id,r]));for(let r=0;r<e.length;r++){let s=e[r],o=t[r];o&&n[o.getRowNode().id]===void 0&&(o.destroyFirstPass(),o.destroySecondPass()),s.id in i?(t[r]=i[s.id],delete i[s.id]):t[r]=new Wh(s,this.beans,!1,!1,this.printLayout)}t.length=e.length}onPinnedRowDataChanged(){let t={recycleRows:!0};this.redrawAfterModelUpdate(t)}redrawRow(t,e=!1){if(t.sticky)this.stickyRowFeature.refreshStickyNode(t);else if(this.cachedRowCtrls?.has(t)){this.cachedRowCtrls.removeRow(t);return}else{let n=i=>{let r=i[t.rowIndex];r&&r.getRowNode()===t&&(r.destroyFirstPass(),r.destroySecondPass(),i[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){if(t!=null){t?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(t){let e=t?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;let n=this.gos.getActiveDomElement(),i=this.gos.getDomData(n,jh.DOM_DATA_KEY_CELL_CTRL),r=this.gos.getDomData(n,Wh.DOM_DATA_KEY_ROW_CTRL);return i||r?e:null}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();let e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);let n=!t.domLayoutChanged&&!!t.recycleRows,i=t.animate&&this.gos.isAnimateRows(),r=n?this.getRowsToRecycle():null;if(n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let s=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();s&&this.updateContainerHeights(s)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){let e=t.newData||t.newPage,n=this.gos.get("suppressScrollOnNewData");e&&!n&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(t=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.pageBoundsService.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e+t)}getLockOnRefresh(){if(this.refreshInProgress){let t=this.frameworkOverrides.getLockOnRefreshError?.()??"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+t)}this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){t&&setTimeout(()=>{this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(t=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(t)})}getAllCellCtrls(){let t=[],e=this.getAllRowCtrls(),n=e.length;for(let i=0;i<n;i++){let r=e[i].getAllCellCtrls(),s=r.length;for(let o=0;o<s;o++)t.push(r[o])}return t}getAllRowCtrls(){let t=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],e=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...t,...e];for(let i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(t,e,n){let i=this.rowCtrlsByRowIndex[e];i&&i.addEventListener(t,n)}flashCells(t={}){this.getCellCtrls(t.rowNodes,t.columns).forEach(e=>e.flashCell(t))}refreshCells(t={}){let e={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};for(let n of this.getCellCtrls(t.rowNodes,t.columns))n.refreshOrDestroyCell(e);this.refreshFullWidth(t.rowNodes)}refreshFullWidth(t){if(!t)return;let e=null;this.stickyRowFeature&&eL()&&(e=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(t)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),e&&this.restoreFocusedCell(e)}getCellRendererInstances(t){let e=this.getCellCtrls(t.rowNodes,t.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if(t.columns?.length)return e;let n=[],i=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(i&&!this.isRowInMap(r.getRowNode(),i)||!r.isFullWidth())return;let s=r.getFullWidthCellRenderers();for(let o=0;o<s.length;o++){let a=s[o];a!=null&&n.push(a)}}),[...n,...e]}getCellEditorInstances(t){let e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(n=>{let i=n.getCellEditor();i&&e.push(i)}),e}getEditingCells(){let t=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){let n=e.getCellPosition();t.push(n)}}),t}mapRowNodes(t){if(!t)return;let e={top:{},bottom:{},normal:{}};return t.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":e.top[i]=n;break;case"bottom":e.bottom[i]=n;break;default:e.normal[i]=n;break}}),e}isRowInMap(t,e){let n=t.id;switch(t.rowPinned){case"top":return e.top[n]!=null;case"bottom":return e.bottom[n]!=null;default:return e.normal[n]!=null}}getRowCtrls(t){let e=this.mapRowNodes(t),n=this.getAllRowCtrls();return!t||!e?n:n.filter(i=>{let r=i.getRowNode();return this.isRowInMap(r,e)})}getCellCtrls(t,e){let n;ne(e)&&(n={},e.forEach(r=>{let s=this.columnModel.getCol(r);ne(s)&&(n[s.getId()]=!0)}));let i=[];return this.getRowCtrls(t).forEach(r=>{r.getAllCellCtrls().forEach(s=>{let o=s.getColumn().getId();n&&!n[o]||i.push(s)})}),i}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let t=[];Do(this.rowCtrlsByRowIndex,(n,i)=>{i.getRowNode().id==null&&t.push(n)}),this.removeRowCtrls(t);let e={};return Do(this.rowCtrlsByRowIndex,(n,i)=>{let r=i.getRowNode();e[r.id]=i}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(e),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){let{afterScroll:e}=t,n;this.stickyRowFeature&&eL()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;if(this.stickyRowFeature){s=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let o=this.firstRenderedRow!==i||this.lastRenderedRow!==r;if(!(e&&!s&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!s),n!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(t,e){let n={};t.forEach(s=>n[s]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!n[s]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){let e=lSe(this.firstRenderedRow,this.lastRenderedRow),n=(r,s)=>{let o=s.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&e.push(o)};Do(this.rowCtrlsByRowIndex,n),Do(t,n),e.sort((r,s)=>r-s);let i=[];for(let r=0;r<e.length;r++){let s=e[r],o=this.rowModel.getRow(s);o&&!o.sticky&&i.push(s)}return i}recycleRows(t,e=!1,n=!1){let i=this.calculateIndexesToDraw(t);(this.printLayout||n)&&(e=!1),this.removeRowCompsNotToDraw(i,!e);let r=[];i.forEach(s=>{let o=this.createOrUpdateRowCtrl(s,t,e,n);ne(o)&&r.push(o)}),t&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){let e={type:"displayedRowsChanged",afterScroll:t};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.isPinningLeft(),e=this.visibleColsService.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let t=[];this.getFullWidthRowCtrls().forEach(e=>{let n=e.getRowNode().rowIndex;t.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){let e=this.mapRowNodes(t);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.getRowNode();return!(e!=null&&!this.isRowInMap(i,e))})}createOrUpdateRowCtrl(t,e,n,i){let r,s=this.rowCtrlsByRowIndex[t];if(s||(r=this.rowModel.getRow(t),ne(r)&&ne(e)&&e[r.id]&&r.alreadyRendered&&(s=e[r.id],e[r.id]=null)),!s)if(r||(r=this.rowModel.getRow(t)),ne(r))s=this.createRowCon(r,n,i);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=s,s}destroyRowCtrls(t,e){let n=[];Do(t,(i,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}r.destroyFirstPass(!e),e?(this.zombieRowCtrls[r.getInstanceId()]=r,n.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()}}),e&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),QCe(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let t=this.getRowBuffer(),e=this.gos.getRowHeightAsNumber();return t*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let t,e;if(!this.rowModel.isRowsToRender())t=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.pageBoundsService.getFirstRow(),e=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,d,h;do{let C=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:b,pageLastPixel:E}=this.pageBoundsService.getCurrentPagePixelRange(),T=this.rowContainerHeightService.getDivStretchOffset(),P=l.getScrollFeature().getVScrollPosition(),x=P.top,_=P.bottom;c?(d=b+T,h=E+T):(d=Math.max(x+C-a,b)+T,h=Math.min(_+C+a,E)+T),this.firstVisibleVPixel=Math.max(x+C,b)+T,this.lastVisibleVPixel=Math.min(_+C,E)+T,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let p=this.rowModel.getRowIndexAtPixel(d),g=this.rowModel.getRowIndexAtPixel(h),m=this.pageBoundsService.getFirstRow(),v=this.pageBoundsService.getLastRow();p<m&&(p=m),g>v&&(g=v),t=p,e=g}let n=this.gos.isDomLayout("normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);n&&!i&&e-t>r&&(e=t+r);let s=t!==this.firstRenderedRow,o=e!==this.lastRenderedRow;if(s||o){this.firstRenderedRow=t,this.lastRenderedRow=e;let a={type:"viewportChanged",firstRow:t,lastRow:e};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let t={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(t)})}ensureAllRowsInRangeHaveHeightsCalculated(t,e){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(t,e,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||r||n?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(t){let i=t.getRowNode(),r=this.focusService.isRowNodeFocused(i),s=t.isEditing(),o=i.detail;return r||s||o?!!this.isRowPresent(i):!1}isRowPresent(t){return this.rowModel.isRowPresent(t)?this.paginationService?this.paginationService.isRowPresent(t):!0:!1}createRowCon(t,e,n){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(i)return i;let r=this.gos.get("suppressAnimationFrame"),s=n&&!r&&!this.printLayout;return new Wh(t,this.beans,e,s,this.printLayout)}getRenderedNodes(){let t=this.rowCtrlsByRowIndex;return Object.values(t).map(e=>e.getRowNode())}getRowByPosition(t){let e,{rowIndex:n}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[n];break;case"bottom":e=this.bottomRowCtrls[n];break;default:e=this.rowCtrlsByRowIndex[n],e||(e=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null,e||(e=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;let i=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!i}},bEe=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;let e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){let e=t.id,n=this.entriesMap[e];delete this.entriesMap[e],qr(this.entriesList,n)}removeFromCache(t){let e=t.getRowNode().id;delete this.entriesMap[e],qr(this.entriesList,t)}getEntries(){return this.entriesList}},_Ee=class extends q{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(t){this.beans=t}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData()),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(t){let e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;return zi(e)}isRowsToRender(t){return!this.isEmpty(t)}getRowAtPixel(t,e){let n=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(zi(n))return 0;for(let i=0;i<n.length;i++){let r=n[i];if(r.rowTop+r.rowHeight-1>=t)return i}return n.length-1}onGridStylesChanges(t){if(t.rowHeightChanged){let e=n=>{n.setRowHeight(n.rowHeight,!0)};this.pinnedBottomRows.forEach(e),this.pinnedTopRows.forEach(e)}}ensureRowHeightsValid(){let t=!1,e=0,n=r=>{if(r.rowHeightEstimated){let s=this.gos.getRowHeightForNode(r);r.setRowTop(e),r.setRowHeight(s.height),e+=s.height,t=!0}};this.pinnedBottomRows?.forEach(n),e=0,this.pinnedTopRows?.forEach(n);let i={type:"pinnedHeightChanged"};return this.eventService.dispatchEvent(i),t}setPinnedTopRowData(){let t=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);let e={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){let t=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);let e={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(e)}createNodesFromData(t,e){let n=[];if(t){let i=this.gos.getRowIdCallback(),r=e?hc.ID_PREFIX_TOP_PINNED:hc.ID_PREFIX_BOTTOM_PINNED,s=0,o=e?"top":"bottom";t.forEach((a,l)=>{let c=new hc(this.beans);c.data=a,c.id=i?.({data:a,level:0,rowPinned:o})??r+this.nextId++,c.rowPinned=o,c.setRowTop(s),c.setRowHeight(this.gos.getRowHeightForNode(c).height),c.setRowIndex(l),s+=c.rowHeight,n.push(c)})}return n}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(t){return this.pinnedTopRows[t]}getPinnedBottomRow(t){return this.pinnedBottomRows[t]}forEachPinnedTopRow(t){zi(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)}forEachPinnedBottomRow(t){zi(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(t){if(!t||t.length===0)return 0;let e=Rt(t);return e.rowTop+e.rowHeight}};var EEe=class extends q{constructor(t){super(),this.state="needsLoading",this.version=0,this.id=t}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,e){this.successCommon(t,e)}pageLoaded(t,e,n){this.successCommon(t,{rowData:e,rowCount:n})}isRequestMostRecentAndLive(t){let e=t===this.version,n=this.isAlive();return e&&n}successCommon(t,e){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state="loaded",this.processServerResult(e))}dispatchLoadCompleted(t=!0){let e={type:"loadComplete",success:t,block:this};this.dispatchLocalEvent(e)}},DEe=class extends q{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(t){this.rowModel=t.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=Kr(this.performCheckBlocksToLoad.bind(this),t))}getMaxConcurrentDatasourceRequests(){let t=this.gos.get("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t}addBlock(t){this.blocks.push(t),t.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(t){qr(this.blocks,t)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Ro("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let t=this.getAvailableLoadingCount(),e=this.blocks.filter(n=>n.getState()==="needsLoading").slice(0,t);this.registerLoads(e.length),e.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let t={};return this.blocks.forEach(e=>{let{id:n,state:i}=e.getBlockStateJson();t[n]=i}),t}printCacheStatus(){this.gos.get("debug")&&Ro(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(t){this.activeBlockLoadsCount+=t}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},TEe={version:Xe,moduleName:"@ag-grid-community/row-node-block",beans:[DEe]},REe=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(t){this.rowModel=t}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(t){this.root=t,this.end=null,this.cachedRange.length=0}setEndRange(t){this.end=t,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let t=this.getRoot(),e=this.getEnd();if(t==null||e==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(t,e)}return this.cachedRange}isInRange(t){return this.root===null?!1:this.getRange().some(e=>e.id===t.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(t){let e=this.getRange();if(e.length===0)return{keep:[],discard:[]};let n=e[0].id===this.root.id,i=e.findIndex(r=>r.id===t.id);if(i>-1){let r=e.slice(0,i),s=e.slice(i+1);return this.setEndRange(t),n?{keep:r,discard:s}:{keep:s,discard:r}}else return{keep:e,discard:[]}}extend(t,e=!1){let n=this.getRoot();if(n==null){let r=this.getRange().slice();return e&&t.depthFirstSearch(s=>!s.group&&r.push(s)),r.push(t),this.setRoot(t),{keep:r,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(n,t).find(r=>r.id===this.end?.id))return this.setEndRange(t),{keep:this.getRange(),discard:[]};{let r=this.getRange().slice();return this.setEndRange(t),{keep:this.getRange(),discard:r}}}},IEe=class extends q{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(t){this.expressionService=t.expressionService}processAllCellClasses(t,e,n,i){this.processClassRules(void 0,t.cellClassRules,e,n,i),this.processStaticCellClasses(t,e,n)}processClassRules(t,e,n,i,r){if(e==null&&t==null)return;let s={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(e){let l=Object.keys(e);for(let c=0;c<l.length;c++){let u=l[c],d=e[u],h;typeof d=="string"?h=this.expressionService.evaluate(d,n):typeof d=="function"&&(h=d(n)),a(u,p=>{h?s[p]=!0:o[p]=!0})}}t&&r&&Object.keys(t).forEach(l=>a(l,c=>{s[c]||(o[c]=!0)})),r&&Object.keys(o).forEach(r),Object.keys(s).forEach(i)}getStaticCellClasses(t,e){let{cellClass:n}=t;if(!n)return[];let i;return typeof n=="function"?i=n(e):i=n,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(t,e,n){this.getStaticCellClasses(t,e).forEach(r=>{n(r)})}};var xEe=class extends q{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:e,eTopGuard:n,eBottomGuard:i,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:p}=t;this.comp=e,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.createManagedBean(new Kh(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedElementListeners(t,{focus:this.onFocus.bind(this)}))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.isFocusableContainer&&!this.eFocusableElement.contains(t.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(t.relatedTarget))return;let e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(t){let e=this.gos.getDocument(),n=this.focusService.findFocusableElements(e.body,null,!0),i=n.indexOf(t?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,s;t?(r=0,s=i):(r=i+1,s=n.length);let o=n.slice(r,s),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),o[t?o.length-1:0].focus()}onFocusIn(t){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(t),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;let e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();let n=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),t.preventDefault())}focusInnerElement(t=!1){let e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;let e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t,e){return t===this.eTopGuard&&!e||t===this.eBottomGuard&&(e??!0)}setAllowFocus(t){this.allowFocus=t}},FEe=class extends q{constructor(t){super(),this.comp=t}initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:e,eBottomGuard:n,eFocusableElement:i}=this,r=[e,n],s={setTabIndex:m=>{r.forEach(v=>m!=null?v.setAttribute("tabindex",m):v.removeAttribute("tabindex"))}};this.addTabGuards(e,n);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=t;this.tabGuardCtrl=this.createManagedBean(new xEe({comp:s,focusTrapActive:o,eTopGuard:e,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(t){let e=this.gos.getDocument().createElement("div"),n=t==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return e.classList.add("ag-tab-guard",n),bs(e,"presentation"),e}addTabGuards(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){let t=[this.eTopGuard,this.eBottomGuard];wr(this.comp.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e,n){wL(e)||(e=e.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):t(e,n)}},x7=class extends kt{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new FEe(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,e){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,e)}},AEe=0,PEe=200,MEe=class extends q{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(t){this.ctrlsService=t.ctrlsService,this.resizeObserverService=t.resizeObserverService,this.environment=t.environment}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){let{eventSource:e,ePopup:n}=t,i=this.getPopupIndex(n);if(i!==-1){let p=this.popupList[i];p.alignedToElement=e}let r=e.getBoundingClientRect(),s=this.getParentRect(),o=this.keepXYWithinBounds(n,r.top-s.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;let c=s.right-s.left-a,u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(n,"left")),u>c&&(u=0,this.setAlignedStyles(n,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(n,"right")),u<0&&(u=0,this.setAlignedStyles(n,"left"))),n.style.left=`${u}px`,n.style.top=`${o}px`;function d(){return r.right-s.left-2}function h(){return r.left-s.left-a}}positionPopupUnderMouseEvent(t){let{ePopup:e,nudgeX:n,nudgeY:i,skipObserver:r}=t;this.positionPopup({ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){let e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){let{ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:s,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=t,d=s.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(e);if(p!==-1){let m=this.popupList[p];m.alignedToElement=s}let g=()=>{let m=d.left-h.left;o==="right"&&(m-=e.offsetWidth-d.width);let v;return a==="over"?(v=d.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,d,h,t.nudgeY||0)==="under"?v=d.top-h.top+d.height:v=d.top-e.offsetHeight-(i||0)*2-h.top),{x:m,y:v}};this.positionPopup({ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(u,e,s,null,l,c)})}shouldRenderUnderOrAbove(t,e,n,i){let r=n.bottom-e.bottom,s=e.top-n.top,o=t.offsetHeight+i;return r>o?"under":s>o||s>r?"above":"under"}setAlignedStyles(t,e){let n=this.getPopupIndex(t);if(n===-1)return;let i=this.popupList[n],{alignedToElement:r}=i;!r||(["right","left","over","above","under"].forEach(o=>{r.classList.remove(`ag-has-popup-positioned-${o}`),t.classList.remove(`ag-popup-positioned-${o}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(t,e,n,i,r,s){let o=this.gos.getCallback("postProcessPopup");o&&o({column:r,rowNode:s,ePopup:e,type:t,eventSource:n,mouseEvent:i})}positionPopup(t){let{ePopup:e,keepWithinBounds:n,nudgeX:i,nudgeY:r,skipObserver:s,updatePosition:o}=t,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=o();c&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,i&&(u+=i),r&&(d+=r),n&&(u=this.keepXYWithinBounds(e,u,1),d=this.keepXYWithinBounds(e,d,0)),e.style.left=`${u}px`,e.style.top=`${d}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!s){let c=this.resizeObserverService.observeResize(e,()=>l(!0));setTimeout(()=>c(),PEe)}}getActivePopups(){return this.popupList.map(t=>t.element)}getPopupList(){return this.popupList}getParentRect(){let t=this.gos.getDocument(),e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),EK(e)}keepXYWithinBounds(t,e,n){let i=n===0,r=i?"clientHeight":"clientWidth",s=i?"top":"left",o=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),d=t.getBoundingClientRect(),h=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=u===l.body,m=Math.ceil(d[o]),C=g?(i?_K:OT)(c)+c[a]:u[r];g&&(C-=Math.abs(p[s]-h[s]));let b=C-m;return Math.min(Math.max(e,0),Math.abs(b))}addPopup(t){let e=this.gos.getDocument(),{eChild:n,ariaLabel:i,alwaysOnTop:r,positionCallback:s,anchorToElement:o}=t;if(!e)return $("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!r),c=this.addEventListenersToPopup(Se(W({},t),{wrapperEl:l}));return s&&s(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(t){let n=this.getPopupParent().getBoundingClientRect();ne(t.style.top)||(t.style.top=`${n.top*-1}px`),ne(t.style.left)||(t.style.left=`${n.left*-1}px`)}createPopupWrapper(t,e,n){let i=this.getPopupParent(),r=document.createElement("div");return this.environment.applyThemeClasses(r),r.classList.add("ag-popup"),t.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||bs(t,"dialog"),tm(t,e),r.appendChild(t),i.appendChild(r),n?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),r}handleThemeChange(t){if(t.themeChanged)for(let e of this.popupList)this.environment.applyThemeClasses(e.wrapper)}addEventListenersToPopup(t){let e=this.gos.getDocument(),n=this.getPopupParent(),{wrapperEl:i,eChild:r,closedCallback:s,afterGuiAttached:o,closeOnEsc:a,modal:l}=t,c=!1,u=g=>{if(!i.contains(this.gos.getActiveDomElement()))return;g.key===G.ESCAPE&&!Vu(g)&&p({keyboardEvent:g})},d=g=>p({mouseEvent:g}),h=g=>p({touchEvent:g}),p=(g={})=>{let{mouseEvent:m,touchEvent:v,keyboardEvent:C,forceHide:b}=g;!b&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:v},r)||c)||(c=!0,n.removeChild(i),e.removeEventListener("keydown",u),e.removeEventListener("mousedown",d),e.removeEventListener("touchstart",h),e.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),s&&s(m||v||C),this.removePopupFromPopupList(r))};return o&&o({hidePopup:p}),window.setTimeout(()=>{a&&e.addEventListener("keydown",u),l&&(e.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),e.addEventListener("touchstart",h),e.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(t,e,n,i){this.popupList.push({element:t,wrapper:e,hideFunc:n,instanceId:AEe++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(t,i)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){let n=this.getPopupIndex(t);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(s=>s&&s()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!e)return;let r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){let e=this.getPopupParent(),n=e.getBoundingClientRect(),{element:i,ePopup:r}=t,s=i.getBoundingClientRect(),o=n.top-s.top,a=n.left-s.left,l=o,c=a,u=r.style.top,d=parseInt(u.substring(0,u.length-1),10),h=r.style.left,p=parseInt(h.substring(0,h.length-1),10),g=this.getFrameworkOverrides();return new Xs(m=>{g.wrapIncoming(()=>{g.setInterval(()=>{let v=e.getBoundingClientRect(),C=i.getBoundingClientRect();if(C.top==0&&C.left==0&&C.height==0&&C.width==0){t.hidePopup();return}let E=v.top-C.top;if(E!=l){let P=this.keepXYWithinBounds(r,d+o-E,0);r.style.top=`${P}px`}l=E;let T=v.left-C.left;if(T!=c){let P=this.keepXYWithinBounds(r,p+a-T,1);r.style.left=`${P}px`}c=T},200).then(v=>{m(()=>{v!=null&&window.clearInterval(v)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){let{mouseEvent:n,touchEvent:i}=t,r=n||i;if(!r)return!1;let s=this.getPopupIndex(e);if(s===-1)return!1;for(let o=s;o<this.popupList.length;o++){let a=this.popupList[o];if(HCe(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(t){let e=this.gos.getDocument();for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){let n=this.getWrapper(t);n&&(n.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(n))}bringPopupToFront(t){let e=this.getPopupParent(),n=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),i=n.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),s=r.length,o=this.getWrapper(t);if(!o||i<=1||!e.contains(t))return!1;let a=n.indexOf(o),l=o.querySelectorAll("div"),c=[];l.forEach(d=>{d.scrollTop!==0&&c.push([d,d.scrollTop])});let u=!1;for(s?o.classList.contains("ag-always-on-top")?a!==i-1&&(Rt(r).insertAdjacentElement("afterend",o),u=!0):a!==i-s-1&&(r[0].insertAdjacentElement("beforebegin",o),u=!0):a!==i-1&&(Rt(n).insertAdjacentElement("afterend",o),u=!0);c.length;){let d=c.pop();d[0].scrollTop=d[1]}return u}},OEe=["touchstart","touchend","touchmove","touchcancel"],VL=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(t,e){return new Xs(n=>{n(window.setInterval(t,e))})}addEventListener(t,e,n,i){let r=Gh(OEe,e);t.addEventListener(e,n,{capture:!!i,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${t?`/${t}`:""}`}},kEe=class extends q{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(t){this.visibleColsService=t.visibleColsService,this.rowModel=t.rowModel,this.rowRenderer=t.rowRenderer,this.pinnedRowModel=t.pinnedRowModel,this.paginationService=t.paginationService,this.pageBoundsService=t.pageBoundsService}getNextCellToFocus(t,e,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){let n=t===G.UP,i=t===G.DOWN,r=t===G.LEFT,s,o;if(n||i)o=n?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),s=e.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=e.rowIndex,s=r!==l?a[0]:Rt(a)}return{rowIndex:o,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(t,e){let n=e,i=!1;for(;!i;){switch(t){case G.UP:n=this.getCellAbove(n);break;case G.DOWN:n=this.getCellBelow(n);break;case G.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case G.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,$("unknown key for navigation ",t);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(t){let e=t.column,n;switch(t.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:n=this.rowModel.getRow(t.rowIndex);break}return n?!e.isSuppressNavigable(n):!1}getCellToLeft(t){if(!t)return null;let e=this.visibleColsService.getColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;let e=this.visibleColsService.getColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getRowBelow(t){let e=t.rowIndex,n=t.rowPinned;if(this.isLastRowInContainer(t))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let i=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(i);return r||{rowIndex:e+1,rowPinned:n}}getNextStickyPosition(t,e){if(!this.gos.isGroupRowsSticky()||!t||!t.sticky)return;let n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===t.rowIndex),i=[];n?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let r=e?-1:1,s=i.findIndex(a=>a.getRowNode().rowIndex===t.rowIndex),o=i[s+r];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(t){if(!t)return null;let e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(t){let e=t.rowPinned,n=t.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowNodes().length-1<=n:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=n:this.pageBoundsService.getLastRow()<=n}getRowAbove(t){let e=t.rowIndex,n=t.rowPinned;if(n?e===0:e===this.pageBoundsService.getFirstRow())return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let r=this.rowModel.getRow(t.rowIndex),s=this.getNextStickyPosition(r,!0);return s||{rowIndex:e-1,rowPinned:n}}getCellAbove(t){if(!t)return null;let e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){let e=this.visibleColsService.getAllCols(),n=t.rowIndex,i=t.rowPinned,r=this.visibleColsService.getColAfter(t.column);if(!r){r=e[0];let s=this.getRowBelow(t);if(vt(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??!0))return null;n=s?s.rowIndex:null,i=s?s.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}getNextTabbedCellBackwards(t){let e=this.visibleColsService.getAllCols(),n=t.rowIndex,i=t.rowPinned,r=this.visibleColsService.getColBefore(t.column);if(!r){r=Rt(e);let s=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(vt(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??!0))return null;n=s?s.rowIndex:null,i=s?s.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}};function NEe(t,e){t.eventService.dispatchEvent(e)}var LEe=class extends q{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:NEe},this.isDestroyed=!1}wireBeans(t){this.beans=t}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(t,e){let n=this.functions[t];if(n)return n.apply(n,[this.beans,...e]);if(this.isDestroyed)return this.destroyedHandler(t);this.isFrameworkMethod(t)||this.beans.validationService?.warnMissingApiFunction(t)}addFunction(t,e){let{validationService:n}=this.beans;n&&(e=n.validateApiFunction(t,e)),this.functions[t]=e}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(t){if(t==="isDestroyed")return!0;t!=="destroy"&&$(`Grid API function ${t}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${this.preDestroyLink}`)}isFrameworkMethod(t){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(t)}};function VEe(t){let e=t.getBean("apiFunctionService");return new Proxy(e,{get(n,i){if(i!=="then")return(...r)=>n.callFunction(i,r)}})}function BEe(t){return{beanName:"gridApi",bean:VEe(t)}}var GEe=class extends q{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(t,e,n){let i=[],r={};return t.forEach(s=>{let o=this.createDefFromColumn(s,e,n),a=!0,l=o,c=s.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=r[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],r[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(t){let e=XN(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e}createDefFromColumn(t,e,n){let i=XN(t.getColDef());return i.colId=t.getColId(),i.width=t.getActualWidth(),i.rowGroup=t.isRowGroupActive(),i.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,i.pivot=t.isPivotActive(),i.pivotIndex=t.isPivotActive()?n.indexOf(t):null,i.aggFunc=t.isValueActive()?t.getAggFunc():null,i.hide=t.isVisible()?void 0:!0,i.pinned=t.isPinned()?t.getPinned():null,i.sort=t.getSort()?t.getSort():null,i.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,i}},HEe=class extends q{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){let t={type:"displayedColumnsChanged"};this.eventService.dispatchEvent(t)}gridColumns(){let t={type:"gridColumnsChanged"};this.eventService.dispatchEvent(t)}headerHeight(t){let e={type:"columnHeaderHeightChanged",column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(e)}groupOpened(t){let e={type:"columnGroupOpened",columnGroup:t.length===1?t[0]:void 0,columnGroups:t};this.eventService.dispatchEvent(e)}rowGroupChanged(t,e){let n={type:"columnRowGroupChanged",columns:t,column:t.length===1?t[0]:null,source:e};this.eventService.dispatchEvent(n)}genericColumnEvent(t,e,n){let i={type:t,columns:e,column:e.length===1?e[0]:null,source:n};this.eventService.dispatchEvent(i)}pivotModeChanged(){let t={type:"columnPivotModeChanged"};this.eventService.dispatchEvent(t)}virtualColumnsChanged(t){let e={type:"virtualColumnsChanged",afterScroll:t};this.eventService.dispatchEvent(e)}newColumnsLoaded(t){let e={type:"newColumnsLoaded",source:t};this.eventService.dispatchEvent(e)}everythingChanged(t){let e={type:"columnEverythingChanged",source:t};this.eventService.dispatchEvent(e)}columnMoved(t){let{movedColumns:e,source:n,toIndex:i,finished:r}=t,s={type:"columnMoved",columns:e,column:e&&e.length===1?e[0]:null,toIndex:i,finished:r,source:n};this.eventService.dispatchEvent(s)}columnPinned(t,e){if(!t.length)return;let n=t.length===1?t[0]:null,i=this.getCommonValue(t,s=>s.getPinned()),r={type:"columnPinned",pinned:i??null,columns:t,column:n,source:e};this.eventService.dispatchEvent(r)}columnVisible(t,e){if(!t.length)return;let n=t.length===1?t[0]:null,r={type:"columnVisible",visible:this.getCommonValue(t,s=>s.isVisible()),columns:t,column:n,source:e};this.eventService.dispatchEvent(r)}getCommonValue(t,e){if(!t||t.length==0)return;let n=e(t[0]);for(let i=1;i<t.length;i++)if(n!==e(t[i]))return;return n}columnChanged(t,e,n){let i={type:t,columns:e,column:e&&e.length==1?e[0]:null,source:n};this.eventService.dispatchEvent(i)}columnResized(t,e,n,i=null){if(t&&t.length){let r={type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:i,finished:e,source:n};this.eventService.dispatchEvent(r)}}},UEe=class extends q{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(t){this.columnModel=t.columnModel,this.funcColsService=t.funcColsService}getColumnState(){let t=this.columnModel.getColDefCols();if(vt(t)||!this.columnModel.isAlive())return[];let n=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n}createStateItemFromColumn(t){let e=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns(),i=t.isRowGroupActive()?e.indexOf(t):null,r=t.isPivotActive()?n.indexOf(t):null,s=t.isValueActive()?t.getAggFunc():null,o=t.getSort()!=null?t.getSort():null,a=t.getSortIndex()!=null?t.getSortIndex():null,l=t.getFlex()!=null&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:o,sortIndex:a,aggFunc:s,rowGroup:t.isRowGroupActive(),rowGroupIndex:i,pivot:t.isPivotActive(),pivotIndex:r,flex:l}}orderColumnStateList(t){let e=this.columnModel.getCols(),n=new Map(e.map((i,r)=>[i.getColId(),r]));t.sort((i,r)=>{let s=n.has(i.colId)?n.get(i.colId):-1,o=n.has(r.colId)?n.get(r.colId):-1;return s-o})}},jEe=class extends q{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(t){this.columnModel=t.columnModel,this.columnAnimationService=t.columnAnimationService,this.eventDispatcher=t.columnEventDispatcher,this.visibleColsService=t.visibleColsService}getColumnGroupState(){let t=[],e=this.columnModel.getColTree();return fc(null,e,n=>{Wr(n)&&t.push({groupId:n.getGroupId(),open:n.isExpanded()})}),t}resetColumnGroupState(t){let e=this.columnModel.getColDefColTree();if(!e)return;let n=[];fc(null,e,i=>{if(Wr(i)){let r=i.getColGroupDef(),s={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(s)}}),this.setColumnGroupState(n,t)}setColumnGroupState(t,e){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];t.forEach(r=>{let s=r.groupId,o=r.open,a=this.columnModel.getProvidedColGroup(s);a&&a.isExpanded()!==o&&(a.setExpanded(o),i.push(a))}),this.visibleColsService.refresh(e,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},WEe=class extends q{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(t){this.visibleColsService=t.visibleColsService,this.columnModel=t.columnModel,this.eventDispatcher=t.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(t,e,n=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(t===this.scrollWidth&&e===this.scrollPosition&&!i)){if(this.scrollWidth=t,this.scrollPosition=e,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let s=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=s-this.scrollPosition-this.scrollWidth,this.viewportRight=s-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(n)}}getHeadersToRender(t,e){let n;switch(t){case"left":n=this.rowsOfHeadersToRenderLeft[e];break;case"right":n=this.rowsOfHeadersToRenderRight[e];break;default:n=this.rowsOfHeadersToRenderCenter[e];break}return n||[]}extractViewportColumns(){let t=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=t,this.headerColsWithinViewport=t):(this.colsWithinViewport=t.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=t.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;let e=t.getLeft()||0,n=e+t.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,s=e<i&&n<i,o=e>r&&n>r;return!s&&!o}getViewportColumns(){let t=this.visibleColsService.getLeftCols(),e=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(t).concat(e)}getColsWithinViewport(t){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let e=r=>{let s=r.getLeft();return ne(s)&&s>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(t,i,n,e)}checkViewportColumns(t=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(t)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let t={},e=this.visibleColsService.getLeftCols(),n=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(e).concat(n).forEach(s=>t[s.getId()]=!0);let r=(s,o,a)=>{let l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=!1;if(Hu(u))d=t[u.getId()]===!0;else{let p=u.getDisplayedChildren();p&&(d=r(p,o,a+1))}d&&(l=!0,o[a]||(o[a]=[]),o[a].push(u))}return l};r(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),r(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),r(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let t=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let e=this.getViewportColumns().map(t).join("#"),n=this.colsWithinViewportHash!==e;return n&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),n}},zEe=class extends q{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(t){this.componentMetadataProvider=t.componentMetadataProvider}adaptFunction(t,e){let n=this.componentMetadataProvider.retrieve(t);return n&&n.functionAdapter?n.functionAdapter(e):null}adaptCellRendererFunction(t){class e{refresh(){return!1}getGui(){return this.eGui}init(i){let r=t(i),s=typeof r;if(s==="string"||s==="number"||s==="boolean"){this.eGui=nm("<span>"+r+"</span>");return}if(r==null){this.eGui=nm("<span></span>");return}this.eGui=r}}return e}doesImplementIComponent(t){return t?t.prototype&&"getGui"in t.prototype:!1}},qEe=class extends q{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(t){this.agComponentUtils=t.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(t){return this.componentMetaData[t]}},KEe=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],G9=Object.fromEntries(KEe.map((t,e)=>[t,e]));function YEe(t,e){let n=(t.beanName?G9[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(e.beanName?G9[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function QEe(t,e){return t?.beanName==="gridDestroyService"?-1:0}var XEe=class extends q{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(t){this.registry[t.name]=t.classImp}getInstance(t,...e){let n=this.registry[t];if(n!=null)return new n(...e)}},$Ee=class extends q{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let t=this.params;this.ready=t.gridCtrl!=null&&t.gridBodyCtrl!=null&&t.center!=null&&t.left!=null&&t.right!=null&&t.bottomCenter!=null&&t.bottomLeft!=null&&t.bottomRight!=null&&t.topCenter!=null&&t.topLeft!=null&&t.topRight!=null&&t.stickyTopCenter!=null&&t.stickyTopLeft!=null&&t.stickyTopRight!=null&&t.stickyBottomCenter!=null&&t.stickyBottomLeft!=null&&t.stickyBottomRight!=null&&t.centerHeader!=null&&t.leftHeader!=null&&t.rightHeader!=null&&t.fakeHScrollComp!=null&&t.fakeVScrollComp!=null&&t.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(e=>e(t)),this.readyCallbacks.length=0)}whenReady(t){this.ready?t(this.params):this.readyCallbacks.push(t)}register(t,e){this.params[t]=e,this.checkReady()}registerHeaderContainer(t,e){let n=this.params;switch(e){case"left":n.leftHeader=t;break;case"right":n.rightHeader=t;break;default:n.centerHeader=t;break}this.checkReady()}get(t){return this.params[t]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:t,centerHeader:e,rightHeader:n}=this.params;return[t,n,e]}getHeaderRowContainerCtrl(t){let e=this.params;switch(t){case"left":return e.leftHeader;case"right":return e.rightHeader;default:return e.centerHeader}}},ZEe=class extends q{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(t){let{rowIndex:e,rowPinned:n,column:i}=t;return this.createIdFromValues({rowIndex:e,column:i,rowPinned:n})}createIdFromValues(t){let{rowIndex:e,rowPinned:n,column:i}=t;return`${e}.${n??"null"}.${i.getId()}`}equals(t,e){let n=t.column===e.column,i=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return n&&i&&r}},JEe=class extends q{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(t){this.animationFrameService=t.animationFrameService,this.rowModel=t.rowModel}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(t,e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(t);return}this.events.push(t);let n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};e?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}},eDe=class extends q{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(t){this.rowModel=t.rowModel,this.pinnedRowModel=t.pinnedRowModel,this.pageBoundsService=t.pageBoundsService}getFirstRow(){let t=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:t,rowPinned:e}}getLastRow(){let t,e=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(e="bottom",t=n-1):this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getLastRow()):i&&(e="top",t=i-1),t===void 0?null:{rowIndex:t,rowPinned:e}}getRowNode(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}}sameRow(t,e){return!t&&!e?!0:t&&!e||!t&&e?!1:t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}before(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(ne(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}},H9={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},U9={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},j9={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},tDe=class extends q{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(t){this.resizeObserverService=t.resizeObserverService,this.eGridDiv=t.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(H9),this.getSizeEl(U9),this.getSizeEl(j9)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(H9)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(U9)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(j9)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(t){for(let e of Array.from(t.classList))e.startsWith("ag-theme-")&&!this.themeClasses.includes(e)&&t.classList.remove(e);for(let e of this.themeClasses)t.classList.contains(e)||t.classList.add(e)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){let t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gos.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return t!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let n=`${e}px`;return t!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),e):t!=""?parseFloat(t):-1}getCSSVariablePixelValue(t){let e=this.lastKnownValues.get(t);if(e!=null)return e;let n=this.measureSizeEl(t);return n==="detached"||n==="no-styles"?t.defaultValue:(this.lastKnownValues.set(t,n),n)}measureSizeEl(t){let e=this.getSizeEl(t);if(e.offsetParent==null)return"detached";let n=e.offsetWidth;return n===W9?"no-styles":(this.sizesMeasured=!0,n)}getSizeEl(t){let e=this.sizeEls.get(t);if(e)return e;let n=this.eMeasurementContainer;n||(n=this.eMeasurementContainer=document.createElement("div"),n.className="ag-measurement-container",this.eGridDiv.appendChild(n)),e=document.createElement("div"),e.style.width=`var(${t.cssName}, ${W9}px)`,n.appendChild(e),this.sizeEls.set(t,e);let i=this.measureSizeEl(t);i==="no-styles"&&$(`no value for ${t.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${t.defaultValue} will be used and updated when styles load.`);let r=this.resizeObserverService.observeResize(e,()=>{let s=this.measureSizeEl(t);s==="detached"||s==="no-styles"||(this.lastKnownValues.set(t,s),s!==i&&(i=s,this.fireGridStylesChangedEvent(t.changeKey)))});return this.addDestroyFunc(()=>r()),e}fireGridStylesChangedEvent(t){let e={type:"gridStylesChanged",[t]:!0};this.eventService.dispatchEvent(e)}setUpThemeClassObservers(){let t=new MutationObserver(()=>{let n=this.getAncestorThemeClasses();nDe(n,this.themeClasses)||(this.themeClasses=n,this.fireGridStylesChangedEvent("themeChanged"))}),e=this.eGridDiv;for(;e;)t.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),e=e.parentElement}getAncestorThemeClasses(){let t=this.eGridDiv,e=[];for(this.eThemeAncestor=null;t;){let n=Array.from(t.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of n)this.eThemeAncestor=t,e.includes(i)||e.unshift(i);t=t.parentElement}return Object.freeze(e)}},nDe=(t,e)=>t.length===e.length&&t.findIndex((n,i)=>t[i]!==e[i])===-1,W9=15538,iDe=class extends q{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new rm}wireBeans(t){this.globalEventListener=t.globalEventListener,this.globalSyncEventListener=t.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let t=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,t)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(t,e,n){this.globalEventService.addEventListener(t,e,n)}removeEventListener(t,e,n){this.globalEventService.removeEventListener(t,e,n)}addGlobalListener(t,e=!1){this.globalEventService.addGlobalListener(t,e)}removeGlobalListener(t,e=!1){this.globalEventService.removeGlobalListener(t,e)}dispatchLocalEvent(){}dispatchEvent(t){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(t))}dispatchEventOnce(t){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(t))}},BL=class Qs extends q{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(e){this.eGridDiv=e.eGridDiv,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.headerNavigationService=e.headerNavigationService,this.headerPositionUtils=e.headerPositionUtils,this.rowRenderer=e.rowRenderer,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.navigationService=e.navigationService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.rangeService=e.rangeService,this.advancedFilterService=e.advancedFilterService}static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",Qs.toggleKeyboardMode),e.addEventListener("mousedown",Qs.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",Qs.toggleKeyboardMode),e.addEventListener("mousedown",Qs.toggleKeyboardMode))}static toggleKeyboardMode(e){let n=Qs.keyboardModeActive,i=e.type==="keydown";i&&(e.ctrlKey||e.metaKey||e.altKey)||n!==i&&(Qs.keyboardModeActive=i)}static unregisterGridCompController(e){Qs.removeKeyboardModeEvents(e)}postConstruct(){let e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let e=this.gos.getDocument();Qs.addKeyboardModeEvents(e),Qs.instanceCount++,this.addDestroyFunc(()=>{Qs.instanceCount--,Qs.unregisterGridCompController(e)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let e=this.focusedCellPosition.column,n=this.columnModel.getCol(e.getId());e!==n&&this.clearFocusedCell()}isKeyboardMode(){return Qs.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Wh.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),UT.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,n){let i=e;for(;i;){if(this.gos.getDomData(i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){let{rowIndex:e,rowPinned:n,column:i}=this.focusedCellPosition,r={rowIndex:e,rowPinned:n,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n});return s&&(r.isFullWidthCell=s.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let e=W({type:"cellFocusCleared"},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){let{column:n,rowIndex:i,rowPinned:r,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1}=e,a=this.columnModel.getCol(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:Hh(r),column:a}:null;let l=Se(W({type:"cellFocused"},this.getFocusEventParams()),{forceBrowserFocus:s,preventScrollOnBrowserFocus:o});this.eventService.dispatchEvent(l)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;let n=e.getColumnGroupChild(),i=e.getRowIndex(),r=e.getPinned(),{column:s,headerRowIndex:o}=this.focusedHeaderPosition;return n===s&&i===o&&r==s.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,n){this.focusedHeaderPosition={headerRowIndex:e,column:n}}focusHeaderPosition(e){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:n,fromTab:i,allowUserOverride:r,event:s,fromCell:o,rowWithoutSpanValue:a}=e,{headerPosition:l}=e;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(r){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:n,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let d=this.gos.getCallback("navigateToNextHeader");if(d&&s){let h={key:s.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:s};l=d(h)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:s,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(e){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:n,headerPosition:i,direction:r,event:s}=e,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:r,currentPosition:o,headerPosition:i,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:r,event:s})}getHeaderPositionFromUserFunc(e){let{userFunc:n,direction:i,currentPosition:r,headerPosition:s,headerRowCount:o}=e,l=n({backwards:i==="Before",previousHeaderPosition:r,nextHeaderPosition:s,headerRowCount:o});return l===!0||l===null?(l===null&&$("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),r):l===!1?null:l}focusProvidedHeaderPosition(e){let{headerPosition:n,direction:i,fromCell:r,rowWithoutSpanValue:s,event:o}=e,{column:a,headerRowIndex:l}=n;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()).focusHeader(n.headerRowIndex,a,o);return u&&(s!=null||r)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(s??-1),u}focusFirstHeader(){let e=this.visibleColsService.getAllCols()[0];if(!e)return!1;e.getParent()&&(e=this.visibleColsService.getColGroupAtLevel(e,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(e){let n=this.headerNavigationService.getHeaderRowCount()-1,i=Rt(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Hh(n)}findFocusableElements(e,n,i=!1){let r=Bwe,s=bK;n&&(s+=", "+n),i&&(s+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(e.querySelectorAll(r)).filter(c=>va(c)),a=Array.prototype.slice.apply(e.querySelectorAll(s));return a.length?((c,u)=>c.filter(d=>u.indexOf(d)===-1))(o,a):o}focusInto(e,n=!1,i=!1){let r=this.findFocusableElements(e,null,i),s=n?Rt(r):r[0];return s?(s.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,n){if(!n)return null;let i=this.findFocusableElements(e),r=i.indexOf(n);if(r===-1)return null;let s=-1;for(let o=r-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){s=o;break}return s<=0?null:i[s-1]}findNextFocusableElement(e=this.eGridDiv,n,i){let r=this.findFocusableElements(e,n?':not([tabindex="-1"])':null),s=this.gos.getActiveDomElement(),o;n?o=r.findIndex(l=>l.contains(s)):o=r.indexOf(s);let a=o+(i?-1:1);return a<0||a>=r.length?null:r[a]}isTargetUnderManagedComponent(e,n){if(!n)return!1;let i=e.querySelectorAll(`.${Kh.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let r=0;r<i.length;r++)if(i[r].contains(n))return!0;return!1}findTabbableParent(e,n=5){let i=0;for(;e&&tL(e)===null&&++i<=n;)e=e.parentElement;return tL(e)===null?null:e}focusGridView(e,n){if(this.gos.get("suppressCellFocus"))return n?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;let{rowIndex:r,rowPinned:s}=i,o=this.getFocusedHeader();return!e&&o&&(e=o.column),r==null||!e?!1:(this.navigationService.ensureCellVisible({rowIndex:r,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:r,column:e,rowPinned:Hh(s),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:s,column:e}),!0)}focusNextGridCoreContainer(e,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(e)?!0:((n||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,n){let i=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(e){this.gridCtrl.addFocusableContainer(e)}removeFocusableContainer(e){this.gridCtrl.removeFocusableContainer(e)}focusGridInnerElement(e){return this.gridCtrl.focusInnerElement(e)}};BL.keyboardModeActive=!1;BL.instanceCount=0;var rDe=BL,sDe=class extends q{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(t){this.visibleColsService=t.visibleColsService}postConstruct(){let t=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){let t=this.gos.isDomLayout("print"),e=t?0:this.visibleColsService.getColsLeftWidth(),n=t?0:this.visibleColsService.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},oDe=class extends q{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(t){this.beans=t,this.focusService=t.focusService,this.visibleColsService=t.visibleColsService}setComp(t,e,n){this.view=t,this.eGridHostDiv=e,this.eGui=n,this.eGui.setAttribute("grid-id",this.gridId);let{dragAndDropService:i,mouseEventService:r,ctrlsService:s,resizeObserverService:o}=this.beans;i.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:l=>l===1||l===0,getIconName:()=>"notAllowed"}),r.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new LL(this.view)),this.addRtlSupport();let a=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),s.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let t=this.beans;return{paginationSelector:t.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:t.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:t.sideBarService?.getSideBarSelector(),statusBarSelector:t.statusBarService?.getStatusPanelSelector(),watermarkSelector:t.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){let t={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)}addRtlSupport(){let t=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){let e=this.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=e.findIndex(s=>s.getGui().contains(n)),r=i+(t?-1:1);if(r<0||r>=e.length)return!1;if(r===0){if(i>0){let s=this.visibleColsService.getAllCols(),o=Rt(s);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(e[r],t)}focusInnerElement(t){let e=this.getFocusableContainers(),n=this.visibleColsService.getAllCols(),i=this.gos.getCallback("focusGridInnerElement");if(i&&i({fromBottom:!!t}))return!0;if(t){if(e.length>1)return this.focusContainer(Rt(e),!0);let r=Rt(n);if(this.focusService.focusGridView(r,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let r=1;r<e.length;r++)if(this.focusService.focusInto(e[r].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}addFocusableContainer(t){this.additionalFocusableContainers.add(t)}removeFocusableContainer(t){this.additionalFocusableContainers.delete(t)}focusContainer(t,e){t?.setAllowFocus?.(!0);let n=this.focusService.focusInto(t.getGui(),e);return t?.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},aDe=class extends x7{constructor(t){super(),this.gridBody=ve,this.sideBar=ve,this.pagination=ve,this.rootWrapperBody=ve,this.eGridDiv=t}postConstruct(){let t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:s=>this.addCssClass(s),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:s=>{this.getGui().style.userSelect=s??"",this.getGui().style.webkitUserSelect=s??""},setCursor:s=>{this.getGui().style.cursor=s??""}},e=this.createManagedBean(new oDe),n=e.getOptionalSelectors(),i=this.createTemplate(n),r=[D_e,...Object.values(n).filter(s=>!!s)];this.setTemplate(i,r),e.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>e.focusInnerElement(s),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),this.gos.get("debug")&&Ro("Grid removed from DOM")})}updateLayoutClasses(t,e){let n=this.rootWrapperBody.classList;n.toggle("ag-layout-auto-height",e.autoHeight),n.toggle("ag-layout-normal",e.normal),n.toggle("ag-layout-print",e.print),this.addOrRemoveCssClass("ag-layout-auto-height",e.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",e.normal),this.addOrRemoveCssClass("ag-layout-print",e.print)}createTemplate(t){let e=t.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=t.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=t.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",r=t.watermarkSelector?"<ag-watermark></ag-watermark>":"",s=t.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${s}
                ${r}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(t=!1){if(!t&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(t);return}super.forceFocusOutOfContainer(t)}getFocusableContainers(){let t=[this.gridBody];return[this.sideBar,this.pagination].forEach(e=>{e&&t.push(e)}),t.filter(e=>va(e.getGui()))}},lDe=class extends q{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(t){this.columnModel=t.columnModel,this.columnSizeService=t.columnSizeService,this.ctrlsService=t.ctrlsService,this.columnApplyStateService=t.columnApplyStateService}getAlignedGridApis(){let t=this.gos.get("alignedGrids")??[],e=typeof t=="function";typeof t=="function"&&(t=t());let n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(r=>{if(!r){Pt("alignedGrids contains an undefined option."),e||Pt(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Pt(n());return}if(this.isGridApi(r))return r;let s=r;return"current"in s?s.current?.api:(s.api||Pt(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),s.api)}).filter(r=>!!r&&!r.isDestroyed())}isGridApi(t){return!!t&&!!t.dispatchEvent}postConstruct(){let t=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:t,columnVisible:t,columnPinned:t,columnGroupOpened:t,columnResized:t,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:e})=>this.onColumnEvent(e),alignedGridScroll:({event:e})=>this.onScrollEvent(e)})}fireEvent(t){this.consuming||this.getAlignedGridApis().forEach(e=>{e.isDestroyed()||e.dispatchEvent(t)})}onEvent(t){this.consuming=!0,t(),this.consuming=!1}fireColumnEvent(t){let e={type:"alignedGridColumn",event:t};this.fireEvent(e)}fireScrollEvent(t){if(t.direction!=="horizontal")return;let e={type:"alignedGridScroll",event:t};this.fireEvent(e)}onScrollEvent(t){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})}getMasterColumns(t){let e=[];return t.columns?t.columns.forEach(n=>{e.push(n)}):t.column&&e.push(t.column),e}getColumnIds(t){let e=[];return t.columns?t.columns.forEach(n=>{e.push(n.getColId())}):t.column&&e.push(t.column.getColId()),e}onColumnEvent(t){this.onEvent(()=>{switch(t.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{let e=t;this.processColumnEvent(e);break}case"columnGroupOpened":{let e=t;this.processGroupOpenedEvent(e);break}case"columnPivotChanged":$("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(t){t.columnGroups.forEach(e=>{let n=null;if(e){let i=e.getGroupId();n=this.columnModel.getProvidedColGroup(i)}e&&!n||this.columnModel.setColumnGroupOpened(n,e.isExpanded(),"alignedGridChanged")})}processColumnEvent(t){let e=t.column,n=null;if(e&&(n=this.columnModel.getColDefCol(e.getColId())),e&&!n)return;let i=this.getMasterColumns(t);switch(t.type){case"columnMoved":{let a=t.api.getColumnState().map(l=>({colId:l.colId}));this.columnApplyStateService.applyColumnState({state:a,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let a=t.api.getColumnState().map(l=>({colId:l.colId,hide:l.hide}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnPinned":{let a=t.api.getColumnState().map(l=>({colId:l.colId,pinned:l.pinned}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnResized":{let o=t,a={};i.forEach(l=>{a[l.getId()]={key:l.getColId(),newWidth:l.getActualWidth()}}),o.flexColumns?.forEach(l=>{a[l.getId()]&&delete a[l.getId()]}),this.columnSizeService.setColumnWidths(Object.values(a),!1,o.finished,"alignedGridChanged");break}}let s=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(o=>{o.setGridOption("alwaysShowVerticalScroll",s)})}},cDe={version:Xe,moduleName:"@ag-grid-community/aligned-grid",beans:[lDe]};function uDe(t,e){let n=t.columnModel.getColDefCol(e);return n?n.getColDef():null}function dDe(t){return t.columnModel.getColumnDefs()}function hDe(t,e){typeof e=="number"?t.columnSizeService.sizeColumnsToFit(e,"api"):t.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(e)}function fDe(t,e,n){t.columnModel.setColumnGroupOpened(e,n,"api")}function pDe(t,e,n){return t.visibleColsService.getColumnGroup(e,n)}function gDe(t,e){return t.columnModel.getProvidedColGroup(e)}function mDe(t,e,n){return t.columnNameService.getDisplayNameForColumn(e,n)||""}function vDe(t,e,n){return t.columnNameService.getDisplayNameForColumnGroup(e,n)||""}function yDe(t,e){return t.columnModel.getColDefCol(e)}function CDe(t){return t.columnModel.getColDefCols()}function wDe(t,e){return t.columnApplyStateService.applyColumnState(e,"api")}function SDe(t){return t.columnGetStateService.getColumnState()}function bDe(t){t.columnApplyStateService.resetColumnState("api")}function _De(t){return t.columnGroupStateService.getColumnGroupState()}function EDe(t,e){t.columnGroupStateService.setColumnGroupState(e,"api")}function DDe(t){t.columnGroupStateService.resetColumnGroupState("api")}function TDe(t){return t.visibleColsService.isPinningLeft()||t.visibleColsService.isPinningRight()}function RDe(t){return t.visibleColsService.isPinningLeft()}function IDe(t){return t.visibleColsService.isPinningRight()}function xDe(t,e){return t.visibleColsService.getColAfter(e)}function FDe(t,e){return t.visibleColsService.getColBefore(e)}function ADe(t,e,n){t.columnModel.setColsVisible([e],n,"api")}function PDe(t,e,n){t.columnModel.setColsVisible(e,n,"api")}function MDe(t,e,n){t.columnModel.setColsPinned([e],n,"api")}function ODe(t,e,n){t.columnModel.setColsPinned(e,n,"api")}function kDe(t){return t.columnModel.getCols()}function NDe(t){return t.visibleColsService.getLeftCols()}function LDe(t){return t.visibleColsService.getCenterCols()}function VDe(t){return t.visibleColsService.getRightCols()}function BDe(t){return t.visibleColsService.getAllCols()}function GDe(t){return t.columnViewportService.getViewportColumns()}function HDe(t,e,n){t.columnMoveService.moveColumns([e],n,"api")}function UDe(t,e,n){t.columnMoveService.moveColumnByIndex(e,n,"api")}function jDe(t,e,n){t.columnMoveService.moveColumns(e,n,"api")}function WDe(t,e,n,i=!0,r="api"){t.columnSizeService.setColumnWidths([{key:e,newWidth:n}],!1,i,r)}function zDe(t,e,n=!0,i="api"){t.columnSizeService.setColumnWidths(e,!1,n,i)}function qDe(t){return t.visibleColsService.getTreeLeft()}function KDe(t){return t.visibleColsService.getTreeCenter()}function YDe(t){return t.visibleColsService.getTreeRight()}function QDe(t){return t.visibleColsService.getAllTrees()}function XDe(t,e,n){return t.columnAutosizeService.autoSizeCols({colKeys:[e],skipHeader:n,source:"api"})}function $De(t,e,n){t.columnAutosizeService.autoSizeCols({colKeys:e,skipHeader:n,source:"api"})}function ZDe(t,e){t.columnAutosizeService.autoSizeAllColumns("api",e)}var z9={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},q9=["january","february","march","april","may","june","july","august","september","october","november","december"],JDe=class extends q{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(t){this.rowModel=t.rowModel,this.columnModel=t.columnModel,this.funcColsService=t.funcColsService,this.valueService=t.valueService,this.columnApplyStateService=t.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs($g(t.source))})}processDataTypeDefinitions(){let t=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let e=i=>r=>{let{column:s,node:o,value:a}=r,l=s.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(s,o,a,l)};Object.entries(t).forEach(([i,r])=>{let s=Se(W({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)});this.dataTypeDefinitions[i]=s,this.formatValueFuncs[i]=e(s)});let n=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(n).forEach(([i,r])=>{let s=this.processDataTypeDefinition(r,n,[i],t);s&&(this.dataTypeDefinitions[i]=s,r.dataTypeMatcher&&(this.dataTypeMatchers[i]=r.dataTypeMatcher),this.formatValueFuncs[i]=e(s))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(i=>{let r=this.dataTypeMatchers[i];r&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=r??t[i].dataTypeMatcher})}mergeDataTypeDefinitions(t,e){let n=W(W({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(n.columnTypes=[...IT(t.columnTypes),...IT(e.columnTypes)]),n}processDataTypeDefinition(t,e,n,i){let r,s=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let o=i[s],a=e[s];if(o&&a&&(o=a),!this.validateDataTypeDefinition(t,o,s))return;r=this.mergeDataTypeDefinitions(o,t)}else{if(n.includes(s)){$('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=e[s];if(!this.validateDataTypeDefinition(t,o,s))return;let a=this.processDataTypeDefinition(o,e,[...n,s],i);if(!a)return;r=this.mergeDataTypeDefinitions(a,t)}return Se(W({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(t,e,n){return e?e.baseDataType!==t.baseDataType?($('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:($(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(t){if(t.valueFormatter)return e=>{if(e.node?.group){let n=e.column.getAggFunc();if(n){if(n==="first"||n==="last")return t.valueFormatter(e);if(t.baseDataType==="number"&&n!=="count"){if(typeof e.value=="number")return t.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return t.valueFormatter(Se(W({},e),{value:e.value.toNumber()}));if("value"in e.value)return t.valueFormatter(Se(W({},e),{value:e.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||t.dataTypeMatcher?.(e.value))return t.valueFormatter(e);if(!this.gos.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(e)}}updateColDefAndGetColumnType(t,e,n){let{cellDataType:i}=e,{field:r}=e;if(i===void 0&&(i=t.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(t,e)?this.inferCellDataType(r,n):!1),!i){t.cellDataType=!1;return}let s=this.dataTypeDefinitions[i];if(!s){$(`Missing data type definition - "${i}"`);return}return t.cellDataType=i,s.groupSafeValueFormatter&&(t.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(t.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,i,s,n),s.columnTypes}addColumnListeners(t){if(!this.isWaitingForRowData)return;let e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;let n=i=>{e.add(i.key)};t.addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.removeEventListener("columnStateUpdated",n))}canInferCellDataType(t,e){if(this.rowModel.getType()!=="clientSide")return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,n))return!1;let i=e.type===null?t.type:e.type;if(i){let r=this.gos.get("columnTypes")??{};if(IT(i).some(o=>{let a=r[o.trim()];return a&&this.doColDefPropsPreventInference(a,n)}))return!1}return!this.doColDefPropsPreventInference(t,n)}doColDefPropsPreventInference(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>this.doesColDefPropPreventInference(t,e,n,i))}doesColDefPropPreventInference(t,e,n,i){if(!e[n])return!1;let r=t[n];return r===null?(e[n]=!1,!1):i===void 0?!!r:r===i}inferCellDataType(t,e){if(!t)return;let n,i=this.getInitialData();if(i){let s=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=$C(i,t,s)}else this.initWaitForRowData(e);if(n==null)return;let[r]=Object.entries(this.dataTypeMatchers).find(([s,o])=>o(n))??["object"];return r}getInitialData(){let t=this.gos.get("rowData");if(t?.length)return t[0];if(this.initialData)return this.initialData;{let e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();let[n]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:r}=i;if(!r)return;n?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();let s={type:"dataTypesInferred"};this.eventService.dispatchEvent(s)}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(t,e){this.initialData=t;let n=[];this.destroyColumnStateUpdateListeners();let i={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([s,o])=>{let a=this.columnModel.getCol(s);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(e&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(i[s]=u),u.pivot&&u.pivotIndex==null&&(r[s]=u),n.push(u)}}),e&&n.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&this.columnApplyStateService.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(t,e){let n=this.columnApplyStateService.getColumnStateFromColDef(t);return e.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(t){let e=this.dataTypeDefinitions.object,n=t.object;this.hasObjectValueParser=e.valueParser!==n.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(t){return t?this.getDataTypeDefinition(t)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDataTypeDefinition(t){let e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){return this.getDataTypeDefinition(t)?.baseDataType}checkType(t,e){if(e==null)return!0;let n=this.getDataTypeDefinition(t)?.dataTypeMatcher;return n?n(e):!0}validateColDef(t){t.cellDataType==="object"&&(t.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&$('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&$('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(t){return this.formatValueFuncs[t]}setColDefPropertiesForBaseDataType(t,e,n,i){let r=this.formatValueFuncs[e],s=zr.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),o=this.localeService.getLocaleTextFunc(),a=l=>{let{filterParams:c}=t;t.filterParams=typeof c=="object"?W(W({},c),l):l};switch(n.baseDataType){case"number":{t.cellEditor="agNumberCellEditor",s&&a({comparator:(l,c)=>{let u=l==null?0:parseInt(l),d=c==null?0:parseInt(c);return u===d?0:u>d?1:-1}});break}case"boolean":{t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===G.SPACE,a(s?{valueFormatter:l=>ne(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,c)=>c===!1,numberOfInputs:0}]});break}case"date":{t.cellEditor="agDateCellEditor",t.keyCreator=r,s&&a({valueFormatter:l=>{let c=r(l);return ne(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,c)=>{if(c===1&&l!=null){let u=q9[Number(l)-1];return o(u,z9[u])}return l??o("blanks","(Blanks)")}});break}case"dateString":{t.cellEditor="agDateStringCellEditor",t.keyCreator=r;let l=n.dateParser;a(s?{valueFormatter:c=>{let u=r(c);return ne(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let u=l(c??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(c,u)=>{if(u===1&&c!=null){let d=q9[Number(c)-1];return o(d,z9[d])}return c??o("blanks","(Blanks)")}}:{comparator:(c,u)=>{let d=l(u);return u==null||d<c?-1:d>c?1:0}});break}case"object":{t.cellEditorParams={useFormatter:!0},t.comparator=(l,c)=>{let u=this.columnModel.getColDefCol(i),d=u?.getColDef();if(!u||!d)return 0;let h=l==null?"":r({column:u,node:null,value:l}),p=c==null?"":r({column:u,node:null,value:c});return h===p?0:h>p?1:-1},t.keyCreator=r,s?a({valueFormatter:l=>{let c=r(l);return ne(c)?c:o("blanks","(Blanks)")}}):t.filterValueGetter=l=>r({column:l.column,node:l.node,value:this.valueService.getValue(l.column,l.node)});break}}}getDefaultDataTypes(){let t=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?e("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:KN(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>Ss(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?e("invalidDate","Invalid Date"):Fo(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>Ss(n)??void 0,dateFormatter:n=>Fo(n??null,!1)??void 0,valueParser:n=>t(String(n.newValue))?n.newValue:null,valueFormatter:n=>t(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&t(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>KN(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(t=>t()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},eTe={version:Xe,moduleName:"@ag-grid-community/data-type",beans:[JDe]},tTe={version:Xe,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:uDe,getColumnDefs:dDe,sizeColumnsToFit:hDe,setColumnGroupOpened:fDe,getColumnGroup:pDe,getProvidedColumnGroup:gDe,getDisplayNameForColumn:mDe,getDisplayNameForColumnGroup:vDe,getColumn:yDe,getColumns:CDe,applyColumnState:wDe,getColumnState:SDe,resetColumnState:bDe,getColumnGroupState:_De,setColumnGroupState:EDe,resetColumnGroupState:DDe,isPinning:TDe,isPinningLeft:RDe,isPinningRight:IDe,getDisplayedColAfter:xDe,getDisplayedColBefore:FDe,setColumnVisible:ADe,setColumnsVisible:PDe,setColumnPinned:MDe,setColumnsPinned:ODe,getAllGridColumns:kDe,getDisplayedLeftColumns:NDe,getDisplayedCenterColumns:LDe,getDisplayedRightColumns:VDe,getAllDisplayedColumns:BDe,getAllDisplayedVirtualColumns:GDe,moveColumn:HDe,moveColumnByIndex:UDe,moveColumns:jDe,setColumnWidth:WDe,setColumnWidths:zDe,getLeftDisplayedColumnGroups:qDe,getCenterDisplayedColumnGroups:KDe,getRightDisplayedColumnGroups:YDe,getAllDisplayedColumnGroups:QDe,autoSizeColumn:XDe,autoSizeColumns:$De,autoSizeAllColumns:ZDe}};function nTe(t,e){t.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(e)}function iTe(t,e){let n=t.dragAndDropService.findExternalZone(e);n&&t.dragAndDropService.removeDropTarget(n)}function rTe(t,e){return t.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(e)}var sTe={version:Xe,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:nTe,removeRowDropZone:iTe,getRowDropZoneParams:rTe}};function oTe(t){return t.pinnedRowModel.getPinnedTopRowCount()}function aTe(t){return t.pinnedRowModel.getPinnedBottomRowCount()}function lTe(t,e){return t.pinnedRowModel.getPinnedTopRow(e)}function cTe(t,e){return t.pinnedRowModel.getPinnedBottomRow(e)}var uTe={version:Xe,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:oTe,getPinnedBottomRowCount:aTe,getPinnedTopRow:lTe,getPinnedBottomRow:cTe}};function dTe(t){t.overlayService.showLoadingOverlay()}function hTe(t){t.overlayService.showNoRowsOverlay()}function fTe(t){t.overlayService.hideOverlay()}var pTe={version:Xe,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:dTe,showNoRowsOverlay:hTe,hideOverlay:fTe}};function gTe(t,e,n){if(!e)return;let i=t.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${e}`;n===null?i.removeAttribute(r):i.setAttribute(r,n)}function mTe(t,e={}){t.frameworkOverrides.wrapIncoming(()=>t.rowRenderer.refreshCells(e))}function vTe(t,e={}){let n=i=>$(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);ne(e.fadeDelay)&&n("fade"),ne(e.flashDelay)&&n("flash"),t.frameworkOverrides.wrapIncoming(()=>t.rowRenderer.flashCells(e))}function yTe(t){t.frameworkOverrides.wrapIncoming(()=>t.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}function CTe(t){return t.animationFrameService.isQueueEmpty()}function wTe(t){t.animationFrameService.flushAllFrames()}function STe(t){return{rowHeight:t.gos.getRowHeightAsNumber(),headerHeight:t.columnModel.getHeaderHeight()}}function bTe(t,e={}){return t.rowRenderer.getCellRendererInstances(e).map(JC)}var _Te={version:Xe,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:gTe,refreshCells:mTe,flashCells:vTe,refreshHeader:yTe,isAnimationFrameQueueEmpty:CTe,flushAllAnimationFrames:wTe,getSizesForCurrentTheme:STe,getCellRendererInstances:bTe}};function ETe(t){t.valueCache.expire()}function DTe(t,e,n){return F7(t,{colKey:e,rowNode:n})}function F7(t,e){let{colKey:n,rowNode:i,useFormatter:r}=e,s=t.columnModel.getColDefCol(n)??t.columnModel.getCol(n);if(vt(s))return null;let o=t.valueService.getValue(s,i);return r?t.valueService.formatValue(s,i,o)??ul(o,!0):o}function TTe(t){return t.context.getGridId()}function RTe(t){t.gridDestroyService.destroy()}function ITe(t){return t.gridDestroyService.isDestroyCalled()}function xTe(t,e){return t.gos.get(e)}function FTe(t,e,n){A7(t,{[e]:n})}function A7(t,e){t.gos.updateGridOptions({options:e})}function ATe(t,e,n){t.apiEventService.addEventListener(e,n)}function PTe(t,e,n){t.apiEventService.removeEventListener(e,n)}function MTe(t,e){t.apiEventService.addGlobalListener(e)}function OTe(t,e){t.apiEventService.removeGlobalListener(e)}function kTe(t){return t.focusService.getFocusedCell()}function NTe(t){return t.focusService.clearFocusedCell()}function LTe(t,e,n,i){t.focusService.setFocusedCell({rowIndex:e,column:n,rowPinned:i,forceBrowserFocus:!0})}function VTe(t,e){return t.navigationService.tabToNextCell(!1,e)}function BTe(t,e){return t.navigationService.tabToNextCell(!0,e)}function GTe(t,e,n=!1){let i=t.headerNavigationService.getHeaderPositionForColumn(e,n);i&&t.focusService.focusHeaderPosition({headerPosition:i})}function HTe(t,e,n){let i=t.columnModel.getCol(e);t.menuService.showColumnMenu({column:i,buttonElement:n,positionBy:"button"})}function UTe(t,e,n){let i=t.columnModel.getCol(e);if(i||(i=t.columnModel.getColDefCol(e)),!i){Pt(`column '${e}' not found`);return}t.menuService.showColumnMenu({column:i,mouseEvent:n,positionBy:"mouse"})}function jTe(t,e){let n=t.columnModel.getCol(e);if(!n){Pt(`column '${e}' not found`);return}t.menuService.showColumnMenu({column:n,positionBy:"auto"})}function WTe(t){t.menuService.hidePopupMenu()}function zTe(t,e={}){let n=e?e.rowNodes:void 0;t.frameworkOverrides.wrapIncoming(()=>t.rowRenderer.redrawRows(n))}function qTe(t,e,n,i,r){t.expansionService.setRowNodeExpanded(e,n,i,r)}function KTe(t,e){return t.rowModel.getRowNode(e)}function YTe(t,e,n,i){t.rowRenderer.addRenderedRowListener(e,n,i)}function QTe(t){return t.rowRenderer.getRenderedNodes()}function XTe(t,e,n){t.rowModel.forEachNode(e,n)}function $Te(t){return P7(t)}function P7(t){return t.rowRenderer.getFirstVirtualRenderedRow()}function ZTe(t){return M7(t)}function M7(t){return t.rowRenderer.getLastVirtualRenderedRow()}function JTe(t,e){return t.rowModel.getRow(e)}function eRe(t){return t.rowModel.getRowCount()}function tRe(t){return t.rowModel}function nRe(t,e){if(!e.nodes.every(a=>a.rowPinned?($("cannot select pinned rows"),!1):a.id===void 0?($("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:r,newValue:s}=e,o=i;t.selectionService.setNodesSelected({nodes:o,source:r??"api",newValue:s})}function iRe(t,e="apiSelectAll"){t.selectionService.selectAllRowNodes({source:e})}function rRe(t,e="apiSelectAll"){t.selectionService.deselectAllRowNodes({source:e})}function sRe(t,e="apiSelectAllFiltered"){t.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}function oRe(t,e="apiSelectAllFiltered"){t.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}function aRe(t,e="apiSelectAllCurrentPage"){t.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}function lRe(t,e="apiSelectAllCurrentPage"){t.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}function cRe(t){return t.selectionService.getSelectedNodes()}function uRe(t){return t.selectionService.getSelectedRows()}function dRe(t){t.sortController.onSortChanged("api")}var hRe={version:Xe,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:TTe,destroy:RTe,isDestroyed:ITe,getGridOption:xTe,setGridOption:FTe,updateGridOptions:A7}},fRe={version:Xe,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:nRe,selectAll:iRe,deselectAll:rRe,selectAllFiltered:sRe,deselectAllFiltered:oRe,selectAllOnCurrentPage:aRe,deselectAllOnCurrentPage:lRe,getSelectedNodes:cRe,getSelectedRows:uRe}},pRe={version:Xe,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:zTe,setRowNodeExpanded:qTe,getRowNode:KTe,addRenderedRowListener:YTe,getRenderedNodes:QTe,forEachNode:XTe,getFirstDisplayedRow:$Te,getFirstDisplayedRowIndex:P7,getLastDisplayedRow:ZTe,getLastDisplayedRowIndex:M7,getDisplayedRowAtIndex:JTe,getDisplayedRowCount:eRe,getModel:tRe}},gRe={version:Xe,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:Z_e,getHorizontalPixelRange:J_e,ensureColumnVisible:T7,ensureIndexVisible:R7,ensureNodeVisible:eEe}},mRe={version:Xe,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:kTe,clearFocusedCell:NTe,setFocusedCell:LTe,setFocusedHeader:GTe,tabToNextCell:VTe,tabToPreviousCell:BTe}},vRe={version:Xe,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:ATe,addGlobalListener:MTe,removeEventListener:PTe,removeGlobalListener:OTe}},yRe={version:Xe,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:ETe,getValue:DTe,getCellValue:F7}},CRe={version:Xe,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:HTe,showColumnMenuAfterMouseClick:UTe,showColumnMenu:jTe,hidePopupMenu:WTe}},wRe={version:Xe,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:dRe}},SRe={version:Xe,moduleName:"@ag-grid-community/api",dependantModules:[hRe,uTe,fRe,tTe,pRe,sTe,gRe,pTe,mRe,vRe,_Te,yRe,CRe,wRe]};function bRe(t){return t.stateService?.getState()??{}}var _Re=class extends q{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Kr(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Kr(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Kr(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(t){this.filterManager=t.filterManager,this.ctrlsService=t.ctrlsService,this.pivotResultColsService=t.pivotResultColsService,this.focusService=t.focusService,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.columnGroupStateService=t.columnGroupStateService,this.columnGetStateService=t.columnGetStateService,this.paginationService=t.paginationService,this.rowModel=t.rowModel,this.selectionService=t.selectionService,this.expansionService=t.expansionService,this.columnAnimationService=t.columnAnimationService,this.columnApplyStateService=t.columnApplyStateService,this.sideBarService=t.sideBarService,this.rangeService=t.rangeService}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=this.gos.get("initialState")??{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[t,e,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{e?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}setupStateOnColumnsInitialised(){let t=this.gos.get("initialState")??{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:t,rowGroupExpansion:e,rowSelection:n,pagination:i}=this.gos.get("initialState")??{},r=this.gos.get("advancedFilterModel");(t||r)&&this.setFilterState(t,r),e&&this.setRowGroupExpansionState(e),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:s=>{(s.newPage||s.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:t,rangeSelection:e,focusedCell:n,columnOrder:i}=this.gos.get("initialState")??{};n&&this.setFocusedCellState(n),e&&this.setRangeSelectionState(e),t&&this.setScrollState(t),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:r=>{r.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let t=this.columnModel.isPivotMode(),e=[],n=[],i=[],r=[],s=[],o=[],a=[],l=[],c=[],u=this.columnGetStateService.getColumnState();for(let d=0;d<u.length;d++){let{colId:h,sort:p,sortIndex:g,rowGroup:m,rowGroupIndex:v,aggFunc:C,pivot:b,pivotIndex:E,pinned:T,hide:P,width:x,flex:_}=u[d];c.push(h),p&&(e[g??0]={colId:h,sort:p}),m&&(n[v??0]=h),typeof C=="string"&&i.push({colId:h,aggFunc:C}),b&&(r[E??0]=h),T&&(T==="right"?o:s).push(h),P&&a.push(h),(_||x)&&l.push({colId:h,flex:_??void 0,width:x})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:s.length||o.length?{leftColIds:s,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(t){let{sort:e,rowGroup:n,aggregation:i,pivot:r,columnPinning:s,columnVisibility:o,columnSizing:a,columnOrder:l}=t,c={},u=g=>{let m=c[g];return m||(m={colId:g},c[g]=m,m)};e&&e.sortModel.forEach(({colId:g,sort:m},v)=>{let C=u(g);C.sort=m,C.sortIndex=v}),n&&n.groupColIds.forEach((g,m)=>{let v=u(g);v.rowGroup=!0,v.rowGroupIndex=m}),i&&i.aggregationModel.forEach(({colId:g,aggFunc:m})=>{u(g).aggFunc=m}),r&&(r.pivotColIds.forEach((g,m)=>{let v=u(g);v.pivot=!0,v.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),s&&(s.leftColIds.forEach(g=>{u(g).pinned="left"}),s.rightColIds.forEach(g=>{u(g).pinned="right"})),o&&o.hiddenColIds.forEach(g=>{u(g).hide=!0}),a&&a.columnSizingModel.forEach(({colId:g,flex:m,width:v})=>{let C=u(g);C.flex=m??null,C.width=v});let d=l?.orderedColIds,h=!!d?.length,p=h?d.map(g=>u(g)):Object.values(c);if(p.length){this.columnStates=p;let g={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:p,applyOrder:h,defaultState:g},"gridInitializing")}}setColumnPivotState(t){let e=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(e){let i=[];for(let r of e)this.pivotResultColsService.getPivotResultCol(r.colId)&&i.push(r);this.columnApplyStateService.applyColumnState({state:i,applyOrder:t},"gridInitializing")}n&&this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let t=this.columnGroupStateService.getColumnGroupState(),e=[];return t.forEach(({groupId:n,open:i})=>{i&&e.push(n)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(t){if(!Object.prototype.hasOwnProperty.call(t,"columnGroup"))return;let e=new Set(t.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{let s=e.has(r);return s&&e.delete(r),{groupId:r,open:s}});e.forEach(r=>{i.push({groupId:r,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let t=this.filterManager?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);let e=this.filterManager?.getAdvancedFilterModel()??void 0;return t||e?{filterModel:t,advancedFilterModel:e}:void 0}setFilterState(t,e){let{filterModel:n,advancedFilterModel:i}=t??{advancedFilterModel:e};n&&this.filterManager?.setFilterModel(n,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let t=this.rangeService?.getCellRanges().map(e=>{let{id:n,type:i,startRow:r,endRow:s,columns:o,startColumn:a}=e;return{id:n,type:i,startRow:r,endRow:s,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return t?.length?{cellRanges:t}:void 0}setRangeSelectionState(t){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let e=[];t.cellRanges.forEach(n=>{let i=[];if(n.colIds.forEach(s=>{let o=this.columnModel.getCol(s);o&&i.push(o)}),!i.length)return;let r=this.columnModel.getCol(n.startColId);if(!r){let s=this.visibleColsService.getAllCols(),o=new Set(i);r=s.find(a=>o.has(a))}e.push(Se(W({},n),{columns:i,startColumn:r}))}),this.rangeService.setCellRanges(e)}getScrollState(){if(!this.isClientSideRowModel)return;let t=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:e}=t?.getHScrollPosition()??{left:0},{top:n}=t?.getVScrollPosition()??{top:0};return n||e?{top:n,left:e}:void 0}setScrollState(t){if(!this.isClientSideRowModel)return;let{top:e,left:n}=t;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(e,n)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let t=this.focusService.getFocusedCell();if(t){let{column:e,rowIndex:n,rowPinned:i}=t;return{colId:e.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(t){if(!this.isClientSideRowModel)return;let{colId:e,rowIndex:n,rowPinned:i}=t;this.focusService.setFocusedCell({column:this.columnModel.getCol(e),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let t=this.paginationService.getCurrentPage(),e=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!t&&!e))return{page:t,pageSize:e}}setPaginationState(t){this.paginationService&&(t.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(t.pageSize,"initialState"),typeof t.page=="number"&&this.paginationService.setPage(t.page))}getRowSelectionState(){let t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(t){this.selectionService.setSelectionState(t,"gridInitializing")}getRowGroupExpansionState(){let t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0}setRowGroupExpansionState(t){this.expansionService.expandRows(t.expandedRowGroupIds)}updateColumnState(t){let e=this.getColumnState(),n=!1;Object.entries(e).forEach(([i,r])=>{AT(r,this.cachedState[i])||(n=!0)}),this.cachedState=W(W({},this.cachedState),e),n&&this.dispatchStateUpdateEvent(t)}updateCachedState(t,e){let n=this.cachedState[t];this.setCachedStateValue(t,e),AT(e,n)||this.dispatchStateUpdateEvent([t])}setCachedStateValue(t,e){this.cachedState=Se(W({},this.cachedState),{[t]:e})}refreshStaleState(){this.staleStateKeys.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(t){this.suppressEvents||(t.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let e={type:"stateUpdated",sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(t){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},O7={version:Xe,moduleName:"@ag-grid-community/state-core",beans:[_Re]},ERe={version:Xe,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:bRe},dependantModules:[O7]},DRe={version:Xe,moduleName:"@ag-grid-community/state",dependantModules:[O7,ERe]};function TRe(t){return t.rowModel.isLastRowIndexKnown()}function RRe(t){return t.paginationService?.getPageSize()??100}function IRe(t){return t.paginationService?.getCurrentPage()??0}function xRe(t){return t.paginationService?.getTotalPages()??1}function FRe(t){return t.paginationService?t.paginationService.getMasterRowCount():t.rowModel.getRowCount()}function ARe(t){t.paginationService?.goToNextPage()}function PRe(t){t.paginationService?.goToPreviousPage()}function MRe(t){t.paginationService?.goToFirstPage()}function ORe(t){t.paginationService?.goToLastPage()}function kRe(t,e){t.paginationService?.goToPage(e)}var NRe=class extends q{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(t){this.ctrlsService=t.ctrlsService,this.paginationService=t.paginationService}postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center;let e=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:e,scrollVisibilityChanged:e}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let t=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(t>0){let e=()=>{let n=Math.max(this.gos.getRowHeightAsNumber(),1),i=Math.floor(t/n);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?Kr(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function LRe(t,e,n){t.addManagedElementListeners(e,{keydown:i=>{if(!i.defaultPrevented&&i.key===G.TAB){let r=i.shiftKey;n.findNextFocusableElement(e,!1,r)||n.focusNextGridCoreContainer(r)&&i.preventDefault()}}})}var VRe=class extends kt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let t=this.selectPageSizeComp.getValue();if(!t)return;let e=Number(t);isNaN(e)||e<1||e===this.paginationService.getPageSize()||(this.paginationService.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(t){this.paginationService=t.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:t=>this.handlePaginationChanged(t)})}handlePaginationChanged(t){if(!this.selectPageSizeComp||!t?.newPageSize)return;let e=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){wr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let t=this.getPageSizeSelectorValues(),e=this.paginationService.getPageSize(),n=!e||!t.includes(e);n&&(t.unshift(""),$(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));let i=this.localeService.getLocaleTextFunc(),r=i("pageSizeSelectorLabel","Page Size:"),s=t.map(a=>({value:String(a),text:String(a)})),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new TL).addOptions(s).setValue(String(n?"":e)).setAriaLabel(o).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=n}getPageSizeSelectorValues(){let t=[20,50,100],e=this.gos.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?t:[...e].sort((n,i)=>n-i)}validateValues(t){if(!t.length)return $(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<t.length;e++){let n=t[e],i=typeof n=="number",r=n>0;if(!i)return $(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!r)return $(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},BRe={selector:"AG-PAGE-SIZE-SELECTOR",component:VRe},GRe=class extends x7{constructor(){super(),this.btFirst=ve,this.btPrevious=ve,this.btNext=ve,this.btLast=ve,this.lbRecordCount=ve,this.lbFirstRowOnPage=ve,this.lbLastRowOnPage=ve,this.lbCurrent=ve,this.lbTotal=ve,this.pageSizeComp=ve,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(t){this.rowNodeBlockLoader=t.rowNodeBlockLoader,this.rowModel=t.rowModel,this.paginationService=t.paginationService,this.focusService=t.focusService}postConstruct(){let t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[BRe]);let{btFirst:e,btPrevious:n,btNext:i,btLast:r}=this;this.activateTabIndex([e,n,i,r]),e.insertAdjacentElement("afterbegin",$s(t?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",$s(t?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",$s(t?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",$s(t?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(s):this.focusService.focusGridInnerElement(s)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(t){this.allowFocusInnerElement=t}onPaginationChanged(){let e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{let{el:e,fn:n}=t;this.addManagedListeners(e,{click:n,keydown:i=>{(i.key===G.ENTER||i.key===G.SPACE)&&(i.preventDefault(),n())}})}),LRe(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){let t=this.paginationService.getTotalPages()>0,e=this.paginationService.getCurrentPage(),n=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(t){let e=this.gos.getCallback("paginationNumberFormatter");if(e)return e({value:t});let n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),r=n("decimalSeparator",".");return cSe(t,i,r)}getTemplate(){let t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),n=t("to","to"),i=t("of","of"),r=t("firstPage","First Page"),s=t("previousPage","Previous Page"),o=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${e}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let t=this.paginationService.getCurrentPage(),e=this.rowModel.isLastRowIndexKnown(),n=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),r=t===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!e||i||t===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){Dwe(t,e),t.classList.toggle("ag-disabled",e)}updateRowLabels(){let t=this.paginationService.getCurrentPage(),e=this.paginationService.getPageSize(),n=this.rowModel.isLastRowIndexKnown(),i=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null,r,s;if(this.isZeroPagesToDisplay()?r=s=0:(r=e*t+1,s=r+e-1,n&&s>i&&(s=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader?.isLoading()){let o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(s)}isZeroPagesToDisplay(){let t=this.rowModel.isLastRowIndexKnown(),e=this.paginationService.getTotalPages();return t&&e===0}setTotalLabels(){let t=this.rowModel.isLastRowIndexKnown(),e=this.paginationService.getTotalPages(),n=t?this.paginationService.getMasterRowCount():null;if(n===1){let i=this.rowModel.getRow(0);if(i&&i.group&&!(i.groupData||i.aggData)){this.setTotalLabelsToZero();return}}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(n);else{let i=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=i,this.lbRecordCount.innerHTML=i}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}},HRe={selector:"AG-PAGINATION",component:GRe},URe=class extends q{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(t){this.rowModel=t.rowModel,this.pageBoundsService=t.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return HRe}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){!this.active||this.currentPage===t||typeof this.currentPage!="number"||(this.currentPage=t,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(t){return t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(t){return Math.floor(t/this.pageSize)}goToPageWithIndex(t){if(!this.active)return;let e=this.getPageForIndex(t);this.goToPage(e)}isRowInPage(t){return this.active?this.getPageForIndex(t.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return ne(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:ne(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ne(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ne(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let t=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==t&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(t,e){let n=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let e=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>t&&(n=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),n===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(t){let{keepRenderedRows:e=!1,newPage:n=!1,newPageSize:i=!1}=t,r={type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:e};this.eventService.dispatchEvent(r)}},k7={version:Xe,moduleName:"@ag-grid-community/pagination-core",beans:[URe,NRe]},jRe={version:Xe,moduleName:"@ag-grid-community/pagination-api",dependantModules:[k7],apiFunctions:{paginationIsLastPageFound:TRe,paginationGetPageSize:RRe,paginationGetCurrentPage:IRe,paginationGetTotalPages:xRe,paginationGetRowCount:FRe,paginationGoToNextPage:ARe,paginationGoToPreviousPage:PRe,paginationGoToFirstPage:MRe,paginationGoToLastPage:ORe,paginationGoToPage:kRe}},WRe={version:Xe,moduleName:"@ag-grid-community/pagination",dependantModules:[k7,jRe]},B="@ag-grid-community/core",ll="@ag-grid-community/client-side-row-model",K9="@ag-grid-community/csv-export",_T="@ag-grid-community/infinite-row-model",ET="@ag-grid-enterprise/advanced-filter",ga="@ag-grid-enterprise/charts",Kg="@ag-grid-enterprise/clipboard",YC="@ag-grid-enterprise/excel-export",DT="@ag-grid-enterprise/master-detail",jN="@ag-grid-enterprise/menu",WN="@ag-grid-enterprise/range-selection",gn="@ag-grid-enterprise/row-grouping",cc="@ag-grid-enterprise/server-side-row-model",cl="@ag-grid-enterprise/side-bar",zRe="@ag-grid-enterprise/status-bar",qRe={dispatchEvent:B,getState:B,getGridId:B,destroy:B,isDestroyed:B,getGridOption:B,setGridOption:B,updateGridOptions:B,setNodesSelected:B,selectAll:B,deselectAll:B,selectAllFiltered:B,deselectAllFiltered:B,selectAllOnCurrentPage:B,deselectAllOnCurrentPage:B,getSelectedNodes:B,getSelectedRows:B,redrawRows:B,setRowNodeExpanded:B,getRowNode:B,addRenderedRowListener:B,getRenderedNodes:B,forEachNode:B,getFirstDisplayedRow:B,getFirstDisplayedRowIndex:B,getLastDisplayedRow:B,getLastDisplayedRowIndex:B,getDisplayedRowAtIndex:B,getDisplayedRowCount:B,getModel:B,getVerticalPixelRange:B,getHorizontalPixelRange:B,ensureColumnVisible:B,ensureIndexVisible:B,ensureNodeVisible:B,getFocusedCell:B,clearFocusedCell:B,setFocusedCell:B,tabToNextCell:B,tabToPreviousCell:B,setFocusedHeader:B,addEventListener:B,addGlobalListener:B,removeEventListener:B,removeGlobalListener:B,expireValueCache:B,getValue:B,getCellValue:B,showColumnMenuAfterButtonClick:B,showColumnMenuAfterMouseClick:B,showColumnMenu:B,hidePopupMenu:B,onSortChanged:B,getPinnedTopRowCount:B,getPinnedBottomRowCount:B,getPinnedTopRow:B,getPinnedBottomRow:B,showLoadingOverlay:B,showNoRowsOverlay:B,hideOverlay:B,setGridAriaProperty:B,refreshCells:B,flashCells:B,refreshHeader:B,isAnimationFrameQueueEmpty:B,flushAllAnimationFrames:B,getSizesForCurrentTheme:B,getCellRendererInstances:B,addRowDropZone:B,removeRowDropZone:B,getRowDropZoneParams:B,getColumnDef:B,getColumnDefs:B,sizeColumnsToFit:B,setColumnGroupOpened:B,getColumnGroup:B,getProvidedColumnGroup:B,getDisplayNameForColumn:B,getDisplayNameForColumnGroup:B,getColumn:B,getColumns:B,applyColumnState:B,getColumnState:B,resetColumnState:B,getColumnGroupState:B,setColumnGroupState:B,resetColumnGroupState:B,isPinning:B,isPinningLeft:B,isPinningRight:B,getDisplayedColAfter:B,getDisplayedColBefore:B,setColumnVisible:B,setColumnsVisible:B,setColumnPinned:B,setColumnsPinned:B,getAllGridColumns:B,getDisplayedLeftColumns:B,getDisplayedCenterColumns:B,getDisplayedRightColumns:B,getAllDisplayedColumns:B,getAllDisplayedVirtualColumns:B,moveColumn:B,moveColumnByIndex:B,moveColumns:B,setColumnWidth:B,setColumnWidths:B,getLeftDisplayedColumnGroups:B,getCenterDisplayedColumnGroups:B,getRightDisplayedColumnGroups:B,getAllDisplayedColumnGroups:B,autoSizeColumn:B,autoSizeColumns:B,autoSizeAllColumns:B,undoCellEditing:B,redoCellEditing:B,getCellEditorInstances:B,getEditingCells:B,stopEditing:B,startEditingCell:B,getCurrentUndoSize:B,getCurrentRedoSize:B,isAnyFilterPresent:B,onFilterChanged:B,isColumnFilterPresent:B,getFilterInstance:B,getColumnFilterInstance:B,destroyFilter:B,setFilterModel:B,getFilterModel:B,getColumnFilterModel:B,setColumnFilterModel:B,showColumnFilter:B,isQuickFilterPresent:B,getQuickFilter:B,resetQuickFilter:B,paginationIsLastPageFound:B,paginationGetPageSize:B,paginationGetCurrentPage:B,paginationGetTotalPages:B,paginationGetRowCount:B,paginationGoToNextPage:B,paginationGoToPreviousPage:B,paginationGoToFirstPage:B,paginationGoToLastPage:B,paginationGoToPage:B,expandAll:B,collapseAll:B,onRowHeightChanged:B,setRowCount:B,getCacheBlockState:B,onGroupExpandedOrCollapsed:ll,refreshClientSideRowModel:ll,forEachLeafNode:ll,forEachNodeAfterFilter:ll,forEachNodeAfterFilterAndSort:ll,resetRowHeights:ll,applyTransaction:ll,applyTransactionAsync:ll,flushAsyncTransactions:ll,getBestCostNodeSelection:ll,getDataAsCsv:K9,exportDataAsCsv:K9,refreshInfiniteCache:_T,purgeInfiniteCache:_T,getInfiniteRowCount:_T,isLastRowIndexKnown:_T,getAdvancedFilterModel:ET,setAdvancedFilterModel:ET,showAdvancedFilterBuilder:ET,hideAdvancedFilterBuilder:ET,getChartModels:ga,getChartRef:ga,getChartImageDataURL:ga,downloadChart:ga,openChartToolPanel:ga,closeChartToolPanel:ga,createRangeChart:ga,createPivotChart:ga,createCrossFilterChart:ga,updateChart:ga,restoreChart:ga,copyToClipboard:Kg,cutToClipboard:Kg,copySelectedRowsToClipboard:Kg,copySelectedRangeToClipboard:Kg,copySelectedRangeDown:Kg,pasteFromClipboard:Kg,getDataAsExcel:YC,exportDataAsExcel:YC,getSheetDataForExcel:YC,getMultipleSheetsAsExcel:YC,exportMultipleSheetsAsExcel:YC,addDetailGridInfo:DT,removeDetailGridInfo:DT,getDetailGridInfo:DT,forEachDetailGridInfo:DT,showContextMenu:jN,showColumnChooser:jN,hideColumnChooser:jN,getCellRanges:WN,addCellRange:WN,clearRangeSelection:WN,addAggFunc:gn,addAggFuncs:gn,clearAggFuncs:gn,setColumnAggFunc:gn,isPivotMode:gn,getPivotResultColumn:gn,setValueColumns:gn,getValueColumns:gn,removeValueColumn:gn,removeValueColumns:gn,addValueColumn:gn,addValueColumns:gn,setRowGroupColumns:gn,removeRowGroupColumn:gn,removeRowGroupColumns:gn,addRowGroupColumn:gn,addRowGroupColumns:gn,getRowGroupColumns:gn,moveRowGroupColumn:gn,setPivotColumns:gn,removePivotColumn:gn,removePivotColumns:gn,addPivotColumn:gn,addPivotColumns:gn,getPivotColumns:gn,setPivotResultColumns:gn,getPivotResultColumns:gn,getServerSideSelectionState:cc,setServerSideSelectionState:cc,applyServerSideTransaction:cc,applyServerSideTransactionAsync:cc,applyServerSideRowData:cc,retryServerSideLoads:cc,flushServerSideAsyncTransactions:cc,refreshServerSide:cc,getServerSideGroupLevelState:cc,isSideBarVisible:cl,setSideBarVisible:cl,setSideBarPosition:cl,openToolPanel:cl,closeToolPanel:cl,getOpenedToolPanel:cl,refreshToolPanel:cl,isToolPanelShowing:cl,getToolPanelInstance:cl,getSideBar:cl,getStatusPanel:zRe},Ys="clientSide",ws="serverSide",Yg="infinite",KRe={onGroupExpandedOrCollapsed:[Ys],refreshClientSideRowModel:[Ys],forEachLeafNode:[Ys],forEachNodeAfterFilter:[Ys],forEachNodeAfterFilterAndSort:[Ys],resetRowHeights:[Ys],applyTransaction:[Ys],applyTransactionAsync:[Ys],flushAsyncTransactions:[Ys],getBestCostNodeSelection:[Ys],getServerSideSelectionState:[ws],setServerSideSelectionState:[ws],applyServerSideTransaction:[ws],applyServerSideTransactionAsync:[ws],applyServerSideRowData:[ws],retryServerSideLoads:[ws],flushServerSideAsyncTransactions:[ws],refreshServerSide:[ws],getServerSideGroupLevelState:[ws],refreshInfiniteCache:[Yg],purgeInfiniteCache:[Yg],getInfiniteRowCount:[Yg],isLastRowIndexKnown:[Yg],expandAll:[Ys,ws],collapseAll:[Ys,ws],onRowHeightChanged:[Ys,ws],setRowCount:[Yg,ws],getCacheBlockState:[Yg,ws]},YRe={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};function QRe(t,e){let n=qRe[t];n?zr.__assertRegistered(n,`api.${t}`,e)&&$(`API function '${t}' not registered to module '${n}'`):Pt(`Unknown API function: '${t}' on GridApi.`)}function XRe(t,e,n){let i=YRe[t];if(i){let{version:s,new:o,old:a,message:l}=i,c=a??t;return(...u)=>{let d=o?`Please use ${o} instead. `:"";return $(`Since ${s} api.${c} is deprecated. ${d}${l??""}`),e.apply(e,u)}}let r=KRe[t];return r?(...s)=>{let o=n.rowModel.getType();if(!r.includes(o)){Pt(`api.${t} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`);return}return e.apply(e,s)}:e}var $Re={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},Lu=(t,e)=>(e.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,ZRe={enableRowGroup:Lu,rowGroup:Lu,rowGroupIndex:Lu,enablePivot:Lu,enableValue:Lu,pivot:Lu,pivotIndex:Lu,aggFunc:Lu,cellEditor:t=>t.cellEditor==="agRichSelect"||t.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:t=>{let e=["columnsMenuTab","generalMenuTab"];return t.menuTabs?.some(n=>e.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Zg},JRe={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},eIe=Object.keys(JRe),Zg={objectName:"colDef",allProperties:eIe,docsUrl:"column-properties/",deprecations:$Re,validations:ZRe},tIe=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}}),nIe={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},iIe=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:t=>{let e=t.rowModelType??"clientSide";switch(e){case"clientSide":{let n=`treeData requires 'getDataPath' in the ${e} row model.`;return t.getDataPath?null:n}case"serverSide":{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${e} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:n}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:t=>{switch(t.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Zg,defaultColDef:()=>Zg,defaultColGroupDef:()=>Zg,autoGroupColumnDef:()=>Zg}),rIe=()=>({objectName:"gridOptions",allProperties:[...nw.ALL_PROPERTIES,...iw.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:tIe(),validations:iIe()}),sIe=class extends q{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(t){this.beans=t,this.gridOptions=t.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(t){this.processOptions(t,rIe())}processColumnDefs(t){this.processOptions(t,Zg)}warnMissingApiFunction(t){QRe(t,this.gridId)}validateApiFunction(t,e){return XRe(t,e,this.beans)}processOptions(t,e){let{validations:n,deprecations:i,allProperties:r,propertyExceptions:s,objectName:o,docsUrl:a}=e;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(t,[...s??[],...Object.keys(i)],r,o,a);let l=new Set;Object.keys(t).forEach(u=>{let d=i[u];if(d)if("renamed"in d){let{renamed:b,version:E}=d;l.add(`As of v${E}, ${String(u)} is deprecated. Please use ${String(b)} instead.`),t[b]=t[u]}else{let{message:b,version:E}=d;l.add(`As of v${E}, ${String(u)} is deprecated. ${b??""}`)}let h=t[u];if(h==null||h===!1)return;let p=n[u],g;if(p)if(typeof p=="function"){let b=p(t,this.gridOptions);if(!b)return;if("objectName"in b){let E=t[u];if(Array.isArray(E)){E.forEach(T=>{this.processOptions(T,b)});return}this.processOptions(t[u],b);return}g=b}else g=p;else return;let{module:m,dependencies:v,supportedRowModels:C}=g;if(C){let b=this.gridOptions.rowModelType??"clientSide";if(!C.includes(b)){l.add(`${String(u)} is not supported with the '${b}' row model.`);return}}if(m){let b=Array.isArray(m)?m:[m],E=!0;if(b.forEach(T=>{zr.__assertRegistered(T,String(u),this.gridId)||(E=!1,l.add(`${String(u)} is only available when ${T} is loaded.`))}),!E)return}if(v){let b=this.checkForWarning(u,v,t);if(b){l.add(b);return}}}),l.size>0&&l.forEach(u=>{$(u)})}checkForWarning(t,e,n){if(typeof e=="function")return e(n,this.gridOptions);let r=Object.entries(e).find(([a,l])=>{let c=n[a];return!l.includes(c)});if(!r)return null;let[s,o]=r;return o.length>1?`'${String(t)}' requires '${s}' to be one of [${o.join(", ")}].`:`'${String(t)}' requires '${s}' to be ${o[0]}.`}checkProperties(t,e,n,i,r){let s=["__ob__","__v_skip","__metadata__"],o=h0e(Object.getOwnPropertyNames(t),[...s,...e,...n],n);if(Do(o,(a,l)=>{let c=`invalid ${i} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;n.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),$(c)}),Object.keys(o).length>0&&r){let a=this.getFrameworkOverrides().getDocLink(r);$(`to see all the valid ${i} properties please check: ${a}`)}}},oIe={version:Xe,moduleName:"@ag-grid-community/core"},aIe={version:Xe,moduleName:"@ag-grid-community/core-validations",beans:[sIe]},N7={version:Xe,moduleName:"@ag-grid-community/core-community-features",dependantModules:[oIe,aIe,yEe,KSe,DRe,eTe,cDe,WRe,SRe]},lIe=class extends q{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(t){this.beans=t}destroy(){if(this.destroyCalled)return;let t={type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}};this.eventService.dispatchEvent(t),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},xT=new Set(["gridPreDestroyed","fillStart","pasteStart"]),cIe=t=>t==="checkboxSelected"||t==="rowClicked"||t==="spaceKey"||t==="uiSelectAll"||t==="uiSelectAllCurrentPage"||t==="uiSelectAllFiltered",uIe=new Map([...nw.BOOLEAN_PROPERTIES.map(t=>[t,QN]),...nw.NUMBER_PROPERTIES.map(t=>[t,e7]),["groupAggFiltering",t=>typeof t=="function"?t:QN(t)],["pageSize",al(1)],["autoSizePadding",al(0)],["keepDetailRowsCount",al(1)],["rowBuffer",al(0)],["infiniteInitialRowCount",al(1)],["cacheOverflowSize",al(1)],["cacheBlockSize",al(1)],["serverSideInitialRowCount",al(1)],["viewportRowModelPageSize",al(1)],["viewportRowModelBufferSize",al(0)]]);function L7(t,e){let n=uIe.get(t);return n?n(e):e}function dIe(t){let e={};return Object.entries(t).forEach(([n,i])=>{let r=L7(n,i);e[n]=r}),e}var V7=class B7 extends q{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new rm,this.globalEventHandlerFactory=e=>(n,i)=>{if(!this.isAlive())return;let r=xT.has(n);if(r&&!e||!r&&e)return;let s=iw.getCallbackForEvent(n),o=this.gridOptions[s];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(i)})}}wireBeans(e){this.gridOptions=e.gridOptions,this.eGridDiv=e.eGridDiv,this.validationService=e.validationService,this.environment=e.environment,this.api=e.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??nIe[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return ne(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{let r=i;return r.api=this.api,r.context=this.gridOptionsContext,e(r)})}updateGridOptions({options:e,force:n,source:i="api"}){let r={id:B7.changeSetId++,properties:[]},s=[];Object.entries(e).forEach(([o,a])=>{i==="api"&&Cwe[o]&&$(`${o} is an initial property and cannot be updated.`);let l=L7(o,a),c=n||typeof l=="object"&&i==="api",u=this.gridOptions[o];if(c||u!==l){this.gridOptions[o]=l;let d={type:o,currentValue:l,previousValue:u,changeSet:r,source:i};s.push(d)}}),this.validationService?.processGridOptions(this.gridOptions),r.properties=s.map(o=>o.type),s.forEach(o=>{this.gridOptions.debug&&Ro(`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addPropertyEventListener(e,n){this.propertyEventService.addEventListener(e,n)}removePropertyEventListener(e,n){this.propertyEventService.removeEventListener(e,n)}getScrollbarWidth(){if(this.scrollbarWidth==null){let n=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Vwe();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&vt(this.gridOptions.rowModelType)}isDomLayout(e){return(this.gridOptions.domLayout??"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,n=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(n)return{height:i,estimated:!0};let s={node:e,data:e.data},o=this.getCallback("getRowHeight")(s);if(this.isNumeric(o))return o===0&&$("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return e.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||vt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let e=this.environment.refreshRowHeightVariable();return e!==-1?e:($("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,n){let i=e[this.getDomDataKey()];return i?i[n]:void 0}setDomData(e,n,i){let r=this.getDomDataKey(),s=e[r];vt(s)&&(s={},e[r]=s),s[n]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&ne(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&ne(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return ne(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){return!this.gridOptions.autoGroupColumnDef?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(e===!0)return()=>!0}getGrandTotalRow(){let e=this.gridOptions.grandTotalRow;if(e)return e;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let e=this.get("groupTotalRow");if(typeof e=="function")return this.getCallback("groupTotalRow");if(e)return()=>e;let n=this.get("groupIncludeFooter");if(typeof n=="function"){let i=this.getCallback("groupIncludeFooter");return r=>i(r)?"bottom":void 0}return()=>n?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){let n=e;return n.api=this.api,n.context=this.gridOptionsContext,n}getRowIdCallback(){let e=this.getCallback("getRowId");return e===void 0?e:n=>{let i=e(n);return typeof i!="string"&&($("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}};V7.changeSetId=0;var hIe=V7,fIe=class extends q{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(t){this.visibleColsService=t.visibleColsService,this.ctrlsService=t.ctrlsService}findHeader(t,e){let n,i;if(si(t.column)?n=this.visibleColsService.getGroupAtDirection(t.column,e):(i=`getCol${e}`,n=this.visibleColsService[i](t.column)),!n)return;let{headerRowIndex:r}=t;if(this.getHeaderRowType(r)!=="filter"){let a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-r]}let{column:s,headerRowIndex:o}=this.getHeaderIndexToFocus(n,r);return{column:s,headerRowIndex:o}}getHeaderIndexToFocus(t,e){let n;if(si(t)&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding()){let i=t;n=i.getLeafColumns()[0];let r=n;for(;r!==i;)e++,r=r.getParent()}return{column:n||t,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(t,e){let n=this.getHeaderRowType(e),i=n==="filter",r=n==="column",s=i?t:t.getParent(),o=e-1,a=o;if(r&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;s&&s.isPadding();)s=s.getParent(),o--;a=o,o<0&&(s=t,o=e,a=void 0)}return{column:s,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(t,e,n="After"){let i=this.getHeaderRowType(e),r=t,s=e+1,o=s;if(i==="group"){let a=t.getDisplayedLeafColumns(),l=n==="After"?a[0]:Rt(a),c=[],u=l;for(;u.getParent()!==t;)u=u.getParent(),c.push(u);if(r=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){let h=c[d];if(!h.isPadding()){r=h;break}s++}else r=Rt(c),r||(r=l)}return{column:r,headerRowIndex:s,headerRowIndexWithoutSpan:o}}getHeaderRowType(t){let e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){let n=this.visibleColsService.getAllCols(),i=n[e==="start"?0:n.length-1];if(!i)return;let s=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getRowType(t);if(s=="group"){let o=this.visibleColsService.getColGroupAtLevel(i,t);return{headerRowIndex:t,column:o}}return{headerRowIndex:s==null?-1:t,column:i}}},pIe=class extends q{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let t=this.gos.getCallback("getLocaleText");if(t)return(n,i,r)=>t({key:n,defaultValue:i,variableValues:r});let e=this.gos.get("localeText");return(n,i,r)=>{let s=e&&e[n];if(s&&r&&r.length){let o=0;for(;!(o>=r.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",r[o++])}return s??i}}},gIe=class extends q{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new cL(this.getFrameworkOverrides())}addEventListener(t,e){let n=this.frameworkEventWrappingService.wrap(e),i=this.gos.useAsyncEvents()&&!xT.has(t),r=i?this.asyncEventListeners:this.syncEventListeners;r.has(t)||r.set(t,new Set),r.get(t).add(n),this.eventService.addEventListener(t,n,i)}removeEventListener(t,e){let n=this.frameworkEventWrappingService.unwrap(e),r=!!this.asyncEventListeners.get(t)?.delete(n);r||this.syncEventListeners.get(t)?.delete(n),this.eventService.removeEventListener(t,n,r)}addGlobalListener(t){let e=this.frameworkEventWrappingService.wrapGlobal(t);if(this.gos.useAsyncEvents()){let i=(s,o)=>{xT.has(s)&&e(s,o)},r=(s,o)=>{xT.has(s)||e(s,o)};this.globalEventListenerPairs.set(t,{syncListener:i,asyncListener:r}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(t){let e=this.frameworkEventWrappingService.unwrapGlobal(t);if(this.globalEventListenerPairs.has(e)){let{syncListener:i,asyncListener:r}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(t)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(t,e){t.forEach((n,i)=>{n.forEach(r=>this.eventService.removeEventListener(i,r,e)),n.clear()}),t.clear()}destroyGlobalListeners(t,e){t.forEach(n=>this.eventService.removeGlobalListener(n,e)),t.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:t,asyncListener:e})=>{this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}},mIe=class extends q{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(t){this.rowModel=t.rowModel,this.paginationService=t.paginationService,this.pageBoundsService=t.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(t){this.calculatePages();let e={type:"paginationChanged",animate:t?t.animate:!1,newData:t?t.newData:!1,newPage:t?t.newPage:!1,newPageSize:t?t.newPageSize:!1,keepRenderedRows:t?t.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},vIe=class extends q{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(t){this.rowModel=t.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return vt(this.topRowBounds)||vt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}}calculateBounds(t,e){this.topRowBounds=this.rowModel.getRowBounds(t),this.topRowBounds&&(this.topRowBounds.rowIndex=t),this.bottomRowBounds=this.rowModel.getRowBounds(e),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=e),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let t=ne(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},yIe=class extends q{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=Kr(this.announceValue.bind(this),200)}wireBeans(t){this.eGridDiv=t.eGridDiv}postConstruct(){let t=this.gos.getDocument(),e=this.descriptionContainer=t.createElement("div");e.classList.add("ag-aria-description-container"),pK(e,"polite"),Ewe(e,"additions text"),_we(e,!0),this.eGridDiv.appendChild(e)}announceValue(t){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=t)},50))}destroy(){super.destroy();let{descriptionContainer:t}=this;t&&(wr(t),t.parentElement&&t.parentElement.removeChild(t)),this.descriptionContainer=null,this.eGridDiv=null}},CIe=class extends q{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(t){this.ctrlsService=t.ctrlsService}postConstruct(){this.ctrlsService.whenReady(t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(t){this.active?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){t();return}let e=n=>{for(;n.length;){let i=n.pop();i&&i()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{t(),e(this.executeLaterFuncs)},200)})}},wIe=class extends q{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(t){this.selectedColumns=t;let e={type:"columnHoverChanged"};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;let t={type:"columnHoverChanged"};this.eventService.dispatchEvent(t)}isHovered(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0}},SIe=class extends q{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(t){this.userComponentFactory=t.userComponentFactory,this.rowModel=t.rowModel,this.columnModel=t.columnModel}postConstruct(){let t=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:t,rowDataUpdated:t}),this.addManagedPropertyListener("loading",t)}registerOverlayWrapperComp(t){this.overlayWrapperComp=t,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;let t=this.gos.get("loading");!t&&(t!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&this.doHideOverlay()}updateOverlayVisibility(){let t=this.gos.get("loading");this.showInitialOverlay&&t===void 0&&!this.gos.get("suppressLoadingOverlay")&&(t=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),t?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(t,e,n){let i=t.newAgStackInstance();this.overlayWrapperComp.showOverlay(i,e,n)}},bIe=class extends q{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(t){this.stylingService=t.stylingService}getInitialRowClasses(t){let e=[];return ne(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),T9(e,this.processClassesFromGridOptions(t.rowNode)),T9(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(t){let e=[],n=s=>{typeof s=="string"?e.push(s):Array.isArray(s)&&s.forEach(o=>e.push(o))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return $("rowClass should not be a function, please use getRowClass instead"),[];n(i)}let r=this.gos.getCallback("getRowClass");if(r){let s={data:t.data,node:t,rowIndex:t.rowIndex},o=r(s);n(o)}return e}preProcessRowClassRules(t){let e=[];return this.processRowClassRules(t,n=>{e.push(n)},()=>{}),e}processRowClassRules(t,e,n){let i=this.gos.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,e,n)}calculateRowLevel(t){return t.group?t.level:t.parent?t.parent.level+1:0}},_Ie=class extends q{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(t){this.ctrlsService=t.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=kwe(),this.gos.get("debug")&&Ro("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(e!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.gos.get("debug")&&Ro(`RowContainerHeightService - Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){let e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;let e=this.modelHeight-this.getUiBodyHeight(),n=t/e;return this.maxScrollY*n}},EIe=class extends q{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(t){this.valueService=t.valueService,this.columnModel=t.columnModel,this.showRowGroupColsService=t.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(t,e){let n=(r,s)=>({currentPos:s,rowNode:r}),i=t.map(n);return i.sort(this.compareRowNodes.bind(this,e)),i.map(r=>r.rowNode)}compareRowNodes(t,e,n){let i=e.rowNode,r=n.rowNode;for(let s=0,o=t.length;s<o;s++){let a=t[s],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(r,a.column),d,h=this.getComparator(a,i);if(h?d=h(c,u,i,r,l):d=zCe(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return e.currentPos-n.currentPos}getComparator(t,e){let n=t.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let r=!e.group&&n.getColDef().field;if(!r)return;let s=this.columnModel.getColDefCol(r);if(s)return s.getColDef().comparator}getValue(t,e){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let s=t.allLeafChildren?.[0];return s?this.valueService.getValue(e,s,!1,!1):void 0}let r=this.showRowGroupColsService?.getShowRowGroupCol(e.getId());return r?t.groupData?.[r.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)}},WT=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(t,e){if(t.children)for(let n=0;n<t.children.length;n++)this.depthFirstSearchChangedPath(t.children[n],e);e(t.rowNode)}depthFirstSearchEverything(t,e,n){if(t.childrenAfterGroup)for(let i=0;i<t.childrenAfterGroup.length;i++){let r=t.childrenAfterGroup[i];r.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[i],e,n):n&&e(r)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,n=0;for(;!this.mapToItems[e.id];){let i={rowNode:e,children:null};this.mapToItems[e.id]=i,n++,e=e.parent}return n}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let n=t;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(t,e){let n=t;for(let i=0;i<e;i++){let r=this.mapToItems[n.id],s=this.mapToItems[n.parent.id];s.children||(s.children=[]),s.children.push(r),n=n.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;let n=this.createPathItems(t);this.linkPathItems(t,n),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;let n=this.nodeIdsToColumns[t.id];return e.filter(r=>n[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[t.id];return e.filter(r=>!n[r.getId()])}},G7=class extends q{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new REe}wireBeans(t){this.rowModel=t.rowModel,this.pageBoundsService=t.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return this.rowSelection==="multiple"}overrideSelectionValue(t,e){if(!cIe(e))return t;let n=this.selectionCtx.getRoot();return n?n.isSelected()??!1:!0}setNodesSelected(t){let{newValue:e,clearSelection:n,suppressFinishActions:i,rangeSelect:r,nodes:s,event:o,source:a}=t;if(s.length===0)return 0;if(s.length>1&&!this.isMultiselect())return $("cannot multi select while rowSelection='single'"),0;let l=this.groupSelectsChildren&&t.groupSelectsFiltered===!0,c=s.map(d=>d.footer?d.sibling:d);if(r){if(c.length>1)return $("cannot range select while selecting multiple rows"),0;let d=c[0],h=this.overrideSelectionValue(e,a);if(this.isMultiselect()){if(this.selectionCtx.isInRange(d)){let p=this.selectionCtx.truncate(d);return h&&this.selectRange(p.discard,!1,a),this.selectRange(p.keep,h,a)}else if(this.selectionCtx.getRoot()!==d){let m=this.selectionCtx.extend(d,this.groupSelectsChildren);return h&&this.selectRange(m.discard,!1,a),this.selectRange(m.keep,h,a)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let d=0;d<c.length;d++){let h=c[d];l&&h.group||h.selectThisNode(e,o,a)&&u++,this.groupSelectsChildren&&h.childrenAfterGroup?.length&&(u+=this.selectChildren(h,e,l,a))}return i||(e&&(n||!this.isMultiselect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(t,e,n){let i=0;return t.forEach(r=>{if(r.group&&this.groupSelectsChildren)return;r.selectThisNode(e,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(t,e,n,i){let r=n?t.childrenAfterAggFilter:t.childrenAfterGroup;return vt(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:r})}getSelectedNodes(){let t=[];return this.selectedNodes.forEach(e=>{e&&t.push(e)}),t}getSelectedRows(){let t=[];return this.selectedNodes.forEach(e=>{e&&e.data&&t.push(e.data)}),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){let e=new Map;this.selectedNodes.forEach((n,i)=>{n&&t(n)&&e.set(i,n)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let i=this.rowModel.getRootNode();e||(e=new WT(!0,i),e.setInactive());let r=!1;return e.forEachChangedNodeDepthFirst(s=>{if(s!==i){let o=s.calculateSelectedFromChildren();r=s.selectThisNode(o===null?!1:o,void 0,t)||r}}),r}clearOtherNodes(t,e){let n=new Map,i=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==t.id){let s=this.selectedNodes.get(r.id);i+=s.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&r.parent&&n.set(r.parent.id,r.parent)}}),n.forEach(r=>{let s=r.calculateSelectedFromChildren();r.selectThisNode(s===null?!1:s,void 0,e)}),i}onRowSelected(t){let e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}syncInOldRowNode(t,e){if(ne(e)&&t.id!==e.id&&e){let i=e.id;this.selectedNodes.get(i)==t&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)}reset(t){let e=this.getSelectionCount();this.resetNodes(),e&&this.dispatchSelectionChanged(t)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let e=this.rowModel.getTopLevelNodes();if(e===null)return;let n=[];function i(r){for(let s=0,o=r.length;s<o;s++){let a=r[s];if(a.isSelected())n.push(a);else{let l=a;l.group&&l.children&&i(l.children)}}}return i(e),n}isEmpty(){let t=0;return this.selectedNodes.forEach(e=>{e&&t++}),t===0}deselectAllRowNodes(t){let e=o=>o.selectThisNode(!1,void 0,i),n=this.rowModel.getType()==="clientSide",{source:i,justFiltered:r,justCurrentPage:s}=t;if(s||r){if(!n){Pt("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,s).forEach(e)}else this.selectedNodes.forEach(o=>{o&&e(o)}),this.reset(i);this.selectionCtx.reset(),n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(t,e){let n=0,i=0,r=s=>{this.groupSelectsChildren&&s.group||(s.isSelected()?n++:s.selectable&&i++)};return this.getNodesToSelect(t,e).forEach(r),{selectedCount:n,notSelectedCount:i}}getSelectAllState(t,e){let{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(t,e);return n===0&&i===0?!1:n>0&&i>0?null:n>0}hasNodesToSelect(t=!1,e=!1){return this.getNodesToSelect(t,e).filter(n=>n.selectable).length>0}getNodesToSelect(t=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let n=[];if(e)return this.forEachNodeOnPage(r=>{if(!r.group){n.push(r);return}if(!r.expanded){let s=o=>{n.push(o),o.childrenAfterFilter?.length&&o.childrenAfterFilter.forEach(s)};s(r);return}this.groupSelectsChildren||n.push(r)}),n;let i=this.rowModel;return t?(i.forEachNodeAfterFilter(r=>{n.push(r)}),n):(i.forEachNode(r=>{n.push(r)}),n)}forEachNodeOnPage(t){let e=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow();for(let i=e;i<=n;i++){let r=this.rowModel.getRow(i);r&&t(r)}}selectAllRowNodes(t){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:e,justFiltered:n,justCurrentPage:i}=t,r=this.getNodesToSelect(n,i);r.forEach(s=>s.selectThisNode(!0,void 0,e)),this.selectionCtx.setRoot(r[0]??null),this.selectionCtx.setEndRange(Rt(r)??null),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e),this.dispatchSelectionChanged(e)}getSelectionState(){let t=[];return this.selectedNodes.forEach(e=>{e?.id&&t.push(e.id)}),t.length?t:null}setSelectionState(t,e){if(!Array.isArray(t))return;let n=new Set(t),i=[];this.rowModel.forEachNode(r=>{n.has(r.id)&&i.push(r)}),this.setNodesSelected({newValue:!0,nodes:i,source:e})}dispatchSelectionChanged(t){let e={type:"selectionChanged",source:t};this.eventService.dispatchEvent(e)}},DIe=class extends q{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(t){this.rowModel=t.rowModel,this.selectionService=t.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(t=!1){let e=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!e||!n)return;let i=this.gos.get("groupSelectsChildren"),r=this.rowModel.getType()==="clientSide"&&i,s=[],o=a=>{if(t&&!a.group)return;if(r&&a.group){let c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}let l=n?n(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&s.push(a)};if(r){let a=this.rowModel;new WT(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof G7&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Y9=["asc","desc",null],TIe=class extends q{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(t){this.columnModel=t.columnModel,this.funcColsService=t.funcColsService,this.showRowGroupColsService=t.showRowGroupColsService}progressSort(t,e,n){let i=this.getNextSortDirection(t);this.setSortForColumn(t,i,e,n)}setSortForColumn(t,e,n,i){e!=="asc"&&e!=="desc"&&(e=null);let r=this.gos.isColumnsSortingCoupledToGroup(),s=[t];if(r&&t.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(t)?.filter(u=>u.isSortable());c&&(s=[t,...c])}s.forEach(l=>l.setSort(e,i));let o=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(s,i);a.push(...l)}this.updateSortIndex(t),a.push(...s),this.dispatchSortChangedEvents(i,a)}updateSortIndex(t){let e=this.gos.isColumnsSortingCoupledToGroup(),n=this.showRowGroupColsService?.getShowRowGroupCol(t.getId()),i=e&&n||t,r=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let s=r.filter(a=>e&&a.getColDef().showRowGroup?!1:a!==i);(i.getSort()?[...s,i]:s).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let e=this.columnModel.getAllCols().filter(n=>!!n.getSort());return e&&e.length>0}dispatchSortChangedEvents(t,e){let n={type:"sortChanged",source:t};e&&(n.columns=e),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(t,e){let n=[];return this.columnModel.getAllCols().forEach(i=>{t.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,e))}),n}getNextSortDirection(t){let e;if(t.getColDef().sortingOrder?e=t.getColDef().sortingOrder:this.gos.get("sortingOrder")?e=this.gos.get("sortingOrder"):e=Y9,!Array.isArray(e)||e.length<=0)return $(`sortingOrder must be an array with at least one element, currently it's ${e}`),null;let n=e.indexOf(t.getSort()),i=n<0,r=n==e.length-1,s;return i||r?s=e[0]:s=e[n+1],Y9.indexOf(s)<0?($("invalid sort type ",s),null):s}getIndexedSortMap(){let t=this.columnModel.getAllCols().filter(s=>!!s.getSort());if(this.columnModel.isPivotMode()){let s=this.gos.isColumnsSortingCoupledToGroup();t=t.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),c=s?this.showRowGroupColsService?.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}let e=this.funcColsService.getRowGroupColumns().filter(s=>!!s.getSort()),n={};t.forEach((s,o)=>n[s.getId()]=o),t.sort((s,o)=>{let a=s.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=n[s.getId()],u=n[o.getId()];return c>u?1:-1}else return l==null?-1:1});let i=this.gos.isColumnsSortingCoupledToGroup()&&!!e.length;i&&(t=[...new Set(t.map(s=>this.showRowGroupColsService?.getShowRowGroupCol(s.getId())??s))]);let r=new Map;return t.forEach((s,o)=>r.set(s,o)),i&&e.forEach(s=>{let o=this.showRowGroupColsService.getShowRowGroupCol(s.getId());r.set(s,r.get(o))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([t,e],[n,i])=>e-i).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){let e=this.gos.isColumnsSortingCoupledToGroup(),n=!!t.getColDef().showRowGroup;return e&&n}getDisplaySortForColumn(t){let e=this.funcColsService.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length)return t.getSort();let i=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=i[0].getSort();return i.every(o=>o.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}},RIe=class extends q{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(t){this.ctrlsService=t.ctrlsService,this.columnModel=t.columnModel,this.rowModel=t.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.ctrlsService.whenReady(()=>{let t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){this.columnModel.setColumnDefs(t??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let t=zr.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&Ro(`initialised successfully, enterprise = ${t}`)}dispatchGridReadyEvent(){let t={type:"gridReady"};this.eventService.dispatchEvent(t)}setColumnDefs(t){let e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,$g(t.source))}}},IIe="paste",xIe=class extends q{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(t){this.rowModel=t.rowModel,this.rowRenderer=t.rowRenderer}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(t){t.source!==IIe&&this.doChangeDetection(t.node,t.column)}doChangeDetection(t,e){if(this.gos.get("suppressChangeDetection"))return;let n=[t];if(this.clientSideRowModel&&!t.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),r=new WT(i,this.clientSideRowModel.getRootNode());r.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(s=>{n.push(s)})}this.rowRenderer.refreshCells({rowNodes:n})}},FIe=class extends q{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);Pt("value should be either a string or a function",t)}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.getValue,e.column,e.columnGroup)}catch(n){return Ro("Processing of the expression failed"),Ro("Expression = ",t),Ro("Params = ",e),Ro("Exception = ",n),null}}createExpressionFunction(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];let e=this.createFunctionBody(t),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=n,n}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}},AIe=class extends q{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(t,e,n){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=n)}getValue(t,e){if(!(!this.active||t.__cacheVersion!==this.cacheVersion))return t.__cacheData[e]}},PIe=class extends q{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(t){this.expressionService=t.expressionService,this.columnModel=t.columnModel,this.valueCache=t.valueCache,this.dataTypeService=t.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let t=n=>this.callColumnCellValueChangedHandler(n),e=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",t,e),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",t,e)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValue(t,e,n=!1,i=!1){if(this.initialised||this.init(),!e)return;let r=t.getColDef(),s=r.field,o=t.getColId(),a=e.data,l,c=e.groupData&&e.groupData[o]!==void 0,u=!i&&e.aggData&&e.aggData[o]!==void 0,d=this.isSsrm&&i&&!!t.getColDef().aggFunc,h=this.isSsrm&&e.footer&&e.field&&(t.getColDef().showRowGroup===!0||t.getColDef().showRowGroup===e.field);if(n&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,t,e):this.isTreeData&&u?l=e.aggData[o]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):this.isTreeData&&s&&a?l=$C(a,s,t.isFieldContainsDots()):c?l=e.groupData[o]:u?l=e.aggData[o]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):h?l=$C(a,e.field,t.isFieldContainsDots()):s&&a&&!d&&(l=$C(a,s,t.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,a,t,e)}if(l==null){let p=this.getOpenedGroup(e,t);if(p!=null)return p}return l}parseValue(t,e,n,i){let r=t.getColDef(),s=this.gos.addGridCommonParams({node:e,data:e?.data,oldValue:i,newValue:n,colDef:r,column:t}),o=r.valueParser;return ne(o)?typeof o=="function"?o(s):this.expressionService.evaluate(o,s):n}formatValue(t,e,n,i,r=!0){let s=null,o,a=t.getColDef();if(i?o=i:r&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:n,node:e,data:e?e.data:null,colDef:a,column:t});typeof o=="function"?s=o(l):s=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}getOpenedGroup(t,e){if(!this.gos.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;let i=e.getColDef().showRowGroup,r=t.parent;for(;r!=null;){if(r.rowGroupColumn&&(i===!0||i===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(t,e,n,i){let r=this.columnModel.getColDefCol(e);if(!t||!r)return!1;vt(t.data)&&(t.data={});let{field:s,valueSetter:o}=r.getColDef();if(vt(s)&&vt(o))return $("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(r,n))return $("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(r,t),newValue:n,colDef:r.getColDef(),column:r});a.newValue=n;let l;if(ne(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(t.data,s,n,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(r,t);let c={type:"cellValueChanged",event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:a.column,api:a.api,colDef:a.colDef,context:a.context,data:t.data,node:t,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:i};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(t){let e=t.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,context:t.context})})}setValueUsingField(t,e,n,i){if(!e)return!1;let r=!1;if(!i)r=t[e]===n,r||(t[e]=n);else{let s=e.split("."),o=t;for(;s.length>0&&o;){let a=s.shift();s.length===0?(r=o[a]===n,r||(o[a]=n)):o=o[a]}}return!r}executeFilterValueGetter(t,e,n,i){let r=this.gos.addGridCommonParams({data:e,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof t=="function"?t(r):this.expressionService.evaluate(t,r)}executeValueGetter(t,e,n,i){let r=n.getColId(),s=this.valueCache.getValue(i,r);if(s!==void 0)return s;let o=this.gos.addGridCommonParams({data:e,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),a;return typeof t=="function"?a=t(o):a=this.expressionService.evaluate(t,o),this.valueCache.setValue(i,r,a),a}getValueCallback(t,e){let n=this.columnModel.getColDefCol(e);return n?this.getValue(n,t):null}getKeyForNode(t,e){let n=this.getValue(t,e),i=t.getColDef().keyCreator,r=n;if(i){let s=this.gos.addGridCommonParams({value:n,colDef:t.getColDef(),column:t,node:e,data:e.data});r=i(s)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&$("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}},lL=class{};lL.gridOptions=void 0;function H7(t,e,n){if(!e)return Pt("No gridOptions provided to createGrid"),{};let i=new OIe().create(t,e,r=>{let s=new aDe(t);r.createBean(s)},void 0,n);if(!Object.isFrozen(e)&&!n?.frameworkOverrides){let r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:()=>{Pt(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0})}return i}var MIe=1,OIe=class{create(t,e,n,i,r){let s={};lL.gridOptions?(To(s,lL.gridOptions,!0,!0),s=W(W({},s),e)):s=e;let o=dIe(s),a=o.gridId??String(MIe++),l=this.getRegisteredModules(r,a),c=this.createBeansList(o.rowModelType,l,a),u=this.createProvidedBeans(t,o,r);if(!c){Pt("Failed to create grid.");return}let d={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:YEe,beanDestroyComparator:QEe,derivedBeans:[BEe]},h=new M0e(d);return this.registerModuleUserComponents(h,l),this.registerControllers(h,l),this.registerModuleApiFunctions(h,l),n(h),h.getBean("syncService").start(),i&&i(h),h.getBean("gridApi")}registerControllers(t,e){let n=t.getBean("ctrlsFactory");e.forEach(i=>{i.controllers&&i.controllers.forEach(r=>n.register(r))})}getRegisteredModules(t,e){let n=t?t.modules:null,i=zr.__getRegisteredModules(e),r=[],s={},o=(a,l,c)=>{(d=>{s[d.moduleName]||(s[d.moduleName]=!0,r.push(d),zr.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,c))};return o(!!n?.length||!zr.__isPackageBased(),N7,void 0),n&&n.forEach(a=>o(!0,a,e)),i&&i.forEach(a=>o(!zr.__isPackageBased(),a,void 0)),r}registerModuleUserComponents(t,e){let n=this.extractModuleEntity(e,r=>r.userComponents?r.userComponents:[]),i=t.getBean("userComponentRegistry");n.forEach(r=>{i.registerDefaultComponent(r.name,r.classImp)})}registerModuleApiFunctions(t,e){let n=t.getBean("apiFunctionService");e.forEach(i=>{let r=i.apiFunctions??{};Object.keys(r).forEach(o=>{n?.addFunction(o,r[o])})})}createProvidedBeans(t,e,n){let i=n?n.frameworkOverrides:null;vt(i)&&(i=new VL);let r={gridOptions:e,eGridDiv:t,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(t="clientSide",e,n){let i=e.filter(l=>!l.rowModel||l.rowModel===t),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[t]){Pt("Could not find row model for rowModelType = ",t);return}if(!zr.__assertRegistered(r[t],`rowModelType = '${t}'`,n))return;let s=[eDe,ZEe,fIe,lIe,LEe,p0e,zEe,qEe,P_e,LK,_Ie,x_e,pIe,_Ee,V0e,mwe,iDe,hIe,MEe,G7,twe,ZSe,vIe,mIe,SEe,FIe,ewe,I_e,AIe,PIe,CEe,F_e,k0e,rDe,R_e,tDe,kEe,IEe,T_e,TIe,wIe,CIe,DIe,xIe,M_e,GEe,bIe,EIe,$Ee,sDe,JEe,XEe,RIe,SIe,O_e,gIe,yIe,k_e,owe,HEe,awe,rwe,UEe,jEe,gwe,swe,fwe,WEe,pwe],o=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);s.push(...o);let a=[];return s.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(t,e){return[].concat(...t.map(e))}},U7=class extends q{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(t){this.rowModel=t.rowModel}postConstruct(){let t=this.rowModel;switch(t.getType()){case"clientSide":this.clientSideRowModel=t;break;case"infinite":this.infiniteRowModel=t;break;case"serverSide":this.serverSideRowModel=t;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function kIe(t){t.expansionService.expandAll(!0)}function NIe(t){t.expansionService.expandAll(!1)}function LIe(t){let e=t.rowModelHelperService?.getClientSideRowModel(),n=t.rowModelHelperService?.getServerSideRowModel();e?e.onRowHeightChanged():n&&n.onRowHeightChanged()}function VIe(t,e,n){let i=t.rowModelHelperService?.getServerSideRowModel();if(i){if(t.funcColsService.isRowGroupEmpty()){i.setRowCount(e,n);return}Pt("setRowCount cannot be used while using row grouping.");return}let r=t.rowModelHelperService?.getInfiniteRowModel();if(r){r.setRowCount(e,n);return}}function BIe(t){return t.rowNodeBlockLoader?.getBlockState()??{}}var GIe={version:Xe,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:kIe,collapseAll:NIe,onRowHeightChanged:LIe}},HIe={version:Xe,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:VIe,getCacheBlockState:BIe}},j7=class{wrap(t,e,n=[],i){let r=this.createWrapper(t,i);return e.forEach(s=>{this.createMethod(r,s,!0)}),n.forEach(s=>{this.createMethod(r,s,!1)}),r}unwrap(t){return t}createMethod(t,e,n){t.addMethod(e,this.createMethodProxy(t,e,n))}createMethodProxy(t,e,n){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(n&&$("Framework component is missing the method "+e+"()"),null)}}};function UIe(t,e){if(!t)return!1;let n=(o,a)=>{let l=e[o.id],c=e[a.id],u=l!==void 0,d=c!==void 0,h=u&&d,p=!u&&!d;return h?l-c:p?o.__objectId-a.__objectId:u?1:-1},i,r,s=!1;for(let o=0;o<t.length-1;o++)if(i=t[o],r=t[o+1],n(i,r)>0){s=!0;break}return s?(t.sort(n),!0):!1}var GL=class{};GL.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};GL.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];GL.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var am=typeof global>"u"?{}:global;am.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;am.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;am.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;am.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;am.Node=typeof Node>"u"?{}:Node;am.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var jIe="ROOT_NODE_ID",zN=0,WIe=class{constructor(t,e,n,i,r,s){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gos=e,this.eventService=n,this.funcColsService=i,this.beans=s,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=jIe,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return nK(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if(typeof t=="string"){$("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);let e=this.rootNode,n=this.rootNode.sibling;e.childrenAfterFilter=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?e.allLeafChildren=t.map(i=>this.createNode(i,this.rootNode,zN)):(e.allLeafChildren=[],e.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=e.childrenAfterFilter,n.childrenAfterGroup=e.childrenAfterGroup,n.childrenAfterAggFilter=e.childrenAfterAggFilter,n.childrenAfterSort=e.childrenAfterSort,n.childrenMapped=e.childrenMapped,n.allLeafChildren=e.allLeafChildren)}updateRowData(t,e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);let n={remove:[],update:[],add:[]},i=[];return this.executeRemove(t,n,i),this.executeUpdate(t,n,i),this.executeAdd(t,n),this.updateSelection(i,"rowDataChanged"),e&&UIe(this.rootNode.allLeafChildren,e),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(t){let e={type:"rowDataUpdateStarted",firstRowData:t?.length?t[0]:null};this.eventService.dispatchEvent(e)}updateSelection(t,e){let n=t.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),n){let i={type:"selectionChanged",source:e};this.eventService.dispatchEvent(i)}}executeAdd(t,e){let{add:n,addIndex:i}=t;if(zi(n))return;let r=n.map(o=>this.createNode(o,this.rootNode,zN)),s=this.rootNode.allLeafChildren;if(typeof i=="number"&&i>=0){let o=s.length,a=i;if(this.gos.get("treeData")&&i>0&&o>0){for(let d=0;d<o;d++)if(s[d]?.rowIndex==i-1){a=d+1;break}}let c=s.slice(0,a),u=s.slice(a,s.length);this.rootNode.allLeafChildren=[...c,...r,...u]}else this.rootNode.allLeafChildren=[...s,...r];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=s),e.add=r}executeRemove(t,e,n){let{remove:i}=t;if(zi(i))return;let r={};i.forEach(s=>{let o=this.lookupRowNode(s);o&&(o.isSelected()&&n.push(o),o.clearRowTopAndRowIndex(),r[o.id]=!0,delete this.allNodesMap[o.id],e.remove.push(o))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(s=>!r[s.id])??null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,e,n){let{update:i}=t;zi(i)||i.forEach(r=>{let s=this.lookupRowNode(r);s&&(s.updateData(r),!s.selectable&&s.isSelected()&&n.push(s),this.setMasterForRow(s,r,zN,!1),e.update.push(s))})}lookupRowNode(t){let e=this.gos.getRowIdCallback(),n;if(e){let i=e({data:t,level:0});if(n=this.allNodesMap[i],!n)return Pt(`could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren?.find(i=>i.data===t),!n)return Pt("could not find data item as object was not found",t),Pt("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(t,e,n){let i=new hc(this.beans);return i.group=!1,this.setMasterForRow(i,t,n,!0),e&&(i.parent=e),i.level=n,i.setDataAndId(t,this.nextId.toString()),this.allNodesMap[i.id]&&$(`duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(t,e,n,i){if(this.gos.get("treeData"))t.setMaster(!1),i&&(t.expanded=!1);else{if(this.gos.get("masterDetail")){let o=this.gos.get("isRowMaster");o?t.setMaster(o(e)):t.setMaster(!0)}else t.setMaster(!1);if(i){let o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=n+a;t.expanded=t.master?this.isExpanded(l):!1}}}isExpanded(t){let e=this.gos.get("groupDefaultExpanded");return e===-1?!0:t<e}},zIe=class extends q{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Kr(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(t){this.beans=t,this.columnModel=t.columnModel,this.funcColsService=t.funcColsService,this.selectionService=t.selectionService,this.valueCache=t.valueCache,this.environment=t.environment,this.filterStage=t.filterStage,this.sortStage=t.sortStage,this.flattenStage=t.flattenStage,this.groupStage=t.groupStage,this.aggregationStage=t.aggregationStage,this.pivotStage=t.pivotStage,this.filterAggregatesStage=t.filterAggregatesStage}postConstruct(){let t=this.refreshModel.bind(this,{step:"group"}),e=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:t,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:t,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new hc(this.beans),this.nodeManager=new WIe(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let t=new Set(["treeData","masterDetail"]),e=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...t,...e,...n,...i,...i,...r,...s,...o,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let d=h=>u.some(p=>h.has(p));if(d(t)){this.setRowData(this.rootNode.allLeafChildren.map(h=>h.data));return}if(d(e)){this.refreshModel({step:"group"});return}if(d(n)){this.refreshModel({step:"filter"});return}if(d(i)){this.refreshModel({step:"pivot"});return}if(d(r)){this.refreshModel({step:"aggregate"});return}if(d(s)){this.refreshModel({step:"sort"});return}if(d(o)){this.refreshModel({step:"filter_aggregates"});return}d(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,n,i){let r,s=!1;do{r=!1;let o=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(o,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let d=this.getRow(u);if(d.rowHeightEstimated){let h=this.gos.getRowHeightForNode(d);d.setRowHeight(h.height),r=!0,s=!0}}r&&this.setRowTopAndRowIndex()}while(r);return s}setRowTopAndRowIndex(){let t=this.environment.getDefaultRowHeight(),e=0,n=new Set,i=this.gos.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){let s=this.rowsToDisplay[r];if(s.id!=null&&n.add(s.id),s.rowHeight==null){let o=this.gos.getRowHeightForNode(s,i,t);s.setRowHeight(o.height,o.estimated)}s.setRowTop(e),s.setRowIndex(r),e+=s.rowHeight}return n}clearRowTopAndRowIndex(t,e){let n=t.isActive(),i=s=>{s&&s.id!=null&&!e.has(s.id)&&s.clearRowTopAndRowIndex()},r=s=>{if(i(s),i(s.detailNode),i(s.sibling),s.hasChildren()&&s.childrenAfterGroup){let o=s.level==-1;n&&!o&&!s.expanded||s.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(t,e,n=0){let i=this.getRowIndexAtPixel(e),r=this.getRow(i),s=!this.gos.get("suppressAnimationFrame");return r===t[0]?!1:(t.forEach(o=>{qr(this.rootNode.allLeafChildren,o)}),t.forEach((o,a)=>{FT(this.rootNode.allLeafChildren,o,Math.max(i+n,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s}),!0)}highlightRowAtPixel(t,e){let n=e!=null?this.getRowIndexAtPixel(e):null,i=n!=null?this.getRow(n):null;if(!i||!t||i===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let r=this.getHighlightPosition(e,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(r),this.lastHighlightedRow=i}getHighlightPosition(t,e){if(!e){let r=this.getRowIndexAtPixel(t);if(e=this.getRow(r||0),!e)return 1}let{rowTop:n,rowHeight:i}=e;return t-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let e=this.rootNode.sibling?1:0,n=this.rootNode.childrenAfterAggFilter;return(n?n.length:0)+e}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let n=t;if(this.rowsToDisplay[0].footer){if(t===0)return 0;n-=1}let i=this.rootNode.childrenAfterSort[n];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(t){if(vt(this.rowsToDisplay))return null;let e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){let t=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;let e=this.gos.isAnimateRows(),i=t.columns.length===0||t.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:e})}onSortChanged(){let t=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(t){let e=zi(t),n=new WT(!1,this.rootNode);return(e||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;let e=t.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e="group",n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(ne(t)&&(e=n[t]),vt(e)){Pt(`invalid step ${t}, available steps are ${Object.keys(n).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;let n=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,n,!!e.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(e.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1;let r={type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){let t=vt(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return vt(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return ne(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let n=!1,i=!1,r=[],s=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(i)return;if(n&&(o===e||o===t)&&(i=!0,o.group&&s)){r.push(...o.allLeafChildren);return}if(!n){if(o!==e&&o!==t)return;n=!0}if(!o.group||!s){r.push(o);return}}),r}setDatasource(t){Pt("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,n=this.rowsToDisplay.length-1;if(t<=0)return 0;if(Rt(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let r=-1,s=-1;for(;;){let o=Math.floor((e+n)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=o+1:a.rowTop>t&&(n=o-1),r===e&&s===n))return o;r=e,s=n}}isRowInPixel(t,e){let n=t.rowTop,i=t.rowTop+t.rowHeight;return n<=e&&i>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,n)=>t(e,n))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){let{nodes:e,callback:n,recursionType:i,includeFooterNodes:r}=t,{index:s}=t,o=a=>{let l=e[0]?.parent;if(!l)return;let c=r&&this.gos.getGrandTotalRow(),u=this.gos.getGroupTotalRowCallback(),d=r&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),n(l.sibling,s++));return}d===a&&(l.createFooter(),n(l.sibling,s++))};o("top");for(let a=0;a<e.length;a++){let l=e[a];if(n(l,s++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:n,recursionType:i,index:s,includeFooterNodes:r}))}}return o("bottom"),s}doAggregate(t){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){let e=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=o=>{o&&o.forEach(a=>{let l=()=>{a.expanded=t,i(a.childrenAfterGroup)};if(e){ne(a.childrenAfterGroup)&&l();return}if(n){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let s={type:"expandOrCollapseAll",source:t?"expandAll":"collapseAll"};this.eventService.dispatchEvent(s)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,n,i){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){let s={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(s)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(hc.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(i=>{i.id===t&&(n=i)}),n}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let t={type:"rowDataUpdated"};this.eventService.dispatchEvent(t),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let t=[],e=[],n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(i=>{let r=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);e.push(r),i.callback&&t.push(i.callback.bind(null,r)),typeof i.rowDataTransaction.addIndex=="number"&&(n=!0)}),this.commonUpdateRowData(e,void 0,n),t.length>0&&window.setTimeout(()=>{t.forEach(i=>i())},0),e.length>0){let i={type:"asyncTransactionsFlushed",results:e};this.eventService.dispatchEvent(i)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();let n=this.nodeManager.updateRowData(t,e),i=typeof t.addIndex=="number";return this.commonUpdateRowData([n],e,i),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let n=0;n<this.rootNode.allLeafChildren.length;n++){let i=this.rootNode.allLeafChildren[n];e[i.id]=n}return e}commonUpdateRowData(t,e,n){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");n&&(e=this.createRowNodeOrder());let r={type:"rowDataUpdated"};this.eventService.dispatchEvent(r),this.refreshModel({step:"group",rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);let n=e.detailNode;n&&n.setRowHeight(n.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(t){if(t.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};function qIe(t){t.expansionService.onGroupExpandedOrCollapsed()}function KIe(t,e){t.rowModelHelperService?.getClientSideRowModel()?.refreshModel(e)}function YIe(t,e){t.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(e)}function QIe(t,e){t.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(e)}function XIe(t,e){t.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(e)}function $Ie(t){if(t.columnModel.isAutoRowHeightActive()){$("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}t.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function ZIe(t,e){return t.frameworkOverrides.wrapIncoming(()=>t.rowModelHelperService?.getClientSideRowModel()?.updateRowData(e))}function JIe(t,e,n){t.frameworkOverrides.wrapIncoming(()=>t.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(e,n))}function exe(t){t.frameworkOverrides.wrapIncoming(()=>t.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function txe(t){return t.selectionService.getBestCostNodeSelection()}var nxe=class extends q{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(t){this.filterManager=t.filterManager}execute(t){let{changedPath:e}=t;this.filter(e)}filter(t){let e=!!this.filterManager?.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){let n=(i,r)=>{i.hasChildren()&&t&&!r?i.childrenAfterFilter=i.childrenAfterGroup.filter(s=>{let o=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,a=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return o||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(s,o)=>{if(s.childrenAfterGroup)for(let a=0;a<s.childrenAfterGroup.length;a++){let l=s.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(s.childrenAfterGroup[a],c):n(l,c)}n(s,o)},r=s=>i(s,!1);e.executeFromRootNode(r)}else{let i=r=>n(r,!1);e.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},ixe=class extends q{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(t){this.beans=t,this.columnModel=t.columnModel}execute(t){let e=t.rowNode,n=[],i=this.columnModel.isPivotMode(),r=i&&e.leafGroup,s=r?[e]:e.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,s,n,i,0);let a=n.length>0;if(!r&&a&&o.grandTotalRow){e.createFooter();let c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,e.sibling,n,0,c)}return n}getFlattenDetails(){let t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,n,i,r){if(!zi(e))for(let s=0;s<e.length;s++){let o=e[s],a=o.hasChildren(),l=i&&!a,c=t.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=t.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=i&&o.leafGroup,h=t.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(t,o,n,r),!(i&&o.leafGroup)){if(a){let g=c||u;if(o.expanded||g){let m=t.groupTotalRow({node:o});m||o.destroyFooter();let v=g?r:r+1;m==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,n,v)),this.recursivelyAddToRowsToDisplay(t,o.childrenAfterSort,n,i,v),m==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,n,v))}}else if(o.master&&o.expanded){let g=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(t,g,n,r)}}}}addRowNodeToRowsToDisplay(t,e,n,i,r){r?n.unshift(e):n.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:i)}createDetailNode(t){if(ne(t.detailNode))return t.detailNode;let e=new hc(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,ne(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}},rxe=class extends q{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(t){this.rowModel=t.rowModel,this.selectionService=t.selectionService}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){let e=this.createTransactionForRowData(t);if(!e)return;let[n,i]=e;this.clientSideRowModel.updateRowData(n,i)}createTransactionForRowData(t){if(vt(this.clientSideRowModel)){Pt("ImmutableService only works with ClientSideRowModel");return}let e=this.gos.getRowIdCallback();if(e==null){Pt("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),s=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return ne(t)&&t.forEach((o,a)=>{let l=e({data:o,level:0}),c=i[l];s&&(s[l]=a),c?(c.data!==o&&n.update.push(o),i[l]=void 0):n.add.push(o)}),Do(i,(o,a)=>{a&&n.remove.push(a.data)}),[n,s]}onRowDataUpdated(){let t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}},sxe=class extends q{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(t){this.columnModel=t.columnModel,this.funcColsService=t.funcColsService,this.rowNodeSorter=t.rowNodeSorter,this.showRowGroupColsService=t.showRowGroupColsService}sort(t,e,n,i,r,s){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(h=>h.isRowGroupActive()),l={};n&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let p=c&&h.leafGroup;if(o&&a&&!h.leafGroup&&!s){let v=this.funcColsService.getRowGroupColumns()?.[h.level+1]?.getSort()===null,C=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!v){let b={};h.childrenAfterSort.forEach((E,T)=>{b[E.id]=T}),C.sort((E,T)=>(b[E.id]??0)-(b[T.id]??0))}h.childrenAfterSort=C}else!e||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):n?h.childrenAfterSort=this.doDeltaSort(h,l,r,t):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,t);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){let m={nodes:h.childrenAfterSort};u(m)}};r&&r.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(t){let e={},n=i=>{i&&i.forEach(r=>e[r.id]=!0)};return t&&t.forEach(i=>{n(i.add),n(i.update),n(i.remove)}),e}doDeltaSort(t,e,n,i){let r=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(r,i);let o={},a=[];r.forEach(d=>{e[d.id]||!n.canSkip(d)?a.push(d):o[d.id]=!0});let l=s.filter(d=>o[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=a.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(i,d,h));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(t,e,n){let i=[],r=0,s=0;for(;r<e.length&&s<n.length;)this.rowNodeSorter.compareRowNodes(t,e[r],n[s])<0?i.push(e[r++]):i.push(n[s++]);for(;r<e.length;)i.push(e[r++]);for(;s<n.length;)i.push(n[s++]);return i}updateChildIndexes(t){if(vt(t.childrenAfterSort))return;let e=t.childrenAfterSort;for(let n=0;n<e.length;n++){let i=e[n],r=n===0,s=n===t.childrenAfterSort.length-1;i.setFirstChild(r),i.setLastChild(s),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return $("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let e=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(i=>{i.hasChildren()&&e(i)})};t&&t.executeFromRootNode(n=>e(n))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||vt(t)||t.forEach(n=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(r=>{let s=r.getColDef().showRowGroup;if(typeof s!="string"){Pt("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=s,a=this.columnModel.getColDefCol(o);if(a!==n.rowGroupColumn)if(e)n.setGroupValue(r.getId(),void 0);else{let c=n.getFirstChildOfFirstChild(a);c&&n.setGroupValue(r.getId(),c.key)}})})}},oxe=class extends q{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(t){this.sortService=t.sortService,this.sortController=t.sortController}execute(t){let e=this.sortController.getSortOptions(),n=ne(e)&&e.length>0,i=n&&ne(t.rowNodeTransactions)&&this.gos.get("deltaSort"),r=e.some(s=>this.gos.isColumnsSortingCoupledToGroup()?s.column.isPrimary()&&s.column.isRowGroupActive():!!s.column.getColDef().showRowGroup);this.sortService.sort(e,n,i,t.rowNodeTransactions,t.changedPath,r)}},HL="32.0.2",W7={version:HL,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[zIe,nxe,oxe,ixe,sxe,rxe]},axe={version:HL,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[U7],apiFunctions:{onGroupExpandedOrCollapsed:qIe,refreshClientSideRowModel:KIe,forEachLeafNode:YIe,forEachNodeAfterFilter:QIe,forEachNodeAfterFilterAndSort:XIe,resetRowHeights:$Ie,applyTransaction:ZIe,applyTransactionAsync:JIe,flushAsyncTransactions:exe,getBestCostNodeSelection:txe},dependantModules:[W7,GIe]},lxe={version:HL,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[W7,axe]},cxe=class extends q{setBeans(t){this.beans=t}getFileName(t){let e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?`${t}.${e}`:t}getData(t){let e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},uxe=class{constructor(t){this.groupColumns=[];let{columnModel:e,funcColsService:n,columnNameService:i,valueService:r,gos:s,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=t;this.columnModel=e,this.funcColsService=n,this.columnNameService=i,this.valueService=r,this.gos=s,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(t){this.groupColumns=t.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(t){return this.getHeaderName(this.processHeaderCallback,t)??""}extractRowCellValue(t,e,n,i,r){let o=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,t,e)?this.createValueForGroupNode(t,r):this.valueService.getValue(t,r);return this.processCell({accumulatedRowIndex:n,rowNode:r,column:t,value:o,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(t,e,n){if(!(t&&t.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(t.groupData?.[e.getId()]!=null||this.gos.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){let o=e.getColDef();return o==null||o.showRowGroup===!0||o.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let s=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return n===0&&s}getHeaderName(t,e){return t?t(this.gos.addGridCommonParams({column:e})):this.columnNameService.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(t,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:t,node:e}));let n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),r=l=>{if(n||i)return l.key;let c=l.groupData?.[t.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},s=e.footer,o=[r(e)];if(!this.gos.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,o.push(r(e));let a=o.reverse().join(" -> ");return s?`Total ${a}`:a}processCell(t){let{accumulatedRowIndex:e,rowNode:n,column:i,value:r,processCellCallback:s,type:o}=t;return s?{value:s(this.gos.addGridCommonParams({accumulatedRowIndex:e,column:i,node:n,value:r,type:o,parseValue:a=>this.valueService.parseValue(i,n,a,this.valueService.getValue(i,n)),formatValue:a=>this.valueService.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:r??"",valueFormatted:this.valueService.formatValue(i,n,r)}:{value:r??""}}},dxe=class{static download(t,e){let n=document.defaultView||window;if(!n){$("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),r=n.URL.createObjectURL(e);i.setAttribute("href",r),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(r)},0)}},Q9=`\r
`,hxe=class extends uxe{constructor(t){super(t),this.isFirstLine=!0,this.result="";let{suppressQuotes:e,columnSeparator:n}=t;this.suppressQuotes=e,this.columnSeparator=n}addCustomContent(t){t&&(typeof t=="string"?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,Q9),this.result+=t):t.forEach(e=>{this.beginNewLine(),e.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(i)}appendEmptyCells(t){for(let e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,n){e!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(t,e,e,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(t){if(this.suppressQuotes)return t;if(t==null)return'""';let e;return typeof t=="string"?e=t:typeof t.toString=="function"?e=t.toString():($("unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=Q9),this.isFirstLine=!1}},fxe=class extends cxe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(t){this.columnModel=t.columnModel,this.columnNameService=t.columnNameService,this.funcColsService=t.funcColsService,this.valueService=t.valueService,this.gridSerializer=t.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){let e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){$("Export cancelled. Export is not allowed as per your configuration.");return}let e=this.getMergedParams(t),n=this.getData(e),i=new Blob(["\uFEFF",n],{type:"text/plain"}),r=typeof e.fileName=="function"?e.fileName(this.gos.getGridCommonParams()):e.fileName;dxe.download(this.getFileName(r),i)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=!1){let n=e?Object.assign({},t):this.getMergedParams(t);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){let{columnModel:e,columnNameService:n,funcColsService:i,valueService:r,gos:s}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=t;return new hxe({columnModel:e,columnNameService:n,funcColsService:i,valueService:r,gos:s,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function pxe(t,e){return t.csvCreator?.getDataAsCsv(e)}function gxe(t,e){t.csvCreator?.exportDataAsCsv(e)}var mxe=class extends q{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(t){this.visibleColsService=t.visibleColsService,this.columnModel=t.columnModel,this.columnNameService=t.columnNameService,this.rowModel=t.rowModel,this.pinnedRowModel=t.pinnedRowModel,this.selectionService=t.selectionService,this.rowNodeSorter=t.rowNodeSorter,this.sortController=t.sortController}serialize(t,e={}){let{allColumns:n,columnKeys:i,skipRowGroups:r}=e,s=this.getColumnsToExport(n,r,i);return ZCe(this.prepareSession(s),this.prependContent(e),this.exportColumnGroups(e,s),this.exportHeaders(e,s),this.processPinnedTopRows(e,s),this.processRows(e,s),this.processPinnedBottomRows(e,s),this.appendContent(e))(t).parse()}processRow(t,e,n,i){let r=e.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=e.rowPositions!=null||!!e.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,d=!!i.footer,h=o&&i.leafGroup,p=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(s||h);if(!u&&!d&&(e.skipRowGroups||p||c)||e.onlySelected&&!i.isSelected()||e.skipPinnedTop&&i.rowPinned==="top"||e.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!d||r(this.gos.addGridCommonParams({node:i})))return;let v=t.onNewBodyRow(i);if(n.forEach((C,b)=>{v.onColumn(C,b,i)}),e.getCustomContentBelowRow){let C=e.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));C&&t.addCustomContent(C)}}appendContent(t){return e=>{let n=t.appendContent;return n&&e.addCustomContent(n),e}}prependContent(t){return e=>{let n=t.prependContent;return n&&e.addCustomContent(n),e}}prepareSession(t){return e=>(e.prepare(t),e)}exportColumnGroups(t,e){return n=>{if(!t.skipColumnGroupHeaders){let i=new lK,r=this.visibleColsService.createGroups({columns:e,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(r,n,t.processGroupHeaderCallback)}return n}}exportHeaders(t,e){return n=>{if(!t.skipColumnHeaders){let i=n.onNewHeaderRow();e.forEach((r,s)=>{i.onColumn(r,s,void 0)})}return n}}processPinnedTopRows(t,e){return n=>{let i=this.processRow.bind(this,n,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="top").sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedTopRow(i),n}}processRows(t,e){return n=>{let i=this.rowModel,r=i.getType(),s=r==="clientSide",o=r==="serverSide",a=!s&&t.onlySelected,l=this.processRow.bind(this,n,t,e),{exportedRows:c="filteredAndSorted"}=t;if(t.rowPositions)t.rowPositions.filter(u=>u.rowPinned==null).sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>i.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())s?i.forEachPivotNode(l,!0):o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);else if(t.onlySelectedAllPages||a){let u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?i.forEachNode(l):s||o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);return n}}replicateSortedOrder(t){let e=this.sortController.getSortOptions(),n=(i,r)=>i.rowIndex!=null&&r.rowIndex!=null?i.rowIndex-r.rowIndex:i.level===r.level?i.parent?.id===r.parent?.id?this.rowNodeSorter.compareRowNodes(e,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):n(i.parent,r.parent):i.level>r.level?n(i.parent,r):n(i,r.parent);t.sort(n)}processPinnedBottomRows(t,e){return n=>{let i=this.processRow.bind(this,n,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedBottomRow(i),n}}getColumnsToExport(t=!1,e=!1,n){let i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getColsForKeys(n);let r=this.gos.get("treeData"),s=[];return t&&!i?s=this.columnModel.getCols():s=this.visibleColsService.getAllCols(),e&&!r&&(s=s.filter(o=>o.getColId()!==ow)),s}recursivelyAddHeaderGroups(t,e,n){let i=[];t.forEach(r=>{let s=r;s.getChildren&&s.getChildren().forEach(o=>i.push(o))}),t.length>0&&si(t[0])&&this.doAddHeaderHeader(e,t,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,e,n)}doAddHeaderHeader(t,e,n){let i=t.onNewHeaderGroupingRow(),r=0;e.forEach(s=>{let o=s,a;n?a=n(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,d,h)=>{let p=Rt(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);i.onColumn(o,a||"",r++,o.getLeafColumns().length-1,l)})}},UL="32.0.2",z7={version:UL,moduleName:"@ag-grid-community/csv-export-core",beans:[fxe,mxe]},vxe={version:UL,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:pxe,exportDataAsCsv:gxe},dependantModules:[z7]},yxe={version:UL,moduleName:"@ag-grid-community/csv-export",dependantModules:[z7,vxe]};var Cxe=t=>N(void 0,null,function*(){let e=0,n=[],i=new WritableStream({write:o=>{n.push(o),e+=o.length}}),r=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{l.target?.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(t)}}),s=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(s).pipeTo(i),{size:e,content:new Blob(n)}}),wxe=t=>N(void 0,null,function*(){let e=new Blob([t]),{size:n,content:i}=yield Cxe(e),r=new Uint8Array(yield i.arrayBuffer());return{size:n,content:r}}),Sxe=t=>{let e=t.getHours();return e<<=6,e=e|t.getMinutes(),e<<=5,e=e|t.getSeconds()/2,e},bxe=t=>{let e=t.getFullYear()-1980;return e<<=4,e=e|t.getMonth()+1,e<<=5,e=e|t.getDate(),e};function yr(t,e){let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t&255),t>>>=8;return n}var X9=t=>{if(!t.length)return 0;let e=-1,n=0,i=0,r=0;for(let s=0;s<t.length;s++)n=t[s],i=(e^n)&255,r=_xe[i],e=e>>>8^r;return e^-1},$9=t=>t.length?X9(typeof t=="string"?new TextEncoder().encode(t):t):0,_xe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),q7=(t,e,n,i,r,s)=>{let{content:o,path:a,created:l}=t,c=Sxe(l),u=bxe(l),d=$9(r),h=s!==void 0?s:i,p=uwe(a),g=p!==a,m="";if(g){let E=yr(1,1)+yr($9(p),4)+p;m="up"+yr(E.length,2)+E}let v="\0"+(g?"\0\b":"\0\0")+yr(e?8:0,2)+yr(c,2)+yr(u,2)+yr(h?d:0,4)+yr(s??i,4)+yr(i,4)+yr(p.length,2)+yr(m.length,2),C="PK"+v+p+m,b="PK\0"+v+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+yr(n,4)+p+m;return{localFileHeader:Uint8Array.from(C,E=>E.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(b,E=>E.charCodeAt(0))}},K7=t=>{let e;if(typeof t=="string"){let n=atob(t.split(";base64,")[1]);e=Uint8Array.from(n,i=>i.charCodeAt(0))}else e=t;return{size:e.length,content:e}},Exe=(t,e)=>N(void 0,null,function*(){let{content:n}=t,{size:i,content:r}=n?K7(n):{size:0,content:Uint8Array.from([])},s,o,a=!1;if(t.type==="file"&&r&&i>0){let u=yield wxe(r);s=u.content,o=u.size,a=!0}let c=q7(t,a,e,i,r,o);return Se(W({},c),{content:s||r,isCompressed:a})}),Dxe=(t,e)=>{let{content:n}=t,{content:i}=n?K7(n):{content:Uint8Array.from([])},r=q7(t,!1,e,i.length,i,void 0);return Se(W({},r),{content:i,isCompressed:!1})},Txe=(t,e,n)=>{let i="PK\0\0\0\0"+yr(t,2)+yr(t,2)+yr(e,4)+yr(n,4)+"\0\0";return Uint8Array.from(i,r=>r.charCodeAt(0))},Y7=class{static addFolders(t){t.forEach(this.addFolder.bind(this))}static addFolder(t){this.folders.push({path:t,created:new Date,isBase64:!1,type:"folder"})}static addFile(t,e,n=!1){this.files.push({path:t,created:new Date,content:n?e:new TextEncoder().encode(e),isBase64:n,type:"file"})}static getZipFile(t="application/zip"){return N(this,null,function*(){let e=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([e],{type:t})})}static getUncompressedZipFile(t="application/zip"){let e=this.buildFileStream();return this.clearStream(),new Blob([e],{type:t})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(t){let e=0,n=0;for(let c of t){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;e+=u.length+h.length,n+=d.length}let i=new Uint8Array(e),r=new Uint8Array(n),s=0,o=0;for(let c of t){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;i.set(u,s),s+=u.length,i.set(h,s),s+=h.length,r.set(d,o),o+=d.length}let a=Txe(t.length,n,e),l=new Uint8Array(i.length+r.length+a.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l}static buildCompressedFileStream(){return N(this,null,function*(){let t=[...this.folders,...this.files],e=[],n=0;for(let i of t){let r=yield Exe(i,n),{localFileHeader:s,content:o}=r;e.push(r),n+=s.length+o.length}return this.packageFiles(e)})}static buildFileStream(){let t=[...this.folders,...this.files],e=[],n=0;for(let i of t){let r=Dxe(i,n),{localFileHeader:s,content:o}=r;e.push(r),n+=s.length+o.length}return this.packageFiles(e)}};Y7.folders=[];Y7.files=[];var Rxe=class extends EEe{wireBeans(t){this.beans=t}constructor(t,e,n){super(t),this.parentCache=e,this.params=n,this.startRow=t*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(t,e,n){ne(e)?t.setDataAndId(e,n.toString()):t.setDataAndId(void 0,void 0)}loadFromDatasource(){let t=this.createLoadParams();if(vt(this.params.datasource.getRows)){$("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(t)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(t,e,n){this.rowNodes.forEach((i,r)=>{this.startRow+r<n&&t(i,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(t,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());let n=t-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let t=0;t<this.params.blockSize;t++){let e=this.startRow+t,n=new hc(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(e),n.setRowTop(this.params.rowHeight*e),this.rowNodes.push(n)}}processServerResult(t){this.rowNodes.forEach((n,i)=>{let r=t.rowData?t.rowData[i]:void 0;!n.id&&n.alreadyRendered&&r&&(this.rowNodes[i]=new hc(this.beans),this.rowNodes[i].setRowIndex(n.rowIndex),this.rowNodes[i].setRowTop(n.rowTop),this.rowNodes[i].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],r,this.startRow+i)});let e=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroy(){this.rowNodes.forEach(t=>{t.clearRowTopAndRowIndex()}),super.destroy()}},Ixe=2,xxe=class extends q{constructor(t){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=t.initialRowCount,this.params=t}wireBeans(t){this.rowRenderer=t.rowRenderer,this.focusService=t.focusService}getRow(t,e=!1){let n=Math.floor(t/this.params.blockSize),i=this.blocks[n];if(!i){if(e)return;i=this.createBlock(n)}return i.getRow(t)}createBlock(t){let e=this.createBean(new Rxe(t,this,this.params));return this.blocks[e.getId()]=e,this.blockCount++,this.purgeBlocksIfNeeded(e),this.params.rowNodeBlockLoader.addBlock(e),e}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(e=>e.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(t=>this.destroyBlock(t)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(t,e){this.isAlive()&&(this.gos.get("debug")&&Ro(`InfiniteCache - onPageLoaded: page = ${t.getId()}, lastRow = ${e}`),this.checkRowCount(t,e),this.onCacheUpdated())}purgeBlocksIfNeeded(t){let e=this.getBlocksInOrder().filter(o=>o!=t),n=(o,a)=>a.getLastAccessed()-o.getLastAccessed();e.sort(n);let i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null,s=Ixe-1;e.forEach((o,a)=>{let l=o.getState()==="needsLoading"&&a>=s,c=i?a>=r:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(t){let e=this.focusService.getFocusCellToUseAfterRefresh();if(!e||e.rowPinned!=null)return!1;let n=t.getStartRow(),i=t.getEndRow();return e.rowIndex>=n&&e.rowIndex<i}isBlockCurrentlyDisplayed(t){let e=t.getStartRow(),n=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(e,n)}removeBlockFromCache(t){t&&this.destroyBlock(t)}checkRowCount(t,e){if(typeof e=="number"&&e>=0)this.rowCount=e,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(t,e){this.rowCount=t,ne(e)&&(this.lastRowIndexKnown=e),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(t){let e=new im;this.getBlocksInOrder().forEach(n=>n.forEachNode(t,e,this.rowCount))}getBlocksInOrder(){let t=(n,i)=>n.getId()-i.getId();return Gu(this.blocks).sort(t)}destroyBlock(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let t={type:"storeUpdated"};this.eventService.dispatchEvent(t)}}destroyAllBlocksPastVirtualRowCount(){let t=[];this.getBlocksInOrder().forEach(e=>{e.getId()*this.params.blockSize>=this.rowCount&&t.push(e)}),t.length>0&&t.forEach(e=>this.destroyBlock(e))}purgeCache(){this.getBlocksInOrder().forEach(t=>this.removeBlockFromCache(t)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(t,e){let n=[],i=-1,r=!1,s=new im,o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(r&&i+1!==l.getId()){o=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===t||c===e;(r||u)&&n.push(c),u&&(r=!r)},s,this.rowCount)}}),o||r?[]:n}},Fxe=class extends q{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(t){this.filterManager=t.filterManager,this.sortController=t.sortController,this.selectionService=t.selectionService,this.rowRenderer=t.rowRenderer,this.rowNodeBlockLoader=t.rowNodeBlockLoader}getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&$("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let t;this.cacheParams?t=this.isSortModelDifferent():t=!0,t&&this.reset()}isSortModelDifferent(){return!AT(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]}reset(){if(!this.datasource)return;this.gos.getRowIdCallback()!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new im},this.infiniteCache=this.createBean(new xxe(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}getRow(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)}getRowNode(t){let e;return this.forEachNode(n=>{n.id===t&&(e=n)}),e}forEachNode(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){let e=Math.floor(t/this.rowHeight),n=this.getRowCount()-1;return e>n?n:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)}};function Axe(t){t.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function Pxe(t){t.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function Mxe(t){return t.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}function Oxe(t){return t.rowModelHelperService?.getInfiniteRowModel()?.isLastRowIndexKnown()}var jL="32.0.2",Q7={version:jL,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[Fxe],dependantModules:[TEe]},kxe={version:jL,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[U7],apiFunctions:{refreshInfiniteCache:Axe,purgeInfiniteCache:Pxe,getInfiniteRowCount:Mxe,isLastRowIndexKnown:Oxe},dependantModules:[Q7,HIe]},Nxe={version:jL,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[Q7,kxe]};zr.__registerModules([N7,lxe,Nxe,yxe],!1,void 0);var X7=(()=>{let e=class e extends j7{setViewContainerRef(i,r){this.viewContainerRef=i,this.angularFrameworkOverrides=r}createWrapper(i){let r=this.angularFrameworkOverrides,s=this;class o extends WL{init(c){r.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return r.runInsideAngular(()=>s.createComponent(i))}hasMethod(c){return a.getFrameworkComponentInstance()[c]!=null}callMethod(c,u){let d=this.getFrameworkComponentInstance();return r.runInsideAngular(()=>a.getFrameworkComponentInstance()[c].apply(d,u))}addMethod(c,u){a[c]=u}}let a=new o;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ds(e)))(s||e)}})(),e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),WL=class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Io(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},$7=(()=>{let e=class e extends VL{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(r,s)=>this.runOutside(r,s),this.wrapOutgoing=r=>this.runInsideAngular(r),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(r,s)=>s==="resize-observer"||s==="popupPositioning"?this._ngZone.runOutsideAngular(r):r():this.runOutside=r=>this._ngZone.runOutsideAngular(r):this.runOutside=r=>r()}get shouldWrapOutgoing(){return this._ngZone&&Re.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let r=i.prototype;return r&&"agInit"in r}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,r){return this.runOutside(i,r)}};e.\u0275fac=function(r){return new(r||e)(Z(Re))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),Z7=(()=>{let e=class e{constructor(i,r,s,o){this.viewContainerRef=r,this.angularFrameworkOverrides=s,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new X,this.toolPanelSizeChanged=new X,this.columnMenuVisibleChanged=new X,this.contextMenuVisibleChanged=new X,this.cutStart=new X,this.cutEnd=new X,this.pasteStart=new X,this.pasteEnd=new X,this.columnVisible=new X,this.columnPinned=new X,this.columnResized=new X,this.columnMoved=new X,this.columnValueChanged=new X,this.columnPivotModeChanged=new X,this.columnPivotChanged=new X,this.columnGroupOpened=new X,this.newColumnsLoaded=new X,this.gridColumnsChanged=new X,this.displayedColumnsChanged=new X,this.virtualColumnsChanged=new X,this.columnEverythingChanged=new X,this.columnHeaderMouseOver=new X,this.columnHeaderMouseLeave=new X,this.columnHeaderClicked=new X,this.columnHeaderContextMenu=new X,this.componentStateChanged=new X,this.cellValueChanged=new X,this.cellEditRequest=new X,this.rowValueChanged=new X,this.cellEditingStarted=new X,this.cellEditingStopped=new X,this.rowEditingStarted=new X,this.rowEditingStopped=new X,this.undoStarted=new X,this.undoEnded=new X,this.redoStarted=new X,this.redoEnded=new X,this.rangeDeleteStart=new X,this.rangeDeleteEnd=new X,this.fillStart=new X,this.fillEnd=new X,this.filterOpened=new X,this.filterChanged=new X,this.filterModified=new X,this.advancedFilterBuilderVisibleChanged=new X,this.chartCreated=new X,this.chartRangeSelectionChanged=new X,this.chartOptionsChanged=new X,this.chartDestroyed=new X,this.cellKeyDown=new X,this.gridReady=new X,this.firstDataRendered=new X,this.gridSizeChanged=new X,this.modelUpdated=new X,this.virtualRowRemoved=new X,this.viewportChanged=new X,this.bodyScroll=new X,this.bodyScrollEnd=new X,this.dragStarted=new X,this.dragStopped=new X,this.stateUpdated=new X,this.paginationChanged=new X,this.rowDragEnter=new X,this.rowDragMove=new X,this.rowDragLeave=new X,this.rowDragEnd=new X,this.columnRowGroupChanged=new X,this.rowGroupOpened=new X,this.expandOrCollapseAll=new X,this.pivotMaxColumnsExceeded=new X,this.pinnedRowDataChanged=new X,this.rowDataUpdated=new X,this.asyncTransactionsFlushed=new X,this.storeRefreshed=new X,this.headerFocused=new X,this.cellClicked=new X,this.cellDoubleClicked=new X,this.cellFocused=new X,this.cellMouseOver=new X,this.cellMouseOut=new X,this.cellMouseDown=new X,this.rowClicked=new X,this.rowDoubleClicked=new X,this.rowSelected=new X,this.selectionChanged=new X,this.cellContextMenu=new X,this.rangeSelectionChanged=new X,this.tooltipShow=new X,this.tooltipHide=new X,this.sortChanged=new X,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=uK(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let r=H7(this._nativeElement,i,this.gridParams);r&&(this.api=r),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let r={};Object.entries(i).forEach(([s,o])=>{r[s]=o.currentValue}),dK(r,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let s=this[i],o=s?.observed??s?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,l=!!this.gridOptions&&!!this.gridOptions[a];return o||l}globalEventListener(i,r){if(this._destroyed)return;let s=this[i];if(s&&this.isEmitterUsed(i)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>s.emit(r));i==="gridReady"?this._fullyReady.then(()=>o()):o()}}};e.\u0275fac=function(r){return new(r||e)(J(Fn),J(Ls),J($7),J(X7))},e.\u0275cmp=je({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[Vr([$7,X7]),Vn,qe],decls:0,vars:0,template:function(r,s){},encapsulation:2});let t=e;return t})();var Lxe=["modalTemplate"];function Vxe(t,e){if(t&1&&(j(0,"div"),fe(1,"input",3),U()),t&2){let n=Te();ee(),de("formControl",n.filterText)}}function Bxe(t,e){if(t&1&&fe(0,"app-transaction-form",4),t&2){let n=Te();de("transactionType",n.transactionType)("selectedTransaction",n.selectedTransaction)}}var J7=(()=>{let e=class e{constructor(i,r,s,o){this.utilService=i,this.tagService=r,this.transactionService=s,this.ngbModal=o,this.transactions=[],this.showFilter=!1,this.filterText=new jl(""),this.rowData=[],this.colDefs=[{field:"title"},{field:"amount",valueFormatter:a=>`${a.value.toLocaleString()}`},{field:"date"},{field:"category"},{field:"description"},{field:"type"}],this.gridOptions={getRowStyle:a=>{let l=a.data.type==="income",c=(a.node.rowIndex??0)%2===0;return l?{backgroundColor:c?"#e6f3e6":"#f0f8f0"}:{backgroundColor:c?"#fce4e4":"#fdf0f0"}}},this.selectedTransaction=null,this.transactionType="income"}onGridReady(i){this.gridApi=i.api}ngOnChanges(){this.transactions.length===0&&(this.rowData=[]),this.transactionToRowData(this.transactions).subscribe(i=>{this.rowData=i,this.filterText.valueChanges.subscribe(r=>{this.filterTable(r??"")})})}onRowDoubleClicked(i){if(i.data){let r=this.transactionService.getTransactionFromId(i.data.id,i.data.type==="income"?"income":"expense");this.selectedTransaction=r??null,this.openModal(r?r.type:"income")}}transactionToRowData(i){let r=i.map(s=>this.tagService.getTagFromId(s.tagIds[0],s.type).pipe(le(o=>({id:s.id,title:s.title,date:this.utilService.formatDateToDayMonthYearWeekday(s.date),description:s.description,category:o.name,amount:s.amount,type:s.type}))));return Fr(r)}filterTable(i){this.gridApi.setGridOption("quickFilterText",i)}openModal(i){this.transactionType=i,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}};e.\u0275fac=function(r){return new(r||e)(J(fT),J(ku),J(Nu),J(Wg))},e.\u0275cmp=je({type:e,selectors:[["app-transaction-table"]],viewQuery:function(r,s){if(r&1&&uo(Lxe,5),r&2){let o;ps(o=gs())&&(s.modalTemplate=o.first)}},inputs:{transactions:"transactions",showFilter:"showFilter"},standalone:!0,features:[Vn,qe],decls:4,vars:4,consts:[["modalTemplate",""],[4,"ngIf"],[1,"ag-theme-alpine",2,"height","300px",3,"rowDoubleClicked","gridReady","rowData","columnDefs","gridOptions"],["type","text","id","filter-text-box","placeholder","Filter...",1,"filter-box","mb-2",3,"formControl"],[3,"transactionType","selectedTransaction"]],template:function(r,s){if(r&1){let o=xt();Fe(0,Vxe,2,1,"div",1),j(1,"ag-grid-angular",2),De("rowDoubleClicked",function(l){return We(o),ze(s.onRowDoubleClicked(l))})("gridReady",function(l){return We(o),ze(s.onGridReady(l))}),U(),Fe(2,Bxe,1,2,"ng-template",null,0,tr)}r&2&&(de("ngIf",s.showFilter),ee(),de("rowData",s.rowData)("columnDefs",s.colDefs)("gridOptions",s.gridOptions))},dependencies:[Z7,En,Gi,Qa,mo,vo,Uy,gT],styles:[".filter-box[_ngcontent-%COMP%]{height:30px}"]});let t=e;return t})();var Gxe=["modalTemplate"];function Hxe(t,e){if(t&1&&fe(0,"app-transaction-form",6),t&2){let n=Te();de("transactionType",n.transactionType)}}var eY=(()=>{let e=class e{constructor(i){this.ngbModal=i,this.transactionType="income"}openModal(i){this.transactionType=i,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}};e.\u0275fac=function(r){return new(r||e)(J(Wg))},e.\u0275cmp=je({type:e,selectors:[["app-transaction-form-buttons"]],viewQuery:function(r,s){if(r&1&&uo(Gxe,5),r&2){let o;ps(o=gs())&&(s.modalTemplate=o.first)}},standalone:!0,features:[qe],decls:7,vars:0,consts:[["modalTemplate",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[3,"transactionType"]],template:function(r,s){if(r&1){let o=xt();j(0,"div",1)(1,"button",2),De("click",function(){return We(o),ze(s.openModal("income"))}),fe(2,"i",3),U(),j(3,"button",4),De("click",function(){return We(o),ze(s.openModal("expense"))}),fe(4,"i",5),U()(),Fe(5,Hxe,1,1,"ng-template",null,0,tr)}},dependencies:[gT]});let t=e;return t})();function Uxe(t,e){t&1&&(j(0,"div"),fe(1,"app-loader"),U())}function jxe(t,e){if(t&1){let n=xt();j(0,"div",18),De("click",function(){We(n);let r=Te(2);return ze(r.preventCloseOnClick())}),fe(1,"app-date-selector"),U()}}function Wxe(t,e){if(t&1&&(j(0,"div",19),fe(1,"app-stat-card",20),U()),t&2){let n=e.$implicit;ee(),de("title",n.title)("value",n.value)("percentChange",n.percentChange)("isIncome",n.isIncome)}}function zxe(t,e){if(t&1){let n=xt();j(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),we(5,"Dashboard"),U(),j(6,"div",7)(7,"button",8),De("click",function(){We(n);let r=Te();return r.toggleDateSelector(),ze(r.preventCloseOnClick())}),fe(8,"i",9),U(),Fe(9,jxe,2,0,"div",10),j(10,"div",11),fe(11,"app-transaction-form-buttons"),U()()(),j(12,"div",12),Fe(13,Wxe,2,4,"div",13),U(),fe(14,"app-transaction-table",14),U(),j(15,"div",15),fe(16,"app-line-bar-chart",16)(17,"app-line-bar-chart",17),U()()()}if(t&2){let n=Te();ee(9),de("ngIf",n.showDateSelector),ee(4),de("ngForOf",n.statCards),ee(),de("transactions",n.allTransactions)("showFilter",!0),ee(2),de("data",n.incomeLineBarData)("isIncome",!0),ee(),de("data",n.expenseLineBarData)("isIncome",!1)}}var tY=(()=>{let e=class e{constructor(i,r,s,o){this.authService=i,this.transactionService=r,this.dateSelectorService=s,this.renderer=o,this.statCards=[{title:"In",value:0,percentChange:0,isIncome:!0},{title:"Out",value:0,percentChange:0,isIncome:!1},{title:"On Hand",value:0,percentChange:0,isIncome:!0}],this.allTransactions=[],this.incomeLineBarData=[],this.expenseLineBarData=[],this.showDateSelector=!1,this.dateSelectorClicked=!1,this.isLoading=!0,this.destroy$=new ot,this.renderer.listen("window","click",a=>{this.dateSelectorClicked||(this.showDateSelector=!1),this.dateSelectorClicked=!1})}ngOnInit(){this.initializeData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeData(){Fr([this.transactionService.expenseTransactions$,this.transactionService.incomeTransactions$,this.dateSelectorService.dateRange$]).pipe(xn(this.destroy$),le(([i,r,s])=>({expenses:this.filterTransactionsByDateRange(i,s),income:this.filterTransactionsByDateRange(r,s)}))).subscribe(({expenses:i,income:r})=>{this.updateDashboard(i,r),this.showDateSelector=!1,this.isLoading=!1},i=>console.error("Error fetching transactions:",i))}filterTransactionsByDateRange(i,r){if(!r||!r.from||!r.to)return i;let s=new Date(r.to);return s.setHours(23,59,59,999),i.filter(o=>new Date(o.date)>=r.from&&new Date(o.date)<=s)}updateDashboard(i,r){this.updateStatCard(r,0),this.updateStatCard(i,1),this.calculateNetIncome(r,i),this.incomeLineBarData=this.convertTransactionsToLineBarData(r),this.expenseLineBarData=this.convertTransactionsToLineBarData(i),this.allTransactions=this.combineAndSortTransactions(r,i)}updateStatCard(i,r){if(i.length===0){this.statCards[r].value=0,this.statCards[r].percentChange=0;return}this.statCards[r].value=this.aggregateTransactions(i),this.statCards[r].percentChange=this.calculatePercentChange(i[i.length-1].amount,i[0].amount)}calculateNetIncome(i,r){let s=this.aggregateTransactions(i),o=this.aggregateTransactions(r),a=s-o,l=i.length>0?i[0].amount:0,c=r.length>0?r[0].amount:0,u=l-c;this.statCards[2].value=a,this.statCards[2].percentChange=this.calculatePercentChange(a,u)}aggregateTransactions(i){return Math.round(i.reduce((r,s)=>r+s.amount,0))}calculatePercentChange(i,r){return r!==0?(i-r)/Math.abs(r)*100:0}convertTransactionsToLineBarData(i){return i.map(r=>({tag:r.tagIds[0],value:[new Date(r.date).getTime(),r.amount],title:r.title}))}combineAndSortTransactions(i,r){return[...i,...r].sort((s,o)=>new Date(o.date).getTime()-new Date(s.date).getTime())}toggleDateSelector(){this.showDateSelector=!this.showDateSelector}preventCloseOnClick(){this.dateSelectorClicked=!0}};e.\u0275fac=function(r){return new(r||e)(J(vs),J(Nu),J(zg),J(Nr))},e.\u0275cmp=je({type:e,selectors:[["app-dashboard-page"]],standalone:!0,features:[qe],decls:3,vars:2,consts:[["content",""],[4,"ngIf","ngIfElse"],[1,"container-fluid","d-flex","justify-content-center"],[1,"mt-2","row","d-flex","justify-content-center"],[1,"row","col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"d-none","d-md-block","col","btn-warning","btn","btn-sm",2,"{width","20px}",3,"click"],[1,"bi","bi-calendar-fill"],["class","d-none d-md-block date-selector-container d-flex justify-content-center align-items-center position-absolute",3,"click",4,"ngIf"],[1,"col"],[1,"row","mb-3"],["class","col-6 col-xl-4 mb-2 mx-auto mx-xl-0",4,"ngFor","ngForOf"],[3,"transactions","showFilter"],[1,"row","col-12","col-lg-6","mt-3","mt-lg-0","mx-lg-2"],["title","Total Ins","percentChangeMessage","Previous gains:",1,"mb-3",3,"data","isIncome"],["title","Total Outs","percentChangeMessage","Previous dip:",3,"data","isIncome"],[1,"d-none","d-md-block","date-selector-container","d-flex","justify-content-center","align-items-center","position-absolute",3,"click"],[1,"col-6","col-xl-4","mb-2","mx-auto","mx-xl-0"],[3,"title","value","percentChange","isIncome"]],template:function(r,s){if(r&1&&Fe(0,Uxe,2,0,"div",1)(1,zxe,18,8,"ng-template",null,0,tr),r&2){let o=za(2);de("ngIf",s.isLoading)("ngIfElse",o)}},dependencies:[En,fo,Gi,_9,E9,cE,J7,eY,lT]});let t=e;return t})();var nY=(()=>{let e=class e{constructor(i){this.router=i,this.router.navigate(["/login"])}};e.\u0275fac=function(r){return new(r||e)(J(fi))},e.\u0275cmp=je({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[qe],decls:2,vars:0,template:function(r,s){r&1&&(j(0,"p"),we(1,"landing-page works!"),U())}});let t=e;return t})();var zL=function(t,e){return zL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},zL(t,e)};function K(t,e){zL(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $e=function(){return $e=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$e.apply(this,arguments)};function iY(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Pe(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function Me(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function dt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}var lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uw=new Uint8Array(256);for(cw=0;cw<lm.length;cw++)uw[lm.charCodeAt(cw)]=cw;var cw,sY=function(t){for(var e="",n=t.length,i=0;i<n;i+=3)e+=lm[t[i]>>2],e+=lm[(t[i]&3)<<4|t[i+1]>>4],e+=lm[(t[i+1]&15)<<2|t[i+2]>>6],e+=lm[t[i+2]&63];return n%3===2?e=e.substring(0,e.length-1)+"=":n%3===1&&(e=e.substring(0,e.length-2)+"=="),e},rY=function(t){var e=t.length*.75,n=t.length,i,r=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new Uint8Array(e);for(i=0;i<n;i+=4)s=uw[t.charCodeAt(i)],o=uw[t.charCodeAt(i+1)],a=uw[t.charCodeAt(i+2)],l=uw[t.charCodeAt(i+3)],c[r++]=s<<2|o>>4,c[r++]=(o&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return c},qxe=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,oY=function(t){var e=t.trim(),n=e.substring(0,100),i=n.match(qxe);if(!i)return rY(e);var r=i[0],s=e.substring(r.length);return rY(s)};var et=function(t){return t.charCodeAt(0)},aY=function(t){return t.codePointAt(0)},mc=function(t,e){return Js(t.toString(16),e,"0").toUpperCase()},ju=function(t){return mc(t,2)},Zs=function(t){return String.fromCharCode(t)},lY=function(t){return Zs(parseInt(t,16))},Js=function(t,e,n){for(var i="",r=0,s=e-t.length;r<s;r++)i+=n;return i+t},an=function(t,e,n){for(var i=t.length,r=0;r<i;r++)e[n++]=t.charCodeAt(r);return i};var Kxe=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Xh=function(t){return t.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},Yxe=["\\n","\\f","\\r","\\u000B"];var cY=function(t){return/^[\n\f\r\u000B]$/.test(t)},zT=function(t){return t.split(/[\n\f\r\u000B]/)},qL=function(t){return t.replace(/[\n\f\r\u000B]/g," ")},KL=function(t,e){var n=t.charCodeAt(e),i,r=e+1,s=1;return n>=55296&&n<=56319&&t.length>r&&(i=t.charCodeAt(r),i>=56320&&i<=57343&&(s=2)),[t.slice(e,e+s),s]},uY=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=KL(t,n),s=r[0],o=r[1];e.push(s),n+=o}return e},Qxe=function(t){for(var e=Yxe.join("|"),n=["$"],i=0,r=t.length;i<r;i++){var s=t[i];if(cY(s))throw new TypeError("`wordBreak` must not include "+e);n.push(s===""?".":Kxe(s))}var o=n.join("|");return new RegExp("("+e+")|((.*?)("+o+"))","gm")},dY=function(t,e,n,i){for(var r=Qxe(e),s=Xh(t).match(r),o="",a=0,l=[],c=function(){o!==""&&l.push(o),o="",a=0},u=0,d=s.length;u<d;u++){var h=s[u];if(cY(h))c();else{var p=i(h);a+p>n&&c(),o+=h,a+=p}}return c(),l},Xxe=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,qT=function(t){var e=t.match(Xxe);if(e){var n=e[1],i=e[2],r=i===void 0?"01":i,s=e[3],o=s===void 0?"01":s,a=e[4],l=a===void 0?"00":a,c=e[5],u=c===void 0?"00":c,d=e[6],h=d===void 0?"00":d,p=e[7],g=p===void 0?"Z":p,m=e[8],v=m===void 0?"00":m,C=e[9],b=C===void 0?"00":C,E=g==="Z"?"Z":""+g+v+":"+b,T=new Date(n+"-"+r+"-"+o+"T"+l+":"+u+":"+h+E);return T}},dw=function(t,e){for(var n,i=0,r;i<t.length;){var s=t.substring(i).match(e);if(!s)return{match:r,pos:i};r=s,i+=((n=s.index)!==null&&n!==void 0?n:0)+s[0].length}return{match:r,pos:i}};var cm=function(t){return t[t.length-1]},KT=function(t){if(t instanceof Uint8Array)return t;for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},hY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,i=[],r=0;r<n;r++){var s=t[r];i[r]=s instanceof Uint8Array?s:KT(s)}for(var o=0,r=0;r<n;r++)o+=t[r].length;for(var a=new Uint8Array(o),l=0,c=0;c<n;c++)for(var u=i[c],d=0,h=u.length;d<h;d++)a[l++]=u[d];return a},fY=function(t){for(var e=0,n=0,i=t.length;n<i;n++)e+=t[n].length;for(var r=new Uint8Array(e),s=0,n=0,i=t.length;n<i;n++){var o=t[n];r.set(o,s),s+=o.length}return r},YT=function(t){for(var e="",n=0,i=t.length;n<i;n++)e+=Zs(t[n]);return e},pY=function(t,e){return t.id-e.id},gY=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++){var s=t[i],o=t[i-1];(i===0||e(s)!==e(o))&&n.push(s)}return n},$h=function(t){for(var e=t.length,n=0,i=Math.floor(e/2);n<i;n++){var r=n,s=e-n-1,o=t[n];t[r]=t[s],t[s]=o}return t},mY=function(t){for(var e=0,n=0,i=t.length;n<i;n++)e+=t[n];return e},vY=function(t,e){for(var n=new Array(e-t),i=0,r=n.length;i<r;i++)n[i]=t+i;return n},yY=function(t,e){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=t[e[i]];return n},CY=function(t){return t instanceof Uint8Array||t instanceof ArrayBuffer||typeof t=="string"},um=function(t){if(typeof t=="string")return oY(t);if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")};var dl=function(){return new Promise(function(t){setTimeout(function(){return t()},0)})};var bY=function(t,e){e===void 0&&(e=!0);var n=[];e&&n.push(65279);for(var i=0,r=t.length;i<r;){var s=t.codePointAt(i);if(s<65536)n.push(s),i+=1;else if(s<1114112)n.push(YL(s),QL(s)),i+=2;else throw new Error("Invalid code point: 0x"+ju(s))}return new Uint16Array(n)},_Y=function(t){return t>=0&&t<=65535},EY=function(t){return t>=65536&&t<=1114111},YL=function(t){return Math.floor((t-65536)/1024)+55296},QL=function(t){return(t-65536)%1024+56320},Zh=function(t){return t.BigEndian="BigEndian",t.LittleEndian="LittleEndian",t}(Zh||{}),hw="\uFFFD".codePointAt(0),QT=function(t,e){if(e===void 0&&(e=!0),t.length<=1)return String.fromCodePoint(hw);for(var n=e?Zxe(t):Zh.BigEndian,i=e?2:0,r=[];t.length-i>=2;){var s=SY(t[i++],t[i++],n);if($xe(s))if(t.length-i<2)r.push(hw);else{var o=SY(t[i++],t[i++],n);wY(o)?r.push(s,o):r.push(hw)}else wY(s)?(i+=2,r.push(hw)):r.push(s)}return i<t.length&&r.push(hw),String.fromCodePoint.apply(String,r)},$xe=function(t){return t>=55296&&t<=56319},wY=function(t){return t>=56320&&t<=57343},SY=function(t,e,n){if(n===Zh.LittleEndian)return e<<8|t;if(n===Zh.BigEndian)return t<<8|e;throw new Error("Invalid byteOrder: "+n)},Zxe=function(t){return DY(t)?Zh.BigEndian:TY(t)?Zh.LittleEndian:Zh.BigEndian},DY=function(t){return t[0]===254&&t[1]===255},TY=function(t){return t[0]===255&&t[1]===254},XT=function(t){return DY(t)||TY(t)};var RY=function(t){var e=String(t);if(Math.abs(t)<1){var n=parseInt(t.toString().split("e-")[1]);if(n){var i=t<0;i&&(t*=-1),t*=Math.pow(10,n-1),e="0."+new Array(n).join("0")+t.toString().substring(2),i&&(e="-"+e)}}else{var n=parseInt(t.toString().split("+")[1]);n>20&&(n-=20,t/=Math.pow(10,n),e=t.toString()+new Array(n+1).join("0"))}return e},fw=function(t){return Math.ceil(t.toString(2).length/8)},Jh=function(t){for(var e=new Uint8Array(fw(t)),n=1;n<=e.length;n++)e[n-1]=t>>(e.length-n)*8;return e};var ef=function(t){throw new Error(t)};var gX=vS(Fw()),pX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pw=new Uint8Array(256);for(Aw=0;Aw<pX.length;Aw++)Pw[pX.charCodeAt(Aw)]=Aw;var Aw,z1e=function(t){var e=t.length*.75,n=t.length,i,r=0,s,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new Uint8Array(e);for(i=0;i<n;i+=4)s=Pw[t.charCodeAt(i)],o=Pw[t.charCodeAt(i+1)],a=Pw[t.charCodeAt(i+2)],l=Pw[t.charCodeAt(i+3)],c[r++]=s<<2|o>>4,c[r++]=(o&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return c},q1e=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},fR=function(t){return q1e(gX.default.inflate(z1e(t)))},mX=function(t,e,n){for(var i="",r=0,s=e-t.length;r<s;r++)i+=n;return i+t};var vX="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";var yX="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";var CX="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";var wX="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";var SX="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";var bX="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";var _X="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";var EX="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";var DX="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";var TX="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";var RX="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";var IX="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";var xX="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";var FX="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var aAe={Courier:wX,"Courier-Bold":vX,"Courier-Oblique":CX,"Courier-BoldOblique":yX,Helvetica:EX,"Helvetica-Bold":SX,"Helvetica-Oblique":_X,"Helvetica-BoldOblique":bX,"Times-Roman":IX,"Times-Bold":DX,"Times-Italic":RX,"Times-BoldItalic":TX,Symbol:xX,ZapfDingbats:FX},Sm=function(t){return t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats",t}(Sm||{}),AX={},PX=function(){function t(){var e=this;this.getWidthOfGlyph=function(n){return e.CharWidths[n]},this.getXAxisKerningForPair=function(n,i){return(e.KernPairXAmounts[n]||{})[i]}}return t.load=function(e){var n=AX[e];if(n)return n;var i=fR(aAe[e]),r=Object.assign(new t,JSON.parse(i));return r.CharWidths=r.CharMetrics.reduce(function(s,o){return s[o.N]=o.WX,s},{}),r.KernPairXAmounts=r.KernPairs.reduce(function(s,o){var a=o[0],l=o[1],c=o[2];return s[a]||(s[a]={}),s[a][l]=c,s},{}),AX[e]=r,r},t}();var MX="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";var cAe=fR(MX),FV=JSON.parse(cAe),AV=function(){function t(e,n){var i=this;this.canEncodeUnicodeCodePoint=function(r){return r in i.unicodeMappings},this.encodeUnicodeCodePoint=function(r){var s=i.unicodeMappings[r];if(!s){var o=String.fromCharCode(r),a="0x"+mX(r.toString(16),4,"0"),l=i.name+' cannot encode "'+o+'" ('+a+")";throw new Error(l)}return{code:s[0],name:s[1]}},this.name=e,this.supportedCodePoints=Object.keys(n).map(Number).sort(function(r,s){return r-s}),this.unicodeMappings=n}return t}(),Mw={Symbol:new AV("Symbol",FV.symbol),ZapfDingbats:new AV("ZapfDingbats",FV.zapfdingbats),WinAnsi:new AV("WinAnsi",FV.win1252)};var Ow=function(t){return Object.keys(t).map(function(e){return t[e]})},uAe=Ow(Sm),PV=function(t){return uAe.includes(t)},kw=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height};var Oi=function(t){return"`"+t+"`"},dAe=function(t){return"'"+t+"'"},OX=function(t){var e=typeof t;return e==="string"?dAe(t):e==="undefined"?Oi(t):t},hAe=function(t,e,n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var o=n[r];i[r]=OX(o)}var a=i.join(" or ");return Oi(e)+" must be one of "+a+", but was actually "+OX(t)},Sa=function(t,e,n){Array.isArray(n)||(n=Ow(n));for(var i=0,r=n.length;i<r;i++)if(t===n[i])return;throw new TypeError(hAe(t,e,n))},Es=function(t,e,n){Array.isArray(n)||(n=Ow(n)),Sa(t,e,n.concat(void 0))},kX=function(t,e,n){Array.isArray(n)||(n=Ow(n));for(var i=0,r=t.length;i<r;i++)Sa(t[i],e,n)},fAe=function(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?"string":isNaN(t)?"NaN":typeof t=="number"?"number":typeof t=="boolean"?"boolean":typeof t=="symbol"?"symbol":typeof t=="bigint"?"bigint":t.constructor&&t.constructor.name?t.constructor.name:t.name?t.name:t.constructor?String(t.constructor):String(t)},pAe=function(t,e){return e==="null"?t===null:e==="undefined"?t===void 0:e==="string"?typeof t=="string":e==="number"?typeof t=="number"&&!isNaN(t):e==="boolean"?typeof t=="boolean":e==="symbol"?typeof t=="symbol":e==="bigint"?typeof t=="bigint":e===Date?t instanceof Date:e===Array?t instanceof Array:e===Uint8Array?t instanceof Uint8Array:e===ArrayBuffer?t instanceof ArrayBuffer:e===Function?t instanceof Function:t instanceof e[0]},gAe=function(t,e,n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var o=n[r];o==="null"&&(i[r]=Oi("null")),o==="undefined"&&(i[r]=Oi("undefined")),o==="string"?i[r]=Oi("string"):o==="number"?i[r]=Oi("number"):o==="boolean"?i[r]=Oi("boolean"):o==="symbol"?i[r]=Oi("symbol"):o==="bigint"?i[r]=Oi("bigint"):o===Array?i[r]=Oi("Array"):o===Uint8Array?i[r]=Oi("Uint8Array"):o===ArrayBuffer?i[r]=Oi("ArrayBuffer"):i[r]=Oi(o[1])}var a=i.join(" or ");return Oi(e)+" must be of type "+a+", but was actually of type "+Oi(fAe(t))},L=function(t,e,n){for(var i=0,r=n.length;i<r;i++)if(pAe(t,n[i]))return;throw new TypeError(gAe(t,e,n))},re=function(t,e,n){L(t,e,n.concat("undefined"))},pR=function(t,e,n){for(var i=0,r=t.length;i<r;i++)L(t[i],e,n)},Sr=function(t,e,n,i){if(L(t,e,["number"]),L(n,"min",["number"]),L(i,"max",["number"]),i=Math.max(n,i),t<n||t>i)throw new Error(Oi(e)+" must be at least "+n+" and at most "+i+", but was actually "+t)},to=function(t,e,n,i){L(t,e,["number","undefined"]),typeof t=="number"&&Sr(t,e,n,i)},gR=function(t,e,n){if(L(t,e,["number"]),t%n!==0)throw new Error(Oi(e)+" must be a multiple of "+n+", but was actually "+t)},NX=function(t,e){if(!Number.isInteger(t))throw new Error(Oi(e)+" must be an integer, but was actually "+t)},Xu=function(t,e){if(![1,0].includes(Math.sign(t)))throw new Error(Oi(e)+" must be a positive number or 0, but was actually "+t)};var st=new Uint16Array(256);for(Nw=0;Nw<256;Nw++)st[Nw]=Nw;var Nw;st[22]=et("");st[24]=et("\u02D8");st[25]=et("\u02C7");st[26]=et("\u02C6");st[27]=et("\u02D9");st[28]=et("\u02DD");st[29]=et("\u02DB");st[30]=et("\u02DA");st[31]=et("\u02DC");st[127]=et("\uFFFD");st[128]=et("\u2022");st[129]=et("\u2020");st[130]=et("\u2021");st[131]=et("\u2026");st[132]=et("\u2014");st[133]=et("\u2013");st[134]=et("\u0192");st[135]=et("\u2044");st[136]=et("\u2039");st[137]=et("\u203A");st[138]=et("\u2212");st[139]=et("\u2030");st[140]=et("\u201E");st[141]=et("\u201C");st[142]=et("\u201D");st[143]=et("\u2018");st[144]=et("\u2019");st[145]=et("\u201A");st[146]=et("\u2122");st[147]=et("\uFB01");st[148]=et("\uFB02");st[149]=et("\u0141");st[150]=et("\u0152");st[151]=et("\u0160");st[152]=et("\u0178");st[153]=et("\u017D");st[154]=et("\u0131");st[155]=et("\u0142");st[156]=et("\u0153");st[157]=et("\u0161");st[158]=et("\u017E");st[159]=et("\uFFFD");st[160]=et("\u20AC");st[173]=et("\uFFFD");var mR=function(t){for(var e=new Array(t.length),n=0,i=t.length;n<i;n++)e[n]=st[t[n]];return String.fromCodePoint.apply(String,e)};var mAe=function(){function t(e){this.populate=e,this.value=void 0}return t.prototype.getValue=function(){return this.value},t.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},t.prototype.invalidate=function(){this.value=void 0},t.populatedBy=function(e){return new t(e)},t}(),br=mAe;var lr=function(t){K(e,t);function e(n,i){var r=this,s="Method "+n+"."+i+"() not implemented";return r=t.call(this,s)||this,r}return e}(Error);var bm=function(t){K(e,t);function e(n){var i=this,r="Cannot construct "+n+" - it has a private constructor";return i=t.call(this,r)||this,i}return e}(Error);var uf=function(t){K(e,t);function e(n,i){var r=this,s=function(l){var c,u;return(c=l?.name)!==null&&c!==void 0?c:(u=l?.constructor)===null||u===void 0?void 0:u.name},o=Array.isArray(n)?n.map(s):[s(n)],a="Expected instance of "+o.join(" or ")+", "+("but got instance of "+(i&&s(i)));return r=t.call(this,a)||this,r}return e}(Error);var LX=function(t){K(e,t);function e(n){var i=this,r=n+" stream encoding not supported";return i=t.call(this,r)||this,i}return e}(Error);var _m=function(t){K(e,t);function e(n,i){var r=this,s="Cannot call "+n+"."+i+"() more than once";return r=t.call(this,s)||this,r}return e}(Error);var Xst=function(t){K(e,t);function e(n){var i=this,r="Missing catalog (ref="+n+")";return i=t.call(this,r)||this,i}return e}(Error);var VX=function(t){K(e,t);function e(){var n=this,i="Can't embed page with missing Contents";return n=t.call(this,i)||this,n}return e}(Error);var BX=function(t){K(e,t);function e(n){var i,r,s,o=this,a=(s=(r=(i=n?.contructor)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:n?.name)!==null&&s!==void 0?s:n,l="Unrecognized stream type: "+a;return o=t.call(this,l)||this,o}return e}(Error);var GX=function(t){K(e,t);function e(){var n=this,i="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return n=t.call(this,i)||this,n}return e}(Error);var HX=function(t){K(e,t);function e(n){var i=this,r="Attempted to convert PDFArray with "+n+" elements to rectangle, but must have exactly 4 elements.";return i=t.call(this,r)||this,i}return e}(Error);var vR=function(t){K(e,t);function e(n){var i=this,r='Attempted to convert "'+n+'" to a date, but it does not match the PDF date string format.';return i=t.call(this,r)||this,i}return e}(Error);var MV=function(t){K(e,t);function e(n,i){var r=this,s="Invalid targetIndex specified: targetIndex="+n+" must be less than Count="+i;return r=t.call(this,s)||this,r}return e}(Error);var OV=function(t){K(e,t);function e(n,i){var r=this,s="Failed to "+i+" at targetIndex="+n+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return r=t.call(this,s)||this,r}return e}(Error);var Em=function(t){K(e,t);function e(n,i,r){var s=this,o="index should be at least "+i+" and at most "+r+", but was actually "+n;return s=t.call(this,o)||this,s}return e}(Error);var Dm=function(t){K(e,t);function e(){var n=this,i="Attempted to set invalid field value";return n=t.call(this,i)||this,n}return e}(Error);var UX=function(t){K(e,t);function e(){var n=this,i="Attempted to select multiple values for single-select field";return n=t.call(this,i)||this,n}return e}(Error);var jX=function(t){K(e,t);function e(n){var i=this,r="No /DA (default appearance) entry found for field: "+n;return i=t.call(this,r)||this,i}return e}(Error);var WX=function(t){K(e,t);function e(n){var i=this,r="No Tf operator found for DA of field: "+n;return i=t.call(this,r)||this,i}return e}(Error);var kV=function(t){K(e,t);function e(n,i){var r=this,s="Failed to parse number "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+'): "'+i+'"');return r=t.call(this,s)||this,r}return e}(Error);var $u=function(t){K(e,t);function e(n,i){var r=this,s="Failed to parse PDF document "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+"): "+i);return r=t.call(this,s)||this,r}return e}(Error);var zX=function(t){K(e,t);function e(n,i,r){var s=this,o="Expected next byte to be "+i+" but it was actually "+r;return s=t.call(this,n,o)||this,s}return e}($u);var qX=function(t){K(e,t);function e(n,i){var r=this,s="Failed to parse PDF object starting with the following byte: "+i;return r=t.call(this,n,s)||this,r}return e}($u);var KX=function(t){K(e,t);function e(n){var i=this,r="Failed to parse invalid PDF object";return i=t.call(this,n,r)||this,i}return e}($u);var YX=function(t){K(e,t);function e(n){var i=this,r="Failed to parse PDF stream";return i=t.call(this,n,r)||this,i}return e}($u);var QX=function(t){K(e,t);function e(n){var i=this,r="Failed to parse PDF literal string due to unbalanced parenthesis";return i=t.call(this,n,r)||this,i}return e}($u);var XX=function(t){K(e,t);function e(n){var i=this,r="Parser stalled";return i=t.call(this,n,r)||this,i}return e}($u);var $X=function(t){K(e,t);function e(n){var i=this,r="No PDF header found";return i=t.call(this,n,r)||this,i}return e}($u);var ZX=function(t){K(e,t);function e(n,i){var r=this,s="Did not find expected keyword '"+YT(i)+"'";return r=t.call(this,n,s)||this,r}return e}($u);var JX=function(t){return t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Newline=10]="Newline",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationPoint=33]="ExclamationPoint",t[t.Hash=35]="Hash",t[t.Percent=37]="Percent",t[t.LeftParen=40]="LeftParen",t[t.RightParen=41]="RightParen",t[t.Plus=43]="Plus",t[t.Minus=45]="Minus",t[t.Dash=45]="Dash",t[t.Period=46]="Period",t[t.ForwardSlash=47]="ForwardSlash",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.LessThan=60]="LessThan",t[t.GreaterThan=62]="GreaterThan",t[t.A=65]="A",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.O=79]="O",t[t.P=80]="P",t[t.R=82]="R",t[t.LeftSquareBracket=91]="LeftSquareBracket",t[t.BackSlash=92]="BackSlash",t[t.RightSquareBracket=93]="RightSquareBracket",t[t.a=97]="a",t[t.b=98]="b",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.i=105]="i",t[t.j=106]="j",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.x=120]="x",t[t.LeftCurly=123]="LeftCurly",t[t.RightCurly=125]="RightCurly",t[t.Tilde=126]="Tilde",t}(JX||{}),A=JX;var l$=vS(Fw());var vAe=function(){function t(e,n){this.major=String(e),this.minor=String(n)}return t.prototype.toString=function(){var e=Zs(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},t.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},t.prototype.copyBytesInto=function(e,n){var i=n;return e[n++]=A.Percent,e[n++]=A.P,e[n++]=A.D,e[n++]=A.F,e[n++]=A.Dash,n+=an(this.major,e,n),e[n++]=A.Period,n+=an(this.minor,e,n),e[n++]=A.Newline,e[n++]=A.Percent,e[n++]=129,e[n++]=129,e[n++]=129,e[n++]=129,n-i},t.forVersion=function(e,n){return new t(e,n)},t}(),Sc=vAe;var yAe=function(){function t(){}return t.prototype.clone=function(e){throw new lr(this.constructor.name,"clone")},t.prototype.toString=function(){throw new lr(this.constructor.name,"toString")},t.prototype.sizeInBytes=function(){throw new lr(this.constructor.name,"sizeInBytes")},t.prototype.copyBytesInto=function(e,n){throw new lr(this.constructor.name,"copyBytesInto")},t}(),nn=yAe;var CAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.numberValue=n,i.stringValue=RY(n),i}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(n,i){return i+=an(this.stringValue,n,i),this.stringValue.length},e.of=function(n){return new e(n)},e}(nn),_e=CAe;var wAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.array=[],i.context=n,i}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(n){this.array.push(n)},e.prototype.insert=function(n,i){this.array.splice(n,0,i)},e.prototype.indexOf=function(n){var i=this.array.indexOf(n);return i===-1?void 0:i},e.prototype.remove=function(n){this.array.splice(n,1)},e.prototype.set=function(n,i){this.array[n]=i},e.prototype.get=function(n){return this.array[n]},e.prototype.lookupMaybe=function(n){for(var i,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return(i=this.context).lookupMaybe.apply(i,dt([this.get(n)],r))},e.prototype.lookup=function(n){for(var i,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return(i=this.context).lookup.apply(i,dt([this.get(n)],r))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new HX(this.size());var n=this.lookup(0,_e).asNumber(),i=this.lookup(1,_e).asNumber(),r=this.lookup(2,_e).asNumber(),s=this.lookup(3,_e).asNumber(),o=n,a=i,l=r-n,c=s-i;return{x:o,y:a,width:l,height:c}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(n){for(var i=e.withContext(n||this.context),r=0,s=this.size();r<s;r++)i.push(this.array[r]);return i},e.prototype.toString=function(){for(var n="[ ",i=0,r=this.size();i<r;i++)n+=this.get(i).toString(),n+=" ";return n+="]",n},e.prototype.sizeInBytes=function(){for(var n=3,i=0,r=this.size();i<r;i++)n+=this.get(i).sizeInBytes()+1;return n},e.prototype.copyBytesInto=function(n,i){var r=i;n[i++]=A.LeftSquareBracket,n[i++]=A.Space;for(var s=0,o=this.size();s<o;s++)i+=this.get(s).copyBytesInto(n,i),n[i++]=A.Space;return n[i++]=A.RightSquareBracket,i-r},e.prototype.scalePDFNumbers=function(n,i){for(var r=0,s=this.size();r<s;r++){var o=this.lookup(r);if(o instanceof _e){var a=r%2===0?n:i;this.set(r,_e.of(o.asNumber()*a))}}},e.withContext=function(n){return new e(n)},e}(nn),Ye=wAe;var NV={},SAe=function(t){K(e,t);function e(n,i){var r=this;if(n!==NV)throw new bm("PDFBool");return r=t.call(this)||this,r.value=i,r}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(n,i){return this.value?(n[i++]=A.t,n[i++]=A.r,n[i++]=A.u,n[i++]=A.e,4):(n[i++]=A.f,n[i++]=A.a,n[i++]=A.l,n[i++]=A.s,n[i++]=A.e,5)},e.True=new e(NV,!0),e.False=new e(NV,!1),e}(nn),bc=SAe;var Ds=new Uint8Array(256);Ds[A.LeftParen]=1;Ds[A.RightParen]=1;Ds[A.LessThan]=1;Ds[A.GreaterThan]=1;Ds[A.LeftSquareBracket]=1;Ds[A.RightSquareBracket]=1;Ds[A.LeftCurly]=1;Ds[A.RightCurly]=1;Ds[A.ForwardSlash]=1;Ds[A.Percent]=1;var Oo=new Uint8Array(256);Oo[A.Null]=1;Oo[A.Tab]=1;Oo[A.Newline]=1;Oo[A.FormFeed]=1;Oo[A.CarriageReturn]=1;Oo[A.Space]=1;var yR=new Uint8Array(256);for(Tm=0,e$=256;Tm<e$;Tm++)yR[Tm]=Oo[Tm]||Ds[Tm]?1:0;var Tm,e$;yR[A.Hash]=1;var bAe=function(t){return t.replace(/#([\dABCDEF]{2})/g,function(e,n){return lY(n)})},_Ae=function(t){return t>=A.ExclamationPoint&&t<=A.Tilde&&!yR[t]},t$={},n$=new Map,EAe=function(t){K(e,t);function e(n,i){var r=this;if(n!==t$)throw new bm("PDFName");r=t.call(this)||this;for(var s="/",o=0,a=i.length;o<a;o++){var l=i[o],c=et(l);s+=_Ae(c)?l:"#"+ju(c)}return r.encodedName=s,r}return e.prototype.asBytes=function(){for(var n=[],i="",r=!1,s=function(d){d!==void 0&&n.push(d),r=!1},o=1,a=this.encodedName.length;o<a;o++){var l=this.encodedName[o],c=et(l),u=this.encodedName[o+1];r?c>=A.Zero&&c<=A.Nine||c>=A.a&&c<=A.f||c>=A.A&&c<=A.F?(i+=l,(i.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(s(parseInt(i,16)),i="")):s(c):c===A.Hash?r=!0:s(c)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return String.fromCharCode.apply(String,Array.from(n))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(n,i){return i+=an(this.encodedName,n,i),this.encodedName.length},e.of=function(n){var i=bAe(n),r=n$.get(i);return r||(r=new e(t$,i),n$.set(i,r)),r},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(nn),R=EAe;var DAe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(n,i){return n[i++]=A.n,n[i++]=A.u,n[i++]=A.l,n[i++]=A.l,4},e}(nn),qi=new DAe;var TAe=function(t){K(e,t);function e(n,i){var r=t.call(this)||this;return r.dict=n,r.context=i,r}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(n,i){this.dict.set(n,i)},e.prototype.get=function(n,i){i===void 0&&(i=!1);var r=this.dict.get(n);if(!(r===qi&&!i))return r},e.prototype.has=function(n){var i=this.dict.get(n);return i!==void 0&&i!==qi},e.prototype.lookupMaybe=function(n){for(var i,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var o=r.includes(qi),a=(i=this.context).lookupMaybe.apply(i,dt([this.get(n,o)],r));if(!(a===qi&&!o))return a},e.prototype.lookup=function(n){for(var i,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var o=r.includes(qi),a=(i=this.context).lookup.apply(i,dt([this.get(n,o)],r));if(!(a===qi&&!o))return a},e.prototype.delete=function(n){return this.dict.delete(n)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(n){n===void 0&&(n="");for(var i=this.keys(),r=R.of(this.context.addRandomSuffix(n,10));i.includes(r);)r=R.of(this.context.addRandomSuffix(n,10));return r},e.prototype.clone=function(n){for(var i=e.withContext(n||this.context),r=this.entries(),s=0,o=r.length;s<o;s++){var a=r[s],l=a[0],c=a[1];i.set(l,c)}return i},e.prototype.toString=function(){for(var n=`<<
`,i=this.entries(),r=0,s=i.length;r<s;r++){var o=i[r],a=o[0],l=o[1];n+=a.toString()+" "+l.toString()+`
`}return n+=">>",n},e.prototype.sizeInBytes=function(){for(var n=5,i=this.entries(),r=0,s=i.length;r<s;r++){var o=i[r],a=o[0],l=o[1];n+=a.sizeInBytes()+l.sizeInBytes()+2}return n},e.prototype.copyBytesInto=function(n,i){var r=i;n[i++]=A.LessThan,n[i++]=A.LessThan,n[i++]=A.Newline;for(var s=this.entries(),o=0,a=s.length;o<a;o++){var l=s[o],c=l[0],u=l[1];i+=c.copyBytesInto(n,i),n[i++]=A.Space,i+=u.copyBytesInto(n,i),n[i++]=A.Newline}return n[i++]=A.GreaterThan,n[i++]=A.GreaterThan,i-r},e.withContext=function(n){return new e(new Map,n)},e.fromMapWithContext=function(n,i){return new e(n,i)},e}(nn),Ie=TAe;var RAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.dict=n,i}return e.prototype.clone=function(n){throw new lr(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new lr(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new lr(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new lr(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var n=this.getContentsSize();this.dict.set(R.Length,_e.of(n))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var n=this.dict.toString();return n+=`
stream
`,n+=this.getContentsString(),n+=`
endstream`,n},e.prototype.copyBytesInto=function(n,i){this.updateDict();var r=i;i+=this.dict.copyBytesInto(n,i),n[i++]=A.Newline,n[i++]=A.s,n[i++]=A.t,n[i++]=A.r,n[i++]=A.e,n[i++]=A.a,n[i++]=A.m,n[i++]=A.Newline;for(var s=this.getContents(),o=0,a=s.length;o<a;o++)n[i++]=s[o];return n[i++]=A.Newline,n[i++]=A.e,n[i++]=A.n,n[i++]=A.d,n[i++]=A.s,n[i++]=A.t,n[i++]=A.r,n[i++]=A.e,n[i++]=A.a,n[i++]=A.m,i-r},e}(nn),Rn=RAe;var IAe=function(t){K(e,t);function e(n,i){var r=t.call(this,n)||this;return r.contents=i,r}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(n){return e.of(this.dict.clone(n),this.contents.slice())},e.prototype.getContentsString=function(){return YT(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(n,i){return new e(n,i)},e}(Rn),vl=IAe;var i$={},r$=new Map,xAe=function(t){K(e,t);function e(n,i,r){var s=this;if(n!==i$)throw new bm("PDFRef");return s=t.call(this)||this,s.objectNumber=i,s.generationNumber=r,s.tag=i+" "+r+" R",s}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(n,i){return i+=an(this.tag,n,i),this.tag.length},e.of=function(n,i){i===void 0&&(i=0);var r=n+" "+i+" R",s=r$.get(r);return s||(s=new e(i$,n,i),r$.set(r,s)),s},e}(nn),Ze=xAe;var FAe=function(){function t(e,n){this.name=e,this.args=n||[]}return t.prototype.clone=function(e){for(var n=new Array(this.args.length),i=0,r=n.length;i<r;i++){var s=this.args[i];n[i]=s instanceof nn?s.clone(e):s}return t.of(this.name,n)},t.prototype.toString=function(){for(var e="",n=0,i=this.args.length;n<i;n++)e+=String(this.args[n])+" ";return e+=this.name,e},t.prototype.sizeInBytes=function(){for(var e=0,n=0,i=this.args.length;n<i;n++){var r=this.args[n];e+=(r instanceof nn?r.sizeInBytes():r.length)+1}return e+=this.name.length,e},t.prototype.copyBytesInto=function(e,n){for(var i=n,r=0,s=this.args.length;r<s;r++){var o=this.args[r];o instanceof nn?n+=o.copyBytesInto(e,n):n+=an(o,e,n),e[n++]=A.Space}return n+=an(this.name,e,n),n-i},t.of=function(e,n){return new t(e,n)},t}(),yt=FAe;var s$=function(t){return t.NonStrokingColor="sc",t.NonStrokingColorN="scn",t.NonStrokingColorRgb="rg",t.NonStrokingColorGray="g",t.NonStrokingColorCmyk="k",t.NonStrokingColorspace="cs",t.StrokingColor="SC",t.StrokingColorN="SCN",t.StrokingColorRgb="RG",t.StrokingColorGray="G",t.StrokingColorCmyk="K",t.StrokingColorspace="CS",t.BeginMarkedContentSequence="BDC",t.BeginMarkedContent="BMC",t.EndMarkedContent="EMC",t.MarkedContentPointWithProps="DP",t.MarkedContentPoint="MP",t.DrawObject="Do",t.ConcatTransformationMatrix="cm",t.PopGraphicsState="Q",t.PushGraphicsState="q",t.SetFlatness="i",t.SetGraphicsStateParams="gs",t.SetLineCapStyle="J",t.SetLineDashPattern="d",t.SetLineJoinStyle="j",t.SetLineMiterLimit="M",t.SetLineWidth="w",t.SetTextMatrix="Tm",t.SetRenderingIntent="ri",t.AppendRectangle="re",t.BeginInlineImage="BI",t.BeginInlineImageData="ID",t.EndInlineImage="EI",t.ClipEvenOdd="W*",t.ClipNonZero="W",t.CloseAndStroke="s",t.CloseFillEvenOddAndStroke="b*",t.CloseFillNonZeroAndStroke="b",t.ClosePath="h",t.AppendBezierCurve="c",t.CurveToReplicateFinalPoint="y",t.CurveToReplicateInitialPoint="v",t.EndPath="n",t.FillEvenOddAndStroke="B*",t.FillEvenOdd="f*",t.FillNonZeroAndStroke="B",t.FillNonZero="f",t.LegacyFillNonZero="F",t.LineTo="l",t.MoveTo="m",t.ShadingFill="sh",t.StrokePath="S",t.BeginText="BT",t.EndText="ET",t.MoveText="Td",t.MoveTextSetLeading="TD",t.NextLine="T*",t.SetCharacterSpacing="Tc",t.SetFontAndSize="Tf",t.SetTextHorizontalScaling="Tz",t.SetTextLineHeight="TL",t.SetTextRenderingMode="Tr",t.SetTextRise="Ts",t.SetWordSpacing="Tw",t.ShowText="Tj",t.ShowTextAdjusted="TJ",t.ShowTextLine="'",t.ShowTextLineAndSpace='"',t.Type3D0="d0",t.Type3D1="d1",t.BeginCompatibilitySection="BX",t.EndCompatibilitySection="EX",t}(s$||{}),Et=s$;var o$=vS(Fw());var AAe=function(t){K(e,t);function e(n,i){var r=t.call(this,n)||this;return r.computeContents=function(){var s=r.getUnencodedContents();return r.encode?o$.default.deflate(s):s},r.encode=i,i&&n.set(R.of("Filter"),R.of("FlateDecode")),r.contentsCache=br.populatedBy(r.computeContents),r}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new lr(this.constructor.name,"getUnencodedContents")},e}(Rn),df=AAe;var PAe=function(t){K(e,t);function e(n,i,r){r===void 0&&(r=!0);var s=t.call(this,n,r)||this;return s.operators=i,s}return e.prototype.push=function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];(n=this.operators).push.apply(n,i)},e.prototype.clone=function(n){for(var i=new Array(this.operators.length),r=0,s=this.operators.length;r<s;r++)i[r]=this.operators[r].clone(n);var o=this,a=o.dict,l=o.encode;return e.of(a.clone(n),i,l)},e.prototype.getContentsString=function(){for(var n="",i=0,r=this.operators.length;i<r;i++)n+=this.operators[i]+`
`;return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),i=0,r=0,s=this.operators.length;r<s;r++)i+=this.operators[r].copyBytesInto(n,i),n[i++]=A.Newline;return n},e.prototype.getUnencodedContentsSize=function(){for(var n=0,i=0,r=this.operators.length;i<r;i++)n+=this.operators[i].sizeInBytes()+1;return n},e.of=function(n,i,r){return r===void 0&&(r=!0),new e(n,i,r)},e}(df),_c=PAe;var a$=function(){function t(e){this.seed=e}return t.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},t.withSeed=function(e){return new t(e)},t}();var MAe=function(t,e){var n=t[0],i=e[0];return n.objectNumber-i.objectNumber},OAe=function(){function t(){this.largestObjectNumber=0,this.header=Sc.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=a$.withSeed(1)}return t.prototype.assign=function(e,n){this.indirectObjects.set(e,n),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},t.prototype.nextRef=function(){return this.largestObjectNumber+=1,Ze.of(this.largestObjectNumber)},t.prototype.register=function(e){var n=this.nextRef();return this.assign(n,e),n},t.prototype.delete=function(e){return this.indirectObjects.delete(e)},t.prototype.lookupMaybe=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=n.includes(qi),s=e instanceof Ze?this.indirectObjects.get(e):e;if(!(!s||s===qi&&!r)){for(var o=0,a=n.length;o<a;o++){var l=n[o];if(l===qi){if(s===qi)return s}else if(s instanceof l)return s}throw new uf(n,s)}},t.prototype.lookup=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=e instanceof Ze?this.indirectObjects.get(e):e;if(n.length===0)return r;for(var s=0,o=n.length;s<o;s++){var a=n[s];if(a===qi){if(r===qi)return r}else if(r instanceof a)return r}throw new uf(n,r)},t.prototype.getObjectRef=function(e){for(var n=Array.from(this.indirectObjects.entries()),i=0,r=n.length;i<r;i++){var s=n[i],o=s[0],a=s[1];if(a===e)return o}},t.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(MAe)},t.prototype.obj=function(e){if(e instanceof nn)return e;if(e==null)return qi;if(typeof e=="string")return R.of(e);if(typeof e=="number")return _e.of(e);if(typeof e=="boolean")return e?bc.True:bc.False;if(Array.isArray(e)){for(var n=Ye.withContext(this),i=0,r=e.length;i<r;i++)n.push(this.obj(e[i]));return n}else{for(var s=Ie.withContext(this),o=Object.keys(e),i=0,r=o.length;i<r;i++){var a=o[i],l=e[a];l!==void 0&&s.set(R.of(a),this.obj(l))}return s}},t.prototype.stream=function(e,n){return n===void 0&&(n={}),vl.of(this.obj(n),KT(e))},t.prototype.flateStream=function(e,n){return n===void 0&&(n={}),this.stream(l$.default.deflate(KT(e)),$e($e({},n),{Filter:"FlateDecode"}))},t.prototype.contentStream=function(e,n){return n===void 0&&(n={}),_c.of(this.obj(n),e)},t.prototype.formXObject=function(e,n){return n===void 0&&(n={}),this.contentStream(e,$e($e({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},n),{Type:"XObject",Subtype:"Form"}))},t.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),n=yt.of(Et.PushGraphicsState),i=_c.of(e,[n]);return this.pushGraphicsStateContentStreamRef=this.register(i),this.pushGraphicsStateContentStreamRef},t.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),n=yt.of(Et.PopGraphicsState),i=_c.of(e,[n]);return this.popGraphicsStateContentStreamRef=this.register(i),this.popGraphicsStateContentStreamRef},t.prototype.addRandomSuffix=function(e,n){return n===void 0&&(n=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,n))},t.create=function(){return new t},t}(),Rm=OAe;var kAe=function(t){K(e,t);function e(n,i,r){r===void 0&&(r=!0);var s=t.call(this,n,i)||this;return s.normalized=!1,s.autoNormalizeCTM=r,s}return e.prototype.clone=function(n){for(var i=e.fromMapWithContext(new Map,n||this.context,this.autoNormalizeCTM),r=this.entries(),s=0,o=r.length;s<o;s++){var a=r[s],l=a[0],c=a[1];i.set(l,c)}return i},e.prototype.Parent=function(){return this.lookupMaybe(R.Parent,Ie)},e.prototype.Contents=function(){return this.lookup(R.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(R.Annots,Ye)},e.prototype.BleedBox=function(){return this.lookupMaybe(R.BleedBox,Ye)},e.prototype.TrimBox=function(){return this.lookupMaybe(R.TrimBox,Ye)},e.prototype.ArtBox=function(){return this.lookupMaybe(R.ArtBox,Ye)},e.prototype.Resources=function(){var n=this.getInheritableAttribute(R.Resources);return this.context.lookupMaybe(n,Ie)},e.prototype.MediaBox=function(){var n=this.getInheritableAttribute(R.MediaBox);return this.context.lookup(n,Ye)},e.prototype.CropBox=function(){var n=this.getInheritableAttribute(R.CropBox);return this.context.lookupMaybe(n,Ye)},e.prototype.Rotate=function(){var n=this.getInheritableAttribute(R.Rotate);return this.context.lookupMaybe(n,_e)},e.prototype.getInheritableAttribute=function(n){var i;return this.ascend(function(r){i||(i=r.get(n))}),i},e.prototype.setParent=function(n){this.set(R.Parent,n)},e.prototype.addContentStream=function(n){var i=this.normalizedEntries().Contents||this.context.obj([]);this.set(R.Contents,i),i.push(n)},e.prototype.wrapContentStreams=function(n,i){var r=this.Contents();return r instanceof Ye?(r.insert(0,n),r.push(i),!0):!1},e.prototype.addAnnot=function(n){var i=this.normalizedEntries().Annots;i.push(n)},e.prototype.removeAnnot=function(n){var i=this.normalizedEntries().Annots,r=i.indexOf(n);r!==void 0&&i.remove(r)},e.prototype.setFontDictionary=function(n,i){var r=this.normalizedEntries().Font;r.set(n,i)},e.prototype.newFontDictionaryKey=function(n){var i=this.normalizedEntries().Font;return i.uniqueKey(n)},e.prototype.newFontDictionary=function(n,i){var r=this.newFontDictionaryKey(n);return this.setFontDictionary(r,i),r},e.prototype.setXObject=function(n,i){var r=this.normalizedEntries().XObject;r.set(n,i)},e.prototype.newXObjectKey=function(n){var i=this.normalizedEntries().XObject;return i.uniqueKey(n)},e.prototype.newXObject=function(n,i){var r=this.newXObjectKey(n);return this.setXObject(r,i),r},e.prototype.setExtGState=function(n,i){var r=this.normalizedEntries().ExtGState;r.set(n,i)},e.prototype.newExtGStateKey=function(n){var i=this.normalizedEntries().ExtGState;return i.uniqueKey(n)},e.prototype.newExtGState=function(n,i){var r=this.newExtGStateKey(n);return this.setExtGState(r,i),r},e.prototype.ascend=function(n){n(this);var i=this.Parent();i&&i.ascend(n)},e.prototype.normalize=function(){if(!this.normalized){var n=this.context,i=this.get(R.Contents),r=this.context.lookup(i);r instanceof Rn&&this.set(R.Contents,n.obj([i])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var s=this.getInheritableAttribute(R.Resources),o=n.lookupMaybe(s,Ie)||n.obj({});this.set(R.Resources,o);var a=o.lookupMaybe(R.Font,Ie)||n.obj({});o.set(R.Font,a);var l=o.lookupMaybe(R.XObject,Ie)||n.obj({});o.set(R.XObject,l);var c=o.lookupMaybe(R.ExtGState,Ie)||n.obj({});o.set(R.ExtGState,c);var u=this.Annots()||n.obj([]);this.set(R.Annots,u),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var n=this.Annots(),i=this.Resources(),r=this.Contents();return{Annots:n,Resources:i,Contents:r,Font:i.lookup(R.Font,Ie),XObject:i.lookup(R.XObject,Ie),ExtGState:i.lookup(R.ExtGState,Ie)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(n,i){var r=new Map;return r.set(R.Type,R.Page),r.set(R.Parent,i),r.set(R.Resources,n.obj({})),r.set(R.MediaBox,n.obj([0,0,612,792])),new e(r,n,!1)},e.fromMapWithContext=function(n,i,r){return r===void 0&&(r=!0),new e(n,i,r)},e}(Ie),Xr=kAe;var NAe=function(){function t(e,n){var i=this;this.traversedObjects=new Map,this.copy=function(r){return r instanceof Xr?i.copyPDFPage(r):r instanceof Ie?i.copyPDFDict(r):r instanceof Ye?i.copyPDFArray(r):r instanceof Rn?i.copyPDFStream(r):r instanceof Ze?i.copyPDFIndirectObject(r):r.clone()},this.copyPDFPage=function(r){for(var s=r.clone(),o=Xr.InheritableEntries,a=0,l=o.length;a<l;a++){var c=R.of(o[a]),u=s.getInheritableAttribute(c);!s.get(c)&&u&&s.set(c,u)}return s.delete(R.of("Parent")),i.copyPDFDict(s)},this.copyPDFDict=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var s=r.clone(i.dest);i.traversedObjects.set(r,s);for(var o=r.entries(),a=0,l=o.length;a<l;a++){var c=o[a],u=c[0],d=c[1];s.set(u,i.copy(d))}return s},this.copyPDFArray=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var s=r.clone(i.dest);i.traversedObjects.set(r,s);for(var o=0,a=r.size();o<a;o++){var l=r.get(o);s.set(o,i.copy(l))}return s},this.copyPDFStream=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var s=r.clone(i.dest);i.traversedObjects.set(r,s);for(var o=r.dict.entries(),a=0,l=o.length;a<l;a++){var c=o[a],u=c[0],d=c[1];s.dict.set(u,i.copy(d))}return s},this.copyPDFIndirectObject=function(r){var s=i.traversedObjects.has(r);if(!s){var o=i.dest.nextRef();i.traversedObjects.set(r,o);var a=i.src.lookup(r);if(a){var l=i.copy(a);i.dest.assign(o,l)}}return i.traversedObjects.get(r)},this.src=e,this.dest=n}return t.for=function(e,n){return new t(e,n)},t}(),CR=NAe;var LAe=function(){function t(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return t.prototype.addEntry=function(e,n){this.append({ref:e,offset:n,deleted:!1})},t.prototype.addDeletedEntry=function(e,n){this.append({ref:e,offset:n,deleted:!0})},t.prototype.toString=function(){for(var e=`xref
`,n=0,i=this.subsections.length;n<i;n++){var r=this.subsections[n];e+=r[0].ref.objectNumber+" "+r.length+`
`;for(var s=0,o=r.length;s<o;s++){var a=r[s];e+=Js(String(a.offset),10,"0"),e+=" ",e+=Js(String(a.ref.generationNumber),5,"0"),e+=" ",e+=a.deleted?"f":"n",e+=` 
`}}return e},t.prototype.sizeInBytes=function(){for(var e=5,n=0,i=this.subsections.length;n<i;n++){var r=this.subsections[n],s=r.length,o=r[0];e+=2,e+=String(o.ref.objectNumber).length,e+=String(s).length,e+=20*s}return e},t.prototype.copyBytesInto=function(e,n){var i=n;return e[n++]=A.x,e[n++]=A.r,e[n++]=A.e,e[n++]=A.f,e[n++]=A.Newline,n+=this.copySubsectionsIntoBuffer(this.subsections,e,n),n-i},t.prototype.copySubsectionsIntoBuffer=function(e,n,i){for(var r=i,s=e.length,o=0;o<s;o++){var a=this.subsections[o],l=String(a[0].ref.objectNumber);i+=an(l,n,i),n[i++]=A.Space;var c=String(a.length);i+=an(c,n,i),n[i++]=A.Newline,i+=this.copyEntriesIntoBuffer(a,n,i)}return i-r},t.prototype.copyEntriesIntoBuffer=function(e,n,i){for(var r=e.length,s=0;s<r;s++){var o=e[s],a=Js(String(o.offset),10,"0");i+=an(a,n,i),n[i++]=A.Space;var l=Js(String(o.ref.generationNumber),5,"0");i+=an(l,n,i),n[i++]=A.Space,n[i++]=o.deleted?A.f:A.n,n[i++]=A.Space,n[i++]=A.Newline}return 20*r},t.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var n=this.subsections[this.chunkIdx],i=n[this.chunkLength-1];e.ref.objectNumber-i.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(n.push(e),this.chunkLength+=1)},t.create=function(){return new t({ref:Ze.of(0,65535),offset:0,deleted:!0})},t.createEmpty=function(){return new t},t}(),Lw=LAe;var VAe=function(){function t(e){this.lastXRefOffset=String(e)}return t.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},t.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},t.prototype.copyBytesInto=function(e,n){var i=n;return e[n++]=A.s,e[n++]=A.t,e[n++]=A.a,e[n++]=A.r,e[n++]=A.t,e[n++]=A.x,e[n++]=A.r,e[n++]=A.e,e[n++]=A.f,e[n++]=A.Newline,n+=an(this.lastXRefOffset,e,n),e[n++]=A.Newline,e[n++]=A.Percent,e[n++]=A.Percent,e[n++]=A.E,e[n++]=A.O,e[n++]=A.F,n-i},t.forLastCrossRefSectionOffset=function(e){return new t(e)},t}(),hf=VAe;var BAe=function(){function t(e){this.dict=e}return t.prototype.toString=function(){return`trailer
`+this.dict.toString()},t.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},t.prototype.copyBytesInto=function(e,n){var i=n;return e[n++]=A.t,e[n++]=A.r,e[n++]=A.a,e[n++]=A.i,e[n++]=A.l,e[n++]=A.e,e[n++]=A.r,e[n++]=A.Newline,n+=this.dict.copyBytesInto(e,n),n-i},t.of=function(e){return new t(e)},t}(),LV=BAe;var GAe=function(t){K(e,t);function e(n,i,r){r===void 0&&(r=!0);var s=t.call(this,n.obj({}),r)||this;return s.objects=i,s.offsets=s.computeObjectOffsets(),s.offsetsString=s.computeOffsetsString(),s.dict.set(R.of("Type"),R.of("ObjStm")),s.dict.set(R.of("N"),_e.of(s.objects.length)),s.dict.set(R.of("First"),_e.of(s.offsetsString.length)),s}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(n){return e.withContextAndObjects(n||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var n=this.offsetsString,i=0,r=this.objects.length;i<r;i++){var s=this.objects[i],o=s[1];n+=o+`
`}return n},e.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),i=an(this.offsetsString,n,0),r=0,s=this.objects.length;r<s;r++){var o=this.objects[r],a=o[1];i+=a.copyBytesInto(n,i),n[i++]=A.Newline}return n},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+cm(this.offsets)[1]+cm(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var n="",i=0,r=this.offsets.length;i<r;i++){var s=this.offsets[i],o=s[0],a=s[1];n+=o+" "+a+" "}return n},e.prototype.computeObjectOffsets=function(){for(var n=0,i=new Array(this.objects.length),r=0,s=this.objects.length;r<s;r++){var o=this.objects[r],a=o[0],l=o[1];i[r]=[a.objectNumber,n],n+=l.sizeInBytes()+1}return i},e.withContextAndObjects=function(n,i,r){return r===void 0&&(r=!0),new e(n,i,r)},e}(df),Vw=GAe;var HAe=function(){function t(e,n){var i=this;this.parsedObjects=0,this.shouldWaitForTick=function(r){return i.parsedObjects+=r,i.parsedObjects%i.objectsPerTick===0},this.context=e,this.objectsPerTick=n}return t.prototype.serializeToBuffer=function(){return Pe(this,void 0,void 0,function(){var e,n,i,r,s,o,a,l,c,u,d,h,p,g,m,v,C;return Me(this,function(b){switch(b.label){case 0:return[4,this.computeBufferSize()];case 1:e=b.sent(),n=e.size,i=e.header,r=e.indirectObjects,s=e.xref,o=e.trailerDict,a=e.trailer,l=0,c=new Uint8Array(n),l+=i.copyBytesInto(c,l),c[l++]=A.Newline,c[l++]=A.Newline,u=0,d=r.length,b.label=2;case 2:return u<d?(h=r[u],p=h[0],g=h[1],m=String(p.objectNumber),l+=an(m,c,l),c[l++]=A.Space,v=String(p.generationNumber),l+=an(v,c,l),c[l++]=A.Space,c[l++]=A.o,c[l++]=A.b,c[l++]=A.j,c[l++]=A.Newline,l+=g.copyBytesInto(c,l),c[l++]=A.Newline,c[l++]=A.e,c[l++]=A.n,c[l++]=A.d,c[l++]=A.o,c[l++]=A.b,c[l++]=A.j,c[l++]=A.Newline,c[l++]=A.Newline,C=g instanceof Vw?g.getObjectsCount():1,this.shouldWaitForTick(C)?[4,dl()]:[3,4]):[3,5];case 3:b.sent(),b.label=4;case 4:return u++,[3,2];case 5:return s&&(l+=s.copyBytesInto(c,l),c[l++]=A.Newline),o&&(l+=o.copyBytesInto(c,l),c[l++]=A.Newline,c[l++]=A.Newline),l+=a.copyBytesInto(c,l),[2,c]}})})},t.prototype.computeIndirectObjectSize=function(e){var n=e[0],i=e[1],r=n.sizeInBytes()+3,s=i.sizeInBytes()+9;return r+s},t.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},t.prototype.computeBufferSize=function(){return Pe(this,void 0,void 0,function(){var e,n,i,r,s,o,a,l,c,u,d;return Me(this,function(h){switch(h.label){case 0:e=Sc.forVersion(1,7),n=e.sizeInBytes()+2,i=Lw.create(),r=this.context.enumerateIndirectObjects(),s=0,o=r.length,h.label=1;case 1:return s<o?(a=r[s],l=a[0],i.addEntry(l,n),n+=this.computeIndirectObjectSize(a),this.shouldWaitForTick(1)?[4,dl()]:[3,3]):[3,4];case 2:h.sent(),h.label=3;case 3:return s++,[3,1];case 4:return c=n,n+=i.sizeInBytes()+1,u=LV.of(this.createTrailerDict()),n+=u.sizeInBytes()+2,d=hf.forLastCrossRefSectionOffset(c),n+=d.sizeInBytes(),[2,{size:n,header:e,indirectObjects:r,xref:i,trailerDict:u,trailer:d}]}})})},t.forContext=function(e,n){return new t(e,n)},t}(),Bw=HAe;var UAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.data=n,i}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(n,i){for(var r=this.data.length,s=0;s<r;s++)n[i++]=this.data[s];return r},e.of=function(n){return new e(n)},e}(nn),Gw=UAe;var ff=function(t){return t[t.Deleted=0]="Deleted",t[t.Uncompressed=1]="Uncompressed",t[t.Compressed=2]="Compressed",t}(ff||{}),jAe=function(t){K(e,t);function e(n,i,r){r===void 0&&(r=!0);var s=t.call(this,n,r)||this;return s.computeIndex=function(){for(var o=[],a=0,l=0,c=s.entries.length;l<c;l++){var u=s.entries[l],d=s.entries[l-1];l===0?o.push(u.ref.objectNumber):u.ref.objectNumber-d.ref.objectNumber>1&&(o.push(a),o.push(u.ref.objectNumber),a=0),a+=1}return o.push(a),o},s.computeEntryTuples=function(){for(var o=new Array(s.entries.length),a=0,l=s.entries.length;a<l;a++){var c=s.entries[a];if(c.type===ff.Deleted){var u=c.type,d=c.nextFreeObjectNumber,h=c.ref;o[a]=[u,d,h.generationNumber]}if(c.type===ff.Uncompressed){var u=c.type,p=c.offset,h=c.ref;o[a]=[u,p,h.generationNumber]}if(c.type===ff.Compressed){var u=c.type,g=c.objectStreamRef,m=c.index;o[a]=[u,g.objectNumber,m]}}return o},s.computeMaxEntryByteWidths=function(){for(var o=s.entryTuplesCache.access(),a=[0,0,0],l=0,c=o.length;l<c;l++){var u=o[l],d=u[0],h=u[1],p=u[2],g=fw(d),m=fw(h),v=fw(p);g>a[0]&&(a[0]=g),m>a[1]&&(a[1]=m),v>a[2]&&(a[2]=v)}return a},s.entries=i||[],s.entryTuplesCache=br.populatedBy(s.computeEntryTuples),s.maxByteWidthsCache=br.populatedBy(s.computeMaxEntryByteWidths),s.indexCache=br.populatedBy(s.computeIndex),n.set(R.of("Type"),R.of("XRef")),s}return e.prototype.addDeletedEntry=function(n,i){var r=ff.Deleted;this.entries.push({type:r,ref:n,nextFreeObjectNumber:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(n,i){var r=ff.Uncompressed;this.entries.push({type:r,ref:n,offset:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(n,i,r){var s=ff.Compressed;this.entries.push({type:s,ref:n,objectStreamRef:i,index:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(n){var i=this,r=i.dict,s=i.entries,o=i.encode;return e.of(r.clone(n),s.slice(),o)},e.prototype.getContentsString=function(){for(var n=this.entryTuplesCache.access(),i=this.maxByteWidthsCache.access(),r="",s=0,o=n.length;s<o;s++){for(var a=n[s],l=a[0],c=a[1],u=a[2],d=$h(Jh(l)),h=$h(Jh(c)),p=$h(Jh(u)),g=i[0]-1;g>=0;g--)r+=(d[g]||0).toString(2);for(var g=i[1]-1;g>=0;g--)r+=(h[g]||0).toString(2);for(var g=i[2]-1;g>=0;g--)r+=(p[g]||0).toString(2)}return r},e.prototype.getUnencodedContents=function(){for(var n=this.entryTuplesCache.access(),i=this.maxByteWidthsCache.access(),r=new Uint8Array(this.getUnencodedContentsSize()),s=0,o=0,a=n.length;o<a;o++){for(var l=n[o],c=l[0],u=l[1],d=l[2],h=$h(Jh(c)),p=$h(Jh(u)),g=$h(Jh(d)),m=i[0]-1;m>=0;m--)r[s++]=h[m]||0;for(var m=i[1]-1;m>=0;m--)r[s++]=p[m]||0;for(var m=i[2]-1;m>=0;m--)r[s++]=g[m]||0}return r},e.prototype.getUnencodedContentsSize=function(){var n=this.maxByteWidthsCache.access(),i=mY(n);return i*this.entries.length},e.prototype.updateDict=function(){t.prototype.updateDict.call(this);var n=this.maxByteWidthsCache.access(),i=this.indexCache.access(),r=this.dict.context;this.dict.set(R.of("W"),r.obj(n)),this.dict.set(R.of("Index"),r.obj(i))},e.create=function(n,i){i===void 0&&(i=!0);var r=new e(n,[],i);return r.addDeletedEntry(Ze.of(0,65535),0),r},e.of=function(n,i,r){return r===void 0&&(r=!0),new e(n,i,r)},e}(df),VV=jAe;var WAe=function(t){K(e,t);function e(n,i,r,s){var o=t.call(this,n,i)||this;return o.encodeStreams=r,o.objectsPerStream=s,o}return e.prototype.computeBufferSize=function(){return Pe(this,void 0,void 0,function(){var n,i,r,s,o,a,l,c,g,m,u,C,d,h,v,p,g,m,v,C,b,E,T,P;return Me(this,function(x){switch(x.label){case 0:n=this.context.largestObjectNumber+1,i=Sc.forVersion(1,7),r=i.sizeInBytes()+2,s=VV.create(this.createTrailerDict(),this.encodeStreams),o=[],a=[],l=[],c=this.context.enumerateIndirectObjects(),g=0,m=c.length,x.label=1;case 1:return g<m?(u=c[g],C=u[0],d=u[1],h=C===this.context.trailerInfo.Encrypt||d instanceof Rn||d instanceof Gw||C.generationNumber!==0,h?(o.push(u),s.addUncompressedEntry(C,r),r+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,dl()]:[3,3]):[3,4]):[3,6];case 2:x.sent(),x.label=3;case 3:return[3,5];case 4:v=cm(a),p=cm(l),(!v||v.length%this.objectsPerStream===0)&&(v=[],a.push(v),p=Ze.of(n++),l.push(p)),s.addCompressedEntry(C,p,v.length),v.push(u),x.label=5;case 5:return g++,[3,1];case 6:g=0,m=a.length,x.label=7;case 7:return g<m?(v=a[g],C=l[g],b=Vw.withContextAndObjects(this.context,v,this.encodeStreams),s.addUncompressedEntry(C,r),r+=this.computeIndirectObjectSize([C,b]),o.push([C,b]),this.shouldWaitForTick(v.length)?[4,dl()]:[3,9]):[3,10];case 8:x.sent(),x.label=9;case 9:return g++,[3,7];case 10:return E=Ze.of(n++),s.dict.set(R.of("Size"),_e.of(n)),s.addUncompressedEntry(E,r),T=r,r+=this.computeIndirectObjectSize([E,s]),o.push([E,s]),P=hf.forLastCrossRefSectionOffset(T),r+=P.sizeInBytes(),[2,{size:r,header:i,indirectObjects:o,trailer:P}]}})})},e.forContext=function(n,i,r,s){return r===void 0&&(r=!0),s===void 0&&(s=50),new e(n,i,r,s)},e}(Bw),BV=WAe;var zAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.value=n,i}return e.prototype.asBytes=function(){for(var n=this.value+(this.value.length%2===1?"0":""),i=n.length,r=new Uint8Array(n.length/2),s=0,o=0;s<i;){var a=parseInt(n.substring(s,s+2),16);r[o]=a,s+=2,o+=1}return r},e.prototype.decodeText=function(){var n=this.asBytes();return XT(n)?QT(n):mR(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),i=qT(n);if(!i)throw new vR(n);return i},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,i){return n[i++]=A.LessThan,i+=an(this.value,n,i),n[i++]=A.GreaterThan,this.value.length+2},e.of=function(n){return new e(n)},e.fromText=function(n){for(var i=bY(n),r="",s=0,o=i.length;s<o;s++)r+=mc(i[s],4);return new e(r)},e}(nn),be=zAe;var qAe=function(){function t(e,n){this.encoding=e===Sm.ZapfDingbats?Mw.ZapfDingbats:e===Sm.Symbol?Mw.Symbol:Mw.WinAnsi,this.font=PX.load(e),this.fontName=this.font.FontName,this.customName=n}return t.prototype.encodeText=function(e){for(var n=this.encodeTextAsGlyphs(e),i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]=ju(n[r].code);return be.of(i.join(""))},t.prototype.widthOfTextAtSize=function(e,n){for(var i=this.encodeTextAsGlyphs(e),r=0,s=0,o=i.length;s<o;s++){var a=i[s].name,l=(i[s+1]||{}).name,c=this.font.getXAxisKerningForPair(a,l)||0;r+=this.widthOfGlyph(a)+c}var u=n/1e3;return r*u},t.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var i=n.descender,r=i===void 0?!0:i,s=this.font,o=s.Ascender,a=s.Descender,l=s.FontBBox,c=o||l[3],u=a||l[1],d=c-u;return r||(d+=a||0),d/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var n=this.font,i=n.Ascender,r=n.Descender,s=n.FontBBox,o=i||s[3],a=r||s[1];return 1e3*e/(o-a)},t.prototype.embedIntoContext=function(e,n){var i=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===Mw.WinAnsi?"WinAnsiEncoding":void 0});return n?(e.assign(n,i),n):e.register(i)},t.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},t.prototype.encodeTextAsGlyphs=function(e){for(var n=Array.from(e),i=new Array(n.length),r=0,s=n.length;r<s;r++){var o=aY(n[r]);i[r]=this.encoding.encodeUnicodeCodePoint(o)}return i},t.for=function(e,n){return new t(e,n)},t}(),pf=qAe;var u$=function(t,e){for(var n=new Array(t.length),i=0,r=t.length;i<r;i++){var s=t[i],o=c$(wR(e(s))),a=c$.apply(void 0,s.codePoints.map(YAe));n[i]=[o,a]}return KAe(n)},KAe=function(t){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+t.length+` beginbfchar
`+t.map(function(e){var n=e[0],i=e[1];return n+" "+i}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},c$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"<"+t.join("")+">"},wR=function(t){return mc(t,4)},YAe=function(t){if(_Y(t))return wR(t);if(EY(t)){var e=YL(t),n=QL(t);return""+wR(e)+wR(n)}var i=ju(t),r="0x"+i+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(r)};var QAe=function(t){var e=0,n=function(i){e|=1<<i-1};return t.fixedPitch&&n(1),t.serif&&n(2),t.symbolic&&n(3),t.script&&n(4),t.nonsymbolic&&n(6),t.italic&&n(7),t.allCap&&n(17),t.smallCap&&n(18),t.forceBold&&n(19),e},d$=function(t){var e=t["OS/2"]?t["OS/2"].sFamilyClass:0,n=QAe({fixedPitch:t.post.isFixedPitch,serif:1<=e&&e<=7,symbolic:!0,script:e===10,italic:t.head.macStyle.italic});return n};var XAe=function(t){K(e,t);function e(n){var i=t.call(this)||this;return i.value=n,i}return e.prototype.asBytes=function(){for(var n=[],i="",r=!1,s=function(d){d!==void 0&&n.push(d),r=!1},o=0,a=this.value.length;o<a;o++){var l=this.value[o],c=et(l),u=this.value[o+1];r?c===A.Newline||c===A.CarriageReturn?s():c===A.n?s(A.Newline):c===A.r?s(A.CarriageReturn):c===A.t?s(A.Tab):c===A.b?s(A.Backspace):c===A.f?s(A.FormFeed):c===A.LeftParen?s(A.LeftParen):c===A.RightParen?s(A.RightParen):c===A.Backspace?s(A.BackSlash):c>=A.Zero&&c<=A.Seven?(i+=l,(i.length===3||!(u>="0"&&u<="7"))&&(s(parseInt(i,8)),i="")):s(c):c===A.BackSlash?r=!0:s(c)}return new Uint8Array(n)},e.prototype.decodeText=function(){var n=this.asBytes();return XT(n)?QT(n):mR(n)},e.prototype.decodeDate=function(){var n=this.decodeText(),i=qT(n);if(!i)throw new vR(n);return i},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(n,i){return n[i++]=A.LeftParen,i+=an(this.value,n,i),n[i++]=A.RightParen,this.value.length+2},e.of=function(n){return new e(n)},e.fromDate=function(n){var i=Js(String(n.getUTCFullYear()),4,"0"),r=Js(String(n.getUTCMonth()+1),2,"0"),s=Js(String(n.getUTCDate()),2,"0"),o=Js(String(n.getUTCHours()),2,"0"),a=Js(String(n.getUTCMinutes()),2,"0"),l=Js(String(n.getUTCSeconds()),2,"0");return new e("D:"+i+r+s+o+a+l+"Z")},e}(nn),ht=XAe;var $Ae=function(){function t(e,n,i,r){var s=this;this.allGlyphsInFontSortedById=function(){for(var o=new Array(s.font.characterSet.length),a=0,l=o.length;a<l;a++){var c=s.font.characterSet[a];o[a]=s.font.glyphForCodePoint(c)}return gY(o.sort(pY),function(u){return u.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=n,this.fontName=this.font.postscriptName||"Font",this.customName=i,this.fontFeatures=r,this.baseFontName="",this.glyphCache=br.populatedBy(this.allGlyphsInFontSortedById)}return t.for=function(e,n,i,r){return Pe(this,void 0,void 0,function(){var s;return Me(this,function(o){switch(o.label){case 0:return[4,e.create(n)];case 1:return s=o.sent(),[2,new t(s,n,i,r)]}})})},t.prototype.encodeText=function(e){for(var n=this.font.layout(e,this.fontFeatures).glyphs,i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]=mc(n[r].id,4);return be.of(i.join(""))},t.prototype.widthOfTextAtSize=function(e,n){for(var i=this.font.layout(e,this.fontFeatures).glyphs,r=0,s=0,o=i.length;s<o;s++)r+=i[s].advanceWidth*this.scale;var a=n/1e3;return r*a},t.prototype.heightOfFontAtSize=function(e,n){n===void 0&&(n={});var i=n.descender,r=i===void 0?!0:i,s=this.font,o=s.ascent,a=s.descent,l=s.bbox,c=(o||l.maxY)*this.scale,u=(a||l.minY)*this.scale,d=c-u;return r||(d-=Math.abs(a)||0),d/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var n=this.font,i=n.ascent,r=n.descent,s=n.bbox,o=(i||s.maxY)*this.scale,a=(r||s.minY)*this.scale;return 1e3*e/(o-a)},t.prototype.embedIntoContext=function(e,n){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,n)},t.prototype.embedFontDict=function(e,n){return Pe(this,void 0,void 0,function(){var i,r,s;return Me(this,function(o){switch(o.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return i=o.sent(),r=this.embedUnicodeCmap(e),s=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[i],ToUnicode:r}),n?(e.assign(n,s),[2,n]):[2,e.register(s)]}})})},t.prototype.isCFF=function(){return this.font.cff},t.prototype.embedCIDFontDict=function(e){return Pe(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return n=r.sent(),i=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:ht.of("Adobe"),Ordering:ht.of("Identity"),Supplement:0},FontDescriptor:n,W:this.computeWidths()}),[2,e.register(i)]}})})},t.prototype.embedFontDescriptor=function(e){return Pe(this,void 0,void 0,function(){var n,i,r,s,o,a,l,c,u,d,h,p,g,m,v;return Me(this,function(C){switch(C.label){case 0:return[4,this.embedFontStream(e)];case 1:return n=C.sent(),i=this.scale,r=this.font,s=r.italicAngle,o=r.ascent,a=r.descent,l=r.capHeight,c=r.xHeight,u=this.font.bbox,d=u.minX,h=u.minY,p=u.maxX,g=u.maxY,m=e.obj((v={Type:"FontDescriptor",FontName:this.baseFontName,Flags:d$(this.font),FontBBox:[d*i,h*i,p*i,g*i],ItalicAngle:s,Ascent:o*i,Descent:a*i,CapHeight:(l||o)*i,XHeight:(c||0)*i,StemV:0},v[this.isCFF()?"FontFile3":"FontFile2"]=n,v)),[2,e.register(m)]}})})},t.prototype.serializeFont=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(e){return[2,this.fontData]})})},t.prototype.embedFontStream=function(e){return Pe(this,void 0,void 0,function(){var n,i,r;return Me(this,function(s){switch(s.label){case 0:return r=(i=e).flateStream,[4,this.serializeFont()];case 1:return n=r.apply(i,[s.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(n)]}})})},t.prototype.embedUnicodeCmap=function(e){var n=u$(this.glyphCache.access(),this.glyphId.bind(this)),i=e.flateStream(n);return e.register(i)},t.prototype.glyphId=function(e){return e?e.id:-1},t.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),n=[],i=[],r=0,s=e.length;r<s;r++){var o=e[r],a=e[r-1],l=this.glyphId(o),c=this.glyphId(a);r===0?n.push(l):l-c!==1&&(n.push(i),n.push(l),i=[]),i.push(o.advanceWidth*this.scale)}return n.push(i),n},t}(),gf=$Ae;var ZAe=function(t){K(e,t);function e(n,i,r,s){var o=t.call(this,n,i,r,s)||this;return o.subset=o.font.createSubset(),o.glyphs=[],o.glyphCache=br.populatedBy(function(){return o.glyphs}),o.glyphIdMap=new Map,o}return e.for=function(n,i,r,s){return Pe(this,void 0,void 0,function(){var o;return Me(this,function(a){switch(a.label){case 0:return[4,n.create(i)];case 1:return o=a.sent(),[2,new e(o,i,r,s)]}})})},e.prototype.encodeText=function(n){for(var i=this.font.layout(n,this.fontFeatures).glyphs,r=new Array(i.length),s=0,o=i.length;s<o;s++){var a=i[s],l=this.subset.includeGlyph(a);this.glyphs[l-1]=a,this.glyphIdMap.set(a.id,l),r[s]=mc(l,4)}return this.glyphCache.invalidate(),be.of(r.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(n){return n?this.glyphIdMap.get(n.id):-1},e.prototype.serializeFont=function(){var n=this;return new Promise(function(i,r){var s=[];n.subset.encodeStream().on("data",function(o){return s.push(o)}).on("end",function(){return i(fY(s))}).on("error",function(o){return r(o)})})},e}(gf),GV=ZAe;var SR=function(t){return t.Source="Source",t.Data="Data",t.Alternative="Alternative",t.Supplement="Supplement",t.EncryptedPayload="EncryptedPayload",t.FormData="EncryptedPayload",t.Schema="Schema",t.Unspecified="Unspecified",t}(SR||{}),JAe=function(){function t(e,n,i){i===void 0&&(i={}),this.fileData=e,this.fileName=n,this.options=i}return t.for=function(e,n,i){return i===void 0&&(i={}),new t(e,n,i)},t.prototype.embedIntoContext=function(e,n){return Pe(this,void 0,void 0,function(){var i,r,s,o,a,l,c,u,d;return Me(this,function(h){return i=this.options,r=i.mimeType,s=i.description,o=i.creationDate,a=i.modificationDate,l=i.afRelationship,c=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:r??void 0,Params:{Size:this.fileData.length,CreationDate:o?ht.fromDate(o):void 0,ModDate:a?ht.fromDate(a):void 0}}),u=e.register(c),d=e.obj({Type:"Filespec",F:ht.of(this.fileName),UF:be.fromText(this.fileName),EF:{F:u},Desc:s?be.fromText(s):void 0,AFRelationship:l??void 0}),n?(e.assign(n,d),[2,n]):[2,e.register(d)]})})},t}(),HV=JAe;var h$=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],Hw=function(t){return t.DeviceGray="DeviceGray",t.DeviceRGB="DeviceRGB",t.DeviceCMYK="DeviceCMYK",t}(Hw||{}),ePe={1:Hw.DeviceGray,3:Hw.DeviceRGB,4:Hw.DeviceCMYK},tPe=function(){function t(e,n,i,r,s){this.imageData=e,this.bitsPerComponent=n,this.width=i,this.height=r,this.colorSpace=s}return t.for=function(e){return Pe(this,void 0,void 0,function(){var n,i,r,s,o,a,l,c,u,d;return Me(this,function(h){if(n=new DataView(e.buffer),i=n.getUint16(0),i!==65496)throw new Error("SOI not found in JPEG");for(r=2;r<n.byteLength&&(s=n.getUint16(r),r+=2,!h$.includes(s));)r+=n.getUint16(r);if(!h$.includes(s))throw new Error("Invalid JPEG");if(r+=2,o=n.getUint8(r++),a=n.getUint16(r),r+=2,l=n.getUint16(r),r+=2,c=n.getUint8(r++),u=ePe[c],!u)throw new Error("Unknown JPEG channel.");return d=u,[2,new t(e,o,l,a,d)]})})},t.prototype.embedIntoContext=function(e,n){return Pe(this,void 0,void 0,function(){var i;return Me(this,function(r){return i=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===Hw.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),n?(e.assign(n,i),[2,n]):[2,e.register(i)]})})},t}(),Uw=tPe;var f$=vS(Fw()),se={};se.toRGBA8=function(t){var e=t.width,n=t.height;if(t.tabs.acTL==null)return[se.toRGBA8.decodeImage(t.data,e,n,t).buffer];var i=[];t.frames[0].data==null&&(t.frames[0].data=t.data);for(var r=e*n*4,s=new Uint8Array(r),o=new Uint8Array(r),a=new Uint8Array(r),l=0;l<t.frames.length;l++){var c=t.frames[l],u=c.rect.x,d=c.rect.y,h=c.rect.width,p=c.rect.height,g=se.toRGBA8.decodeImage(c.data,h,p,t);if(l!=0)for(var m=0;m<r;m++)a[m]=s[m];if(c.blend==0?se._copyTile(g,h,p,s,e,n,u,d,0):c.blend==1&&se._copyTile(g,h,p,s,e,n,u,d,1),i.push(s.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)se._copyTile(o,h,p,s,e,n,u,d,0);else if(c.dispose==2)for(var m=0;m<r;m++)s[m]=a[m]}}return i};se.toRGBA8.decodeImage=function(t,e,n,i){var r=e*n,s=se.decode._getBPP(i),o=Math.ceil(e*s/8),a=new Uint8Array(r*4),l=new Uint32Array(a.buffer),c=i.ctype,u=i.depth,d=se._bin.readUshort,h=Date.now();if(c==6){var p=r<<2;if(u==8)for(var g=0;g<p;g+=4)a[g]=t[g],a[g+1]=t[g+1],a[g+2]=t[g+2],a[g+3]=t[g+3];if(u==16)for(var g=0;g<p;g++)a[g]=t[g<<1]}else if(c==2){var m=i.tabs.tRNS;if(m==null){if(u==8)for(var g=0;g<r;g++){var v=g*3;l[g]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v]}if(u==16)for(var g=0;g<r;g++){var v=g*6;l[g]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v]}}else{var C=m[0],b=m[1],E=m[2];if(u==8)for(var g=0;g<r;g++){var T=g<<2,v=g*3;l[g]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v],t[v]==C&&t[v+1]==b&&t[v+2]==E&&(a[T+3]=0)}if(u==16)for(var g=0;g<r;g++){var T=g<<2,v=g*6;l[g]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v],d(t,v)==C&&d(t,v+2)==b&&d(t,v+4)==E&&(a[T+3]=0)}}}else if(c==3){var P=i.tabs.PLTE,x=i.tabs.tRNS,_=x?x.length:0;if(u==1)for(var S=0;S<n;S++)for(var D=S*o,O=S*e,g=0;g<e;g++){var T=O+g<<2,F=t[D+(g>>3)]>>7-((g&7)<<0)&1,k=3*F;a[T]=P[k],a[T+1]=P[k+1],a[T+2]=P[k+2],a[T+3]=F<_?x[F]:255}if(u==2)for(var S=0;S<n;S++)for(var D=S*o,O=S*e,g=0;g<e;g++){var T=O+g<<2,F=t[D+(g>>2)]>>6-((g&3)<<1)&3,k=3*F;a[T]=P[k],a[T+1]=P[k+1],a[T+2]=P[k+2],a[T+3]=F<_?x[F]:255}if(u==4)for(var S=0;S<n;S++)for(var D=S*o,O=S*e,g=0;g<e;g++){var T=O+g<<2,F=t[D+(g>>1)]>>4-((g&1)<<2)&15,k=3*F;a[T]=P[k],a[T+1]=P[k+1],a[T+2]=P[k+2],a[T+3]=F<_?x[F]:255}if(u==8)for(var g=0;g<r;g++){var T=g<<2,F=t[g],k=3*F;a[T]=P[k],a[T+1]=P[k+1],a[T+2]=P[k+2],a[T+3]=F<_?x[F]:255}}else if(c==4){if(u==8)for(var g=0;g<r;g++){var T=g<<2,M=g<<1,ce=t[M];a[T]=ce,a[T+1]=ce,a[T+2]=ce,a[T+3]=t[M+1]}if(u==16)for(var g=0;g<r;g++){var T=g<<2,M=g<<2,ce=t[M];a[T]=ce,a[T+1]=ce,a[T+2]=ce,a[T+3]=t[M+2]}}else if(c==0)for(var C=i.tabs.tRNS?i.tabs.tRNS:-1,S=0;S<n;S++){var xe=S*o,Ue=S*e;if(u==1)for(var Ce=0;Ce<e;Ce++){var ce=255*(t[xe+(Ce>>>3)]>>>7-(Ce&7)&1),St=ce==C*255?0:255;l[Ue+Ce]=St<<24|ce<<16|ce<<8|ce}else if(u==2)for(var Ce=0;Ce<e;Ce++){var ce=85*(t[xe+(Ce>>>2)]>>>6-((Ce&3)<<1)&3),St=ce==C*85?0:255;l[Ue+Ce]=St<<24|ce<<16|ce<<8|ce}else if(u==4)for(var Ce=0;Ce<e;Ce++){var ce=17*(t[xe+(Ce>>>1)]>>>4-((Ce&1)<<2)&15),St=ce==C*17?0:255;l[Ue+Ce]=St<<24|ce<<16|ce<<8|ce}else if(u==8)for(var Ce=0;Ce<e;Ce++){var ce=t[xe+Ce],St=ce==C?0:255;l[Ue+Ce]=St<<24|ce<<16|ce<<8|ce}else if(u==16)for(var Ce=0;Ce<e;Ce++){var ce=t[xe+(Ce<<1)],St=d(t,xe+(Ce<<g))==C?0:255;l[Ue+Ce]=St<<24|ce<<16|ce<<8|ce}}return a};se.decode=function(t){for(var e=new Uint8Array(t),n=8,i=se._bin,r=i.readUshort,s=i.readUint,o={tabs:{},frames:[]},a=new Uint8Array(e.length),l=0,c,u=0,d=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(e[h]!=d[h])throw"The input is not a PNG file!";for(;n<e.length;){var p=i.readUint(e,n);n+=4;var g=i.readASCII(e,n,4);if(n+=4,g=="IHDR")se.decode._IHDR(e,n,o);else if(g=="IDAT"){for(var h=0;h<p;h++)a[l+h]=e[n+h];l+=p}else if(g=="acTL")o.tabs[g]={num_frames:s(e,n),num_plays:s(e,n+4)},c=new Uint8Array(e.length);else if(g=="fcTL"){if(u!=0){var m=o.frames[o.frames.length-1];m.data=se.decode._decompress(o,c.slice(0,u),m.rect.width,m.rect.height),u=0}var v={x:s(e,n+12),y:s(e,n+16),width:s(e,n+4),height:s(e,n+8)},C=r(e,n+22);C=r(e,n+20)/(C==0?100:C);var b={rect:v,delay:Math.round(C*1e3),dispose:e[n+24],blend:e[n+25]};o.frames.push(b)}else if(g=="fdAT"){for(var h=0;h<p-4;h++)c[u+h]=e[n+h+4];u+=p-4}else if(g=="pHYs")o.tabs[g]=[i.readUint(e,n),i.readUint(e,n+4),e[n+8]];else if(g=="cHRM"){o.tabs[g]=[];for(var h=0;h<8;h++)o.tabs[g].push(i.readUint(e,n+h*4))}else if(g=="tEXt"){o.tabs[g]==null&&(o.tabs[g]={});var E=i.nextZero(e,n),T=i.readASCII(e,n,E-n),P=i.readASCII(e,E+1,n+p-E-1);o.tabs[g][T]=P}else if(g=="iTXt"){o.tabs[g]==null&&(o.tabs[g]={});var E=0,x=n;E=i.nextZero(e,x);var T=i.readASCII(e,x,E-x);x=E+1;var _=e[x],S=e[x+1];x+=2,E=i.nextZero(e,x);var D=i.readASCII(e,x,E-x);x=E+1,E=i.nextZero(e,x);var O=i.readUTF8(e,x,E-x);x=E+1;var P=i.readUTF8(e,x,p-(x-n));o.tabs[g][T]=P}else if(g=="PLTE")o.tabs[g]=i.readBytes(e,n,p);else if(g=="hIST"){var F=o.tabs.PLTE.length/3;o.tabs[g]=[];for(var h=0;h<F;h++)o.tabs[g].push(r(e,n+h*2))}else if(g=="tRNS")o.ctype==3?o.tabs[g]=i.readBytes(e,n,p):o.ctype==0?o.tabs[g]=r(e,n):o.ctype==2&&(o.tabs[g]=[r(e,n),r(e,n+2),r(e,n+4)]);else if(g=="gAMA")o.tabs[g]=i.readUint(e,n)/1e5;else if(g=="sRGB")o.tabs[g]=e[n];else if(g=="bKGD")o.ctype==0||o.ctype==4?o.tabs[g]=[r(e,n)]:o.ctype==2||o.ctype==6?o.tabs[g]=[r(e,n),r(e,n+2),r(e,n+4)]:o.ctype==3&&(o.tabs[g]=e[n]);else if(g=="IEND")break;n+=p;var k=i.readUint(e,n);n+=4}if(u!=0){var m=o.frames[o.frames.length-1];m.data=se.decode._decompress(o,c.slice(0,u),m.rect.width,m.rect.height),u=0}return o.data=se.decode._decompress(o,a,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o};se.decode._decompress=function(t,e,n,i){var a=Date.now(),r=se.decode._getBPP(t),s=Math.ceil(n*r/8),o=new Uint8Array((s+1+t.interlace)*i);e=se.decode._inflate(e,o);var a=Date.now();return t.interlace==0?e=se.decode._filterZero(e,t,0,n,i):t.interlace==1&&(e=se.decode._readInterlace(e,t)),e};se.decode._inflate=function(t,e){var n=se.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e);return n};se.inflateRaw=function(){var t={};return t.H={},t.H.N=function(e,n){var i=Uint8Array,r=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,p,g;if(e[0]==3&&e[1]==0)return n||new i(0);var m=t.H,v=m.b,C=m.e,b=m.R,E=m.n,T=m.A,P=m.Z,x=m.m,_=n==null;for(_&&(n=new i(e.length>>>2<<3));r==0;){if(r=v(e,h,1),s=v(e,h+1,2),h+=3,s==0){h&7&&(h+=8-(h&7));var S=(h>>>3)+4,D=e[S-4]|e[S-3]<<8;_&&(n=t.H.W(n,d+D)),n.set(new i(e.buffer,e.byteOffset+S,D),d),h=S+D<<3,d+=D;continue}if(_&&(n=t.H.W(n,d+(1<<17))),s==1&&(p=x.J,g=x.h,c=511,u=31),s==2){o=C(e,h,5)+257,a=C(e,h+5,5)+1,l=C(e,h+10,4)+4,h+=14;for(var O=h,F=1,k=0;k<38;k+=2)x.Q[k]=0,x.Q[k+1]=0;for(var k=0;k<l;k++){var M=C(e,h+k*3,3);x.Q[(x.X[k]<<1)+1]=M,M>F&&(F=M)}h+=3*l,E(x.Q,F),T(x.Q,F,x.u),p=x.w,g=x.d,h=b(x.u,(1<<F)-1,o+a,e,h,x.v);var ce=m.V(x.v,0,o,x.C);c=(1<<ce)-1;var xe=m.V(x.v,o,a,x.D);u=(1<<xe)-1,E(x.C,ce),T(x.C,ce,p),E(x.D,xe),T(x.D,xe,g)}for(;;){var Ue=p[P(e,h)&c];h+=Ue&15;var Ce=Ue>>>4;if(!(Ce>>>8))n[d++]=Ce;else{if(Ce==256)break;var St=d+Ce-254;if(Ce>264){var cn=x.q[Ce-257];St=d+(cn>>>3)+C(e,h,cn&7),h+=cn&7}var Is=g[P(e,h)&u];h+=Is&15;var jo=Is>>>4,Sn=x.c[jo],Bt=(Sn>>>4)+v(e,h,Sn&15);for(h+=Sn&15;d<St;)n[d]=n[d++-Bt],n[d]=n[d++-Bt],n[d]=n[d++-Bt],n[d]=n[d++-Bt];d=St}}}return n.length==d?n:n.slice(0,d)},t.H.W=function(e,n){var i=e.length;if(n<=i)return e;var r=new Uint8Array(i<<1);return r.set(e,0),r},t.H.R=function(e,n,i,r,s,o){for(var a=t.H.e,l=t.H.Z,c=0;c<i;){var u=e[l(r,s)&n];s+=u&15;var d=u>>>4;if(d<=15)o[c]=d,c++;else{var h=0,p=0;d==16?(p=3+a(r,s,2),s+=2,h=o[c-1]):d==17?(p=3+a(r,s,3),s+=3):d==18&&(p=11+a(r,s,7),s+=7);for(var g=c+p;c<g;)o[c]=h,c++}}return s},t.H.V=function(e,n,i,r){for(var s=0,o=0,a=r.length>>>1;o<i;){var l=e[o+n];r[o<<1]=0,r[(o<<1)+1]=l,l>s&&(s=l),o++}for(;o<a;)r[o<<1]=0,r[(o<<1)+1]=0,o++;return s},t.H.n=function(e,n){for(var i=t.H.m,r=e.length,s,o,a,l,c,u=i.j,l=0;l<=n;l++)u[l]=0;for(l=1;l<r;l+=2)u[e[l]]++;var d=i.K;for(s=0,u[0]=0,o=1;o<=n;o++)s=s+u[o-1]<<1,d[o]=s;for(a=0;a<r;a+=2)c=e[a+1],c!=0&&(e[a]=d[c],d[c]++)},t.H.A=function(e,n,i){for(var r=e.length,s=t.H.m,o=s.r,a=0;a<r;a+=2)if(e[a+1]!=0)for(var l=a>>1,c=e[a+1],u=l<<4|c,d=n-c,h=e[a]<<d,p=h+(1<<d);h!=p;){var g=o[h]>>>15-n;i[g]=u,h++}},t.H.l=function(e,n){for(var i=t.H.m.r,r=15-n,s=0;s<e.length;s+=2){var o=e[s]<<n-e[s+1];e[s]=i[o]>>>r}},t.H.M=function(e,n,i){i=i<<(n&7);var r=n>>>3;e[r]|=i,e[r+1]|=i>>>8},t.H.I=function(e,n,i){i=i<<(n&7);var r=n>>>3;e[r]|=i,e[r+1]|=i>>>8,e[r+2]|=i>>>16},t.H.e=function(e,n,i){return(e[n>>>3]|e[(n>>>3)+1]<<8)>>>(n&7)&(1<<i)-1},t.H.b=function(e,n,i){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)&(1<<i)-1},t.H.Z=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16)>>>(n&7)},t.H.i=function(e,n){return(e[n>>>3]|e[(n>>>3)+1]<<8|e[(n>>>3)+2]<<16|e[(n>>>3)+3]<<24)>>>(n&7)},t.H.m=function(){var e=Uint16Array,n=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=t.H.m,n=32768,i=0;i<n;i++){var r=i;r=(r&2863311530)>>>1|(r&1431655765)<<1,r=(r&3435973836)>>>2|(r&858993459)<<2,r=(r&4042322160)>>>4|(r&252645135)<<4,r=(r&4278255360)>>>8|(r&16711935)<<8,e.r[i]=(r>>>16|r<<16)>>>17}function s(o,a,l){for(;a--!=0;)o.push(0,l)}for(var i=0;i<32;i++)e.q[i]=e.S[i]<<3|e.T[i],e.c[i]=e.p[i]<<4|e.z[i];s(e._,144,8),s(e._,112,9),s(e._,24,7),s(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),s(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),s(e.Q,19,0),s(e.C,286,0),s(e.D,30,0),s(e.v,320,0)}(),t.H.N}();se.decode._readInterlace=function(t,e){for(var n=e.width,i=e.height,r=se.decode._getBPP(e),s=r>>3,o=Math.ceil(n*r/8),a=new Uint8Array(i*o),l=0,c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],p=0;p<7;){for(var g=d[p],m=h[p],v=0,C=0,b=c[p];b<i;)b+=g,C++;for(var E=u[p];E<n;)E+=m,v++;var T=Math.ceil(v*r/8);se.decode._filterZero(t,e,l,v,C);for(var P=0,x=c[p];x<i;){for(var _=u[p],S=l+P*T<<3;_<n;){if(r==1){var D=t[S>>3];D=D>>7-(S&7)&1,a[x*o+(_>>3)]|=D<<7-((_&7)<<0)}if(r==2){var D=t[S>>3];D=D>>6-(S&7)&3,a[x*o+(_>>2)]|=D<<6-((_&3)<<1)}if(r==4){var D=t[S>>3];D=D>>4-(S&7)&15,a[x*o+(_>>1)]|=D<<4-((_&1)<<2)}if(r>=8)for(var O=x*o+_*s,F=0;F<s;F++)a[O+F]=t[(S>>3)+F];S+=r,_+=m}P++,x+=g}v*C!=0&&(l+=C*(1+T)),p=p+1}return a};se.decode._getBPP=function(t){var e=[1,null,3,1,2,null,4][t.ctype];return e*t.depth};se.decode._filterZero=function(t,e,n,i,r){var s=se.decode._getBPP(e),o=Math.ceil(i*s/8),a=se.decode._paeth;s=Math.ceil(s/8);var l=0,c=1,u=t[n],d=0;if(u>1&&(t[n]=[0,0,1][u-2]),u==3)for(d=s;d<o;d++)t[d+1]=t[d+1]+(t[d+1-s]>>>1)&255;for(var h=0;h<r;h++)if(l=n+h*o,c=l+h+1,u=t[c-1],d=0,u==0)for(;d<o;d++)t[l+d]=t[c+d];else if(u==1){for(;d<s;d++)t[l+d]=t[c+d];for(;d<o;d++)t[l+d]=t[c+d]+t[l+d-s]}else if(u==2)for(;d<o;d++)t[l+d]=t[c+d]+t[l+d-o];else if(u==3){for(;d<s;d++)t[l+d]=t[c+d]+(t[l+d-o]>>>1);for(;d<o;d++)t[l+d]=t[c+d]+(t[l+d-o]+t[l+d-s]>>>1)}else{for(;d<s;d++)t[l+d]=t[c+d]+a(0,t[l+d-o],0);for(;d<o;d++)t[l+d]=t[c+d]+a(t[l+d-s],t[l+d-o],t[l+d-s-o])}return t};se.decode._paeth=function(t,e,n){var i=t+e-n,r=i-t,s=i-e,o=i-n;return r*r<=s*s&&r*r<=o*o?t:s*s<=o*o?e:n};se.decode._IHDR=function(t,e,n){var i=se._bin;n.width=i.readUint(t,e),e+=4,n.height=i.readUint(t,e),e+=4,n.depth=t[e],e++,n.ctype=t[e],e++,n.compress=t[e],e++,n.filter=t[e],e++,n.interlace=t[e],e++};se._bin={nextZero:function(t,e){for(;t[e]!=0;)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=n&255},readUint:function(t,e){return t[e]*(256*256*256)+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255},readASCII:function(t,e,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},writeASCII:function(t,e,n){for(var i=0;i<n.length;i++)t[e+i]=n.charCodeAt(i)},readBytes:function(t,e,n){for(var i=[],r=0;r<n;r++)i.push(t[e+r]);return i},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){for(var i="",r,s=0;s<n;s++)i+="%"+se._bin.pad(t[e+s].toString(16));try{r=decodeURIComponent(i)}catch{return se._bin.readASCII(t,e,n)}return r}};se._copyTile=function(t,e,n,i,r,s,o,a,l){for(var c=Math.min(e,r),u=Math.min(n,s),d=0,h=0,p=0;p<u;p++)for(var g=0;g<c;g++)if(o>=0&&a>=0?(d=p*e+g<<2,h=(a+p)*r+o+g<<2):(d=(-a+p)*e-o+g<<2,h=p*r+g<<2),l==0)i[h]=t[d],i[h+1]=t[d+1],i[h+2]=t[d+2],i[h+3]=t[d+3];else if(l==1){var m=t[d+3]*.00392156862745098,v=t[d]*m,C=t[d+1]*m,b=t[d+2]*m,E=i[h+3]*(1/255),T=i[h]*E,P=i[h+1]*E,x=i[h+2]*E,_=1-m,S=m+E*_,D=S==0?0:1/S;i[h+3]=255*S,i[h+0]=(v+T*_)*D,i[h+1]=(C+P*_)*D,i[h+2]=(b+x*_)*D}else if(l==2){var m=t[d+3],v=t[d],C=t[d+1],b=t[d+2],E=i[h+3],T=i[h],P=i[h+1],x=i[h+2];m==E&&v==T&&C==P&&b==x?(i[h]=0,i[h+1]=0,i[h+2]=0,i[h+3]=0):(i[h]=v,i[h+1]=C,i[h+2]=b,i[h+3]=m)}else if(l==3){var m=t[d+3],v=t[d],C=t[d+1],b=t[d+2],E=i[h+3],T=i[h],P=i[h+1],x=i[h+2];if(m==E&&v==T&&C==P&&b==x)continue;if(m<220&&E>20)return!1}return!0};se.encode=function(t,e,n,i,r,s,o){i==null&&(i=0),o==null&&(o=!1);var a=se.encode.compress(t,e,n,i,[!1,!1,!1,0,o]);return se.encode.compressPNG(a,-1),se.encode._main(a,e,n,r,s)};se.encodeLL=function(t,e,n,i,r,s,o,a){for(var l={ctype:0+(i==1?0:2)+(r==0?0:4),depth:s,frames:[]},c=Date.now(),u=(i+r)*s,d=u*e,h=0;h<t.length;h++)l.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(t[h]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(d/8)});se.encode.compressPNG(l,0,!0);var p=se.encode._main(l,e,n,o,a);return p};se.encode._main=function(t,e,n,i,r){r==null&&(r={});var s=se.crc.crc,o=se._bin.writeUint,a=se._bin.writeUshort,l=se._bin.writeASCII,c=8,u=t.frames.length>1,d=!1,h=33+(u?20:0);if(r.sRGB!=null&&(h+=13),r.pHYs!=null&&(h+=21),t.ctype==3){for(var p=t.plte.length,g=0;g<p;g++)t.plte[g]>>>24!=255&&(d=!0);h+=8+p*3+4+(d?8+p*1+4:0)}for(var m=0;m<t.frames.length;m++){var v=t.frames[m];u&&(h+=38),h+=v.cimg.length+12,m!=0&&(h+=4)}h+=12;for(var C=new Uint8Array(h),b=[137,80,78,71,13,10,26,10],g=0;g<8;g++)C[g]=b[g];if(o(C,c,13),c+=4,l(C,c,"IHDR"),c+=4,o(C,c,e),c+=4,o(C,c,n),c+=4,C[c]=t.depth,c++,C[c]=t.ctype,c++,C[c]=0,c++,C[c]=0,c++,C[c]=0,c++,o(C,c,s(C,c-17,17)),c+=4,r.sRGB!=null&&(o(C,c,1),c+=4,l(C,c,"sRGB"),c+=4,C[c]=r.sRGB,c++,o(C,c,s(C,c-5,5)),c+=4),r.pHYs!=null&&(o(C,c,9),c+=4,l(C,c,"pHYs"),c+=4,o(C,c,r.pHYs[0]),c+=4,o(C,c,r.pHYs[1]),c+=4,C[c]=r.pHYs[2],c++,o(C,c,s(C,c-13,13)),c+=4),u&&(o(C,c,8),c+=4,l(C,c,"acTL"),c+=4,o(C,c,t.frames.length),c+=4,o(C,c,r.loop!=null?r.loop:0),c+=4,o(C,c,s(C,c-12,12)),c+=4),t.ctype==3){var p=t.plte.length;o(C,c,p*3),c+=4,l(C,c,"PLTE"),c+=4;for(var g=0;g<p;g++){var E=g*3,T=t.plte[g],P=T&255,x=T>>>8&255,_=T>>>16&255;C[c+E+0]=P,C[c+E+1]=x,C[c+E+2]=_}if(c+=p*3,o(C,c,s(C,c-p*3-4,p*3+4)),c+=4,d){o(C,c,p),c+=4,l(C,c,"tRNS"),c+=4;for(var g=0;g<p;g++)C[c+g]=t.plte[g]>>>24&255;c+=p,o(C,c,s(C,c-p-4,p+4)),c+=4}}for(var S=0,m=0;m<t.frames.length;m++){var v=t.frames[m];u&&(o(C,c,26),c+=4,l(C,c,"fcTL"),c+=4,o(C,c,S++),c+=4,o(C,c,v.rect.width),c+=4,o(C,c,v.rect.height),c+=4,o(C,c,v.rect.x),c+=4,o(C,c,v.rect.y),c+=4,a(C,c,i[m]),c+=2,a(C,c,1e3),c+=2,C[c]=v.dispose,c++,C[c]=v.blend,c++,o(C,c,s(C,c-30,30)),c+=4);var D=v.cimg,p=D.length;o(C,c,p+(m==0?0:4)),c+=4;var O=c;l(C,c,m==0?"IDAT":"fdAT"),c+=4,m!=0&&(o(C,c,S++),c+=4),C.set(D,c),c+=p,o(C,c,s(C,O,c-O)),c+=4}return o(C,c,0),c+=4,l(C,c,"IEND"),c+=4,o(C,c,s(C,c-4,4)),c+=4,C.buffer};se.encode.compressPNG=function(t,e,n){for(var i=0;i<t.frames.length;i++){var r=t.frames[i],s=r.rect.width,o=r.rect.height,a=new Uint8Array(o*r.bpl+o);r.cimg=se.encode._filterZero(r.img,o,r.bpp,r.bpl,a,e,n)}};se.encode.compress=function(t,e,n,i,r){for(var s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=6,d=8,h=255,p=0;p<t.length;p++)for(var g=new Uint8Array(t[p]),m=g.length,v=0;v<m;v+=4)h&=g[v+3];var C=h!=255,b=se.encode.framize(t,e,n,s,o,a),E={},T=[],P=[];if(i!=0){for(var x=[],v=0;v<b.length;v++)x.push(b[v].img.buffer);for(var _=se.encode.concatRGBA(x),S=se.quantize(_,i),D=0,O=new Uint8Array(S.abuf),v=0;v<b.length;v++){var F=b[v].img,k=F.length;P.push(new Uint8Array(S.inds.buffer,D>>2,k>>2));for(var p=0;p<k;p+=4)F[p]=O[D+p],F[p+1]=O[D+p+1],F[p+2]=O[D+p+2],F[p+3]=O[D+p+3];D+=k}for(var v=0;v<S.plte.length;v++)T.push(S.plte[v].est.rgba)}else for(var p=0;p<b.length;p++){var M=b[p],ce=new Uint32Array(M.img.buffer),xe=M.rect.width,m=ce.length,Ue=new Uint8Array(m);P.push(Ue);for(var v=0;v<m;v++){var Ce=ce[v];if(v!=0&&Ce==ce[v-1])Ue[v]=Ue[v-1];else if(v>xe&&Ce==ce[v-xe])Ue[v]=Ue[v-xe];else{var St=E[Ce];if(St==null&&(E[Ce]=St=T.length,T.push(Ce),T.length>=300))break;Ue[v]=St}}}var cn=T.length;cn<=256&&c==!1&&(cn<=2?d=1:cn<=4?d=2:cn<=16?d=4:d=8,d=Math.max(d,l));for(var p=0;p<b.length;p++){var M=b[p],Is=M.rect.x,jo=M.rect.y,xe=M.rect.width,Sn=M.rect.height,Bt=M.img,Dl=new Uint32Array(Bt.buffer),ci=4*xe,Wo=4;if(cn<=256&&c==!1){ci=Math.ceil(d*xe/8);for(var Xn=new Uint8Array(ci*Sn),rs=P[p],xa=0;xa<Sn;xa++){var v=xa*ci,zo=xa*xe;if(d==8)for(var Xt=0;Xt<xe;Xt++)Xn[v+Xt]=rs[zo+Xt];else if(d==4)for(var Xt=0;Xt<xe;Xt++)Xn[v+(Xt>>1)]|=rs[zo+Xt]<<4-(Xt&1)*4;else if(d==2)for(var Xt=0;Xt<xe;Xt++)Xn[v+(Xt>>2)]|=rs[zo+Xt]<<6-(Xt&3)*2;else if(d==1)for(var Xt=0;Xt<xe;Xt++)Xn[v+(Xt>>3)]|=rs[zo+Xt]<<7-(Xt&7)*1}Bt=Xn,u=3,Wo=1}else if(C==!1&&b.length==1){for(var Xn=new Uint8Array(xe*Sn*3),pd=xe*Sn,v=0;v<pd;v++){var F=v*3,Fa=v*4;Xn[F]=Bt[Fa],Xn[F+1]=Bt[Fa+1],Xn[F+2]=Bt[Fa+2]}Bt=Xn,u=2,Wo=3,ci=3*xe}M.img=Bt,M.bpl=ci,M.bpp=Wo}return{ctype:u,depth:d,plte:T,frames:b}};se.encode.framize=function(t,e,n,i,r,s){for(var o=[],a=0;a<t.length;a++){var l=new Uint8Array(t[a]),c=new Uint32Array(l.buffer),u,d=0,h=0,p=e,g=n,m=i?1:0;if(a!=0){for(var v=s||i||a==1||o[a-2].dispose!=0?1:2,C=0,b=1e9,E=0;E<v;E++){for(var M=new Uint8Array(t[a-1-E]),T=new Uint32Array(t[a-1-E]),P=e,x=n,_=-1,S=-1,D=0;D<n;D++)for(var O=0;O<e;O++){var F=D*e+O;c[F]!=T[F]&&(O<P&&(P=O),O>_&&(_=O),D<x&&(x=D),D>S&&(S=D))}_==-1&&(P=x=_=S=0),r&&((P&1)==1&&P--,(x&1)==1&&x--);var k=(_-P+1)*(S-x+1);k<b&&(b=k,C=E,d=P,h=x,p=_-P+1,g=S-x+1)}var M=new Uint8Array(t[a-1-C]);C==1&&(o[a-1].dispose=2),u=new Uint8Array(p*g*4),se._copyTile(M,e,n,u,p,g,-d,-h,0),m=se._copyTile(l,e,n,u,p,g,-d,-h,3)?1:0,m==1?se.encode._prepareDiff(l,e,n,u,{x:d,y:h,width:p,height:g}):se._copyTile(l,e,n,u,p,g,-d,-h,0)}else u=l.slice(0);o.push({rect:{x:d,y:h,width:p,height:g},img:u,blend:m,dispose:0})}if(i)for(var a=0;a<o.length;a++){var ce=o[a];if(ce.blend!=1){var xe=ce.rect,Ue=o[a-1].rect,Ce=Math.min(xe.x,Ue.x),St=Math.min(xe.y,Ue.y),cn=Math.max(xe.x+xe.width,Ue.x+Ue.width),Is=Math.max(xe.y+xe.height,Ue.y+Ue.height),jo={x:Ce,y:St,width:cn-Ce,height:Is-St};o[a-1].dispose=1,a-1!=0&&se.encode._updateFrame(t,e,n,o,a-1,jo,r),se.encode._updateFrame(t,e,n,o,a,jo,r)}}var Sn=0;if(t.length!=1)for(var F=0;F<o.length;F++){var ce=o[F];Sn+=ce.rect.width*ce.rect.height}return o};se.encode._updateFrame=function(t,e,n,i,r,s,o){for(var a=Uint8Array,l=Uint32Array,c=new a(t[r-1]),u=new l(t[r-1]),d=r+1<t.length?new a(t[r+1]):null,h=new a(t[r]),p=new l(h.buffer),g=e,m=n,v=-1,C=-1,b=0;b<s.height;b++)for(var E=0;E<s.width;E++){var T=s.x+E,P=s.y+b,x=P*e+T,_=p[x];_==0||i[r-1].dispose==0&&u[x]==_&&(d==null||d[x*4+3]!=0)||(T<g&&(g=T),T>v&&(v=T),P<m&&(m=P),P>C&&(C=P))}v==-1&&(g=m=v=C=0),o&&((g&1)==1&&g--,(m&1)==1&&m--),s={x:g,y:m,width:v-g+1,height:C-m+1};var S=i[r];S.rect=s,S.blend=1,S.img=new Uint8Array(s.width*s.height*4),i[r-1].dispose==0?(se._copyTile(c,e,n,S.img,s.width,s.height,-s.x,-s.y,0),se.encode._prepareDiff(h,e,n,S.img,s)):se._copyTile(h,e,n,S.img,s.width,s.height,-s.x,-s.y,0)};se.encode._prepareDiff=function(t,e,n,i,r){se._copyTile(t,e,n,i,r.width,r.height,-r.x,-r.y,2)};se.encode._filterZero=function(t,e,n,i,r,s,o){var a=[],l=[0,1,2,3,4];s!=-1?l=[s]:(e*i>5e5||n==1)&&(l=[0]);var c;o&&(c={level:0});for(var u=o&&UZIP!=null?UZIP:f$.default,d=0;d<l.length;d++){for(var h=0;h<e;h++)se.encode._filterLine(r,t,h,i,n,l[d]);a.push(u.deflate(r,c))}for(var p,g=1e9,d=0;d<a.length;d++)a[d].length<g&&(p=d,g=a[d].length);return a[p]};se.encode._filterLine=function(t,e,n,i,r,s){var o=n*i,a=o+n,l=se.decode._paeth;if(t[a]=s,a++,s==0)if(i<500)for(var c=0;c<i;c++)t[a+c]=e[o+c];else t.set(new Uint8Array(e.buffer,o,i),a);else if(s==1){for(var c=0;c<r;c++)t[a+c]=e[o+c];for(var c=r;c<i;c++)t[a+c]=e[o+c]-e[o+c-r]+256&255}else if(n==0){for(var c=0;c<r;c++)t[a+c]=e[o+c];if(s==2)for(var c=r;c<i;c++)t[a+c]=e[o+c];if(s==3)for(var c=r;c<i;c++)t[a+c]=e[o+c]-(e[o+c-r]>>1)+256&255;if(s==4)for(var c=r;c<i;c++)t[a+c]=e[o+c]-l(e[o+c-r],0,0)+256&255}else{if(s==2)for(var c=0;c<i;c++)t[a+c]=e[o+c]+256-e[o+c-i]&255;if(s==3){for(var c=0;c<r;c++)t[a+c]=e[o+c]+256-(e[o+c-i]>>1)&255;for(var c=r;c<i;c++)t[a+c]=e[o+c]+256-(e[o+c-i]+e[o+c-r]>>1)&255}if(s==4){for(var c=0;c<r;c++)t[a+c]=e[o+c]+256-l(0,e[o+c-i],0)&255;for(var c=r;c<i;c++)t[a+c]=e[o+c]+256-l(e[o+c-r],e[o+c-i],e[o+c-r-i])&255}}};se.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;t[e]=n}return t}(),update:function(t,e,n,i){for(var r=0;r<i;r++)t=se.crc.table[(t^e[n+r])&255]^t>>>8;return t},crc:function(t,e,n){return se.crc.update(4294967295,t,e,n)^4294967295}};se.quantize=function(t,e){for(var n=new Uint8Array(t),i=n.slice(0),r=new Uint32Array(i.buffer),s=se.quantize.getKDtree(i,e),o=s[0],a=s[1],l=se.quantize.planeDst,c=n,u=r,d=c.length,h=new Uint8Array(n.length>>2),p=0;p<d;p+=4){var g=c[p]*.00392156862745098,m=c[p+1]*(1/255),v=c[p+2]*(1/255),C=c[p+3]*(1/255),b=se.quantize.getNearest(o,g,m,v,C);h[p>>2]=b.ind,u[p>>2]=b.est.rgba}return{abuf:i.buffer,inds:h,plte:a}};se.quantize.getKDtree=function(t,e,n){n==null&&(n=1e-4);var i=new Uint32Array(t.buffer),r={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=se.quantize.stats(t,r.i0,r.i1),r.est=se.quantize.estats(r.bst);for(var s=[r];s.length<e;){for(var o=0,a=0,l=0;l<s.length;l++)s[l].est.L>o&&(o=s[l].est.L,a=l);if(o<n)break;var c=s[a],u=se.quantize.splitPixels(t,i,c.i0,c.i1,c.est.e,c.est.eMq255),d=c.i0>=u||c.i1<=u;if(d){c.est.L=0;continue}var h={i0:c.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};h.bst=se.quantize.stats(t,h.i0,h.i1),h.est=se.quantize.estats(h.bst);var p={i0:u,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};p.bst={R:[],m:[],N:c.bst.N-h.bst.N};for(var l=0;l<16;l++)p.bst.R[l]=c.bst.R[l]-h.bst.R[l];for(var l=0;l<4;l++)p.bst.m[l]=c.bst.m[l]-h.bst.m[l];p.est=se.quantize.estats(p.bst),c.left=h,c.right=p,s[a]=h,s.push(p)}s.sort(function(g,m){return m.bst.N-g.bst.N});for(var l=0;l<s.length;l++)s[l].ind=l;return[r,s]};se.quantize.getNearest=function(t,e,n,i,r){if(t.left==null)return t.tdst=se.quantize.dist(t.est.q,e,n,i,r),t;var s=se.quantize.planeDst(t.est,e,n,i,r),o=t.left,a=t.right;s>0&&(o=t.right,a=t.left);var l=se.quantize.getNearest(o,e,n,i,r);if(l.tdst<=s*s)return l;var c=se.quantize.getNearest(a,e,n,i,r);return c.tdst<l.tdst?c:l};se.quantize.planeDst=function(t,e,n,i,r){var s=t.e;return s[0]*e+s[1]*n+s[2]*i+s[3]*r-t.eMq};se.quantize.dist=function(t,e,n,i,r){var s=e-t[0],o=n-t[1],a=i-t[2],l=r-t[3];return s*s+o*o+a*a+l*l};se.quantize.splitPixels=function(t,e,n,i,r,s){var o=se.quantize.vecDot;i-=4;for(var a=0;n<i;){for(;o(t,n,r)<=s;)n+=4;for(;o(t,i,r)>s;)i-=4;if(n>=i)break;var l=e[n>>2];e[n>>2]=e[i>>2],e[i>>2]=l,n+=4,i-=4}for(;o(t,n,r)>s;)n-=4;return n+4};se.quantize.vecDot=function(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]};se.quantize.stats=function(t,e,n){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],s=n-e>>2,o=e;o<n;o+=4){var a=t[o]*.00392156862745098,l=t[o+1]*(1/255),c=t[o+2]*(1/255),u=t[o+3]*(1/255);r[0]+=a,r[1]+=l,r[2]+=c,r[3]+=u,i[0]+=a*a,i[1]+=a*l,i[2]+=a*c,i[3]+=a*u,i[5]+=l*l,i[6]+=l*c,i[7]+=l*u,i[10]+=c*c,i[11]+=c*u,i[15]+=u*u}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:r,N:s}};se.quantize.estats=function(t){var e=t.R,n=t.m,i=t.N,r=n[0],s=n[1],o=n[2],a=n[3],l=i==0?0:1/i,c=[e[0]-r*r*l,e[1]-r*s*l,e[2]-r*o*l,e[3]-r*a*l,e[4]-s*r*l,e[5]-s*s*l,e[6]-s*o*l,e[7]-s*a*l,e[8]-o*r*l,e[9]-o*s*l,e[10]-o*o*l,e[11]-o*a*l,e[12]-a*r*l,e[13]-a*s*l,e[14]-a*o*l,e[15]-a*a*l],u=c,d=se.M4,h=[.5,.5,.5,.5],p=0,g=0;if(i!=0)for(var m=0;m<10&&(h=d.multVec(u,h),g=Math.sqrt(d.dot(h,h)),h=d.sml(1/g,h),!(Math.abs(g-p)<1e-9));m++)p=g;var v=[r*l,s*l,o*l,a*l],C=d.dot(d.sml(255,v),h);return{Cov:c,q:v,e:h,L:p,eMq255:C,eMq:d.dot(h,v),rgba:(Math.round(255*v[3])<<24|Math.round(255*v[2])<<16|Math.round(255*v[1])<<8|Math.round(255*v[0])<<0)>>>0}};se.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}};se.encode.concatRGBA=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].byteLength;for(var i=new Uint8Array(e),r=0,n=0;n<t.length;n++){for(var s=new Uint8Array(t[n]),o=s.length,a=0;a<o;a+=4){var l=s[a],c=s[a+1],u=s[a+2],d=s[a+3];d==0&&(l=c=u=0),i[r+a]=l,i[r+a+1]=c,i[r+a+2]=u,i[r+a+3]=d}r+=o}return i.buffer};var UV=se;var nPe=function(t){if(t===0)return Im.Greyscale;if(t===2)return Im.Truecolour;if(t===3)return Im.IndexedColour;if(t===4)return Im.GreyscaleWithAlpha;if(t===6)return Im.TruecolourWithAlpha;throw new Error("Unknown color type: "+t)},iPe=function(t){for(var e=Math.floor(t.length/4),n=new Uint8Array(e*3),i=new Uint8Array(e*1),r=0,s=0,o=0;r<t.length;)n[s++]=t[r++],n[s++]=t[r++],n[s++]=t[r++],i[o++]=t[r++];return{rgbChannel:n,alphaChannel:i}},Im=function(t){return t.Greyscale="Greyscale",t.Truecolour="Truecolour",t.IndexedColour="IndexedColour",t.GreyscaleWithAlpha="GreyscaleWithAlpha",t.TruecolourWithAlpha="TruecolourWithAlpha",t}(Im||{}),p$=function(){function t(e){var n=UV.decode(e),i=UV.toRGBA8(n);if(i.length>1)throw new Error("Animated PNGs are not supported");var r=new Uint8Array(i[0]),s=iPe(r),o=s.rgbChannel,a=s.alphaChannel;this.rgbChannel=o;var l=a.some(function(c){return c<255});l&&(this.alphaChannel=a),this.type=nPe(n.ctype),this.width=n.width,this.height=n.height,this.bitsPerComponent=8}return t.load=function(e){return new t(e)},t}();var rPe=function(){function t(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return t.for=function(e){return Pe(this,void 0,void 0,function(){var n;return Me(this,function(i){return n=p$.load(e),[2,new t(n)]})})},t.prototype.embedIntoContext=function(e,n){return Pe(this,void 0,void 0,function(){var i,r;return Me(this,function(s){return i=this.embedAlphaChannel(e),r=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:i}),n?(e.assign(n,r),[2,n]):[2,e.register(r)]})})},t.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var n=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(n)}},t}(),jw=rPe;var sPe=function(){function t(e,n,i){this.bytes=e,this.start=n||0,this.pos=this.start,this.end=n&&i?n+i:this.bytes.length}return Object.defineProperty(t.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},t.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),i=this.getByte(),r=this.getByte();return(e<<24)+(n<<16)+(i<<8)+r},t.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var i=this.bytes,r=this.pos,s=this.end;if(e){var a=r+e;a>s&&(a=s),this.pos=a;var o=i.subarray(r,a);return n?new Uint8ClampedArray(o):o}else{var o=i.subarray(r,s);return n?new Uint8ClampedArray(o):o}},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var i=this.getBytes(e,n);return this.pos-=i.length,i},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=this.start},t.prototype.moveStart=function(){this.start=this.pos},t.prototype.makeSubStream=function(e,n){return new t(this.bytes,e,n)},t.prototype.decode=function(){return this.bytes},t}(),bR=sPe;var oPe=new Uint8Array(0),aPe=function(){function t(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=oPe,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),n=this.getByte();return e===-1||n===-1?-1:(e<<8)+n},t.prototype.getInt32=function(){var e=this.getByte(),n=this.getByte(),i=this.getByte(),r=this.getByte();return(e<<24)+(n<<16)+(i<<8)+r},t.prototype.getBytes=function(e,n){n===void 0&&(n=!1);var i,r=this.pos;if(e){for(this.ensureBuffer(r+e),i=r+e;!this.eof&&this.bufferLength<i;)this.readBlock();var s=this.bufferLength;i>s&&(i=s)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}this.pos=i;var o=this.buffer.subarray(r,i);return n&&!(o instanceof Uint8ClampedArray)?new Uint8ClampedArray(o):o},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,n){n===void 0&&(n=!1);var i=this.getBytes(e,n);return this.pos-=i.length,i},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=0},t.prototype.makeSubStream=function(e,n){for(var i=e+n;this.bufferLength<=i&&!this.eof;)this.readBlock();return new bR(this.buffer,e,n)},t.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},t.prototype.readBlock=function(){throw new lr(this.constructor.name,"readBlock")},t.prototype.ensureBuffer=function(e){var n=this.buffer;if(e<=n.byteLength)return n;for(var i=this.minBufferLength;i<e;)i*=2;var r=new Uint8Array(i);return r.set(n),this.buffer=r},t}(),yl=aPe;var g$=function(t){return t===32||t===9||t===13||t===10},lPe=function(t){K(e,t);function e(n,i){var r=t.call(this,i)||this;return r.stream=n,r.input=new Uint8Array(5),i&&(i=.8*i),r}return e.prototype.readBlock=function(){for(var n=126,i=122,r=-1,s=this.stream,o=s.getByte();g$(o);)o=s.getByte();if(o===r||o===n){this.eof=!0;return}var a=this.bufferLength,l,c;if(o===i){for(l=this.ensureBuffer(a+4),c=0;c<4;++c)l[a+c]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=o,c=1;c<5;++c){for(o=s.getByte();g$(o);)o=s.getByte();if(u[c]=o,o===r||o===n)break}if(l=this.ensureBuffer(a+c-1),this.bufferLength+=c-1,c<5){for(;c<5;++c)u[c]=117;this.eof=!0}var d=0;for(c=0;c<5;++c)d=d*85+(u[c]-33);for(c=3;c>=0;--c)l[a+c]=d&255,d>>=8}},e}(yl),m$=lPe;var cPe=function(t){K(e,t);function e(n,i){var r=t.call(this,i)||this;return r.stream=n,r.firstDigit=-1,i&&(i=.5*i),r}return e.prototype.readBlock=function(){var n=8e3,i=this.stream.getBytes(n);if(!i.length){this.eof=!0;return}for(var r=i.length+1>>1,s=this.ensureBuffer(this.bufferLength+r),o=this.bufferLength,a=this.firstDigit,l=0,c=i.length;l<c;l++){var u=i[l],d=void 0;if(u>=48&&u<=57)d=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)d=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;a<0?a=d:(s[o++]=a<<4|d,a=-1)}a>=0&&this.eof&&(s[o++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=o},e}(yl),v$=cPe;var y$=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uPe=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),dPe=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),hPe=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fPe=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],pPe=function(t){K(e,t);function e(n,i){var r=t.call(this,i)||this;r.stream=n;var s=n.getByte(),o=n.getByte();if(s===-1||o===-1)throw new Error("Invalid header in flate stream: "+s+", "+o);if((s&15)!==8)throw new Error("Unknown compression method in flate stream: "+s+", "+o);if(((s<<8)+o)%31!==0)throw new Error("Bad FCHECK in flate stream: "+s+", "+o);if(o&32)throw new Error("FDICT bit set in flate stream: "+s+", "+o);return r.codeSize=0,r.codeBuf=0,r}return e.prototype.readBlock=function(){var n,i,r=this.stream,s=this.getBits(3);if(s&1&&(this.eof=!0),s>>=1,s===0){var o=void 0;if((o=r.getByte())===-1)throw new Error("Bad block header in flate stream");var a=o;if((o=r.getByte())===-1)throw new Error("Bad block header in flate stream");if(a|=o<<8,(o=r.getByte())===-1)throw new Error("Bad block header in flate stream");var l=o;if((o=r.getByte())===-1)throw new Error("Bad block header in flate stream");if(l|=o<<8,l!==(~a&65535)&&(a!==0||l!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var c=this.bufferLength;n=this.ensureBuffer(c+a);var u=c+a;if(this.bufferLength=u,a===0)r.peekByte()===-1&&(this.eof=!0);else for(var d=c;d<u;++d){if((o=r.getByte())===-1){this.eof=!0;break}n[d]=o}return}var h,p;if(s===1)h=hPe,p=fPe;else if(s===2){var g=this.getBits(5)+257,m=this.getBits(5)+1,v=this.getBits(4)+4,C=new Uint8Array(y$.length),b=void 0;for(b=0;b<v;++b)C[y$[b]]=this.getBits(3);var E=this.generateHuffmanTable(C);i=0,b=0;for(var T=g+m,P=new Uint8Array(T),x=void 0,_=void 0,S=void 0;b<T;){var D=this.getCode(E);if(D===16)x=2,_=3,S=i;else if(D===17)x=3,_=3,S=i=0;else if(D===18)x=7,_=11,S=i=0;else{P[b++]=i=D;continue}for(var O=this.getBits(x)+_;O-- >0;)P[b++]=S}h=this.generateHuffmanTable(P.subarray(0,g)),p=this.generateHuffmanTable(P.subarray(g,T))}else throw new Error("Unknown block type in flate stream");n=this.buffer;for(var F=n?n.length:0,k=this.bufferLength;;){var M=this.getCode(h);if(M<256){k+1>=F&&(n=this.ensureBuffer(k+1),F=n.length),n[k++]=M;continue}if(M===256){this.bufferLength=k;return}M-=257,M=uPe[M];var ce=M>>16;ce>0&&(ce=this.getBits(ce)),i=(M&65535)+ce,M=this.getCode(p),M=dPe[M],ce=M>>16,ce>0&&(ce=this.getBits(ce));var xe=(M&65535)+ce;k+i>=F&&(n=this.ensureBuffer(k+i),F=n.length);for(var Ue=0;Ue<i;++Ue,++k)n[k]=n[k-xe]}},e.prototype.getBits=function(n){for(var i=this.stream,r=this.codeSize,s=this.codeBuf,o;r<n;){if((o=i.getByte())===-1)throw new Error("Bad encoding in flate stream");s|=o<<r,r+=8}return o=s&(1<<n)-1,this.codeBuf=s>>n,this.codeSize=r-=n,o},e.prototype.getCode=function(n){for(var i=this.stream,r=n[0],s=n[1],o=this.codeSize,a=this.codeBuf,l;o<s&&(l=i.getByte())!==-1;)a|=l<<o,o+=8;var c=r[a&(1<<s)-1];typeof r=="number"&&console.log("FLATE:",c);var u=c>>16,d=c&65535;if(u<1||o<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=a>>u,this.codeSize=o-u,d},e.prototype.generateHuffmanTable=function(n){var i=n.length,r=0,s;for(s=0;s<i;++s)n[s]>r&&(r=n[s]);for(var o=1<<r,a=new Int32Array(o),l=1,c=0,u=2;l<=r;++l,c<<=1,u<<=1)for(var d=0;d<i;++d)if(n[d]===l){var h=0,p=c;for(s=0;s<l;++s)h=h<<1|p&1,p>>=1;for(s=h;s<o;s+=u)a[s]=l<<16|d;++c}return[a,r]},e}(yl),C$=pPe;var gPe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,i)||this;s.stream=n,s.cachedData=0,s.bitsCached=0;for(var o=4096,a={earlyChange:r,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(o),dictionaryLengths:new Uint16Array(o),dictionaryPrevCodes:new Uint16Array(o),currentSequence:new Uint8Array(o),currentSequenceLength:0},l=0;l<256;++l)a.dictionaryValues[l]=l,a.dictionaryLengths[l]=1;return s.lzwState=a,s}return e.prototype.readBlock=function(){var n=512,i=n*2,r=n,s,o,a,l=this.lzwState;if(l){var c=l.earlyChange,u=l.nextCode,d=l.dictionaryValues,h=l.dictionaryLengths,p=l.dictionaryPrevCodes,g=l.codeLength,m=l.prevCode,v=l.currentSequence,C=l.currentSequenceLength,b=0,E=this.bufferLength,T=this.ensureBuffer(this.bufferLength+i);for(s=0;s<n;s++){var P=this.readBits(g),x=C>0;if(!P||P<256)v[0]=P,C=1;else if(P>=258)if(P<u)for(C=h[P],o=C-1,a=P;o>=0;o--)v[o]=d[a],a=p[a];else v[C++]=v[0];else if(P===256){g=9,u=258,C=0;continue}else{this.eof=!0,delete this.lzwState;break}if(x&&(p[u]=m,h[u]=h[m]+1,d[u]=v[0],u++,g=u+c&u+c-1?g:Math.min(Math.log(u+c)/.6931471805599453+1,12)|0),m=P,b+=C,i<b){do i+=r;while(i<b);T=this.ensureBuffer(this.bufferLength+i)}for(o=0;o<C;o++)T[E++]=v[o]}l.nextCode=u,l.codeLength=g,l.prevCode=m,l.currentSequenceLength=C,this.bufferLength=E}},e.prototype.readBits=function(n){for(var i=this.bitsCached,r=this.cachedData;i<n;){var s=this.stream.getByte();if(s===-1)return this.eof=!0,null;r=r<<8|s,i+=8}return this.bitsCached=i-=n,this.cachedData=r,r>>>i&(1<<n)-1},e}(yl),w$=gPe;var mPe=function(t){K(e,t);function e(n,i){var r=t.call(this,i)||this;return r.stream=n,r}return e.prototype.readBlock=function(){var n=this.stream.getBytes(2);if(!n||n.length<2||n[0]===128){this.eof=!0;return}var i,r=this.bufferLength,s=n[0];if(s<128){if(i=this.ensureBuffer(r+s+1),i[r++]=n[1],s>0){var o=this.stream.getBytes(s);i.set(o,r),r+=s}}else{s=257-s;var a=n[1];i=this.ensureBuffer(r+s+1);for(var l=0;l<s;l++)i[r++]=a}this.bufferLength=r},e}(yl),S$=mPe;var b$=function(t,e,n){if(e===R.of("FlateDecode"))return new C$(t);if(e===R.of("LZWDecode")){var i=1;if(n instanceof Ie){var r=n.lookup(R.of("EarlyChange"));r instanceof _e&&(i=r.asNumber())}return new w$(t,void 0,i)}if(e===R.of("ASCII85Decode"))return new m$(t);if(e===R.of("ASCIIHexDecode"))return new v$(t);if(e===R.of("RunLengthDecode"))return new S$(t);throw new LX(e.asString())},Ww=function(t){var e=t.dict,n=t.contents,i=new bR(n),r=e.lookup(R.of("Filter")),s=e.lookup(R.of("DecodeParms"));if(r instanceof R)i=b$(i,r,s);else if(r instanceof Ye)for(var o=0,a=r.size();o<a;o++)i=b$(i,r.lookup(o,R),s&&s.lookupMaybe(o,Ie));else if(r)throw new uf([R,Ye],r);return i};var vPe=function(t){var e=t.MediaBox(),n=e.lookup(2,_e).asNumber()-e.lookup(0,_e).asNumber(),i=e.lookup(3,_e).asNumber()-e.lookup(1,_e).asNumber();return{left:0,bottom:0,right:n,top:i}},yPe=function(t){return[1,0,0,1,-t.left,-t.bottom]},CPe=function(){function t(e,n,i){this.page=e;var r=n??vPe(e);this.width=r.right-r.left,this.height=r.top-r.bottom,this.boundingBox=r,this.transformationMatrix=i??yPe(r)}return t.for=function(e,n,i){return Pe(this,void 0,void 0,function(){return Me(this,function(r){return[2,new t(e,n,i)]})})},t.prototype.embedIntoContext=function(e,n){return Pe(this,void 0,void 0,function(){var i,r,s,o,a,l,c,u,d,h;return Me(this,function(p){if(i=this.page.normalizedEntries(),r=i.Contents,s=i.Resources,!r)throw new VX;return o=this.decodeContents(r),a=this.boundingBox,l=a.left,c=a.bottom,u=a.right,d=a.top,h=e.flateStream(o,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[l,c,u,d],Matrix:this.transformationMatrix,Resources:s}),n?(e.assign(n,h),[2,n]):[2,e.register(h)]})})},t.prototype.decodeContents=function(e){for(var n=Uint8Array.of(A.Newline),i=[],r=0,s=e.size();r<s;r++){var o=e.lookup(r,Rn),a=void 0;if(o instanceof vl)a=Ww(o).decode();else if(o instanceof _c)a=o.getUnencodedContents();else throw new BX(o);i.push(a,n)}return hY.apply(void 0,i)},t}(),zw=CPe;var _R=function(t,e){if(t!==void 0)return e[t]},qw=function(t){return t.UseNone="UseNone",t.UseOutlines="UseOutlines",t.UseThumbs="UseThumbs",t.UseOC="UseOC",t}(qw||{}),Kw=function(t){return t.L2R="L2R",t.R2L="R2L",t}(Kw||{}),Yw=function(t){return t.None="None",t.AppDefault="AppDefault",t}(Yw||{}),ER=function(t){return t.Simplex="Simplex",t.DuplexFlipShortEdge="DuplexFlipShortEdge",t.DuplexFlipLongEdge="DuplexFlipLongEdge",t}(ER||{}),wPe=function(){function t(e){this.dict=e}return t.prototype.lookupBool=function(e){var n=this.dict.lookup(R.of(e));if(n instanceof bc)return n},t.prototype.lookupName=function(e){var n=this.dict.lookup(R.of(e));if(n instanceof R)return n},t.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},t.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},t.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},t.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},t.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},t.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},t.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},t.prototype.Direction=function(){return this.lookupName("Direction")},t.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},t.prototype.Duplex=function(){return this.lookupName("Duplex")},t.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},t.prototype.PrintPageRange=function(){var e=this.dict.lookup(R.of("PrintPageRange"));if(e instanceof Ye)return e},t.prototype.NumCopies=function(){var e=this.dict.lookup(R.of("NumCopies"));if(e instanceof _e)return e},t.prototype.getHideToolbar=function(){var e,n;return(n=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getHideMenubar=function(){var e,n;return(n=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getHideWindowUI=function(){var e,n;return(n=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getFitWindow=function(){var e,n;return(n=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getCenterWindow=function(){var e,n;return(n=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getDisplayDocTitle=function(){var e,n;return(n=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&n!==void 0?n:!1},t.prototype.getNonFullScreenPageMode=function(){var e,n,i=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(n=_R(i,qw))!==null&&n!==void 0?n:qw.UseNone},t.prototype.getReadingDirection=function(){var e,n,i=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(n=_R(i,Kw))!==null&&n!==void 0?n:Kw.L2R},t.prototype.getPrintScaling=function(){var e,n,i=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(n=_R(i,Yw))!==null&&n!==void 0?n:Yw.AppDefault},t.prototype.getDuplex=function(){var e,n=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return _R(n,ER)},t.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},t.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var n=[],i=0;i<e.size();i+=2){var r=e.lookup(i,_e).asNumber(),s=e.lookup(i+1,_e).asNumber();n.push({start:r,end:s})}return n},t.prototype.getNumCopies=function(){var e,n;return(n=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},t.prototype.setHideToolbar=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("HideToolbar"),n)},t.prototype.setHideMenubar=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("HideMenubar"),n)},t.prototype.setHideWindowUI=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("HideWindowUI"),n)},t.prototype.setFitWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("FitWindow"),n)},t.prototype.setCenterWindow=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("CenterWindow"),n)},t.prototype.setDisplayDocTitle=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("DisplayDocTitle"),n)},t.prototype.setNonFullScreenPageMode=function(e){Sa(e,"nonFullScreenPageMode",qw);var n=R.of(e);this.dict.set(R.of("NonFullScreenPageMode"),n)},t.prototype.setReadingDirection=function(e){Sa(e,"readingDirection",Kw);var n=R.of(e);this.dict.set(R.of("Direction"),n)},t.prototype.setPrintScaling=function(e){Sa(e,"printScaling",Yw);var n=R.of(e);this.dict.set(R.of("PrintScaling"),n)},t.prototype.setDuplex=function(e){Sa(e,"duplex",ER);var n=R.of(e);this.dict.set(R.of("Duplex"),n)},t.prototype.setPickTrayByPDFSize=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("PickTrayByPDFSize"),n)},t.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var n=[],i=0,r=e.length;i<r;i++)n.push(e[i].start),n.push(e[i].end);pR(n,"printPageRange",["number"]);var s=this.dict.context.obj(n);this.dict.set(R.of("PrintPageRange"),s)},t.prototype.setNumCopies=function(e){Sr(e,"numCopies",1,Number.MAX_VALUE),NX(e,"numCopies");var n=this.dict.context.obj(e);this.dict.set(R.of("NumCopies"),n)},t.fromDict=function(e){return new t(e)},t.create=function(e){var n=e.obj({});return new t(n)},t}(),DR=wPe;var SPe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,bPe=function(){function t(e,n){this.dict=e,this.ref=n}return t.prototype.T=function(){return this.dict.lookupMaybe(R.of("T"),ht,be)},t.prototype.Ff=function(){var e=this.getInheritableAttribute(R.of("Ff"));return this.dict.context.lookupMaybe(e,_e)},t.prototype.V=function(){var e=this.getInheritableAttribute(R.of("V"));return this.dict.context.lookup(e)},t.prototype.Kids=function(){return this.dict.lookupMaybe(R.of("Kids"),Ye)},t.prototype.DA=function(){var e=this.dict.lookup(R.of("DA"));if(e instanceof ht||e instanceof be)return e},t.prototype.setKids=function(e){this.dict.set(R.of("Kids"),this.dict.context.obj(e))},t.prototype.getParent=function(){var e=this.dict.get(R.of("Parent"));if(e instanceof Ze){var n=this.dict.lookup(R.of("Parent"),Ie);return new t(n,e)}},t.prototype.setParent=function(e){e?this.dict.set(R.of("Parent"),e):this.dict.delete(R.of("Parent"))},t.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},t.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},t.prototype.setPartialName=function(e){e?this.dict.set(R.of("T"),be.fromText(e)):this.dict.delete(R.of("T"))},t.prototype.setDefaultAppearance=function(e){this.dict.set(R.of("DA"),ht.of(e))},t.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof be?e.decodeText():e?.asString()},t.prototype.setFontSize=function(e){var n,i=(n=this.getFullyQualifiedName())!==null&&n!==void 0?n:"",r=this.getDefaultAppearance();if(!r)throw new jX(i);var s=dw(r,SPe);if(!s.match)throw new WX(i);var o=r.slice(0,s.pos-s.match[0].length),a=s.pos<=r.length?r.slice(s.pos):"",l=s.match[1],c=o+" /"+l+" "+e+" Tf "+a;this.setDefaultAppearance(c)},t.prototype.getFlags=function(){var e,n;return(n=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},t.prototype.setFlags=function(e){this.dict.set(R.of("Ff"),_e.of(e))},t.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},t.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},t.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},t.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},t.prototype.getInheritableAttribute=function(e){var n;return this.ascend(function(i){n||(n=i.dict.get(e))}),n},t.prototype.ascend=function(e){e(this);var n=this.getParent();n&&n.ascend(e)},t}(),Qw=bPe;var _Pe=function(){function t(e){this.dict=e}return t.prototype.W=function(){var e=this.dict.lookup(R.of("W"));if(e instanceof _e)return e},t.prototype.getWidth=function(){var e,n;return(n=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:1},t.prototype.setWidth=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("W"),n)},t.fromDict=function(e){return new t(e)},t}(),TR=_Pe;var EPe=function(){function t(e){this.dict=e}return t.prototype.Rect=function(){return this.dict.lookup(R.of("Rect"),Ye)},t.prototype.AP=function(){return this.dict.lookupMaybe(R.of("AP"),Ie)},t.prototype.F=function(){var e=this.dict.lookup(R.of("F"));return this.dict.context.lookupMaybe(e,_e)},t.prototype.getRectangle=function(){var e,n=this.Rect();return(e=n?.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},t.prototype.setRectangle=function(e){var n=e.x,i=e.y,r=e.width,s=e.height,o=this.dict.context.obj([n,i,n+r,i+s]);this.dict.set(R.of("Rect"),o)},t.prototype.getAppearanceState=function(){var e=this.dict.lookup(R.of("AS"));if(e instanceof R)return e},t.prototype.setAppearanceState=function(e){this.dict.set(R.of("AS"),e)},t.prototype.setAppearances=function(e){this.dict.set(R.of("AP"),e)},t.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(R.of("AP"),e)),e},t.prototype.getNormalAppearance=function(){var e=this.ensureAP(),n=e.get(R.of("N"));if(n instanceof Ze||n instanceof Ie)return n;throw new Error("Unexpected N type: "+n?.constructor.name)},t.prototype.setNormalAppearance=function(e){var n=this.ensureAP();n.set(R.of("N"),e)},t.prototype.setRolloverAppearance=function(e){var n=this.ensureAP();n.set(R.of("R"),e)},t.prototype.setDownAppearance=function(e){var n=this.ensureAP();n.set(R.of("D"),e)},t.prototype.removeRolloverAppearance=function(){var e=this.AP();e?.delete(R.of("R"))},t.prototype.removeDownAppearance=function(){var e=this.AP();e?.delete(R.of("D"))},t.prototype.getAppearances=function(){var e=this.AP();if(e){var n=e.lookup(R.of("N"),Ie,Rn),i=e.lookupMaybe(R.of("R"),Ie,Rn),r=e.lookupMaybe(R.of("D"),Ie,Rn);return{normal:n,rollover:i,down:r}}},t.prototype.getFlags=function(){var e,n;return(n=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&n!==void 0?n:0},t.prototype.setFlags=function(e){this.dict.set(R.of("F"),_e.of(e))},t.prototype.hasFlag=function(e){var n=this.getFlags();return(n&e)!==0},t.prototype.setFlag=function(e){var n=this.getFlags();this.setFlags(n|e)},t.prototype.clearFlag=function(e){var n=this.getFlags();this.setFlags(n&~e)},t.prototype.setFlagTo=function(e,n){n?this.setFlag(e):this.clearFlag(e)},t.fromDict=function(e){return new t(e)},t}(),jV=EPe;var DPe=function(){function t(e){this.dict=e}return t.prototype.R=function(){var e=this.dict.lookup(R.of("R"));if(e instanceof _e)return e},t.prototype.BC=function(){var e=this.dict.lookup(R.of("BC"));if(e instanceof Ye)return e},t.prototype.BG=function(){var e=this.dict.lookup(R.of("BG"));if(e instanceof Ye)return e},t.prototype.CA=function(){var e=this.dict.lookup(R.of("CA"));if(e instanceof be||e instanceof ht)return e},t.prototype.RC=function(){var e=this.dict.lookup(R.of("RC"));if(e instanceof be||e instanceof ht)return e},t.prototype.AC=function(){var e=this.dict.lookup(R.of("AC"));if(e instanceof be||e instanceof ht)return e},t.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},t.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var n=[],i=0,r=e?.size();i<r;i++){var s=e.get(i);s instanceof _e&&n.push(s.asNumber())}return n}},t.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var n=[],i=0,r=e?.size();i<r;i++){var s=e.get(i);s instanceof _e&&n.push(s.asNumber())}return n}},t.prototype.getCaptions=function(){var e=this.CA(),n=this.RC(),i=this.AC();return{normal:e?.decodeText(),rollover:n?.decodeText(),down:i?.decodeText()}},t.prototype.setRotation=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("R"),n)},t.prototype.setBorderColor=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("BC"),n)},t.prototype.setBackgroundColor=function(e){var n=this.dict.context.obj(e);this.dict.set(R.of("BG"),n)},t.prototype.setCaptions=function(e){var n=be.fromText(e.normal);if(this.dict.set(R.of("CA"),n),e.rollover){var i=be.fromText(e.rollover);this.dict.set(R.of("RC"),i)}else this.dict.delete(R.of("RC"));if(e.down){var r=be.fromText(e.down);this.dict.set(R.of("AC"),r)}else this.dict.delete(R.of("AC"))},t.fromDict=function(e){return new t(e)},t}(),Xw=DPe;var TPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MK=function(){var n=this.dict.lookup(R.of("MK"));if(n instanceof Ie)return n},e.prototype.BS=function(){var n=this.dict.lookup(R.of("BS"));if(n instanceof Ie)return n},e.prototype.DA=function(){var n=this.dict.lookup(R.of("DA"));if(n instanceof ht||n instanceof be)return n},e.prototype.P=function(){var n=this.dict.get(R.of("P"));if(n instanceof Ze)return n},e.prototype.setP=function(n){this.dict.set(R.of("P"),n)},e.prototype.setDefaultAppearance=function(n){this.dict.set(R.of("DA"),ht.of(n))},e.prototype.getDefaultAppearance=function(){var n=this.DA();return n instanceof be?n.decodeText():n?.asString()},e.prototype.getAppearanceCharacteristics=function(){var n=this.MK();if(n)return Xw.fromDict(n)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var n=this.MK();if(n)return Xw.fromDict(n);var i=Xw.fromDict(this.dict.context.obj({}));return this.dict.set(R.of("MK"),i.dict),i},e.prototype.getBorderStyle=function(){var n=this.BS();if(n)return TR.fromDict(n)},e.prototype.getOrCreateBorderStyle=function(){var n=this.BS();if(n)return TR.fromDict(n);var i=TR.fromDict(this.dict.context.obj({}));return this.dict.set(R.of("BS"),i.dict),i},e.prototype.getOnValue=function(){var n,i=(n=this.getAppearances())===null||n===void 0?void 0:n.normal;if(i instanceof Ie)for(var r=i.keys(),s=0,o=r.length;s<o;s++){var a=r[s];if(a!==R.of("Off"))return a}},e.fromDict=function(n){return new e(n)},e.create=function(n,i){var r=n.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:i});return new e(r)},e}(jV),xm=TPe;var RPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.FT=function(){var n=this.getInheritableAttribute(R.of("FT"));return this.dict.context.lookup(n,R)},e.prototype.getWidgets=function(){var n=this.Kids();if(!n)return[xm.fromDict(this.dict)];for(var i=new Array(n.size()),r=0,s=n.size();r<s;r++){var o=n.lookup(r,Ie);i[r]=xm.fromDict(o)}return i},e.prototype.addWidget=function(n){var i=this.normalizedEntries().Kids;i.push(n)},e.prototype.removeWidget=function(n){var i=this.Kids();if(i){if(n<0||n>i.size())throw new Em(n,0,i.size());i.remove(n)}else{if(n!==0)throw new Em(n,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([this.ref]),this.dict.set(R.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,i){return new e(n,i)},e}(Qw),no=RPe;var IPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(R.of("Opt"),ht,be,Ye)},e.prototype.setOpt=function(n){this.dict.set(R.of("Opt"),this.dict.context.obj(n))},e.prototype.getExportValues=function(){var n=this.Opt();if(n){if(n instanceof ht||n instanceof be)return[n];for(var i=[],r=0,s=n.size();r<s;r++){var o=n.lookup(r);(o instanceof ht||o instanceof be)&&i.push(o)}return i}},e.prototype.removeExportValue=function(n){var i=this.Opt();if(i)if(i instanceof ht||i instanceof be){if(n!==0)throw new Em(n,0,0);this.setOpt([])}else{if(n<0||n>i.size())throw new Em(n,0,i.size());i.remove(n)}},e.prototype.normalizeExportValues=function(){for(var n,i,r,s,o=(n=this.getExportValues())!==null&&n!==void 0?n:[],a=[],l=this.getWidgets(),c=0,u=l.length;c<u;c++){var d=l[c],h=(i=o[c])!==null&&i!==void 0?i:be.fromText((s=(r=d.getOnValue())===null||r===void 0?void 0:r.decodeText())!==null&&s!==void 0?s:"");a.push(h)}this.setOpt(a)},e.prototype.addOpt=function(n,i){var r;this.normalizeExportValues();var s=n.decodeText(),o;if(i)for(var a=(r=this.getExportValues())!==null&&r!==void 0?r:[],l=0,c=a.length;l<c;l++){var u=a[l];u.decodeText()===s&&(o=l)}var d=this.Opt();return d.push(n),o??d.size()-1},e.prototype.addWidgetWithOpt=function(n,i,r){var s=this.addOpt(i,r),o=R.of(String(s));return this.addWidget(n),o},e}(no),mf=IPe;var xPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(n){var i,r=(i=this.getOnValue())!==null&&i!==void 0?i:R.of("Yes");if(n!==r&&n!==R.of("Off"))throw new Dm;this.dict.set(R.of("V"),n);for(var s=this.getWidgets(),o=0,a=s.length;o<a;o++){var l=s[o],c=l.getOnValue()===n?n:R.of("Off");l.setAppearanceState(c)}},e.prototype.getValue=function(){var n=this.V();return n instanceof R?n:R.of("Off")},e.prototype.getOnValue=function(){var n=this.getWidgets()[0];return n?.getOnValue()},e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Btn",Kids:[]}),r=n.register(i);return new e(i,r)},e}(mf),Zu=xPe;var wi=function(t){return 1<<t},ba=function(t){return t[t.ReadOnly=wi(0)]="ReadOnly",t[t.Required=wi(1)]="Required",t[t.NoExport=wi(2)]="NoExport",t}(ba||{}),$r=function(t){return t[t.NoToggleToOff=wi(14)]="NoToggleToOff",t[t.Radio=wi(15)]="Radio",t[t.PushButton=wi(16)]="PushButton",t[t.RadiosInUnison=wi(25)]="RadiosInUnison",t}($r||{}),Bn=function(t){return t[t.Multiline=wi(12)]="Multiline",t[t.Password=wi(13)]="Password",t[t.FileSelect=wi(20)]="FileSelect",t[t.DoNotSpellCheck=wi(22)]="DoNotSpellCheck",t[t.DoNotScroll=wi(23)]="DoNotScroll",t[t.Comb=wi(24)]="Comb",t[t.RichText=wi(25)]="RichText",t}(Bn||{}),Lt=function(t){return t[t.Combo=wi(17)]="Combo",t[t.Edit=wi(18)]="Edit",t[t.Sort=wi(19)]="Sort",t[t.MultiSelect=wi(21)]="MultiSelect",t[t.DoNotSpellCheck=wi(22)]="DoNotSpellCheck",t[t.CommitOnSelChange=wi(26)]="CommitOnSelChange",t}(Lt||{});var FPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValues=function(n){if(this.hasFlag(Lt.Combo)&&!this.hasFlag(Lt.Edit)&&!this.valuesAreValid(n))throw new Dm;if(n.length===0&&this.dict.delete(R.of("V")),n.length===1&&this.dict.set(R.of("V"),n[0]),n.length>1){if(!this.hasFlag(Lt.MultiSelect))throw new UX;this.dict.set(R.of("V"),this.dict.context.obj(n))}this.updateSelectedIndices(n)},e.prototype.valuesAreValid=function(n){for(var i=this.getOptions(),r=function(l,c){var u=n[l].decodeText();if(!i.find(function(d){return u===(d.display||d.value).decodeText()}))return{value:!1}},s=0,o=n.length;s<o;s++){var a=r(s,o);if(typeof a=="object")return a.value}return!0},e.prototype.updateSelectedIndices=function(n){if(n.length>1){for(var i=new Array(n.length),r=this.getOptions(),s=function(l,c){var u=n[l].decodeText();i[l]=r.findIndex(function(d){return u===(d.display||d.value).decodeText()})},o=0,a=n.length;o<a;o++)s(o,a);this.dict.set(R.of("I"),this.dict.context.obj(i.sort()))}else this.dict.delete(R.of("I"))},e.prototype.getValues=function(){var n=this.V();if(n instanceof ht||n instanceof be)return[n];if(n instanceof Ye){for(var i=[],r=0,s=n.size();r<s;r++){var o=n.lookup(r);(o instanceof ht||o instanceof be)&&i.push(o)}return i}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(R.of("Opt"),ht,be,Ye)},e.prototype.setOptions=function(n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++){var o=n[r],a=o.value,l=o.display;i[r]=this.dict.context.obj([a,l||a])}this.dict.set(R.of("Opt"),this.dict.context.obj(i))},e.prototype.getOptions=function(){var n=this.Opt();if(n instanceof ht||n instanceof be)return[{value:n,display:n}];if(n instanceof Ye){for(var i=[],r=0,s=n.size();r<s;r++){var o=n.lookup(r);if((o instanceof ht||o instanceof be)&&i.push({value:o,display:o}),o instanceof Ye&&o.size()>0){var a=o.lookup(0,ht,be),l=o.lookupMaybe(1,ht,be);i.push({value:a,display:l||a})}}return i}return[]},e}(no),$w=FPe;var APe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Ch",Ff:Lt.Combo,Kids:[]}),r=n.register(i);return new e(i,r)},e}($w),Ju=APe;var PPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.addField=function(n){var i=this.normalizedEntries().Kids;i?.push(n)},e.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([]),this.dict.set(R.of("Kids"),n)),{Kids:n}},e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({}),r=n.register(i);return new e(i,r)},e}(Qw),ed=PPe;var MPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,i){return new e(n,i)},e}(no),vf=MPe;var OPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var n=this.dict.lookup(R.of("MaxLen"));if(n instanceof _e)return n},e.prototype.Q=function(){var n=this.dict.lookup(R.of("Q"));if(n instanceof _e)return n},e.prototype.setMaxLength=function(n){this.dict.set(R.of("MaxLen"),_e.of(n))},e.prototype.removeMaxLength=function(){this.dict.delete(R.of("MaxLen"))},e.prototype.getMaxLength=function(){var n;return(n=this.MaxLen())===null||n===void 0?void 0:n.asNumber()},e.prototype.setQuadding=function(n){this.dict.set(R.of("Q"),_e.of(n))},e.prototype.getQuadding=function(){var n;return(n=this.Q())===null||n===void 0?void 0:n.asNumber()},e.prototype.setValue=function(n){this.dict.set(R.of("V"),n)},e.prototype.removeValue=function(){this.dict.delete(R.of("V"))},e.prototype.getValue=function(){var n=this.V();if(n instanceof ht||n instanceof be)return n},e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Tx",Kids:[]}),r=n.register(i);return new e(i,r)},e}(no),td=OPe;var kPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Btn",Ff:$r.PushButton,Kids:[]}),r=n.register(i);return new e(i,r)},e}(mf),nd=kPe;var NPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(n){var i=this.getOnValues();if(!i.includes(n)&&n!==R.of("Off"))throw new Dm;this.dict.set(R.of("V"),n);for(var r=this.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s],l=a.getOnValue()===n?n:R.of("Off");a.setAppearanceState(l)}},e.prototype.getValue=function(){var n=this.V();return n instanceof R?n:R.of("Off")},e.prototype.getOnValues=function(){for(var n=this.getWidgets(),i=[],r=0,s=n.length;r<s;r++){var o=n[r].getOnValue();o&&i.push(o)}return i},e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Btn",Ff:$r.Radio,Kids:[]}),r=n.register(i);return new e(i,r)},e}(mf),id=NPe;var LPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(n,i){return new e(n,i)},e.create=function(n){var i=n.obj({FT:"Ch",Kids:[]}),r=n.register(i);return new e(i,r)},e}($w),rd=LPe;var Zw=function(t){if(!t)return[];for(var e=[],n=0,i=t.size();n<i;n++){var r=t.get(n),s=t.lookup(n);r instanceof Ze&&s instanceof Ie&&e.push([zV(s,r),r])}return e},zV=function(t,e){var n=VPe(t);return n?ed.fromDict(t,e):BPe(t,e)},VPe=function(t){var e=t.lookup(R.of("Kids"));if(e instanceof Ye)for(var n=0,i=e.size();n<i;n++){var r=e.lookup(n),s=r instanceof Ie&&r.has(R.of("T"));if(s)return!0}return!1},BPe=function(t,e){var n=qV(t,R.of("FT")),i=t.context.lookup(n,R);return i===R.of("Btn")?GPe(t,e):i===R.of("Ch")?HPe(t,e):i===R.of("Tx")?td.fromDict(t,e):i===R.of("Sig")?vf.fromDict(t,e):no.fromDict(t,e)},GPe=function(t,e){var n,i=qV(t,R.of("Ff")),r=t.context.lookupMaybe(i,_e),s=(n=r?.asNumber())!==null&&n!==void 0?n:0;return WV(s,$r.PushButton)?nd.fromDict(t,e):WV(s,$r.Radio)?id.fromDict(t,e):Zu.fromDict(t,e)},HPe=function(t,e){var n,i=qV(t,R.of("Ff")),r=t.context.lookupMaybe(i,_e),s=(n=r?.asNumber())!==null&&n!==void 0?n:0;return WV(s,Lt.Combo)?Ju.fromDict(t,e):rd.fromDict(t,e)},WV=function(t,e){return(t&e)!==0},qV=function(t,e){var n;return _$(t,function(i){n||(n=i.get(e))}),n},_$=function(t,e){e(t);var n=t.lookupMaybe(R.of("Parent"),Ie);n&&_$(n,e)};var UPe=function(){function t(e){this.dict=e}return t.prototype.Fields=function(){var e=this.dict.lookup(R.of("Fields"));if(e instanceof Ye)return e},t.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,n=new Array(e.size()),i=0,r=e.size();i<r;i++){var s=e.get(i),o=e.lookup(i,Ie);n[i]=[zV(o,s),s]}return n},t.prototype.getAllFields=function(){var e=[],n=function(i){if(i)for(var r=0,s=i.length;r<s;r++){var o=i[r];e.push(o);var a=o[0];a instanceof ed&&n(Zw(a.Kids()))}};return n(this.getFields()),e},t.prototype.addField=function(e){var n=this.normalizedEntries().Fields;n?.push(e)},t.prototype.removeField=function(e){var n=e.getParent(),i=n===void 0?this.normalizedEntries().Fields:n.Kids(),r=i?.indexOf(e.ref);if(i===void 0||r===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());i.remove(r),n!==void 0&&i.size()===0&&this.removeField(n)},t.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(R.of("Fields"),e)),{Fields:e}},t.fromDict=function(e){return new t(e)},t.create=function(e){var n=e.obj({Fields:[]});return new t(n)},t}(),yf=UPe;var jPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(R.of("Pages"),Ie)},e.prototype.AcroForm=function(){return this.lookupMaybe(R.of("AcroForm"),Ie)},e.prototype.getAcroForm=function(){var n=this.AcroForm();if(n)return yf.fromDict(n)},e.prototype.getOrCreateAcroForm=function(){var n=this.getAcroForm();if(!n){n=yf.create(this.context);var i=this.context.register(n.dict);this.set(R.of("AcroForm"),i)}return n},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(R.of("ViewerPreferences"),Ie)},e.prototype.getViewerPreferences=function(){var n=this.ViewerPreferences();if(n)return DR.fromDict(n)},e.prototype.getOrCreateViewerPreferences=function(){var n=this.getViewerPreferences();if(!n){n=DR.create(this.context);var i=this.context.register(n.dict);this.set(R.of("ViewerPreferences"),i)}return n},e.prototype.insertLeafNode=function(n,i){var r=this.get(R.of("Pages")),s=this.Pages().insertLeafNode(n,i);return s||r},e.prototype.removeLeafNode=function(n){this.Pages().removeLeafNode(n)},e.withContextAndPages=function(n,i){var r=new Map;return r.set(R.of("Type"),R.of("Catalog")),r.set(R.of("Pages"),i),new e(r,n)},e.fromMapWithContext=function(n,i){return new e(n,i)},e}(Ie),Jw=jPe;var WPe=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(R.of("Parent"))},e.prototype.Kids=function(){return this.lookup(R.of("Kids"),Ye)},e.prototype.Count=function(){return this.lookup(R.of("Count"),_e)},e.prototype.pushTreeNode=function(n){var i=this.Kids();i.push(n)},e.prototype.pushLeafNode=function(n){var i=this.Kids();this.insertLeafKid(i.size(),n)},e.prototype.insertLeafNode=function(n,i){var r=this.Kids(),s=this.Count().asNumber();if(i>s)throw new MV(i,s);for(var o=i,a=0,l=r.size();a<l;a++){if(o===0){this.insertLeafKid(a,n);return}var c=r.get(a),u=this.context.lookup(c);if(u instanceof e){if(u.Count().asNumber()>o)return u.insertLeafNode(n,o)||c;o-=u.Count().asNumber()}u instanceof Xr&&(o-=1)}if(o===0){this.insertLeafKid(r.size(),n);return}throw new OV(i,"insertLeafNode")},e.prototype.removeLeafNode=function(n,i){i===void 0&&(i=!0);var r=this.Kids(),s=this.Count().asNumber();if(n>=s)throw new MV(n,s);for(var o=n,a=0,l=r.size();a<l;a++){var c=r.get(a),u=this.context.lookup(c);if(u instanceof e)if(u.Count().asNumber()>o){u.removeLeafNode(o,i),i&&u.Kids().size()===0&&r.remove(a);return}else o-=u.Count().asNumber();if(u instanceof Xr)if(o===0){this.removeKid(a);return}else o-=1}throw new OV(n,"removeLeafNode")},e.prototype.ascend=function(n){n(this);var i=this.Parent();i&&i.ascend(n)},e.prototype.traverse=function(n){for(var i=this.Kids(),r=0,s=i.size();r<s;r++){var o=i.get(r),a=this.context.lookup(o);a instanceof e&&a.traverse(n),n(a,o)}},e.prototype.insertLeafKid=function(n,i){var r=this.Kids();this.ascend(function(s){var o=s.Count().asNumber()+1;s.set(R.of("Count"),_e.of(o))}),r.insert(n,i)},e.prototype.removeKid=function(n){var i=this.Kids(),r=i.lookup(n);r instanceof Xr&&this.ascend(function(s){var o=s.Count().asNumber()-1;s.set(R.of("Count"),_e.of(o))}),i.remove(n)},e.withContext=function(n,i){var r=new Map;return r.set(R.of("Type"),R.of("Pages")),r.set(R.of("Kids"),n.obj([])),r.set(R.of("Count"),n.obj(0)),i&&r.set(R.of("Parent"),i),new e(r,n)},e.fromMapWithContext=function(n,i){return new e(n,i)},e}(Ie),e0=WPe;var ki=new Uint8Array(256);ki[A.Zero]=1;ki[A.One]=1;ki[A.Two]=1;ki[A.Three]=1;ki[A.Four]=1;ki[A.Five]=1;ki[A.Six]=1;ki[A.Seven]=1;ki[A.Eight]=1;ki[A.Nine]=1;var RR=new Uint8Array(256);RR[A.Period]=1;RR[A.Plus]=1;RR[A.Minus]=1;var t0=new Uint8Array(256);for(Fm=0,E$=256;Fm<E$;Fm++)t0[Fm]=ki[Fm]||RR[Fm]?1:0;var Fm,E$;var D$=A.Newline,T$=A.CarriageReturn,zPe=function(){function t(e,n){n===void 0&&(n=!1),this.bytes=e,this.capNumbers=n}return t.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!ki[n])break;e+=Zs(this.bytes.next())}var i=Number(e);if(!e||!isFinite(i))throw new kV(this.bytes.position(),e);return i},t.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!t0[n]||(e+=Zs(this.bytes.next()),n===A.Period))break}for(;!this.bytes.done();){var n=this.bytes.peek();if(!ki[n])break;e+=Zs(this.bytes.next())}var i=Number(e);if(!e||!isFinite(i))throw new kV(this.bytes.position(),e);if(i>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var r="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(r),Number.MAX_SAFE_INTEGER}else{var r="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(r)}return i},t.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&Oo[this.bytes.peek()];)this.bytes.next()},t.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===D$||e===T$)return;this.bytes.next()}},t.prototype.skipComment=function(){if(this.bytes.peek()!==A.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===D$||e===T$)return!0;this.bytes.next()}return!0},t.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},t.prototype.matchKeyword=function(e){for(var n=this.bytes.offset(),i=0,r=e.length;i<r;i++)if(this.bytes.done()||this.bytes.next()!==e[i])return this.bytes.moveTo(n),!1;return!0},t}(),R$=zPe;var qPe=function(){function t(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return t.prototype.moveTo=function(e){this.idx=e},t.prototype.next=function(){var e=this.bytes[this.idx++];return e===A.Newline?(this.line+=1,this.column=0):this.column+=1,e},t.prototype.assertNext=function(e){if(this.peek()!==e)throw new zX(this.position(),e,this.peek());return this.next()},t.prototype.peek=function(){return this.bytes[this.idx]},t.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},t.prototype.peekAt=function(e){return this.bytes[e]},t.prototype.done=function(){return this.idx>=this.length},t.prototype.offset=function(){return this.idx},t.prototype.slice=function(e,n){return this.bytes.slice(e,n)},t.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},t.of=function(e){return new t(e)},t.fromPDFRawStream=function(e){return t.of(Ww(e).decode())},t}(),sd=qPe;var KPe=A.Space,n0=A.CarriageReturn,i0=A.Newline,r0=[A.s,A.t,A.r,A.e,A.a,A.m],IR=[A.e,A.n,A.d,A.s,A.t,A.r,A.e,A.a,A.m],en={header:[A.Percent,A.P,A.D,A.F,A.Dash],eof:[A.Percent,A.Percent,A.E,A.O,A.F],obj:[A.o,A.b,A.j],endobj:[A.e,A.n,A.d,A.o,A.b,A.j],xref:[A.x,A.r,A.e,A.f],trailer:[A.t,A.r,A.a,A.i,A.l,A.e,A.r],startxref:[A.s,A.t,A.a,A.r,A.t,A.x,A.r,A.e,A.f],true:[A.t,A.r,A.u,A.e],false:[A.f,A.a,A.l,A.s,A.e],null:[A.n,A.u,A.l,A.l],stream:r0,streamEOF1:dt(r0,[KPe,n0,i0]),streamEOF2:dt(r0,[n0,i0]),streamEOF3:dt(r0,[n0]),streamEOF4:dt(r0,[i0]),endstream:IR,EOF1endstream:dt([n0,i0],IR),EOF2endstream:dt([n0],IR),EOF3endstream:dt([i0],IR)};var YPe=function(t){K(e,t);function e(n,i,r){r===void 0&&(r=!1);var s=t.call(this,n,r)||this;return s.context=i,s}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(en.true))return bc.True;if(this.matchKeyword(en.false))return bc.False;if(this.matchKeyword(en.null))return qi;var n=this.bytes.peek();if(n===A.LessThan&&this.bytes.peekAhead(1)===A.LessThan)return this.parseDictOrStream();if(n===A.LessThan)return this.parseHexString();if(n===A.LeftParen)return this.parseString();if(n===A.ForwardSlash)return this.parseName();if(n===A.LeftSquareBracket)return this.parseArray();if(t0[n])return this.parseNumberOrRef();throw new qX(this.bytes.position(),n)},e.prototype.parseNumberOrRef=function(){var n=this.parseRawNumber();this.skipWhitespaceAndComments();var i=this.bytes.offset();if(ki[this.bytes.peek()]){var r=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===A.R)return this.bytes.assertNext(A.R),Ze.of(n,r)}return this.bytes.moveTo(i),_e.of(n)},e.prototype.parseHexString=function(){var n="";for(this.bytes.assertNext(A.LessThan);!this.bytes.done()&&this.bytes.peek()!==A.GreaterThan;)n+=Zs(this.bytes.next());return this.bytes.assertNext(A.GreaterThan),be.of(n)},e.prototype.parseString=function(){for(var n=0,i=!1,r="";!this.bytes.done();){var s=this.bytes.next();if(r+=Zs(s),i||(s===A.LeftParen&&(n+=1),s===A.RightParen&&(n-=1)),s===A.BackSlash?i=!i:i&&(i=!1),n===0)return ht.of(r.substring(1,r.length-1))}throw new QX(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(A.ForwardSlash);for(var n="";!this.bytes.done();){var i=this.bytes.peek();if(Oo[i]||Ds[i])break;n+=Zs(i),this.bytes.next()}return R.of(n)},e.prototype.parseArray=function(){this.bytes.assertNext(A.LeftSquareBracket),this.skipWhitespaceAndComments();for(var n=Ye.withContext(this.context);this.bytes.peek()!==A.RightSquareBracket;){var i=this.parseObject();n.push(i),this.skipWhitespaceAndComments()}return this.bytes.assertNext(A.RightSquareBracket),n},e.prototype.parseDict=function(){this.bytes.assertNext(A.LessThan),this.bytes.assertNext(A.LessThan),this.skipWhitespaceAndComments();for(var n=new Map;!this.bytes.done()&&this.bytes.peek()!==A.GreaterThan&&this.bytes.peekAhead(1)!==A.GreaterThan;){var i=this.parseName(),r=this.parseObject();n.set(i,r),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(A.GreaterThan),this.bytes.assertNext(A.GreaterThan);var s=n.get(R.of("Type"));return s===R.of("Catalog")?Jw.fromMapWithContext(n,this.context):s===R.of("Pages")?e0.fromMapWithContext(n,this.context):s===R.of("Page")?Xr.fromMapWithContext(n,this.context):Ie.fromMapWithContext(n,this.context)},e.prototype.parseDictOrStream=function(){var n=this.bytes.position(),i=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(en.streamEOF1)&&!this.matchKeyword(en.streamEOF2)&&!this.matchKeyword(en.streamEOF3)&&!this.matchKeyword(en.streamEOF4)&&!this.matchKeyword(en.stream))return i;var r=this.bytes.offset(),s,o=i.get(R.of("Length"));o instanceof _e?(s=r+o.asNumber(),this.bytes.moveTo(s),this.skipWhitespaceAndComments(),this.matchKeyword(en.endstream)||(this.bytes.moveTo(r),s=this.findEndOfStreamFallback(n))):s=this.findEndOfStreamFallback(n);var a=this.bytes.slice(r,s);return vl.of(i,a)},e.prototype.findEndOfStreamFallback=function(n){for(var i=1,r=this.bytes.offset();!this.bytes.done()&&(r=this.bytes.offset(),this.matchKeyword(en.stream)?i+=1:this.matchKeyword(en.EOF1endstream)||this.matchKeyword(en.EOF2endstream)||this.matchKeyword(en.EOF3endstream)||this.matchKeyword(en.endstream)?i-=1:this.bytes.next(),i!==0););if(i!==0)throw new YX(n);return r},e.forBytes=function(n,i,r){return new e(sd.of(n),i,r)},e.forByteStream=function(n,i,r){return r===void 0&&(r=!1),new e(n,i,r)},e}(R$),s0=YPe;var QPe=function(t){K(e,t);function e(n,i){var r=t.call(this,sd.fromPDFRawStream(n),n.dict.context)||this,s=n.dict;return r.alreadyParsed=!1,r.shouldWaitForTick=i||function(){return!1},r.firstOffset=s.lookup(R.of("First"),_e).asNumber(),r.objectCount=s.lookup(R.of("N"),_e).asNumber(),r}return e.prototype.parseIntoContext=function(){return Pe(this,void 0,void 0,function(){var n,i,r,s,o,a,l,c;return Me(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new _m("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,n=this.parseOffsetsAndObjectNumbers(),i=0,r=n.length,u.label=1;case 1:return i<r?(s=n[i],o=s.objectNumber,a=s.offset,this.bytes.moveTo(this.firstOffset+a),l=this.parseObject(),c=Ze.of(o,0),this.context.assign(c,l),this.shouldWaitForTick()?[4,dl()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var n=[],i=0,r=this.objectCount;i<r;i++){this.skipWhitespaceAndComments();var s=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.parseRawInt();n.push({objectNumber:s,offset:o})}return n},e.forStream=function(n,i){return new e(n,i)},e}(s0),KV=QPe;var XPe=function(){function t(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=sd.fromPDFRawStream(e),this.context=this.dict.context;var n=this.dict.lookup(R.of("Size"),_e),i=this.dict.lookup(R.of("Index"));if(i instanceof Ye){this.subsections=[];for(var r=0,s=i.size();r<s;r+=2){var o=i.lookup(r+0,_e).asNumber(),a=i.lookup(r+1,_e).asNumber();this.subsections.push({firstObjectNumber:o,length:a})}}else this.subsections=[{firstObjectNumber:0,length:n.asNumber()}];var l=this.dict.lookup(R.of("W"),Ye);this.byteWidths=[-1,-1,-1];for(var r=0,s=l.size();r<s;r++)this.byteWidths[r]=l.lookup(r,_e).asNumber()}return t.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new _m("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(R.of("Root")),Encrypt:this.dict.get(R.of("Encrypt")),Info:this.dict.get(R.of("Info")),ID:this.dict.get(R.of("ID"))};var e=this.parseEntries();return e},t.prototype.parseEntries=function(){for(var e=[],n=this.byteWidths,i=n[0],r=n[1],s=n[2],o=0,a=this.subsections.length;o<a;o++)for(var l=this.subsections[o],c=l.firstObjectNumber,u=l.length,d=0;d<u;d++){for(var h=0,p=0,g=i;p<g;p++)h=h<<8|this.bytes.next();for(var m=0,p=0,g=r;p<g;p++)m=m<<8|this.bytes.next();for(var v=0,p=0,g=s;p<g;p++)v=v<<8|this.bytes.next();i===0&&(h=1);var C=c+d,b={ref:Ze.of(C,v),offset:m,deleted:h===0,inObjectStream:h===2};e.push(b)}return e},t.forStream=function(e){return new t(e)},t}(),YV=XPe;var $Pe=function(t){K(e,t);function e(n,i,r,s){i===void 0&&(i=1/0),r===void 0&&(r=!1),s===void 0&&(s=!1);var o=t.call(this,sd.of(n),Rm.create(),s)||this;return o.alreadyParsed=!1,o.parsedObjects=0,o.shouldWaitForTick=function(){return o.parsedObjects+=1,o.parsedObjects%o.objectsPerTick===0},o.objectsPerTick=i,o.throwOnInvalidObject=r,o}return e.prototype.parseDocument=function(){return Pe(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:if(this.alreadyParsed)throw new _m("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),r.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(r.sent(),i=this.bytes.offset(),i===n)throw new XX(this.bytes.position());return n=i,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(Ze.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(Ze.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var n=function(u){return u instanceof Ie&&u.lookup(R.of("Type"))===R.of("Catalog")},i=this.context.lookup(this.context.trailerInfo.Root);if(!n(i))for(var r=this.context.enumerateIndirectObjects(),s=0,o=r.length;s<o;s++){var a=r[s],l=a[0],c=a[1];n(c)&&(this.context.trailerInfo.Root=l)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(en.header)){var n=this.parseRawInt();this.bytes.assertNext(A.Period);var i=this.parseRawInt(),r=Sc.forVersion(n,i);return this.skipBinaryHeaderComment(),r}this.bytes.next()}throw new $X(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var n=this.parseRawInt();this.skipWhitespaceAndComments();var i=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(en.obj))throw new ZX(this.bytes.position(),en.obj);return Ze.of(n,i)},e.prototype.matchIndirectObjectHeader=function(){var n=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(n),!1}},e.prototype.parseIndirectObject=function(){return Pe(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:return n=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),i=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(en.endobj),i instanceof vl&&i.dict.lookup(R.of("Type"))===R.of("ObjStm")?[4,KV.forStream(i,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return r.sent(),[3,3];case 2:i instanceof vl&&i.dict.lookup(R.of("Type"))===R.of("XRef")?YV.forStream(i).parseIntoContext():this.context.assign(n,i),r.label=3;case 3:return[2,n]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var n=this.bytes.position(),i="Trying to parse invalid object: "+JSON.stringify(n)+")";if(this.throwOnInvalidObject)throw new Error(i);console.warn(i);var r=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+r),this.skipWhitespaceAndComments();for(var s=this.bytes.offset(),o=!0;!this.bytes.done()&&(this.matchKeyword(en.endobj)&&(o=!1),!!o);)this.bytes.next();if(o)throw new KX(n);var a=this.bytes.offset()-en.endobj.length,l=Gw.of(this.bytes.slice(s,a));return this.context.assign(r,l),r},e.prototype.parseIndirectObjects=function(){return Pe(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:this.skipWhitespaceAndComments(),r.label=1;case 1:if(!(!this.bytes.done()&&ki[this.bytes.peek()]))return[3,8];n=this.bytes.offset(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return r.sent(),[3,5];case 4:return i=r.sent(),this.bytes.moveTo(n),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,dl()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(en.xref)){this.skipWhitespaceAndComments();for(var n=-1,i=Lw.createEmpty();!this.bytes.done()&&ki[this.bytes.peek()];){var r=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.bytes.peek();if(o===A.n||o===A.f){var a=Ze.of(n,s);this.bytes.next()===A.n?i.addEntry(a,r):i.addDeletedEntry(a,r),n+=1}else n=r;this.skipWhitespaceAndComments()}return i}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(en.trailer)){this.skipWhitespaceAndComments();var n=this.parseDict(),i=this.context;i.trailerInfo={Root:n.get(R.of("Root"))||i.trailerInfo.Root,Encrypt:n.get(R.of("Encrypt"))||i.trailerInfo.Encrypt,Info:n.get(R.of("Info"))||i.trailerInfo.Info,ID:n.get(R.of("ID"))||i.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(en.startxref)){this.skipWhitespaceAndComments();var n=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(en.eof),this.skipWhitespaceAndComments(),this.matchKeyword(en.eof),this.skipWhitespaceAndComments(),hf.forLastCrossRefSectionOffset(n)}},e.prototype.parseDocumentSection=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(n){switch(n.label){case 0:return[4,this.parseIndirectObjects()];case 1:return n.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var n=this.bytes.offset(),i=this.bytes.peek(),r=i>=A.Space&&i<=A.Tilde;if(r&&(this.matchKeyword(en.xref)||this.matchKeyword(en.trailer)||this.matchKeyword(en.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(n);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var n=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(n)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(n,i,r,s){return new e(n,i,r,s)},e}(s0),QV=$Pe;var Cl=function(t){return 1<<t},o0=function(t){return t[t.Invisible=Cl(0)]="Invisible",t[t.Hidden=Cl(1)]="Hidden",t[t.Print=Cl(2)]="Print",t[t.NoZoom=Cl(3)]="NoZoom",t[t.NoRotate=Cl(4)]="NoRotate",t[t.NoView=Cl(5)]="NoView",t[t.ReadOnly=Cl(6)]="ReadOnly",t[t.Locked=Cl(7)]="Locked",t[t.ToggleNoView=Cl(8)]="ToggleNoView",t[t.LockedContents=Cl(9)]="LockedContents",t}(o0||{});var a0=function(t){return t instanceof R?t:R.of(t)},tt=function(t){return t instanceof _e?t:_e.of(t)},at=function(t){return t instanceof _e?t.asNumber():t};var xR=function(t){return t.Degrees="degrees",t.Radians="radians",t}(xR||{});var Oe=function(t){return L(t,"degreeAngle",["number"]),{type:xR.Degrees,angle:t}},I$=xR.Radians,x$=xR.Degrees,XV=function(t){return t*Math.PI/180},ZPe=function(t){return t*180/Math.PI},Ki=function(t){return t.type===I$?t.angle:t.type===x$?XV(t.angle):ef("Invalid rotation: "+JSON.stringify(t))},FR=function(t){return t.type===I$?ZPe(t.angle):t.type===x$?t.angle:ef("Invalid rotation: "+JSON.stringify(t))},_a=function(t){t===void 0&&(t=0);var e=t/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},Ec=function(t,e){e===void 0&&(e=0);var n=_a(e);return n===90||n===270?{width:t.height,height:t.width}:{width:t.width,height:t.height}},F$=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=t.x,r=t.y,s=t.width,o=t.height,a=_a(n),l=e/2;return a===0?{x:i-l,y:r-l,width:s,height:o}:a===90?{x:i-o+l,y:r-l,width:o,height:s}:a===180?{x:i-s+l,y:r-o+l,width:s,height:o}:a===270?{x:i-l,y:r-s+l,width:o,height:s}:{x:i-l,y:r-l,width:s,height:o}};var $V=function(){return yt.of(Et.ClipNonZero)};var AR=Math.cos,PR=Math.sin,MR=Math.tan,OR=function(t,e,n,i,r,s){return yt.of(Et.ConcatTransformationMatrix,[tt(t),tt(e),tt(n),tt(i),tt(r),tt(s)])},Zr=function(t,e){return OR(1,0,0,1,t,e)},Cf=function(t,e){return OR(t,0,0,e,0,0)},wf=function(t){return OR(AR(at(t)),PR(at(t)),-PR(at(t)),AR(at(t)),0,0)},l0=function(t){return wf(XV(at(t)))},kR=function(t,e){return OR(1,MR(at(t)),MR(at(e)),1,0,0)};var c0=function(t,e){return yt.of(Et.SetLineDashPattern,["["+t.map(tt).join(" ")+"]",tt(e)])};var Am=function(t){return t[t.Butt=0]="Butt",t[t.Round=1]="Round",t[t.Projecting=2]="Projecting",t}(Am||{}),u0=function(t){return yt.of(Et.SetLineCapStyle,[tt(t)])};var od=function(t){return yt.of(Et.SetGraphicsStateParams,[a0(t)])},Yn=function(){return yt.of(Et.PushGraphicsState)},Qn=function(){return yt.of(Et.PopGraphicsState)},Pm=function(t){return yt.of(Et.SetLineWidth,[tt(t)])},Jr=function(t,e,n,i,r,s){return yt.of(Et.AppendBezierCurve,[tt(t),tt(e),tt(n),tt(i),tt(r),tt(s)])},d0=function(t,e,n,i){return yt.of(Et.CurveToReplicateInitialPoint,[tt(t),tt(e),tt(n),tt(i)])},wl=function(){return yt.of(Et.ClosePath)},ko=function(t,e){return yt.of(Et.MoveTo,[tt(t),tt(e)])},Si=function(t,e){return yt.of(Et.LineTo,[tt(t),tt(e)])};var Mm=function(){return yt.of(Et.StrokePath)},NR=function(){return yt.of(Et.FillNonZero)},LR=function(){return yt.of(Et.FillNonZeroAndStroke)},ZV=function(){return yt.of(Et.EndPath)},A$=function(){return yt.of(Et.NextLine)};var JV=function(t){return yt.of(Et.ShowText,[t])},eB=function(){return yt.of(Et.BeginText)},tB=function(){return yt.of(Et.EndText)},h0=function(t,e){return yt.of(Et.SetFontAndSize,[a0(t),tt(e)])};var P$=function(t){return yt.of(Et.SetTextLineHeight,[tt(t)])};var JPe=function(t,e,n,i,r,s){return yt.of(Et.SetTextMatrix,[tt(t),tt(e),tt(n),tt(i),tt(r),tt(s)])},nB=function(t,e,n,i,r){return JPe(AR(at(t)),PR(at(t))+MR(at(e)),-PR(at(t))+MR(at(n)),AR(at(t)),i,r)};var f0=function(t){return yt.of(Et.DrawObject,[a0(t)])},M$=function(t){return yt.of(Et.NonStrokingColorGray,[tt(t)])},O$=function(t){return yt.of(Et.StrokingColorGray,[tt(t)])},k$=function(t,e,n){return yt.of(Et.NonStrokingColorRgb,[tt(t),tt(e),tt(n)])},N$=function(t,e,n){return yt.of(Et.StrokingColorRgb,[tt(t),tt(e),tt(n)])},L$=function(t,e,n,i){return yt.of(Et.NonStrokingColorCmyk,[tt(t),tt(e),tt(n),tt(i)])},V$=function(t,e,n,i){return yt.of(Et.StrokingColorCmyk,[tt(t),tt(e),tt(n),tt(i)])},iB=function(t){return yt.of(Et.BeginMarkedContent,[a0(t)])},rB=function(){return yt.of(Et.EndMarkedContent)};var Sf=function(t){return t.Grayscale="Grayscale",t.RGB="RGB",t.CMYK="CMYK",t}(Sf||{}),sB=function(t){return Sr(t,"gray",0,1),{type:Sf.Grayscale,gray:t}},wt=function(t,e,n){return Sr(t,"red",0,1),Sr(e,"green",0,1),Sr(n,"blue",0,1),{type:Sf.RGB,red:t,green:e,blue:n}},oB=function(t,e,n,i){return Sr(t,"cyan",0,1),Sr(e,"magenta",0,1),Sr(n,"yellow",0,1),Sr(i,"key",0,1),{type:Sf.CMYK,cyan:t,magenta:e,yellow:n,key:i}},aB=Sf.Grayscale,lB=Sf.RGB,cB=Sf.CMYK,Sl=function(t){return t.type===aB?M$(t.gray):t.type===lB?k$(t.red,t.green,t.blue):t.type===cB?L$(t.cyan,t.magenta,t.yellow,t.key):ef("Invalid color: "+JSON.stringify(t))},Om=function(t){return t.type===aB?O$(t.gray):t.type===lB?N$(t.red,t.green,t.blue):t.type===cB?V$(t.cyan,t.magenta,t.yellow,t.key):ef("Invalid color: "+JSON.stringify(t))},_r=function(t,e){return e===void 0&&(e=1),t?.length===1?sB(t[0]*e):t?.length===3?wt(t[0]*e,t[1]*e,t[2]*e):t?.length===4?oB(t[0]*e,t[1]*e,t[2]*e,t[3]*e):void 0},uB=function(t){return t.type===aB?[t.gray]:t.type===lB?[t.red,t.green,t.blue]:t.type===cB?[t.cyan,t.magenta,t.yellow,t.key]:ef("Invalid color: "+JSON.stringify(t))};var ke=0,Ne=0,Mt=0,Ot=0,p0=0,g0=0,B$=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),eMe=function(t){for(var e,n=[],i=[],r="",s=!1,o=0,a=0,l=t;a<l.length;a++){var c=l[a];if(B$.has(c))o=B$.get(c),e&&(r.length>0&&(i[i.length]=+r),n[n.length]={cmd:e,args:i},i=[],r="",s=!1),e=c;else if([" ",","].includes(c)||c==="-"&&r.length>0&&r[r.length-1]!=="e"||c==="."&&s){if(r.length===0)continue;i.length===o?(n[n.length]={cmd:e,args:i},i=[+r],e==="M"&&(e="L"),e==="m"&&(e="l")):i[i.length]=+r,s=c===".",r=["-","."].includes(c)?c:""}else r+=c,c==="."&&(s=!0)}return r.length>0&&(i.length===o?(n[n.length]={cmd:e,args:i},i=[+r],e==="M"&&(e="L"),e==="m"&&(e="l")):i[i.length]=+r),n[n.length]={cmd:e,args:i},n},tMe=function(t){ke=Ne=Mt=Ot=p0=g0=0;for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i.cmd&&typeof G$[i.cmd]=="function"){var r=G$[i.cmd](i.args);Array.isArray(r)?e=e.concat(r):e.push(r)}}return e},G$={M:function(t){return ke=t[0],Ne=t[1],Mt=Ot=null,p0=ke,g0=Ne,ko(ke,Ne)},m:function(t){return ke+=t[0],Ne+=t[1],Mt=Ot=null,p0=ke,g0=Ne,ko(ke,Ne)},C:function(t){return ke=t[4],Ne=t[5],Mt=t[2],Ot=t[3],Jr(t[0],t[1],t[2],t[3],t[4],t[5])},c:function(t){var e=Jr(t[0]+ke,t[1]+Ne,t[2]+ke,t[3]+Ne,t[4]+ke,t[5]+Ne);return Mt=ke+t[2],Ot=Ne+t[3],ke+=t[4],Ne+=t[5],e},S:function(t){(Mt===null||Ot===null)&&(Mt=ke,Ot=Ne);var e=Jr(ke-(Mt-ke),Ne-(Ot-Ne),t[0],t[1],t[2],t[3]);return Mt=t[0],Ot=t[1],ke=t[2],Ne=t[3],e},s:function(t){(Mt===null||Ot===null)&&(Mt=ke,Ot=Ne);var e=Jr(ke-(Mt-ke),Ne-(Ot-Ne),ke+t[0],Ne+t[1],ke+t[2],Ne+t[3]);return Mt=ke+t[0],Ot=Ne+t[1],ke+=t[2],Ne+=t[3],e},Q:function(t){return Mt=t[0],Ot=t[1],ke=t[2],Ne=t[3],d0(t[0],t[1],ke,Ne)},q:function(t){var e=d0(t[0]+ke,t[1]+Ne,t[2]+ke,t[3]+Ne);return Mt=ke+t[0],Ot=Ne+t[1],ke+=t[2],Ne+=t[3],e},T:function(t){Mt===null||Ot===null?(Mt=ke,Ot=Ne):(Mt=ke-(Mt-ke),Ot=Ne-(Ot-Ne));var e=d0(Mt,Ot,t[0],t[1]);return Mt=ke-(Mt-ke),Ot=Ne-(Ot-Ne),ke=t[0],Ne=t[1],e},t:function(t){Mt===null||Ot===null?(Mt=ke,Ot=Ne):(Mt=ke-(Mt-ke),Ot=Ne-(Ot-Ne));var e=d0(Mt,Ot,ke+t[0],Ne+t[1]);return ke+=t[0],Ne+=t[1],e},A:function(t){var e=H$(ke,Ne,t);return ke=t[5],Ne=t[6],e},a:function(t){t[5]+=ke,t[6]+=Ne;var e=H$(ke,Ne,t);return ke=t[5],Ne=t[6],e},L:function(t){return ke=t[0],Ne=t[1],Mt=Ot=null,Si(ke,Ne)},l:function(t){return ke+=t[0],Ne+=t[1],Mt=Ot=null,Si(ke,Ne)},H:function(t){return ke=t[0],Mt=Ot=null,Si(ke,Ne)},h:function(t){return ke+=t[0],Mt=Ot=null,Si(ke,Ne)},V:function(t){return Ne=t[0],Mt=Ot=null,Si(ke,Ne)},v:function(t){return Ne+=t[0],Mt=Ot=null,Si(ke,Ne)},Z:function(){var t=wl();return ke=p0,Ne=g0,t},z:function(){var t=wl();return ke=p0,Ne=g0,t}},H$=function(t,e,n){for(var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=nMe(l,c,i,r,o,a,s,t,e),d=[],h=0,p=u;h<p.length;h++){var g=p[h],m=iMe.apply(void 0,g);d.push(Jr.apply(void 0,m))}return d},nMe=function(t,e,n,i,r,s,o,a,l){var c=o*(Math.PI/180),u=Math.sin(c),d=Math.cos(c);n=Math.abs(n),i=Math.abs(i),Mt=d*(a-t)*.5+u*(l-e)*.5,Ot=d*(l-e)*.5-u*(a-t)*.5;var h=Mt*Mt/(n*n)+Ot*Ot/(i*i);h>1&&(h=Math.sqrt(h),n*=h,i*=h);var p=d/n,g=u/n,m=-u/i,v=d/i,C=p*a+g*l,b=m*a+v*l,E=p*t+g*e,T=m*t+v*e,P=(E-C)*(E-C)+(T-b)*(T-b),x=1/P-.25;x<0&&(x=0);var _=Math.sqrt(x);s===r&&(_=-_);var S=.5*(C+E)-_*(T-b),D=.5*(b+T)+_*(E-C),O=Math.atan2(b-D,C-S),F=Math.atan2(T-D,E-S),k=F-O;k<0&&s===1?k+=2*Math.PI:k>0&&s===0&&(k-=2*Math.PI);for(var M=Math.ceil(Math.abs(k/(Math.PI*.5+.001))),ce=[],xe=0;xe<M;xe++){var Ue=O+xe*k/M,Ce=O+(xe+1)*k/M;ce[xe]=[S,D,Ue,Ce,n,i,u,d]}return ce},iMe=function(t,e,n,i,r,s,o,a){var l=a*r,c=-o*s,u=o*r,d=a*s,h=.5*(i-n),p=8/3*Math.sin(h*.5)*Math.sin(h*.5)/Math.sin(h),g=t+Math.cos(n)-p*Math.sin(n),m=e+Math.sin(n)+p*Math.cos(n),v=t+Math.cos(i),C=e+Math.sin(i),b=v+p*Math.sin(i),E=C-p*Math.cos(i),T=[l*g+c*m,u*g+d*m,l*b+c*E,u*b+d*E,l*v+c*C,u*v+d*C];return T},U$=function(t){return tMe(eMe(t))};var j$=function(t,e){for(var n=[Yn(),e.graphicsState&&od(e.graphicsState),eB(),Sl(e.color),h0(e.font,e.size),P$(e.lineHeight),nB(Ki(e.rotate),Ki(e.xSkew),Ki(e.ySkew),e.x,e.y)].filter(Boolean),i=0,r=t.length;i<r;i++)n.push(JV(t[i]),A$());return n.push(tB(),Qn()),n},GR=function(t,e){return[Yn(),e.graphicsState&&od(e.graphicsState),Zr(e.x,e.y),wf(Ki(e.rotate)),Cf(e.width,e.height),kR(Ki(e.xSkew),Ki(e.ySkew)),f0(t),Qn()].filter(Boolean)},W$=function(t,e){return[Yn(),e.graphicsState&&od(e.graphicsState),Zr(e.x,e.y),wf(Ki(e.rotate)),Cf(e.xScale,e.yScale),kR(Ki(e.xSkew),Ki(e.ySkew)),f0(t),Qn()].filter(Boolean)},z$=function(t){var e,n;return[Yn(),t.graphicsState&&od(t.graphicsState),t.color&&Om(t.color),Pm(t.thickness),c0((e=t.dashArray)!==null&&e!==void 0?e:[],(n=t.dashPhase)!==null&&n!==void 0?n:0),ko(t.start.x,t.start.y),t.lineCap&&u0(t.lineCap),ko(t.start.x,t.start.y),Si(t.end.x,t.end.y),Mm(),Qn()].filter(Boolean)},bf=function(t){var e,n;return[Yn(),t.graphicsState&&od(t.graphicsState),t.color&&Sl(t.color),t.borderColor&&Om(t.borderColor),Pm(t.borderWidth),t.borderLineCap&&u0(t.borderLineCap),c0((e=t.borderDashArray)!==null&&e!==void 0?e:[],(n=t.borderDashPhase)!==null&&n!==void 0?n:0),Zr(t.x,t.y),wf(Ki(t.rotate)),kR(Ki(t.xSkew),Ki(t.ySkew)),ko(0,0),Si(0,t.height),Si(t.width,t.height),Si(t.width,0),wl(),t.color&&t.borderWidth?LR():t.color?NR():t.borderColor?Mm():wl(),Qn()].filter(Boolean)},VR=4*((Math.sqrt(2)-1)/3),rMe=function(t){var e=at(t.x),n=at(t.y),i=at(t.xScale),r=at(t.yScale);e-=i,n-=r;var s=i*VR,o=r*VR,a=e+i*2,l=n+r*2,c=e+i,u=n+r;return[Yn(),ko(e,u),Jr(e,u-o,c-s,n,c,n),Jr(c+s,n,a,u-o,a,u),Jr(a,u+o,c+s,l,c,l),Jr(c-s,l,e,u+o,e,u),Qn()]},sMe=function(t){var e=at(t.x),n=at(t.y),i=at(t.xScale),r=at(t.yScale),s=-i,o=-r,a=i*VR,l=r*VR,c=s+i*2,u=o+r*2,d=s+i,h=o+r;return[Zr(e,n),wf(Ki(t.rotate)),ko(s,h),Jr(s,h-l,d-a,o,d,o),Jr(d+a,o,c,h-l,c,h),Jr(c,h+l,d+a,u,d,u),Jr(d-a,u,s,h+l,s,h)]},BR=function(t){var e,n,i;return dt([Yn(),t.graphicsState&&od(t.graphicsState),t.color&&Sl(t.color),t.borderColor&&Om(t.borderColor),Pm(t.borderWidth),t.borderLineCap&&u0(t.borderLineCap),c0((e=t.borderDashArray)!==null&&e!==void 0?e:[],(n=t.borderDashPhase)!==null&&n!==void 0?n:0)],t.rotate===void 0?rMe({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale}):sMe({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale,rotate:(i=t.rotate)!==null&&i!==void 0?i:Oe(0)}),[t.color&&t.borderWidth?LR():t.color?NR():t.borderColor?Mm():wl(),Qn()]).filter(Boolean)},q$=function(t,e){var n,i,r;return dt([Yn(),e.graphicsState&&od(e.graphicsState),Zr(e.x,e.y),wf(Ki((n=e.rotate)!==null&&n!==void 0?n:Oe(0))),e.scale?Cf(e.scale,-e.scale):Cf(1,-1),e.color&&Sl(e.color),e.borderColor&&Om(e.borderColor),e.borderWidth&&Pm(e.borderWidth),e.borderLineCap&&u0(e.borderLineCap),c0((i=e.borderDashArray)!==null&&i!==void 0?i:[],(r=e.borderDashPhase)!==null&&r!==void 0?r:0)],U$(t),[e.color&&e.borderWidth?LR():e.color?NR():e.borderColor?Mm():wl(),Qn()]).filter(Boolean)},oMe=function(t){var e=at(t.size),n=-1+.75,i=-1+.51,r=1-.525,s=1-.31,o=-1+.325,a=-((o-n)*(s-n))/(r-i)+i;return[Yn(),t.color&&Om(t.color),Pm(t.thickness),Zr(t.x,t.y),ko(o*e,a*e),Si(n*e,i*e),Si(s*e,r*e),Mm(),Qn()].filter(Boolean)},Ea=function(t){return t.rotation===0?[Zr(0,0),l0(0)]:t.rotation===90?[Zr(t.width,0),l0(90)]:t.rotation===180?[Zr(t.width,t.height),l0(180)]:t.rotation===270?[Zr(0,t.height),l0(270)]:[]},m0=function(t){var e=bf({x:t.x,y:t.y,width:t.width,height:t.height,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)});if(!t.filled)return e;var n=at(t.width),i=at(t.height),r=Math.min(n,i)/2,s=oMe({x:n/2,y:i/2,size:r,thickness:t.thickness,color:t.markColor});return dt([Yn()],e,s,[Qn()])},v0=function(t){var e=at(t.width),n=at(t.height),i=Math.min(e,n)/2,r=BR({x:t.x,y:t.y,xScale:i,yScale:i,color:t.color,borderColor:t.borderColor,borderWidth:t.borderWidth});if(!t.filled)return r;var s=BR({x:t.x,y:t.y,xScale:i*.45,yScale:i*.45,color:t.dotColor,borderColor:void 0,borderWidth:0});return dt([Yn()],r,s,[Qn()])},dB=function(t){var e=at(t.x),n=at(t.y),i=at(t.width),r=at(t.height),s=bf({x:e,y:n,width:i,height:r,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}),o=hB(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)});return dt([Yn()],s,o,[Qn()])},hB=function(t,e){for(var n=[eB(),Sl(e.color),h0(e.font,e.size)],i=0,r=t.length;i<r;i++){var s=t[i],o=s.encoded,a=s.x,l=s.y;n.push(nB(Ki(e.rotate),Ki(e.xSkew),Ki(e.ySkew),a,l),JV(o))}return n.push(tB()),n},fB=function(t){var e=at(t.x),n=at(t.y),i=at(t.width),r=at(t.height),s=at(t.borderWidth),o=at(t.padding),a=e+s/2+o,l=n+s/2+o,c=i-(s/2+o)*2,u=r-(s/2+o)*2,d=[ko(a,l),Si(a,l+u),Si(a+c,l+u),Si(a+c,l),wl(),$V(),ZV()],h=bf({x:e,y:n,width:i,height:r,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}),p=hB(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}),g=dt([iB("Tx"),Yn()],p,[Qn(),rB()]);return dt([Yn()],h,d,g,[Qn()])},K$=function(t){for(var e=at(t.x),n=at(t.y),i=at(t.width),r=at(t.height),s=at(t.lineHeight),o=at(t.borderWidth),a=at(t.padding),l=e+o/2+a,c=n+o/2+a,u=i-(o/2+a)*2,d=r-(o/2+a)*2,h=[ko(l,c),Si(l,c+d),Si(l+u,c+d),Si(l+u,c),wl(),$V(),ZV()],p=bf({x:e,y:n,width:i,height:r,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}),g=[],m=0,v=t.selectedLines.length;m<v;m++){var C=t.textLines[t.selectedLines[m]];g.push.apply(g,bf({x:C.x-a,y:C.y-(s-C.height)/2,width:i-o,height:C.height+(s-C.height)/2,borderWidth:0,color:t.selectedColor,borderColor:void 0,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}))}var b=hB(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)}),E=dt([iB("Tx"),Yn()],b,[Qn(),rB()]);return dt([Yn()],p,g,h,E,[Qn()])};var Y$=function(t){K(e,t);function e(){var n=this,i="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return n=t.call(this,i)||this,n}return e}(Error);var Q$=function(t){K(e,t);function e(){var n=this,i="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return n=t.call(this,i)||this,n}return e}(Error);var X$=function(t){K(e,t);function e(){var n=this,i="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return n=t.call(this,i)||this,n}return e}(Error);var $$=function(t){K(e,t);function e(){var n=this,i="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return n=t.call(this,i)||this,n}return e}(Error);var Z$=function(t){K(e,t);function e(n){var i=this,r='PDFDocument has no form field with the name "'+n+'"';return i=t.call(this,r)||this,i}return e}(Error);var ad=function(t){K(e,t);function e(n,i,r){var s,o,a=this,l=i?.name,c=(o=(s=r?.constructor)===null||s===void 0?void 0:s.name)!==null&&o!==void 0?o:r,u='Expected field "'+n+'" to be of type '+l+", "+("but it is actually of type "+c);return a=t.call(this,u)||this,a}return e}(Error);var smt=function(t){K(e,t);function e(n){var i=this,r='Failed to select check box due to missing onValue: "'+n+'"';return i=t.call(this,r)||this,i}return e}(Error);var pB=function(t){K(e,t);function e(n){var i=this,r='A field already exists with the specified name: "'+n+'"';return i=t.call(this,r)||this,i}return e}(Error);var J$=function(t){K(e,t);function e(n){var i=this,r='Field name contains invalid component: "'+n+'"';return i=t.call(this,r)||this,i}return e}(Error);var omt=function(t){K(e,t);function e(n){var i=this,r='A non-terminal field already exists with the specified name: "'+n+'"';return i=t.call(this,r)||this,i}return e}(Error);var eZ=function(t){K(e,t);function e(n){var i=this,r="Reading rich text fields is not supported: Attempted to read rich text field: "+n;return i=t.call(this,r)||this,i}return e}(Error);var tZ=function(t){K(e,t);function e(n,i){var r=this,s="Failed to layout combed text as lineLength="+n+" is greater than cellCount="+i;return r=t.call(this,s)||this,r}return e}(Error);var nZ=function(t){K(e,t);function e(n,i,r){var s=this,o="Attempted to set text with length="+n+" for TextField with maxLength="+i+" and name="+r;return s=t.call(this,o)||this,s}return e}(Error);var iZ=function(t){K(e,t);function e(n,i,r){var s=this,o="Attempted to set maxLength="+i+", which is less than "+n+", the length of this field's current value (name="+r+")";return s=t.call(this,o)||this,s}return e}(Error);var ai=function(t){return t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t}(ai||{});var rZ=4,sZ=500,oZ=function(t,e,n,i){i===void 0&&(i=!1);for(var r=rZ;r<sZ;){for(var s=0,o=0,a=t.length;o<a;o++){s+=1;for(var l=t[o],c=l.split(" "),u=n.width,d=0,h=c.length;d<h;d++){var p=d===h-1,g=p?c[d]:c[d]+" ",m=e.widthOfTextAtSize(g,r);u-=m,u<=0&&(s+=1,u=n.width-m)}}if(!i&&s>t.length)return r-1;var v=e.heightAtSize(r),C=v+v*.2,b=C*s;if(b>Math.abs(n.height))return r-1;r+=1}return r},aMe=function(t,e,n,i){for(var r=n.width/i,s=n.height,o=rZ,a=uY(t);o<sZ;){for(var l=0,c=a.length;l<c;l++){var u=a[l],d=e.widthOfTextAtSize(u,o)>r*.75;if(d)return o-1}var h=e.heightAtSize(o,{descender:!1});if(h>s)return o-1;o+=1}return o},lMe=function(t){for(var e=t.length;e>0;e--)if(/\s/.test(t[e]))return e},cMe=function(t,e,n,i){for(var r,s=t.length;s>0;){var o=t.substring(0,s),a=n.encodeText(o),l=n.widthOfTextAtSize(o,i);if(l<e){var c=t.substring(s)||void 0;return{line:o,encoded:a,width:l,remainder:c}}s=(r=lMe(o))!==null&&r!==void 0?r:0}return{line:t,encoded:n.encodeText(t),width:n.widthOfTextAtSize(t,i),remainder:void 0}},gB=function(t,e){var n=e.alignment,i=e.fontSize,r=e.font,s=e.bounds,o=zT(Xh(t));(i===void 0||i===0)&&(i=oZ(o,r,s,!0));for(var a=r.heightAtSize(i),l=a+a*.2,c=[],u=s.x,d=s.y,h=s.x+s.width,p=s.y+s.height,g=s.y+s.height,m=0,v=o.length;m<v;m++)for(var C=o[m];C!==void 0;){var b=cMe(C,s.width,r,i),E=b.line,T=b.encoded,P=b.width,x=b.remainder,_=n===ai.Left?s.x:n===ai.Center?s.x+s.width/2-P/2:n===ai.Right?s.x+s.width-P:s.x;g-=l,_<u&&(u=_),g<d&&(d=g),_+P>h&&(h=_+P),g+a>p&&(p=g+a),c.push({text:E,encoded:T,width:P,height:a,x:_,y:g}),C=x?.trim()}return{fontSize:i,lineHeight:l,lines:c,bounds:{x:u,y:d,width:h-u,height:p-d}}},aZ=function(t,e){var n=e.fontSize,i=e.font,r=e.bounds,s=e.cellCount,o=qL(Xh(t));if(o.length>s)throw new tZ(o.length,s);(n===void 0||n===0)&&(n=aMe(o,i,r,s));for(var a=r.width/s,l=i.heightAtSize(n,{descender:!1}),c=r.y+(r.height/2-l/2),u=[],d=r.x,h=r.y,p=r.x+r.width,g=r.y+r.height,m=0,v=0;m<s;){var C=KL(o,v),b=C[0],E=C[1],T=i.encodeText(b),P=i.widthOfTextAtSize(b,n),x=r.x+(a*m+a/2),_=x-P/2;_<d&&(d=_),c<h&&(h=c),_+P>p&&(p=_+P),c+l>g&&(g=c+l),u.push({text:o,encoded:T,width:P,height:l,x:_,y:c}),m+=1,v+=E}return{fontSize:n,cells:u,bounds:{x:d,y:h,width:p-d,height:g-h}}},y0=function(t,e){var n=e.alignment,i=e.fontSize,r=e.font,s=e.bounds,o=qL(Xh(t));(i===void 0||i===0)&&(i=oZ([o],r,s));var a=r.encodeText(o),l=r.widthOfTextAtSize(o,i),c=r.heightAtSize(i,{descender:!1}),u=n===ai.Left?s.x:n===ai.Center?s.x+s.width/2-l/2:n===ai.Right?s.x+s.width-l:s.x,d=s.y+(s.height/2-c/2);return{fontSize:i,line:{text:o,encoded:a,width:l,height:c,x:u,y:d},bounds:{x:u,y:d,width:l,height:c}}};var Vo=function(t){return"normal"in t?t:{normal:t}},uMe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,ld=function(t){var e,n,i=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",r=(n=dw(i,uMe).match)!==null&&n!==void 0?n:[],s=Number(r[2]);return isFinite(s)?s:void 0},dMe=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,No=function(t){var e,n=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",i=dw(n,dMe).match,r=i??[],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5];if(c==="g"&&s)return sB(Number(s));if(c==="rg"&&s&&o&&a)return wt(Number(s),Number(o),Number(a));if(c==="k"&&s&&o&&a&&l)return oB(Number(s),Number(o),Number(a),Number(l))},Lo=function(t,e,n,i){var r;i===void 0&&(i=0);var s=[Sl(e).toString(),h0((r=n?.name)!==null&&r!==void 0?r:"dummy__noop",i).toString()].join(`
`);t.setDefaultAppearance(s)},lZ=function(t,e){var n,i,r,s=No(e),o=No(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(n=c?.getWidth())!==null&&n!==void 0?n:0,d=_a(l?.getRotation()),h=Ec(a,d),p=h.width,g=h.height,m=Ea($e($e({},a),{rotation:d})),v=wt(0,0,0),C=(i=_r(l?.getBorderColor()))!==null&&i!==void 0?i:v,b=_r(l?.getBackgroundColor()),E=_r(l?.getBackgroundColor(),.8),T=(r=s??o)!==null&&r!==void 0?r:v;Lo(s?e:t.acroField,T);var P={x:0+u/2,y:0+u/2,width:p-u,height:g-u,thickness:1.5,borderWidth:u,borderColor:C,markColor:T};return{normal:{on:dt(m,m0($e($e({},P),{color:b,filled:!0}))),off:dt(m,m0($e($e({},P),{color:b,filled:!1})))},down:{on:dt(m,m0($e($e({},P),{color:E,filled:!0}))),off:dt(m,m0($e($e({},P),{color:E,filled:!1})))}}},cZ=function(t,e){var n,i,r,s=No(e),o=No(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(n=c?.getWidth())!==null&&n!==void 0?n:0,d=_a(l?.getRotation()),h=Ec(a,d),p=h.width,g=h.height,m=Ea($e($e({},a),{rotation:d})),v=wt(0,0,0),C=(i=_r(l?.getBorderColor()))!==null&&i!==void 0?i:v,b=_r(l?.getBackgroundColor()),E=_r(l?.getBackgroundColor(),.8),T=(r=s??o)!==null&&r!==void 0?r:v;Lo(s?e:t.acroField,T);var P={x:p/2,y:g/2,width:p-u,height:g-u,borderWidth:u,borderColor:C,dotColor:T};return{normal:{on:dt(m,v0($e($e({},P),{color:b,filled:!0}))),off:dt(m,v0($e($e({},P),{color:b,filled:!1})))},down:{on:dt(m,v0($e($e({},P),{color:E,filled:!0}))),off:dt(m,v0($e($e({},P),{color:E,filled:!1})))}}},uZ=function(t,e,n){var i,r,s,o,a,l=No(e),c=No(t.acroField),u=ld(e),d=ld(t.acroField),h=e.getRectangle(),p=e.getAppearanceCharacteristics(),g=e.getBorderStyle(),m=p?.getCaptions(),v=(i=m?.normal)!==null&&i!==void 0?i:"",C=(s=(r=m?.down)!==null&&r!==void 0?r:v)!==null&&s!==void 0?s:"",b=(o=g?.getWidth())!==null&&o!==void 0?o:0,E=_a(p?.getRotation()),T=Ec(h,E),P=T.width,x=T.height,_=Ea($e($e({},h),{rotation:E})),S=wt(0,0,0),D=_r(p?.getBorderColor()),O=_r(p?.getBackgroundColor()),F=_r(p?.getBackgroundColor(),.8),k={x:b,y:b,width:P-b*2,height:x-b*2},M=y0(v,{alignment:ai.Center,fontSize:u??d,font:n,bounds:k}),ce=y0(C,{alignment:ai.Center,fontSize:u??d,font:n,bounds:k}),xe=Math.min(M.fontSize,ce.fontSize),Ue=(a=l??c)!==null&&a!==void 0?a:S;Lo(l||u!==void 0?e:t.acroField,Ue,n,xe);var Ce={x:0+b/2,y:0+b/2,width:P-b,height:x-b,borderWidth:b,borderColor:D,textColor:Ue,font:n.name,fontSize:xe};return{normal:dt(_,dB($e($e({},Ce),{color:O,textLines:[M.line]}))),down:dt(_,dB($e($e({},Ce),{color:F,textLines:[ce.line]})))}},dZ=function(t,e,n){var i,r,s,o,a=No(e),l=No(t.acroField),c=ld(e),u=ld(t.acroField),d=e.getRectangle(),h=e.getAppearanceCharacteristics(),p=e.getBorderStyle(),g=(i=t.getText())!==null&&i!==void 0?i:"",m=(r=p?.getWidth())!==null&&r!==void 0?r:0,v=_a(h?.getRotation()),C=Ec(d,v),b=C.width,E=C.height,T=Ea($e($e({},d),{rotation:v})),P=wt(0,0,0),x=_r(h?.getBorderColor()),_=_r(h?.getBackgroundColor()),S,D,O=t.isCombed()?0:1,F={x:m+O,y:m+O,width:b-(m+O)*2,height:E-(m+O)*2};if(t.isMultiline()){var k=gB(g,{alignment:t.getAlignment(),fontSize:c??u,font:n,bounds:F});S=k.lines,D=k.fontSize}else if(t.isCombed()){var k=aZ(g,{fontSize:c??u,font:n,bounds:F,cellCount:(s=t.getMaxLength())!==null&&s!==void 0?s:0});S=k.cells,D=k.fontSize}else{var k=y0(g,{alignment:t.getAlignment(),fontSize:c??u,font:n,bounds:F});S=[k.line],D=k.fontSize}var M=(o=a??l)!==null&&o!==void 0?o:P;Lo(a||c!==void 0?e:t.acroField,M,n,D);var ce={x:0+m/2,y:0+m/2,width:b-m,height:E-m,borderWidth:m??0,borderColor:x,textColor:M,font:n.name,fontSize:D,color:_,textLines:S,padding:O};return dt(T,fB(ce))},hZ=function(t,e,n){var i,r,s,o=No(e),a=No(t.acroField),l=ld(e),c=ld(t.acroField),u=e.getRectangle(),d=e.getAppearanceCharacteristics(),h=e.getBorderStyle(),p=(i=t.getSelected()[0])!==null&&i!==void 0?i:"",g=(r=h?.getWidth())!==null&&r!==void 0?r:0,m=_a(d?.getRotation()),v=Ec(u,m),C=v.width,b=v.height,E=Ea($e($e({},u),{rotation:m})),T=wt(0,0,0),P=_r(d?.getBorderColor()),x=_r(d?.getBackgroundColor()),_=1,S={x:g+_,y:g+_,width:C-(g+_)*2,height:b-(g+_)*2},D=y0(p,{alignment:ai.Left,fontSize:l??c,font:n,bounds:S}),O=D.line,F=D.fontSize,k=(s=o??a)!==null&&s!==void 0?s:T;Lo(o||l!==void 0?e:t.acroField,k,n,F);var M={x:0+g/2,y:0+g/2,width:C-g,height:b-g,borderWidth:g??0,borderColor:P,textColor:k,font:n.name,fontSize:F,color:x,textLines:[O],padding:_};return dt(E,fB(M))},fZ=function(t,e,n){var i,r,s=No(e),o=No(t.acroField),a=ld(e),l=ld(t.acroField),c=e.getRectangle(),u=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),h=(i=d?.getWidth())!==null&&i!==void 0?i:0,p=_a(u?.getRotation()),g=Ec(c,p),m=g.width,v=g.height,C=Ea($e($e({},c),{rotation:p})),b=wt(0,0,0),E=_r(u?.getBorderColor()),T=_r(u?.getBackgroundColor()),P=t.getOptions(),x=t.getSelected();t.isSorted()&&P.sort();for(var _="",S=0,D=P.length;S<D;S++)_+=P[S],S<D-1&&(_+=`
`);for(var O=1,F={x:h+O,y:h+O,width:m-(h+O)*2,height:v-(h+O)*2},k=gB(_,{alignment:ai.Left,fontSize:a??l,font:n,bounds:F}),M=k.lines,ce=k.fontSize,xe=k.lineHeight,Ue=[],S=0,D=M.length;S<D;S++){var Ce=M[S];x.includes(Ce.text)&&Ue.push(S)}var St=wt(153/255,193/255,218/255),cn=(r=s??o)!==null&&r!==void 0?r:b;return Lo(s||a!==void 0?e:t.acroField,cn,n,ce),dt(C,K$({x:0+h/2,y:0+h/2,width:m-h,height:v-h,borderWidth:h??0,borderColor:E,textColor:cn,font:n.name,fontSize:ce,color:T,textLines:M,lineHeight:xe,selectedColor:St,selectedLines:Ue,padding:O}))};var hMe=function(){function t(e,n,i){this.alreadyEmbedded=!1,L(e,"ref",[[Ze,"PDFRef"]]),L(n,"doc",[[Er,"PDFDocument"]]),L(i,"embedder",[[zw,"PDFPageEmbedder"]]),this.ref=e,this.doc=n,this.width=i.width,this.height=i.height,this.embedder=i}return t.prototype.scale=function(e){return L(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},t.of=function(e,n,i){return new t(e,n,i)},t}(),C0=hMe;var fMe=function(){function t(e,n,i){this.modified=!0,L(e,"ref",[[Ze,"PDFRef"]]),L(n,"doc",[[Er,"PDFDocument"]]),L(i,"embedder",[[gf,"CustomFontEmbedder"],[pf,"StandardFontEmbedder"]]),this.ref=e,this.doc=n,this.name=i.fontName,this.embedder=i}return t.prototype.encodeText=function(e){return L(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},t.prototype.widthOfTextAtSize=function(e,n){return L(e,"text",["string"]),L(n,"size",["number"]),this.embedder.widthOfTextAtSize(e,n)},t.prototype.heightAtSize=function(e,n){var i;return L(e,"size",["number"]),re(n?.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(i=n?.descender)!==null&&i!==void 0?i:!0})},t.prototype.sizeAtHeight=function(e){return L(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},t.prototype.getCharacterSet=function(){return this.embedder instanceof pf?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},t.prototype.embed=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},t.of=function(e,n,i){return new t(e,n,i)},t}(),li=fMe;var pMe=function(){function t(e,n,i){L(e,"ref",[[Ze,"PDFRef"]]),L(n,"doc",[[Er,"PDFDocument"]]),L(i,"embedder",[[Uw,"JpegEmbedder"],[jw,"PngEmbedder"]]),this.ref=e,this.doc=n,this.width=i.width,this.height=i.height,this.embedder=i}return t.prototype.scale=function(e){return L(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.scaleToFit=function(e,n){L(e,"width",["number"]),L(n,"height",["number"]);var i=e/this.width,r=n/this.height,s=Math.min(i,r);return this.scale(s)},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return Pe(this,void 0,void 0,function(){var e,n,i;return Me(this,function(r){switch(r.label){case 0:return this.embedder?(this.embedTask||(e=this,n=e.doc,i=e.ref,this.embedTask=this.embedder.embedIntoContext(n.context,i)),[4,this.embedTask]):[2];case 1:return r.sent(),this.embedder=void 0,[2]}})})},t.of=function(e,n,i){return new t(e,n,i)},t}(),km=pMe;var bl=function(t){return t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t}(bl||{});var Bo=function(t){re(t?.x,"options.x",["number"]),re(t?.y,"options.y",["number"]),re(t?.width,"options.width",["number"]),re(t?.height,"options.height",["number"]),re(t?.textColor,"options.textColor",[[Object,"Color"]]),re(t?.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),re(t?.borderColor,"options.borderColor",[[Object,"Color"]]),re(t?.borderWidth,"options.borderWidth",["number"]),re(t?.rotate,"options.rotate",[[Object,"Rotation"]])},gMe=function(){function t(e,n,i){L(e,"acroField",[[no,"PDFAcroTerminal"]]),L(n,"ref",[[Ze,"PDFRef"]]),L(i,"doc",[[Er,"PDFDocument"]]),this.acroField=e,this.ref=n,this.doc=i}return t.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},t.prototype.isReadOnly=function(){return this.acroField.hasFlag(ba.ReadOnly)},t.prototype.enableReadOnly=function(){this.acroField.setFlagTo(ba.ReadOnly,!0)},t.prototype.disableReadOnly=function(){this.acroField.setFlagTo(ba.ReadOnly,!1)},t.prototype.isRequired=function(){return this.acroField.hasFlag(ba.Required)},t.prototype.enableRequired=function(){this.acroField.setFlagTo(ba.Required,!0)},t.prototype.disableRequired=function(){this.acroField.setFlagTo(ba.Required,!1)},t.prototype.isExported=function(){return!this.acroField.hasFlag(ba.NoExport)},t.prototype.enableExporting=function(){this.acroField.setFlagTo(ba.NoExport,!1)},t.prototype.disableExporting=function(){this.acroField.setFlagTo(ba.NoExport,!0)},t.prototype.needsAppearancesUpdate=function(){throw new lr(this.constructor.name,"needsAppearancesUpdate")},t.prototype.defaultUpdateAppearances=function(e){throw new lr(this.constructor.name,"defaultUpdateAppearances")},t.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},t.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},t.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},t.prototype.createWidget=function(e){var n,i=e.textColor,r=e.backgroundColor,s=e.borderColor,o=e.borderWidth,a=FR(e.rotate),l=e.caption,c=e.x,u=e.y,d=e.width+o,h=e.height+o,p=!!e.hidden,g=e.page;gR(a,"degreesAngle",90);var m=xm.create(this.doc.context,this.ref),v=F$({x:c,y:u,width:d,height:h},o,a);m.setRectangle(v),g&&m.setP(g);var C=m.getOrCreateAppearanceCharacteristics();r&&C.setBackgroundColor(uB(r)),C.setRotation(a),l&&C.setCaptions({normal:l}),s&&C.setBorderColor(uB(s));var b=m.getOrCreateBorderStyle();if(o!==void 0&&b.setWidth(o),m.setFlagTo(o0.Print,!0),m.setFlagTo(o0.Hidden,p),m.setFlagTo(o0.Invisible,!1),i){var E=(n=this.acroField.getDefaultAppearance())!==null&&n!==void 0?n:"",T=E+`
`+Sl(i).toString();this.acroField.setDefaultAppearance(T)}return m},t.prototype.updateWidgetAppearanceWithFont=function(e,n,i){var r=i.normal,s=i.rollover,o=i.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,r,n),rollover:s&&this.createAppearanceStream(e,s,n),down:o&&this.createAppearanceStream(e,o,n)})},t.prototype.updateOnOffWidgetAppearance=function(e,n,i){var r=i.normal,s=i.rollover,o=i.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,r,n),rollover:s&&this.createAppearanceDict(e,s,n),down:o&&this.createAppearanceDict(e,o,n)})},t.prototype.updateWidgetAppearances=function(e,n){var i=n.normal,r=n.rollover,s=n.down;e.setNormalAppearance(i),r?e.setRolloverAppearance(r):e.removeRolloverAppearance(),s?e.setDownAppearance(s):e.removeDownAppearance()},t.prototype.createAppearanceStream=function(e,n,i){var r,s=this.acroField.dict.context,o=e.getRectangle(),a=o.width,l=o.height,c=i&&{Font:(r={},r[i.name]=i.ref,r)},u=s.formXObject(n,{Resources:c,BBox:s.obj([0,0,a,l]),Matrix:s.obj([1,0,0,1,0,0])}),d=s.register(u);return d},t.prototype.createImageAppearanceStream=function(e,n,i){var r,s,o=this.acroField.dict.context,a=e.getRectangle(),l=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),u=(s=c?.getWidth())!==null&&s!==void 0?s:0,d=_a(l?.getRotation()),h=Ea($e($e({},a),{rotation:d})),p=Ec(a,d),g=n.scaleToFit(p.width-u*2,p.height-u*2),m={x:u,y:u,width:g.width,height:g.height,rotate:Oe(0),xSkew:Oe(0),ySkew:Oe(0)};i===bl.Center?(m.x+=(p.width-u*2)/2-g.width/2,m.y+=(p.height-u*2)/2-g.height/2):i===bl.Right&&(m.x=p.width-u-g.width,m.y=p.height-u-g.height);var v=this.doc.context.addRandomSuffix("Image",10),C=dt(h,GR(v,m)),b={XObject:(r={},r[v]=n.ref,r)},E=o.formXObject(C,{Resources:b,BBox:o.obj([0,0,a.width,a.height]),Matrix:o.obj([1,0,0,1,0,0])});return o.register(E)},t.prototype.createAppearanceDict=function(e,n,i){var r=this.acroField.dict.context,s=this.createAppearanceStream(e,n.on),o=this.createAppearanceStream(e,n.off),a=r.obj({});return a.set(i,s),a.set(R.of("Off"),o),a},t}(),es=gMe;var mMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroCheckBox",[[Zu,"PDFAcroCheckBox"]]),s.acroField=n,s}return e.prototype.check=function(){var n,i=(n=this.acroField.getOnValue())!==null&&n!==void 0?n:R.of("Yes");this.markAsDirty(),this.acroField.setValue(i)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(R.of("Off"))},e.prototype.isChecked=function(){var n=this.acroField.getOnValue();return!!n&&n===this.acroField.getValue()},e.prototype.addToPage=function(n,i){var r,s,o,a,l,c;L(n,"page",[[bi,"PDFPage"]]),Bo(i),i||(i={}),"textColor"in i||(i.textColor=wt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=wt(1,1,1)),"borderColor"in i||(i.borderColor=wt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var u=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(s=i.y)!==null&&s!==void 0?s:0,width:(o=i.width)!==null&&o!==void 0?o:50,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Oe(0),hidden:i.hidden,page:n.ref}),d=this.doc.context.register(u.dict);this.acroField.addWidget(d),u.setAppearanceState(R.of("Off")),this.updateWidgetAppearance(u,R.of("Yes")),n.node.addAnnot(d)},e.prototype.needsAppearancesUpdate=function(){for(var n,i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=o.getAppearanceState(),l=(n=o.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof Ie)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){var i;re(n,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s],l=(i=a.getOnValue())!==null&&i!==void 0?i:R.of("Yes");l&&this.updateWidgetAppearance(a,l,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??lZ,o=Vo(s(this,n));this.updateOnOffWidgetAppearance(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),_f=mMe;var vMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroComboBox",[[Ju,"PDFAcroComboBox"]]),s.acroField=n,s}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),i=new Array(n.length),r=0,s=i.length;r<s;r++){var o=n[r],a=o.display,l=o.value;i[r]=(a??l).decodeText()}return i},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]=n[r].decodeText();return i},e.prototype.setOptions=function(n){L(n,"options",[Array]);for(var i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]={value:be.fromText(n[r])};this.acroField.setOptions(i)},e.prototype.addOptions=function(n){L(n,"options",["string",Array]);for(var i=Array.isArray(n)?n:[n],r=this.acroField.getOptions(),s=new Array(i.length),o=0,a=i.length;o<a;o++)s[o]={value:be.fromText(i[o])};this.acroField.setOptions(r.concat(s))},e.prototype.select=function(n,i){i===void 0&&(i=!1),L(n,"options",["string",Array]),L(i,"merge",["boolean"]);var r=Array.isArray(n)?n:[n],s=this.getOptions(),o=r.find(function(d){return!s.includes(d)});o&&this.enableEditing(),this.markAsDirty(),(r.length>1||r.length===1&&i)&&this.enableMultiselect();for(var a=new Array(r.length),l=0,c=r.length;l<c;l++)a[l]=be.fromText(r[l]);if(i){var u=this.acroField.getValues();this.acroField.setValues(u.concat(a))}else this.acroField.setValues(a)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){Xu(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(Lt.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(Lt.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(Lt.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(Lt.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(Lt.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(Lt.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(Lt.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Lt.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Lt.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Lt.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Lt.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Lt.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Lt.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Lt.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Lt.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,i){var r,s,o,a,l,c,u;L(n,"page",[[bi,"PDFPage"]]),Bo(i),i||(i={}),"textColor"in i||(i.textColor=wt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=wt(1,1,1)),"borderColor"in i||(i.borderColor=wt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(s=i.y)!==null&&s!==void 0?s:0,width:(o=i.width)!==null&&o!==void 0?o:200,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Oe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=((n=o.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Rn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[li,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,i){L(n,"font",[[li,"PDFFont"]]),re(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??hZ,o=Vo(s(this,n,i));this.updateWidgetAppearanceWithFont(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),Nm=vMe;var yMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroListBox",[[rd,"PDFAcroListBox"]]),s.acroField=n,s}return e.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),i=new Array(n.length),r=0,s=i.length;r<s;r++){var o=n[r],a=o.display,l=o.value;i[r]=(a??l).decodeText()}return i},e.prototype.getSelected=function(){for(var n=this.acroField.getValues(),i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]=n[r].decodeText();return i},e.prototype.setOptions=function(n){L(n,"options",[Array]),this.markAsDirty();for(var i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]={value:be.fromText(n[r])};this.acroField.setOptions(i)},e.prototype.addOptions=function(n){L(n,"options",["string",Array]),this.markAsDirty();for(var i=Array.isArray(n)?n:[n],r=this.acroField.getOptions(),s=new Array(i.length),o=0,a=i.length;o<a;o++)s[o]={value:be.fromText(i[o])};this.acroField.setOptions(r.concat(s))},e.prototype.select=function(n,i){i===void 0&&(i=!1),L(n,"options",["string",Array]),L(i,"merge",["boolean"]);var r=Array.isArray(n)?n:[n],s=this.getOptions();kX(r,"option",s),this.markAsDirty(),(r.length>1||r.length===1&&i)&&this.enableMultiselect();for(var o=new Array(r.length),a=0,l=r.length;a<l;a++)o[a]=be.fromText(r[a]);if(i){var c=this.acroField.getValues();this.acroField.setValues(c.concat(o))}else this.acroField.setValues(o)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(n){Xu(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(Lt.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(Lt.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(Lt.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(Lt.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Lt.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Lt.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Lt.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Lt.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Lt.CommitOnSelChange,!1)},e.prototype.addToPage=function(n,i){var r,s,o,a,l,c,u;L(n,"page",[[bi,"PDFPage"]]),Bo(i),i||(i={}),"textColor"in i||(i.textColor=wt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=wt(1,1,1)),"borderColor"in i||(i.borderColor=wt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(s=i.y)!==null&&s!==void 0?s:0,width:(o=i.width)!==null&&o!==void 0?o:200,height:(a=i.height)!==null&&a!==void 0?a:100,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Oe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=((n=o.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Rn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[li,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,i){L(n,"font",[[li,"PDFFont"]]),re(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??fZ,o=Vo(s(this,n,i));this.updateWidgetAppearanceWithFont(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),Lm=yMe;var CMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroRadioButton",[[id,"PDFAcroRadioButton"]]),s.acroField=n,s}return e.prototype.getOptions=function(){var n=this.acroField.getExportValues();if(n){for(var i=new Array(n.length),r=0,s=n.length;r<s;r++)i[r]=n[r].decodeText();return i}for(var o=this.acroField.getOnValues(),a=new Array(o.length),r=0,s=a.length;r<s;r++)a[r]=o[r].decodeText();return a},e.prototype.getSelected=function(){var n=this.acroField.getValue();if(n!==R.of("Off")){var i=this.acroField.getExportValues();if(i){for(var r=this.acroField.getOnValues(),s=0,o=r.length;s<o;s++)if(r[s]===n)return i[s].decodeText()}return n.decodeText()}},e.prototype.select=function(n){L(n,"option",["string"]);var i=this.getOptions();Sa(n,"option",i),this.markAsDirty();var r=this.acroField.getOnValues(),s=this.acroField.getExportValues();if(s)for(var o=0,a=s.length;o<a;o++)s[o].decodeText()===n&&this.acroField.setValue(r[o]);else for(var o=0,a=r.length;o<a;o++){var l=r[o];l.decodeText()===n&&this.acroField.setValue(l)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(R.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag($r.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo($r.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo($r.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag($r.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo($r.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo($r.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(n,i,r){var s,o,a,l,c,u,d,h,p;L(n,"option",["string"]),L(i,"page",[[bi,"PDFPage"]]),Bo(r);var g=this.createWidget({x:(s=r?.x)!==null&&s!==void 0?s:0,y:(o=r?.y)!==null&&o!==void 0?o:0,width:(a=r?.width)!==null&&a!==void 0?a:50,height:(l=r?.height)!==null&&l!==void 0?l:50,textColor:(c=r?.textColor)!==null&&c!==void 0?c:wt(0,0,0),backgroundColor:(u=r?.backgroundColor)!==null&&u!==void 0?u:wt(1,1,1),borderColor:(d=r?.borderColor)!==null&&d!==void 0?d:wt(0,0,0),borderWidth:(h=r?.borderWidth)!==null&&h!==void 0?h:1,rotate:(p=r?.rotate)!==null&&p!==void 0?p:Oe(0),hidden:r?.hidden,page:i.ref}),m=this.doc.context.register(g.dict),v=this.acroField.addWidgetWithOpt(m,be.fromText(n),!this.isMutuallyExclusive());g.setAppearanceState(R.of("Off")),this.updateWidgetAppearance(g,v),i.node.addAnnot(m)},e.prototype.needsAppearancesUpdate=function(){for(var n,i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=o.getAppearanceState(),l=(n=o.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof Ie)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(n){re(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=o.getOnValue();a&&this.updateWidgetAppearance(o,a,n)}},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??cZ,o=Vo(s(this,n));this.updateOnOffWidgetAppearance(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),Ef=CMe;var wMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroSignature",[[vf,"PDFAcroSignature"]]),s.acroField=n,s}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(n,i,r){return new e(n,i,r)},e}(es),w0=wMe;var SMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroText",[[td,"PDFAcroText"]]),s.acroField=n,s}return e.prototype.getText=function(){var n=this.acroField.getValue();if(!n&&this.isRichFormatted())throw new eZ(this.getName());return n?.decodeText()},e.prototype.setText=function(n){re(n,"text",["string"]);var i=this.getMaxLength();if(i!==void 0&&n&&n.length>i)throw new nZ(n.length,i,this.getName());this.markAsDirty(),this.disableRichFormatting(),n?this.acroField.setValue(be.fromText(n)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var n=this.acroField.getQuadding();return n===0?ai.Left:n===1?ai.Center:n===2?ai.Right:ai.Left},e.prototype.setAlignment=function(n){Sa(n,"alignment",ai),this.markAsDirty(),this.acroField.setQuadding(n)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(n){if(to(n,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),n===void 0)this.acroField.removeMaxLength();else{var i=this.getText();if(i&&i.length>n)throw new iZ(i.length,n,this.getName());this.acroField.setMaxLength(n)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(n){for(var i=this.getAlignment(),r=i===ai.Center?bl.Center:i===ai.Right?bl.Right:bl.Left,s=this.acroField.getWidgets(),o=0,a=s.length;o<a;o++){var l=s[o],c=this.createImageAppearanceStream(l,n,r);this.updateWidgetAppearances(l,{normal:c})}this.markAsClean()},e.prototype.setFontSize=function(n){Xu(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(Bn.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Bn.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Bn.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(Bn.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(Bn.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(Bn.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(Bn.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(Bn.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(Bn.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Bn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Bn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Bn.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(Bn.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(Bn.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(Bn.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(Bn.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var n="PDFTextFields must have a max length in order to be combed";console.warn(n)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(Bn.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(Bn.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(Bn.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(Bn.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(Bn.RichText,!1)},e.prototype.addToPage=function(n,i){var r,s,o,a,l,c,u;L(n,"page",[[bi,"PDFPage"]]),Bo(i),i||(i={}),"textColor"in i||(i.textColor=wt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=wt(1,1,1)),"borderColor"in i||(i.borderColor=wt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(s=i.y)!==null&&s!==void 0?s:0,width:(o=i.width)!==null&&o!==void 0?o:200,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Oe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=((n=o.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Rn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[li,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,i){L(n,"font",[[li,"PDFFont"]]),re(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??dZ,o=Vo(s(this,n,i));this.updateWidgetAppearanceWithFont(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),cd=SMe;var S0=function(t){return t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats",t}(S0||{});var bMe=function(){function t(e,n){var i=this;this.embedDefaultFont=function(){return i.doc.embedStandardFont(S0.Helvetica)},L(e,"acroForm",[[yf,"PDFAcroForm"]]),L(n,"doc",[[Er,"PDFDocument"]]),this.acroForm=e,this.doc=n,this.dirtyFields=new Set,this.defaultFontCache=br.populatedBy(this.embedDefaultFont)}return t.prototype.hasXFA=function(){return this.acroForm.dict.has(R.of("XFA"))},t.prototype.deleteXFA=function(){this.acroForm.dict.delete(R.of("XFA"))},t.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),n=[],i=0,r=e.length;i<r;i++){var s=e[i],o=s[0],a=s[1],l=_Me(o,a,this.doc);l&&n.push(l)}return n},t.prototype.getFieldMaybe=function(e){L(e,"name",["string"]);for(var n=this.getFields(),i=0,r=n.length;i<r;i++){var s=n[i];if(s.getName()===e)return s}},t.prototype.getField=function(e){L(e,"name",["string"]);var n=this.getFieldMaybe(e);if(n)return n;throw new Z$(e)},t.prototype.getButton=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof Gm)return n;throw new ad(e,Gm,n)},t.prototype.getCheckBox=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof _f)return n;throw new ad(e,_f,n)},t.prototype.getDropdown=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof Nm)return n;throw new ad(e,Nm,n)},t.prototype.getOptionList=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof Lm)return n;throw new ad(e,Lm,n)},t.prototype.getRadioGroup=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof Ef)return n;throw new ad(e,Ef,n)},t.prototype.getSignature=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof w0)return n;throw new ad(e,w0,n)},t.prototype.getTextField=function(e){L(e,"name",["string"]);var n=this.getField(e);if(n instanceof cd)return n;throw new ad(e,cd,n)},t.prototype.createButton=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=nd.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),Gm.of(r,r.ref,this.doc)},t.prototype.createCheckBox=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=Zu.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),_f.of(r,r.ref,this.doc)},t.prototype.createDropdown=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=Ju.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),Nm.of(r,r.ref,this.doc)},t.prototype.createOptionList=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=rd.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),Lm.of(r,r.ref,this.doc)},t.prototype.createRadioGroup=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=id.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),Ef.of(r,r.ref,this.doc)},t.prototype.createTextField=function(e){L(e,"name",["string"]);var n=Vm(e),i=this.findOrCreateNonTerminals(n.nonTerminal),r=td.create(this.doc.context);return r.setPartialName(n.terminal),Bm(i,[r,r.ref],n.terminal),cd.of(r,r.ref,this.doc)},t.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var n=this.getFields(),i=0,r=n.length;i<r;i++){for(var s=n[i],o=s.acroField.getWidgets(),a=0,l=o.length;a<l;a++){var c=o[a],u=this.findWidgetPage(c),d=this.findWidgetAppearanceRef(s,c),h=u.node.newXObject("FlatWidget",d),p=c.getRectangle(),g=dt([Yn(),Zr(p.x,p.y)],Ea($e($e({},p),{rotation:0})),[f0(h),Qn()]).filter(Boolean);u.pushOperators.apply(u,g)}this.removeField(s)}},t.prototype.removeField=function(e){for(var n=e.acroField.getWidgets(),i=new Set,r=0,s=n.length;r<s;r++){var o=n[r],a=this.findWidgetAppearanceRef(e,o),l=this.findWidgetPage(o);i.add(l),l.node.removeAnnot(a)}i.forEach(function(p){return p.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var c=e.acroField.normalizedEntries().Kids,u=c.size(),d=0;d<u;d++){var h=c.get(d);h instanceof Ze&&this.doc.context.delete(h)}this.doc.context.delete(e.ref)},t.prototype.updateFieldAppearances=function(e){re(e,"font",[[li,"PDFFont"]]),e=e??this.getDefaultFont();for(var n=this.getFields(),i=0,r=n.length;i<r;i++){var s=n[i];s.needsAppearancesUpdate()&&s.defaultUpdateAppearances(e)}},t.prototype.markFieldAsDirty=function(e){re(e,"fieldRef",[[Ze,"PDFRef"]]),this.dirtyFields.add(e)},t.prototype.markFieldAsClean=function(e){re(e,"fieldRef",[[Ze,"PDFRef"]]),this.dirtyFields.delete(e)},t.prototype.fieldIsDirty=function(e){return re(e,"fieldRef",[[Ze,"PDFRef"]]),this.dirtyFields.has(e)},t.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},t.prototype.findWidgetPage=function(e){var n=e.P(),i=this.doc.getPages().find(function(s){return s.ref===n});if(i===void 0){var r=this.doc.context.getObjectRef(e.dict);if(r===void 0)throw new Error("Could not find PDFRef for PDFObject");if(i=this.doc.findPageForAnnotationRef(r),i===void 0)throw new Error("Could not find page for PDFRef "+r)}return i},t.prototype.findWidgetAppearanceRef=function(e,n){var i,r=n.getNormalAppearance();if(r instanceof Ie&&(e instanceof _f||e instanceof Ef)){var s=e.acroField.getValue(),o=(i=r.get(s))!==null&&i!==void 0?i:r.get(R.of("Off"));o instanceof Ze&&(r=o)}if(!(r instanceof Ze)){var a=e.getName();throw new Error("Failed to extract appearance ref for: "+a)}return r},t.prototype.findOrCreateNonTerminals=function(e){for(var n=[this.acroForm],i=0,r=e.length;i<r;i++){var s=e[i];if(!s)throw new J$(s);var o=n[0],a=n[1],l=this.findNonTerminal(s,o);if(l)n=l;else{var c=ed.create(this.doc.context);c.setPartialName(s),c.setParent(a);var u=this.doc.context.register(c.dict);o.addField(u),n=[c,u]}}return n},t.prototype.findNonTerminal=function(e,n){for(var i=n instanceof yf?this.acroForm.getFields():Zw(n.Kids()),r=0,s=i.length;r<s;r++){var o=i[r],a=o[0],l=o[1];if(a.getPartialName()===e){if(a instanceof ed)return[a,l];throw new pB(e)}}},t.of=function(e,n){return new t(e,n)},t}(),mB=bMe,_Me=function(t,e,n){if(t instanceof nd)return Gm.of(t,e,n);if(t instanceof Zu)return _f.of(t,e,n);if(t instanceof Ju)return Nm.of(t,e,n);if(t instanceof rd)return Lm.of(t,e,n);if(t instanceof td)return cd.of(t,e,n);if(t instanceof id)return Ef.of(t,e,n);if(t instanceof vf)return w0.of(t,e,n)},Vm=function(t){if(t.length===0)throw new Error("PDF field names must not be empty strings");for(var e=t.split("."),n=0,i=e.length;n<i;n++)if(e[n]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+t+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},Bm=function(t,e,n){for(var i=t[0],r=t[1],s=e[0],o=e[1],a=i.normalizedEntries(),l=Zw("Kids"in a?a.Kids:a.Fields),c=0,u=l.length;c<u;c++)if(l[c][0].getPartialName()===n)throw new pB(n);i.addField(o),s.setParent(r)};var pZ={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]};var vB=function(t){return t[t.Fastest=1/0]="Fastest",t[t.Fast=1500]="Fast",t[t.Medium=500]="Medium",t[t.Slow=100]="Slow",t}(vB||{});var EMe=function(){function t(e,n,i){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=i}return t.prototype.embed=function(){return Pe(this,void 0,void 0,function(){var e,n,i,r,s;return Me(this,function(o){switch(o.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=o.sent(),this.doc.catalog.has(R.of("Names"))||this.doc.catalog.set(R.of("Names"),this.doc.context.obj({})),n=this.doc.catalog.lookup(R.of("Names"),Ie),n.has(R.of("EmbeddedFiles"))||n.set(R.of("EmbeddedFiles"),this.doc.context.obj({})),i=n.lookup(R.of("EmbeddedFiles"),Ie),i.has(R.of("Names"))||i.set(R.of("Names"),this.doc.context.obj([])),r=i.lookup(R.of("Names"),Ye),r.push(be.fromText(this.embedder.fileName)),r.push(e),this.doc.catalog.has(R.of("AF"))||this.doc.catalog.set(R.of("AF"),this.doc.context.obj([])),s=this.doc.catalog.lookup(R.of("AF"),Ye),s.push(e),this.alreadyEmbedded=!0,o.label=2;case 2:return[2]}})})},t.of=function(e,n,i){return new t(e,n,i)},t}(),gZ=EMe;var DMe=function(){function t(e,n,i){this.alreadyEmbedded=!1,this.ref=e,this.doc=n,this.embedder=i}return t.prototype.embed=function(){return Pe(this,void 0,void 0,function(){var e,n,i,r,s,o,a;return Me(this,function(l){switch(l.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,n=e.catalog,i=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:r=l.sent(),n.has(R.of("Names"))||n.set(R.of("Names"),i.obj({})),s=n.lookup(R.of("Names"),Ie),s.has(R.of("JavaScript"))||s.set(R.of("JavaScript"),i.obj({})),o=s.lookup(R.of("JavaScript"),Ie),o.has(R.of("Names"))||o.set(R.of("Names"),i.obj([])),a=o.lookup(R.of("Names"),Ye),a.push(be.fromText(this.embedder.scriptName)),a.push(r),this.alreadyEmbedded=!0,l.label=2;case 2:return[2]}})})},t.of=function(e,n,i){return new t(e,n,i)},t}(),yB=DMe;var TMe=function(){function t(e,n){this.script=e,this.scriptName=n}return t.for=function(e,n){return new t(e,n)},t.prototype.embedIntoContext=function(e,n){return Pe(this,void 0,void 0,function(){var i;return Me(this,function(r){return i=e.obj({Type:"Action",S:"JavaScript",JS:be.fromText(this.script)}),n?(e.assign(n,i),[2,n]):[2,e.register(i)]})})},t}(),mZ=TMe;var RMe=function(){function t(e,n,i){var r=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var s=[];return r.catalog.Pages().traverse(function(o,a){if(o instanceof Xr){var l=r.pageMap.get(o);l||(l=bi.of(o,a,r),r.pageMap.set(o,l)),s.push(l)}}),s},this.getOrCreateForm=function(){var s=r.catalog.getOrCreateAcroForm();return mB.of(s,r)},L(e,"context",[[Rm,"PDFContext"]]),L(n,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=br.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=br.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!n&&this.isEncrypted)throw new Y$;i&&this.updateInfoDict()}return t.load=function(e,n){return n===void 0&&(n={}),Pe(this,void 0,void 0,function(){var i,r,s,o,a,l,c,u,d,h,p,g;return Me(this,function(m){switch(m.label){case 0:return i=n.ignoreEncryption,r=i===void 0?!1:i,s=n.parseSpeed,o=s===void 0?vB.Slow:s,a=n.throwOnInvalidObject,l=a===void 0?!1:a,c=n.updateMetadata,u=c===void 0?!0:c,d=n.capNumbers,h=d===void 0?!1:d,L(e,"pdf",["string",Uint8Array,ArrayBuffer]),L(r,"ignoreEncryption",["boolean"]),L(o,"parseSpeed",["number"]),L(l,"throwOnInvalidObject",["boolean"]),p=um(e),[4,QV.forBytesWithOptions(p,o,l,h).parseDocument()];case 1:return g=m.sent(),[2,new t(g,r,u)]}})})},t.create=function(e){return e===void 0&&(e={}),Pe(this,void 0,void 0,function(){var n,i,r,s,o,a;return Me(this,function(l){return n=e.updateMetadata,i=n===void 0?!0:n,r=Rm.create(),s=e0.withContext(r),o=r.register(s),a=Jw.withContextAndPages(r,o),r.trailerInfo.Root=r.register(a),[2,new t(r,!1,i)]})})},t.prototype.registerFontkit=function(e){this.fontkit=e},t.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},t.prototype.getTitle=function(){var e=this.getInfoDict().lookup(R.Title);if(e)return ud(e),e.decodeText()},t.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(R.Author);if(e)return ud(e),e.decodeText()},t.prototype.getSubject=function(){var e=this.getInfoDict().lookup(R.Subject);if(e)return ud(e),e.decodeText()},t.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(R.Keywords);if(e)return ud(e),e.decodeText()},t.prototype.getCreator=function(){var e=this.getInfoDict().lookup(R.Creator);if(e)return ud(e),e.decodeText()},t.prototype.getProducer=function(){var e=this.getInfoDict().lookup(R.Producer);if(e)return ud(e),e.decodeText()},t.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(R.CreationDate);if(e)return ud(e),e.decodeDate()},t.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(R.ModDate);if(e)return ud(e),e.decodeDate()},t.prototype.setTitle=function(e,n){L(e,"title",["string"]);var i=R.of("Title");if(this.getInfoDict().set(i,be.fromText(e)),n?.showInWindowTitleBar){var r=this.catalog.getOrCreateViewerPreferences();r.setDisplayDocTitle(!0)}},t.prototype.setAuthor=function(e){L(e,"author",["string"]);var n=R.of("Author");this.getInfoDict().set(n,be.fromText(e))},t.prototype.setSubject=function(e){L(e,"author",["string"]);var n=R.of("Subject");this.getInfoDict().set(n,be.fromText(e))},t.prototype.setKeywords=function(e){L(e,"keywords",[Array]);var n=R.of("Keywords");this.getInfoDict().set(n,be.fromText(e.join(" ")))},t.prototype.setCreator=function(e){L(e,"creator",["string"]);var n=R.of("Creator");this.getInfoDict().set(n,be.fromText(e))},t.prototype.setProducer=function(e){L(e,"creator",["string"]);var n=R.of("Producer");this.getInfoDict().set(n,be.fromText(e))},t.prototype.setLanguage=function(e){L(e,"language",["string"]);var n=R.of("Lang");this.catalog.set(n,ht.of(e))},t.prototype.setCreationDate=function(e){L(e,"creationDate",[[Date,"Date"]]);var n=R.of("CreationDate");this.getInfoDict().set(n,ht.fromDate(e))},t.prototype.setModificationDate=function(e){L(e,"modificationDate",[[Date,"Date"]]);var n=R.of("ModDate");this.getInfoDict().set(n,ht.fromDate(e))},t.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},t.prototype.getPages=function(){return this.pageCache.access()},t.prototype.getPage=function(e){var n=this.getPages();return Sr(e,"index",0,n.length-1),n[e]},t.prototype.getPageIndices=function(){return vY(0,this.getPageCount())},t.prototype.removePage=function(e){var n=this.getPageCount();if(this.pageCount===0)throw new $$;Sr(e,"index",0,n-1),this.catalog.removeLeafNode(e),this.pageCount=n-1},t.prototype.addPage=function(e){return L(e,"page",["undefined",[bi,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},t.prototype.insertPage=function(e,n){var i=this.getPageCount();if(Sr(e,"index",0,i),L(n,"page",["undefined",[bi,"PDFPage"],Array]),!n||Array.isArray(n)){var r=Array.isArray(n)?n:pZ.A4;n=bi.create(this),n.setSize.apply(n,r)}else if(n.doc!==this)throw new X$;var s=this.catalog.insertLeafNode(n.ref,e);return n.node.setParent(s),this.pageMap.set(n.node,n),this.pageCache.invalidate(),this.pageCount=i+1,n},t.prototype.copyPages=function(e,n){return Pe(this,void 0,void 0,function(){var i,r,s,o,a,l,c,u;return Me(this,function(d){switch(d.label){case 0:return L(e,"srcDoc",[[t,"PDFDocument"]]),L(n,"indices",[Array]),[4,e.flush()];case 1:for(d.sent(),i=CR.for(e.context,this.context),r=e.getPages(),s=new Array(n.length),o=0,a=n.length;o<a;o++)l=r[n[o]],c=i.copy(l.node),u=this.context.register(c),s[o]=bi.of(c,u,this);return[2,s]}})})},t.prototype.copy=function(){return Pe(this,void 0,void 0,function(){var e,n,i,r;return Me(this,function(s){switch(s.label){case 0:return[4,t.create()];case 1:return e=s.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(n=s.sent(),i=0,r=n.length;i<r;i++)e.addPage(n[i]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},t.prototype.addJavaScript=function(e,n){L(e,"name",["string"]),L(n,"script",["string"]);var i=mZ.for(n,e),r=this.context.nextRef(),s=yB.of(r,this,i);this.javaScripts.push(s)},t.prototype.attach=function(e,n,i){return i===void 0&&(i={}),Pe(this,void 0,void 0,function(){var r,s,o,a;return Me(this,function(l){return L(e,"attachment",["string",Uint8Array,ArrayBuffer]),L(n,"name",["string"]),re(i.mimeType,"mimeType",["string"]),re(i.description,"description",["string"]),re(i.creationDate,"options.creationDate",[Date]),re(i.modificationDate,"options.modificationDate",[Date]),Es(i.afRelationship,"options.afRelationship",SR),r=um(e),s=HV.for(r,n,i),o=this.context.nextRef(),a=gZ.of(o,this,s),this.embeddedFiles.push(a),[2]})})},t.prototype.embedFont=function(e,n){return n===void 0&&(n={}),Pe(this,void 0,void 0,function(){var i,r,s,o,a,l,c,u,d,h;return Me(this,function(p){switch(p.label){case 0:return i=n.subset,r=i===void 0?!1:i,s=n.customName,o=n.features,L(e,"font",["string",Uint8Array,ArrayBuffer]),L(r,"subset",["boolean"]),PV(e)?(a=pf.for(e,s),[3,7]):[3,1];case 1:return CY(e)?(l=um(e),c=this.assertFontkit(),r?[4,GV.for(c,l,s,o)]:[3,3]):[3,6];case 2:return u=p.sent(),[3,5];case 3:return[4,gf.for(c,l,s,o)];case 4:u=p.sent(),p.label=5;case 5:return a=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return d=this.context.nextRef(),h=li.of(d,this,a),this.fonts.push(h),[2,h]}})})},t.prototype.embedStandardFont=function(e,n){if(L(e,"font",["string"]),!PV(e))throw new TypeError("`font` must be one of type `StandardFonts`");var i=pf.for(e,n),r=this.context.nextRef(),s=li.of(r,this,i);return this.fonts.push(s),s},t.prototype.embedJpg=function(e){return Pe(this,void 0,void 0,function(){var n,i,r,s;return Me(this,function(o){switch(o.label){case 0:return L(e,"jpg",["string",Uint8Array,ArrayBuffer]),n=um(e),[4,Uw.for(n)];case 1:return i=o.sent(),r=this.context.nextRef(),s=km.of(r,this,i),this.images.push(s),[2,s]}})})},t.prototype.embedPng=function(e){return Pe(this,void 0,void 0,function(){var n,i,r,s;return Me(this,function(o){switch(o.label){case 0:return L(e,"png",["string",Uint8Array,ArrayBuffer]),n=um(e),[4,jw.for(n)];case 1:return i=o.sent(),r=this.context.nextRef(),s=km.of(r,this,i),this.images.push(s),[2,s]}})})},t.prototype.embedPdf=function(e,n){return n===void 0&&(n=[0]),Pe(this,void 0,void 0,function(){var i,r,s;return Me(this,function(o){switch(o.label){case 0:return L(e,"pdf",["string",Uint8Array,ArrayBuffer,[t,"PDFDocument"]]),L(n,"indices",[Array]),e instanceof t?(r=e,[3,3]):[3,1];case 1:return[4,t.load(e)];case 2:r=o.sent(),o.label=3;case 3:return i=r,s=yY(i.getPages(),n),[2,this.embedPages(s)]}})})},t.prototype.embedPage=function(e,n,i){return Pe(this,void 0,void 0,function(){var r;return Me(this,function(s){switch(s.label){case 0:return L(e,"page",[[bi,"PDFPage"]]),[4,this.embedPages([e],[n],[i])];case 1:return r=s.sent()[0],[2,r]}})})},t.prototype.embedPages=function(e,n,i){return n===void 0&&(n=[]),i===void 0&&(i=[]),Pe(this,void 0,void 0,function(){var c,u,r,s,o,a,l,c,u,d,h,p,g,m,v;return Me(this,function(C){switch(C.label){case 0:if(e.length===0)return[2,[]];for(c=0,u=e.length-1;c<u;c++)if(r=e[c],s=e[c+1],r.node.context!==s.node.context)throw new GX;o=e[0].node.context,a=o===this.context?function(b){return b}:CR.for(o,this.context).copy,l=new Array(e.length),c=0,u=e.length,C.label=1;case 1:return c<u?(d=a(e[c].node),h=n[c],p=i[c],[4,zw.for(d,h,p)]):[3,4];case 2:g=C.sent(),m=this.context.nextRef(),l[c]=C0.of(m,this,g),C.label=3;case 3:return c++,[3,1];case 4:return(v=this.embeddedPages).push.apply(v,l),[2,l]}})})},t.prototype.flush=function(){return Pe(this,void 0,void 0,function(){return Me(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},t.prototype.save=function(e){return e===void 0&&(e={}),Pe(this,void 0,void 0,function(){var n,i,r,s,o,a,l,c,u,d;return Me(this,function(h){switch(h.label){case 0:return n=e.useObjectStreams,i=n===void 0?!0:n,r=e.addDefaultPage,s=r===void 0?!0:r,o=e.objectsPerTick,a=o===void 0?50:o,l=e.updateFieldAppearances,c=l===void 0?!0:l,L(i,"useObjectStreams",["boolean"]),L(s,"addDefaultPage",["boolean"]),L(a,"objectsPerTick",["number"]),L(c,"updateFieldAppearances",["boolean"]),s&&this.getPageCount()===0&&this.addPage(),c&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return h.sent(),d=i?BV:Bw,[2,d.forContext(this.context,a).serializeToBuffer()]}})})},t.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),Pe(this,void 0,void 0,function(){var n,i,r,s,o;return Me(this,function(a){switch(a.label){case 0:return n=e.dataUri,i=n===void 0?!1:n,r=iY(e,["dataUri"]),L(i,"dataUri",["boolean"]),[4,this.save(r)];case 1:return s=a.sent(),o=sY(s),[2,i?"data:application/pdf;base64,"+o:o]}})})},t.prototype.findPageForAnnotationRef=function(e){for(var n=this.getPages(),i=0,r=n.length;i<r;i++){var s=n[i],o=s.node.Annots();if(o?.indexOf(e)!==void 0)return s}},t.prototype.embedAll=function(e){return Pe(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:n=0,i=e.length,r.label=1;case 1:return n<i?[4,e[n].embed()]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",n=new Date,i=this.getInfoDict();this.setProducer(e),this.setModificationDate(n),i.get(R.of("Creator"))||this.setCreator(e),i.get(R.of("CreationDate"))||this.setCreationDate(n)},t.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof Ie)return e;var n=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(n),n},t.prototype.assertFontkit=function(){if(!this.fontkit)throw new Q$;return this.fontkit},t}(),Er=RMe;function ud(t){if(!(t instanceof be)&&!(t instanceof ht))throw new uf([be,ht],t)}var Dc=function(t){return t.Normal="Normal",t.Multiply="Multiply",t.Screen="Screen",t.Overlay="Overlay",t.Darken="Darken",t.Lighten="Lighten",t.ColorDodge="ColorDodge",t.ColorBurn="ColorBurn",t.HardLight="HardLight",t.SoftLight="SoftLight",t.Difference="Difference",t.Exclusion="Exclusion",t}(Dc||{});var IMe=function(){function t(e,n,i){this.fontSize=24,this.fontColor=wt(0,0,0),this.lineHeight=24,this.x=0,this.y=0,L(e,"leafNode",[[Xr,"PDFPageLeaf"]]),L(n,"ref",[[Ze,"PDFRef"]]),L(i,"doc",[[Er,"PDFDocument"]]),this.node=e,this.ref=n,this.doc=i}return t.prototype.setRotation=function(e){var n=FR(e);gR(n,"degreesAngle",90),this.node.set(R.of("Rotate"),this.doc.context.obj(n))},t.prototype.getRotation=function(){var e=this.node.Rotate();return Oe(e?e.asNumber():0)},t.prototype.setSize=function(e,n){L(e,"width",["number"]),L(n,"height",["number"]);var i=this.getMediaBox();this.setMediaBox(i.x,i.y,e,n);var r=this.getCropBox(),s=this.getBleedBox(),o=this.getTrimBox(),a=this.getArtBox(),l=this.node.CropBox(),c=this.node.BleedBox(),u=this.node.TrimBox(),d=this.node.ArtBox();l&&kw(r,i)&&this.setCropBox(i.x,i.y,e,n),c&&kw(s,i)&&this.setBleedBox(i.x,i.y,e,n),u&&kw(o,i)&&this.setTrimBox(i.x,i.y,e,n),d&&kw(a,i)&&this.setArtBox(i.x,i.y,e,n)},t.prototype.setWidth=function(e){L(e,"width",["number"]),this.setSize(e,this.getSize().height)},t.prototype.setHeight=function(e){L(e,"height",["number"]),this.setSize(this.getSize().width,e)},t.prototype.setMediaBox=function(e,n,i,r){L(e,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var s=this.doc.context.obj([e,n,e+i,n+r]);this.node.set(R.MediaBox,s)},t.prototype.setCropBox=function(e,n,i,r){L(e,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var s=this.doc.context.obj([e,n,e+i,n+r]);this.node.set(R.CropBox,s)},t.prototype.setBleedBox=function(e,n,i,r){L(e,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var s=this.doc.context.obj([e,n,e+i,n+r]);this.node.set(R.BleedBox,s)},t.prototype.setTrimBox=function(e,n,i,r){L(e,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var s=this.doc.context.obj([e,n,e+i,n+r]);this.node.set(R.TrimBox,s)},t.prototype.setArtBox=function(e,n,i,r){L(e,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var s=this.doc.context.obj([e,n,e+i,n+r]);this.node.set(R.ArtBox,s)},t.prototype.getSize=function(){var e=this.getMediaBox(),n=e.width,i=e.height;return{width:n,height:i}},t.prototype.getWidth=function(){return this.getSize().width},t.prototype.getHeight=function(){return this.getSize().height},t.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},t.prototype.getCropBox=function(){var e,n=this.node.CropBox();return(e=n?.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},t.prototype.getBleedBox=function(){var e,n=this.node.BleedBox();return(e=n?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getTrimBox=function(){var e,n=this.node.TrimBox();return(e=n?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getArtBox=function(){var e,n=this.node.ArtBox();return(e=n?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.translateContent=function(e,n){L(e,"x",["number"]),L(n,"y",["number"]),this.node.normalize(),this.getContentStream();var i=this.createContentStream(Yn(),Zr(e,n)),r=this.doc.context.register(i),s=this.createContentStream(Qn()),o=this.doc.context.register(s);this.node.wrapContentStreams(r,o)},t.prototype.scale=function(e,n){L(e,"x",["number"]),L(n,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*n),this.scaleContent(e,n),this.scaleAnnotations(e,n)},t.prototype.scaleContent=function(e,n){L(e,"x",["number"]),L(n,"y",["number"]),this.node.normalize(),this.getContentStream();var i=this.createContentStream(Yn(),Cf(e,n)),r=this.doc.context.register(i),s=this.createContentStream(Qn()),o=this.doc.context.register(s);this.node.wrapContentStreams(r,o)},t.prototype.scaleAnnotations=function(e,n){L(e,"x",["number"]),L(n,"y",["number"]);var i=this.node.Annots();if(i)for(var r=0;r<i.size();r++){var s=i.lookup(r);s instanceof Ie&&this.scaleAnnot(s,e,n)}},t.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},t.prototype.setFont=function(e){L(e,"font",[[li,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},t.prototype.setFontSize=function(e){L(e,"fontSize",["number"]),this.fontSize=e},t.prototype.setFontColor=function(e){L(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},t.prototype.setLineHeight=function(e){L(e,"lineHeight",["number"]),this.lineHeight=e},t.prototype.getPosition=function(){return{x:this.x,y:this.y}},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.moveTo=function(e,n){L(e,"x",["number"]),L(n,"y",["number"]),this.x=e,this.y=n},t.prototype.moveDown=function(e){L(e,"yDecrease",["number"]),this.y-=e},t.prototype.moveUp=function(e){L(e,"yIncrease",["number"]),this.y+=e},t.prototype.moveLeft=function(e){L(e,"xDecrease",["number"]),this.x-=e},t.prototype.moveRight=function(e){L(e,"xIncrease",["number"]),this.x+=e},t.prototype.pushOperators=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];pR(e,"operator",[[yt,"PDFOperator"]]);var i=this.getContentStream();i.push.apply(i,e)},t.prototype.drawText=function(e,n){var i,r,s,o,a,l,c;n===void 0&&(n={}),L(e,"text",["string"]),re(n.color,"options.color",[[Object,"Color"]]),to(n.opacity,"opacity.opacity",0,1),re(n.font,"options.font",[[li,"PDFFont"]]),re(n.size,"options.size",["number"]),re(n.rotate,"options.rotate",[[Object,"Rotation"]]),re(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),re(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),re(n.x,"options.x",["number"]),re(n.y,"options.y",["number"]),re(n.lineHeight,"options.lineHeight",["number"]),re(n.maxWidth,"options.maxWidth",["number"]),re(n.wordBreaks,"options.wordBreaks",[Array]),Es(n.blendMode,"options.blendMode",Dc);for(var u=this.setOrEmbedFont(n.font),d=u.oldFont,h=u.newFont,p=u.newFontKey,g=n.size||this.fontSize,m=n.wordBreaks||this.doc.defaultWordBreaks,v=function(_){return h.widthOfTextAtSize(_,g)},C=n.maxWidth===void 0?zT(Xh(e)):dY(e,m,n.maxWidth,v),b=new Array(C.length),E=0,T=C.length;E<T;E++)b[E]=h.encodeText(C[E]);var P=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),x=this.getContentStream();x.push.apply(x,j$(b,{color:(i=n.color)!==null&&i!==void 0?i:this.fontColor,font:p,size:g,rotate:(r=n.rotate)!==null&&r!==void 0?r:Oe(0),xSkew:(s=n.xSkew)!==null&&s!==void 0?s:Oe(0),ySkew:(o=n.ySkew)!==null&&o!==void 0?o:Oe(0),x:(a=n.x)!==null&&a!==void 0?a:this.x,y:(l=n.y)!==null&&l!==void 0?l:this.y,lineHeight:(c=n.lineHeight)!==null&&c!==void 0?c:this.lineHeight,graphicsState:P})),n.font&&(d?this.setFont(d):this.resetFont())},t.prototype.drawImage=function(e,n){var i,r,s,o,a,l,c;n===void 0&&(n={}),L(e,"image",[[km,"PDFImage"]]),re(n.x,"options.x",["number"]),re(n.y,"options.y",["number"]),re(n.width,"options.width",["number"]),re(n.height,"options.height",["number"]),re(n.rotate,"options.rotate",[[Object,"Rotation"]]),re(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),re(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),to(n.opacity,"opacity.opacity",0,1),Es(n.blendMode,"options.blendMode",Dc);var u=this.node.newXObject("Image",e.ref),d=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),h=this.getContentStream();h.push.apply(h,GR(u,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,width:(s=n.width)!==null&&s!==void 0?s:e.size().width,height:(o=n.height)!==null&&o!==void 0?o:e.size().height,rotate:(a=n.rotate)!==null&&a!==void 0?a:Oe(0),xSkew:(l=n.xSkew)!==null&&l!==void 0?l:Oe(0),ySkew:(c=n.ySkew)!==null&&c!==void 0?c:Oe(0),graphicsState:d}))},t.prototype.drawPage=function(e,n){var i,r,s,o,a;n===void 0&&(n={}),L(e,"embeddedPage",[[C0,"PDFEmbeddedPage"]]),re(n.x,"options.x",["number"]),re(n.y,"options.y",["number"]),re(n.xScale,"options.xScale",["number"]),re(n.yScale,"options.yScale",["number"]),re(n.width,"options.width",["number"]),re(n.height,"options.height",["number"]),re(n.rotate,"options.rotate",[[Object,"Rotation"]]),re(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),re(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),to(n.opacity,"opacity.opacity",0,1),Es(n.blendMode,"options.blendMode",Dc);var l=this.node.newXObject("EmbeddedPdfPage",e.ref),c=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),u=n.width!==void 0?n.width/e.width:n.xScale!==void 0?n.xScale:1,d=n.height!==void 0?n.height/e.height:n.yScale!==void 0?n.yScale:1,h=this.getContentStream();h.push.apply(h,W$(l,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,xScale:u,yScale:d,rotate:(s=n.rotate)!==null&&s!==void 0?s:Oe(0),xSkew:(o=n.xSkew)!==null&&o!==void 0?o:Oe(0),ySkew:(a=n.ySkew)!==null&&a!==void 0?a:Oe(0),graphicsState:c}))},t.prototype.drawSvgPath=function(e,n){var i,r,s,o,a,l,c,u,d;n===void 0&&(n={}),L(e,"path",["string"]),re(n.x,"options.x",["number"]),re(n.y,"options.y",["number"]),re(n.scale,"options.scale",["number"]),re(n.rotate,"options.rotate",[[Object,"Rotation"]]),re(n.borderWidth,"options.borderWidth",["number"]),re(n.color,"options.color",[[Object,"Color"]]),to(n.opacity,"opacity.opacity",0,1),re(n.borderColor,"options.borderColor",[[Object,"Color"]]),re(n.borderDashArray,"options.borderDashArray",[Array]),re(n.borderDashPhase,"options.borderDashPhase",["number"]),Es(n.borderLineCap,"options.borderLineCap",Am),to(n.borderOpacity,"options.borderOpacity",0,1),Es(n.blendMode,"options.blendMode",Dc);var h=this.maybeEmbedGraphicsState({opacity:n.opacity,borderOpacity:n.borderOpacity,blendMode:n.blendMode});!("color"in n)&&!("borderColor"in n)&&(n.borderColor=wt(0,0,0));var p=this.getContentStream();p.push.apply(p,q$(e,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,scale:n.scale,rotate:(s=n.rotate)!==null&&s!==void 0?s:Oe(0),color:(o=n.color)!==null&&o!==void 0?o:void 0,borderColor:(a=n.borderColor)!==null&&a!==void 0?a:void 0,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(c=n.borderDashArray)!==null&&c!==void 0?c:void 0,borderDashPhase:(u=n.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(d=n.borderLineCap)!==null&&d!==void 0?d:void 0,graphicsState:h}))},t.prototype.drawLine=function(e){var n,i,r,s,o;L(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),L(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),L(e.start.x,"options.start.x",["number"]),L(e.start.y,"options.start.y",["number"]),L(e.end.x,"options.end.x",["number"]),L(e.end.y,"options.end.y",["number"]),re(e.thickness,"options.thickness",["number"]),re(e.color,"options.color",[[Object,"Color"]]),re(e.dashArray,"options.dashArray",[Array]),re(e.dashPhase,"options.dashPhase",["number"]),Es(e.lineCap,"options.lineCap",Am),to(e.opacity,"opacity.opacity",0,1),Es(e.blendMode,"options.blendMode",Dc);var a=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=wt(0,0,0));var l=this.getContentStream();l.push.apply(l,z$({start:e.start,end:e.end,thickness:(n=e.thickness)!==null&&n!==void 0?n:1,color:(i=e.color)!==null&&i!==void 0?i:void 0,dashArray:(r=e.dashArray)!==null&&r!==void 0?r:void 0,dashPhase:(s=e.dashPhase)!==null&&s!==void 0?s:void 0,lineCap:(o=e.lineCap)!==null&&o!==void 0?o:void 0,graphicsState:a}))},t.prototype.drawRectangle=function(e){var n,i,r,s,o,a,l,c,u,d,h,p,g;e===void 0&&(e={}),re(e.x,"options.x",["number"]),re(e.y,"options.y",["number"]),re(e.width,"options.width",["number"]),re(e.height,"options.height",["number"]),re(e.rotate,"options.rotate",[[Object,"Rotation"]]),re(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),re(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),re(e.borderWidth,"options.borderWidth",["number"]),re(e.color,"options.color",[[Object,"Color"]]),to(e.opacity,"opacity.opacity",0,1),re(e.borderColor,"options.borderColor",[[Object,"Color"]]),re(e.borderDashArray,"options.borderDashArray",[Array]),re(e.borderDashPhase,"options.borderDashPhase",["number"]),Es(e.borderLineCap,"options.borderLineCap",Am),to(e.borderOpacity,"options.borderOpacity",0,1),Es(e.blendMode,"options.blendMode",Dc);var m=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=wt(0,0,0));var v=this.getContentStream();v.push.apply(v,bf({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(i=e.y)!==null&&i!==void 0?i:this.y,width:(r=e.width)!==null&&r!==void 0?r:150,height:(s=e.height)!==null&&s!==void 0?s:100,rotate:(o=e.rotate)!==null&&o!==void 0?o:Oe(0),xSkew:(a=e.xSkew)!==null&&a!==void 0?a:Oe(0),ySkew:(l=e.ySkew)!==null&&l!==void 0?l:Oe(0),borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(d=e.borderColor)!==null&&d!==void 0?d:void 0,borderDashArray:(h=e.borderDashArray)!==null&&h!==void 0?h:void 0,borderDashPhase:(p=e.borderDashPhase)!==null&&p!==void 0?p:void 0,graphicsState:m,borderLineCap:(g=e.borderLineCap)!==null&&g!==void 0?g:void 0}))},t.prototype.drawSquare=function(e){e===void 0&&(e={});var n=e.size;re(n,"size",["number"]),this.drawRectangle($e($e({},e),{width:n,height:n}))},t.prototype.drawEllipse=function(e){var n,i,r,s,o,a,l,c,u,d,h;e===void 0&&(e={}),re(e.x,"options.x",["number"]),re(e.y,"options.y",["number"]),re(e.xScale,"options.xScale",["number"]),re(e.yScale,"options.yScale",["number"]),re(e.rotate,"options.rotate",[[Object,"Rotation"]]),re(e.color,"options.color",[[Object,"Color"]]),to(e.opacity,"opacity.opacity",0,1),re(e.borderColor,"options.borderColor",[[Object,"Color"]]),to(e.borderOpacity,"options.borderOpacity",0,1),re(e.borderWidth,"options.borderWidth",["number"]),re(e.borderDashArray,"options.borderDashArray",[Array]),re(e.borderDashPhase,"options.borderDashPhase",["number"]),Es(e.borderLineCap,"options.borderLineCap",Am),Es(e.blendMode,"options.blendMode",Dc);var p=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=wt(0,0,0));var g=this.getContentStream();g.push.apply(g,BR({x:(n=e.x)!==null&&n!==void 0?n:this.x,y:(i=e.y)!==null&&i!==void 0?i:this.y,xScale:(r=e.xScale)!==null&&r!==void 0?r:100,yScale:(s=e.yScale)!==null&&s!==void 0?s:100,rotate:(o=e.rotate)!==null&&o!==void 0?o:void 0,color:(a=e.color)!==null&&a!==void 0?a:void 0,borderColor:(l=e.borderColor)!==null&&l!==void 0?l:void 0,borderWidth:(c=e.borderWidth)!==null&&c!==void 0?c:0,borderDashArray:(u=e.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(d=e.borderDashPhase)!==null&&d!==void 0?d:void 0,borderLineCap:(h=e.borderLineCap)!==null&&h!==void 0?h:void 0,graphicsState:p}))},t.prototype.drawCircle=function(e){e===void 0&&(e={});var n=e.size,i=n===void 0?100:n;re(i,"size",["number"]),this.drawEllipse($e($e({},e),{xScale:i,yScale:i}))},t.prototype.setOrEmbedFont=function(e){var n=this.font,i=this.fontKey;e?this.setFont(e):this.getFont();var r=this.font,s=this.fontKey;return{oldFont:n,oldFontKey:i,newFont:r,newFontKey:s}},t.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(S0.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},t.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},t.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},t.prototype.createContentStream=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.doc.context.obj({}),r=_c.of(i,e);return r},t.prototype.maybeEmbedGraphicsState=function(e){var n=e.opacity,i=e.borderOpacity,r=e.blendMode;if(!(n===void 0&&i===void 0&&r===void 0)){var s=this.doc.context.obj({Type:"ExtGState",ca:n,CA:i,BM:r}),o=this.node.newExtGState("GS",s);return o}},t.prototype.scaleAnnot=function(e,n,i){for(var r=["RD","CL","Vertices","QuadPoints","L","Rect"],s=0,o=r.length;s<o;s++){var a=e.lookup(R.of(r[s]));a instanceof Ye&&a.scalePDFNumbers(n,i)}var l=e.lookup(R.of("InkList"));if(l instanceof Ye)for(var s=0,o=l.size();s<o;s++){var c=l.lookup(s);c instanceof Ye&&c.scalePDFNumbers(n,i)}},t.of=function(e,n,i){return new t(e,n,i)},t.create=function(e){L(e,"doc",[[Er,"PDFDocument"]]);var n=Ze.of(-1),i=Xr.withContextAndParent(e.context,n),r=e.context.register(i);return new t(i,r,e)},t}(),bi=IMe;var xMe=function(t){K(e,t);function e(n,i,r){var s=t.call(this,n,i,r)||this;return L(n,"acroButton",[[nd,"PDFAcroPushButton"]]),s.acroField=n,s}return e.prototype.setImage=function(n,i){i===void 0&&(i=bl.Center);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s],l=this.createImageAppearanceStream(a,n,i);this.updateWidgetAppearances(a,{normal:l})}this.markAsClean()},e.prototype.setFontSize=function(n){Xu(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},e.prototype.addToPage=function(n,i,r){var s,o,a,l,c,u,d,h,p,g,m;re(n,"text",["string"]),re(i,"page",[[bi,"PDFPage"]]),Bo(r);var v=this.createWidget({x:((s=r?.x)!==null&&s!==void 0?s:0)-((o=r?.borderWidth)!==null&&o!==void 0?o:0)/2,y:((a=r?.y)!==null&&a!==void 0?a:0)-((l=r?.borderWidth)!==null&&l!==void 0?l:0)/2,width:(c=r?.width)!==null&&c!==void 0?c:100,height:(u=r?.height)!==null&&u!==void 0?u:50,textColor:(d=r?.textColor)!==null&&d!==void 0?d:wt(0,0,0),backgroundColor:(h=r?.backgroundColor)!==null&&h!==void 0?h:wt(.75,.75,.75),borderColor:r?.borderColor,borderWidth:(p=r?.borderWidth)!==null&&p!==void 0?p:0,rotate:(g=r?.rotate)!==null&&g!==void 0?g:Oe(0),caption:n,hidden:r?.hidden,page:i.ref}),C=this.doc.context.register(v.dict);this.acroField.addWidget(C);var b=(m=r?.font)!==null&&m!==void 0?m:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(v,b),i.node.addAnnot(C)},e.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,s=i.length;r<s;r++){var o=i[r],a=((n=o.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Rn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[li,"PDFFont"]]),this.updateAppearances(n)},e.prototype.updateAppearances=function(n,i){L(n,"font",[[li,"PDFFont"]]),re(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),s=0,o=r.length;s<o;s++){var a=r[s];this.updateWidgetAppearance(a,n,i)}},e.prototype.updateWidgetAppearance=function(n,i,r){var s=r??uZ,o=Vo(s(this,n,i));this.updateWidgetAppearanceWithFont(n,i,o)},e.of=function(n,i,r){return new e(n,i,r)},e}(es),Gm=xMe;var DZ="firebasestorage.googleapis.com",TZ="storageBucket",FMe=2*60*1e3,AMe=10*60*1e3,PMe=1e3;var Gn=class t extends Ko{constructor(e,n,i=0){super(CB(e),`Firebase Storage: ${n} (${CB(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CB(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Nn=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Nn||{});function CB(t){return"storage/"+t}function RB(){let t="An unknown error occurred, please check the error payload for server response.";return new Gn(Nn.UNKNOWN,t)}function MMe(t){return new Gn(Nn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function OMe(t){return new Gn(Nn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kMe(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gn(Nn.UNAUTHENTICATED,t)}function NMe(){return new Gn(Nn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LMe(t){return new Gn(Nn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function RZ(){return new Gn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IZ(){return new Gn(Nn.CANCELED,"User canceled the upload/download.")}function VMe(t){return new Gn(Nn.INVALID_URL,"Invalid URL '"+t+"'.")}function BMe(t){return new Gn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GMe(){return new Gn(Nn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TZ+"' property when initializing the app?")}function xZ(){return new Gn(Nn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function HMe(){return new Gn(Nn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function UMe(){return new Gn(Nn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jMe(t){return new Gn(Nn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Df(t){return new Gn(Nn.INVALID_ARGUMENT,t)}function FZ(){return new Gn(Nn.APP_DELETED,"The Firebase app was deleted.")}function IB(t){return new Gn(Nn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _0(t,e){return new Gn(Nn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function b0(t){throw new Gn(Nn.INTERNAL_ERROR,"Internal error: "+t)}var ts=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw BMe(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(T){T.path_=decodeURIComponent(T.path)}let u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${r}/o${h}`,"i"),g={bucket:1,path:3},m=n===DZ?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",C=new RegExp(`^https?://${m}/${r}/${v}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:c},{regex:C,indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<E.length;T++){let P=E[T],x=P.regex.exec(e);if(x){let _=x[P.indices.bucket],S=x[P.indices.path];S||(S=""),i=new t(_,S),P.postModify(i);break}}if(i==null)throw VMe(e);return i}},SB=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function WMe(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){r=setTimeout(()=>{r=null,t(p,l())},v)}function h(){s&&clearTimeout(s)}function p(v,...C){if(c){h();return}if(v){h(),u.call(null,v,...C);return}if(l()||o){h(),u.call(null,v,...C);return}i<64&&(i*=2);let E;a===1?(a=2,E=0):E=(i+Math.random())*1e3,d(E)}let g=!1;function m(v){g||(g=!0,h(),!c&&(r!==null?(v||(a=2),clearTimeout(r),d(0)):v||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function zMe(t){t(!1)}function qMe(t){return t!==void 0}function KMe(t){return typeof t=="function"}function YMe(t){return typeof t=="object"&&!Array.isArray(t)}function jR(t){return typeof t=="string"||t instanceof String}function vZ(t){return xB()&&t instanceof Blob}function xB(){return typeof Blob<"u"}function bB(t,e,n,i){if(i<e)throw Df(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Df(`Invalid value for '${t}'. Expected ${n} or less.`)}function dd(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function AZ(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var jm=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(jm||{});function PZ(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}var _B=class{constructor(e,n,i,r,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Um(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===jm.NO_ERROR,l=s.getStatus();if(!a||PZ(l,this.additionalRetryCodes_)&&this.retry){let u=s.getErrorCode()===jm.ABORT;i(!1,new Um(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new Um(c,s))})},n=(i,r)=>{let s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());qMe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){let l=RB();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){let l=this.appDelete_?FZ():IZ();o(l)}else{let l=RZ();o(l)}};this.canceled_?n(!1,new Um(!1,null,!0)):this.backoffId_=WMe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zMe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Um=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function QMe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function XMe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $Me(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ZMe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JMe(t,e,n,i,r,s,o=!0){let a=AZ(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return $Me(c,e),QMe(c,n),XMe(c,s),ZMe(c,i),new _B(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}function eOe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tOe(...t){let e=eOe();if(e!==void 0){let n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(xB())return new Blob(t);throw new Gn(Nn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nOe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function iOe(t){if(typeof atob>"u")throw jMe("base-64");return atob(t)}var io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},E0=class{constructor(e,n){this.data=e,this.contentType=n||null}};function FB(t,e){switch(t){case io.RAW:return new E0(MZ(e));case io.BASE64:case io.BASE64URL:return new E0(OZ(t,e));case io.DATA_URL:return new E0(sOe(e),oOe(e))}throw RB()}function MZ(t){let e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function rOe(t){let e;try{e=decodeURIComponent(t)}catch{throw _0(io.DATA_URL,"Malformed data URL.")}return MZ(e)}function OZ(t,e){switch(t){case io.BASE64:{let r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw _0(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case io.BASE64URL:{let r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw _0(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iOe(e)}catch(r){throw r.message.includes("polyfill")?r:_0(t,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var UR=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw _0(io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=aOe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function sOe(t){let e=new UR(t);return e.base64?OZ(io.BASE64,e.rest):rOe(e.rest)}function oOe(t){return new UR(t).contentType}function aOe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Wm=class t{constructor(e,n){let i=0,r="";vZ(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(vZ(this.data_)){let i=this.data_,r=nOe(i,e,n);return r===null?null:new t(r)}else{let i=new Uint8Array(this.data_.buffer,e,n-e);return new t(i,!0)}}static getBlob(...e){if(xB()){let n=e.map(i=>i instanceof t?i.data_:i);return new t(tOe.apply(null,n))}else{let n=e.map(o=>jR(o)?FB(io.RAW,o).data:o.data_),i=0;n.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new t(r,!0)}}uploadData(){return this.data_}};function AB(t){let e;try{e=JSON.parse(t)}catch{return null}return YMe(e)?e:null}function lOe(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cOe(t,e){let n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function kZ(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function uOe(t,e){return e}var cr=class{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||uOe}},HR=null;function dOe(t){return!jR(t)||t.length<2?t:kZ(t)}function WR(){if(HR)return HR;let t=[];t.push(new cr("bucket")),t.push(new cr("generation")),t.push(new cr("metageneration")),t.push(new cr("name","fullPath",!0));function e(s,o){return dOe(o)}let n=new cr("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}let r=new cr("size");return r.xform=i,t.push(r),t.push(new cr("timeCreated")),t.push(new cr("updated")),t.push(new cr("md5Hash",null,!0)),t.push(new cr("cacheControl",null,!0)),t.push(new cr("contentDisposition",null,!0)),t.push(new cr("contentEncoding",null,!0)),t.push(new cr("contentLanguage",null,!0)),t.push(new cr("contentType",null,!0)),t.push(new cr("metadata","customMetadata",!0)),HR=t,HR}function hOe(t,e){function n(){let i=t.bucket,r=t.fullPath,s=new ts(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function fOe(t,e,n){let i={};i.type="file";let r=n.length;for(let s=0;s<r;s++){let o=n[s];i[o.local]=o.xform(i,e[o.server])}return hOe(i,t),i}function NZ(t,e,n){let i=AB(e);return i===null?null:fOe(t,i,n)}function pOe(t,e,n,i){let r=AB(e);if(r===null||!jR(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(c=>{let u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),p=dd(h,n,i),g=AZ({alt:"media",token:c});return p+g})[0]}function PB(t,e){let n={},i=e.length;for(let r=0;r<i;r++){let s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var yZ="prefixes",CZ="items";function gOe(t,e,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[yZ])for(let r of n[yZ]){let s=r.replace(/\/$/,""),o=t._makeStorageReference(new ts(e,s));i.prefixes.push(o)}if(n[CZ])for(let r of n[CZ]){let s=t._makeStorageReference(new ts(e,r.name));i.items.push(s)}return i}function mOe(t,e,n){let i=AB(n);return i===null?null:gOe(t,e,i)}var Da=class{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function El(t){if(!t)throw RB()}function zR(t,e){function n(i,r){let s=NZ(t,r,e);return El(s!==null),s}return n}function vOe(t,e){function n(i,r){let s=mOe(t,e,r);return El(s!==null),s}return n}function yOe(t,e){function n(i,r){let s=NZ(t,r,e);return El(s!==null),pOe(s,r,t.host,t._protocol)}return n}function Km(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=NMe():r=kMe():n.getStatus()===402?r=OMe(t.bucket):n.getStatus()===403?r=LMe(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function qR(t){let e=Km(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=MMe(t.path)),s.serverResponse=r.serverResponse,s}return n}function LZ(t,e,n){let i=e.fullServerUrl(),r=dd(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Da(r,s,zR(t,n),o);return a.errorHandler=qR(e),a}function COe(t,e,n,i,r){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);let o=e.bucketOnlyServerUrl(),a=dd(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Da(a,l,vOe(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Km(e),u}function wOe(t,e,n){let i=e.fullServerUrl(),r=dd(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Da(r,s,yOe(t,n),o);return a.errorHandler=qR(e),a}function SOe(t,e,n,i){let r=e.fullServerUrl(),s=dd(r,t.host,t._protocol),o="PATCH",a=PB(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new Da(s,o,zR(t,i),c);return u.headers=l,u.body=a,u.errorHandler=qR(e),u}function bOe(t,e){let n=e.fullServerUrl(),i=dd(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,c){}let a=new Da(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=qR(e),a}function _Oe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function VZ(t,e,n){let i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=_Oe(null,e)),i}function EOe(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let T=0;T<2;T++)E=E+Math.random().toString().slice(2);return E}let l=a();o["Content-Type"]="multipart/related; boundary="+l;let c=VZ(e,i,r),u=PB(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=Wm.getBlob(d,i,h);if(p===null)throw xZ();let g={name:c.fullPath},m=dd(s,t.host,t._protocol),v="POST",C=t.maxUploadRetryTime,b=new Da(m,v,zR(t,n),C);return b.urlParams=g,b.headers=o,b.body=p.uploadData(),b.errorHandler=Km(e),b}var zm=class{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}};function MB(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{El(!1)}return El(!!n&&(e||["active"]).indexOf(n)!==-1),n}function DOe(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o=VZ(e,i,r),a={name:o.fullPath},l=dd(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=PB(o,n),h=t.maxUploadRetryTime;function p(m){MB(m);let v;try{v=m.getResponseHeader("X-Goog-Upload-URL")}catch{El(!1)}return El(jR(v)),v}let g=new Da(l,c,p,h);return g.urlParams=a,g.headers=u,g.body=d,g.errorHandler=Km(e),g}function TOe(t,e,n,i){let r={"X-Goog-Upload-Command":"query"};function s(c){let u=MB(c,["active","final"]),d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{El(!1)}d||El(!1);let h=Number(d);return El(!isNaN(h)),new zm(h,i.size(),u==="final")}let o="POST",a=t.maxUploadRetryTime,l=new Da(n,o,s,a);return l.headers=r,l.errorHandler=Km(e),l}var wZ=256*1024;function ROe(t,e,n,i,r,s,o,a){let l=new zm(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw HMe();let c=l.total-l.current,u=c;r>0&&(u=Math.min(u,r));let d=l.current,h=d+u,p="";u===0?p="finalize":c===u?p="upload, finalize":p="upload";let g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=i.slice(d,h);if(m===null)throw xZ();function v(T,P){let x=MB(T,["active","final"]),_=l.current+u,S=i.size(),D;return x==="final"?D=zR(e,s)(T,P):D=null,new zm(_,S,x==="final",D)}let C="POST",b=e.maxUploadRetryTime,E=new Da(n,C,v,b);return E.headers=g,E.body=m.uploadData(),E.progressCallback=a||null,E.errorHandler=Km(t),E}var BZ={STATE_CHANGED:"state_changed"},Dr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wB(t){switch(t){case"running":case"pausing":case"canceling":return Dr.RUNNING;case"paused":return Dr.PAUSED;case"success":return Dr.SUCCESS;case"canceled":return Dr.CANCELED;case"error":return Dr.ERROR;default:return Dr.ERROR}}var EB=class{constructor(e,n,i){if(KMe(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Hm(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var SZ=null,DB=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw b0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw b0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw b0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw b0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw b0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},TB=class extends DB{initXhr(){this.xhr_.responseType="text"}};function _l(){return SZ?SZ():new TB}var D0=class{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=WR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Nn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(PZ(r.status,[]))if(s)r=RZ();else{this.sleepTime=Math.max(this.sleepTime*2,PMe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Nn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let i=DOe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,_l,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,i)=>{let r=TOe(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,_l,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=wZ*this._chunkMultiplier,n=new zm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=ROe(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(o,_l,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){wZ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let i=LZ(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,_l,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let i=EOe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,_l,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=IZ(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=wB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){let s=new EB(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(wB(this._state)){case Dr.SUCCESS:Hm(this._resolve.bind(null,this.snapshot))();break;case Dr.CANCELED:case Dr.ERROR:let n=this._reject;Hm(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wB(this._state)){case Dr.RUNNING:case Dr.PAUSED:e.next&&Hm(e.next.bind(e,this.snapshot))();break;case Dr.SUCCESS:e.complete&&Hm(e.complete.bind(e))();break;case Dr.CANCELED:case Dr.ERROR:e.error&&Hm(e.error.bind(e,this._error))();break;default:e.error&&Hm(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var qm=class t{constructor(e,n){this._service=e,n instanceof ts?this._location=n:this._location=ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kZ(this._location.path)}get storage(){return this._service}get parent(){let e=lOe(this._location.path);if(e===null)return null;let n=new ts(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IB(e)}};function IOe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new D0(t,new Wm(e),n)}function xOe(t){let e={prefixes:[],items:[]};return GZ(t,e).then(()=>e)}function GZ(t,e,n){return N(this,null,function*(){let r=yield HZ(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&(yield GZ(t,e,r.nextPageToken))})}function HZ(t,e){e!=null&&typeof e.maxResults=="number"&&bB("options.maxResults",1,1e3,e.maxResults);let n=e||{},i=COe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,_l)}function FOe(t){t._throwIfRoot("getMetadata");let e=LZ(t.storage,t._location,WR());return t.storage.makeRequestWithTokens(e,_l)}function AOe(t,e){t._throwIfRoot("updateMetadata");let n=SOe(t.storage,t._location,e,WR());return t.storage.makeRequestWithTokens(n,_l)}function POe(t){t._throwIfRoot("getDownloadURL");let e=wOe(t.storage,t._location,WR());return t.storage.makeRequestWithTokens(e,_l).then(n=>{if(n===null)throw UMe();return n})}function MOe(t){t._throwIfRoot("deleteObject");let e=bOe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_l)}function UZ(t,e){let n=cOe(t._location.path,e),i=new ts(t._location.bucket,n);return new qm(t.storage,i)}function OOe(t){return/^[A-Za-z]+:\/\//.test(t)}function kOe(t,e){return new qm(t,e)}function jZ(t,e){if(t instanceof T0){let n=t;if(n._bucket==null)throw GMe();let i=new qm(n,n._bucket);return e!=null?jZ(i,e):i}else return e!==void 0?UZ(t,e):t}function NOe(t,e){if(e&&OOe(e)){if(t instanceof T0)return kOe(t,e);throw Df("To use ref(service, url), the first argument must be a Storage instance.")}else return jZ(t,e)}function bZ(t,e){let n=e?.[TZ];return n==null?null:ts.makeFromBucketSpec(n,t)}function LOe(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Kf(r,t.app.options.projectId))}var T0=class{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=DZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FMe,this._maxUploadRetryTime=AMe,this._requests=new Set,r!=null?this._bucket=ts.makeFromBucketSpec(r,this._host):this._bucket=bZ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ts.makeFromBucketSpec(this._url,e):this._bucket=bZ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return N(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return N(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qm(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new SB(FZ());{let o=JMe(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return N(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},_Z="@firebase/storage",EZ="0.12.6";var WZ="storage";function OB(t,e,n){return t=nt(t),IOe(t,e,n)}function kB(t){return t=nt(t),FOe(t)}function NB(t,e){return t=nt(t),AOe(t,e)}function LB(t,e){return t=nt(t),HZ(t,e)}function VB(t){return t=nt(t),xOe(t)}function BB(t){return t=nt(t),POe(t)}function GB(t){return t=nt(t),MOe(t)}function KR(t,e){return t=nt(t),NOe(t,e)}function zZ(t,e){return UZ(t,e)}function qZ(t=Vi(),e){t=nt(t);let i=Ei(t,WZ).getImmediate({identifier:e}),r=Mc("storage");return r&&YR(i,...r),i}function YR(t,e,n,i={}){LOe(t,e,n,i)}function VOe(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new T0(n,i,r,e,Oc)}function BOe(){jn(new vn(WZ,VOe,"PUBLIC").setMultipleInstances(!0)),Qe(_Z,EZ,""),Qe(_Z,EZ,"esm2017")}BOe();var Ym=class{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var QR=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ym(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new Ym(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=o=>n(new Ym(o,this,this._ref)):s={next:n.next?o=>n.next(new Ym(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}},XR=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Tf(e,this._service))}get items(){return this._delegate.items.map(e=>new Tf(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Tf=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=zZ(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new QR(OB(this._delegate,e,n),this)}putString(e,n=io.RAW,i){this._throwIfRoot("putString");let r=FB(n,e),s=Object.assign({},i);return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new QR(new D0(this._delegate,new Wm(r.data,!0),s),this)}listAll(){return VB(this._delegate).then(e=>new XR(e,this.storage))}list(e){return LB(this._delegate,e||void 0).then(n=>new XR(n,this.storage))}getMetadata(){return kB(this._delegate)}updateMetadata(e){return NB(this._delegate,e)}getDownloadURL(){return BB(this._delegate)}delete(){return this._throwIfRoot("delete"),GB(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw IB(e)}};var $R=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(KZ(e))throw Df("ref() expected a child path but got a URL, use refFromURL instead.");return new Tf(KR(this._delegate,e),this)}refFromURL(e){if(!KZ(e))throw Df("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ts.makeFromUrl(e,this._delegate.host)}catch{throw Df("refFromUrl() expected a valid full URL but got an invalid one.")}return new Tf(KR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){YR(this._delegate,e,n,i)}};function KZ(t){return/^[A-Za-z]+:\/\//.test(t)}var GOe="@firebase/storage-compat",HOe="0.3.9";var UOe="storage-compat";function jOe(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new $R(n,i)}function WOe(t){let e={TaskState:Dr,TaskEvent:BZ,StringFormat:io,Storage:$R,Reference:Tf};t.INTERNAL.registerComponent(new vn(UOe,jOe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(GOe,HOe)}WOe(Fs);function zOe(t){return new pe(e=>{let n=o=>e.next(o),i=o=>e.error(o),r=()=>e.complete();n(t.snapshot);let s=t.on("state_changed",n);return t.then(o=>{n(o),r()},o=>{n(t.snapshot),i(o)}),function(){s()}}).pipe(op(0))}function YZ(t){let e=zOe(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(le(n=>n.bytesTransferred/n.totalBytes*100))}}function ZR(t){return{getDownloadURL:()=>ae(void 0).pipe(aP,Ge(()=>t.getDownloadURL()),Hi),getMetadata:()=>ae(void 0).pipe(aP,Ge(()=>t.getMetadata()),Hi),delete:()=>Je(t.delete()),child:e=>ZR(t.child(e)),updateMetadata:e=>Je(t.updateMetadata(e)),put:(e,n)=>{let i=t.put(e,n);return YZ(i)},putString:(e,n,i)=>{let r=t.putString(e,n,i);return YZ(r)},list:e=>Je(t.list(e)),listAll:()=>Je(t.listAll())}}var qOe=new ue("angularfire2.storageBucket"),KOe=new ue("angularfire2.storage.maxUploadRetryTime"),YOe=new ue("angularfire2.storage.maxOperationRetryTime"),QOe=new ue("angularfire2.storage.use-emulator"),QZ=(()=>{class t{storage;constructor(n,i,r,s,o,a,l,c,u,d){let h=Yp(n,o,i);this.storage=Qp(`${h.name}.storage.${r}`,"AngularFireStorage",h.name,()=>{let p=o.runOutsideAngular(()=>h.storage(r||void 0)),g=u;return g&&p.useEmulator(...g),l&&p.setMaxUploadRetryTime(l),c&&p.setMaxOperationRetryTime(c),p},[l,c])}ref(n){return ZR(this.storage.ref(n))}refFromURL(n){return ZR(this.storage.refFromURL(n))}upload(n,i,r){let s=this.storage.ref(n);return ZR(s).put(i,r)}static \u0275fac=function(i){return new(i||t)(Z(du),Z(Kp,8),Z(qOe,8),Z(_n),Z(Re),Z(Pn),Z(KOe,8),Z(YOe,8),Z(QOe,8),Z(Ri,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var XZ=(()=>{let e=class e{constructor(i,r,s){this.storage=i,this.firestore=r,this.afAuth=s,this.PDF_COLLECTION="pdfs",this.PDF_STORAGE_PATH="pdfs",this.userId=null,this.pdfsSubject=new qt([]),this.pdfs$=this.pdfsSubject.asObservable(),this.initialize()}initialize(){this.afAuth.authState.subscribe(i=>{i?(console.log(i),this.userId=i.uid,this.getAllPdfs().subscribe(r=>{console.log(r),this.pdfsSubject.next(r)})):(this.userId=null,this.pdfsSubject.next([]))})}uploadPdf(i){if(!this.userId)throw new Error("User not authenticated");let r=`${this.PDF_STORAGE_PATH}/${this.userId}/userPdfs/${i.name}`,s=this.storage.ref(r);return this.storage.upload(r,i).snapshotChanges().pipe(Ge(()=>s.getDownloadURL()),Ge(a=>Je(s.getMetadata()).pipe(le(l=>({id:l.name,name:i.name,url:a,createdAt:new Date(l.timeCreated)})))),Ge(a=>this.getAllPdfs().pipe(le(l=>(this.pdfsSubject.next([...l,a]),a)))))}getAllPdfs(){if(!this.userId)return ae([]);let i=`${this.PDF_STORAGE_PATH}/${this.userId}/userPdfs`;return Je(this.storage.storage.ref().child(i).listAll()).pipe(Ge(r=>{let o=r.items.map(a=>Je(a.getMetadata()).pipe(Ge(l=>Je(a.getDownloadURL()).pipe(le(c=>({id:l.name,name:l.name,url:c,createdAt:new Date(l.timeCreated)}))))));return sp(o)}))}getPdfById(i){if(!this.userId)throw new Error("User not authenticated");return this.firestore.collection(this.PDF_COLLECTION).doc(this.userId).collection("userPdfs").doc(i).valueChanges()}deletePdf(i){if(!this.userId)throw new Error("User not authenticated");let r=this.storage.refFromURL(i.url);return sp([Je(this.firestore.collection(this.PDF_COLLECTION).doc(this.userId).collection("userPdfs").doc(i.id).delete()),Je(r.delete())]).pipe(Ge(()=>this.getAllPdfs()),le(s=>{this.pdfsSubject.next(s)}))}};e.\u0275fac=function(r){return new(r||e)(Z(QZ),Z(zD),Z(Xa))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZOe(t,e){if(t&1&&(j(0,"option",6),we(1),U()),t&2){let n=e.$implicit;de("value",n),ee(),pr(n)}}function JOe(t,e){if(t&1){let n=xt();j(0,"div",10)(1,"div",11)(2,"div",12)(3,"h5",13),we(4),U(),j(5,"button",14),De("click",function(){let r=We(n).$implicit,s=Te(3);return ze(s.fillForm(r))}),we(6," Fill Form "),U()()()()}if(t&2){let n=e.$implicit;ee(4),pr(n.name)}}function eke(t,e){if(t&1&&(j(0,"div")(1,"h3"),we(2,"Uploaded Files"),U(),j(3,"div",8),Fe(4,JOe,7,1,"div",9),U()()),t&2){let n=Te().ngIf;ee(4),de("ngForOf",n)}}function tke(t,e){t&1&&(j(0,"p"),we(1,"No files have been uploaded yet."),U())}function nke(t,e){if(t&1&&(Vs(0),Fe(1,eke,5,1,"div",7)(2,tke,2,0,"ng-template",null,0,tr),Bs()),t&2){let n=e.ngIf,i=za(3);ee(),de("ngIf",n.length>0)("ngIfElse",i)}}var $Z=(()=>{let e=class e{constructor(i,r,s,o){this.pdfService=i,this.transactionService=r,this.tagService=s,this.cdr=o,this.uploadedFilesSubject=new qt([]),this.uploadedFiles$=this.uploadedFilesSubject.asObservable(),this.boTransactions=[],this.currentYear=new Date().getFullYear(),this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.name="West Tanza",this.city="Tanza",this.province="Cavite",this.selectedMonth=this.months[new Date().getMonth()],this.transactionsSubject=new qt({income:[],expense:[]}),this.transactions$=this.transactionsSubject.asObservable(),this.totalIns$=this.transactions$.pipe(Ge(({income:a})=>this.calculateTotal(a))),this.totalForwardedFromLastMonth$=this.transactions$.pipe(Ge(({income:a,expense:l})=>this.calculateTotalForwarded(a,l))),this.inW=[],this.inC=[],this.totalC=this.calculateTotal(this.inC),this.totalW=this.calculateTotal(this.inW)}ngOnInit(){this.transactionsSubject.value.income.length===0&&this.transactionsSubject.value.expense.length===0&&this.transactionService.initialize(),this.uploadedFilesSubject.value.length===0&&this.pdfService.initialize(),this.loadTransactions(),this.loadUploadedFiles()}loadTransactions(){Fr([this.transactionService.incomeTransactions$,this.transactionService.expenseTransactions$]).subscribe(([i,r])=>{this.transactionsSubject.next({income:i,expense:r}),i.forEach(s=>{let o=this.tagService.synchronousGetTagFromId(s.tagIds[0],"income");o.name==="W"?this.inW.push(s):o.name==="C"&&this.inC.push(s)}),this.cdr.markForCheck()})}loadUploadedFiles(){this.pdfService.pdfs$.subscribe(i=>{this.uploadedFilesSubject.next(i),this.cdr.markForCheck()},i=>{console.error("Error fetching uploaded files:",i)})}uploadFile(i){let r=i.target;if(r.files&&r.files.length>0){let s=r.files[0];s.type==="application/pdf"?this.pdfService.uploadPdf(s).pipe(Xo(o=>(console.error("Error uploading PDF:",o),alert("Failed to upload PDF. Please try again."),[]))).subscribe(o=>{let a=this.uploadedFilesSubject.value;this.uploadedFilesSubject.next([...a,o]),this.cdr.markForCheck()}):alert("Please upload a PDF file")}}fillForm(i){return N(this,null,function*(){switch(i.name.split("_")[0].split("-")[1]){case"26":this.fill26(i);break;case"30":this.fill30(i);break;case"62":this.fill62(i);break;default:alert("Unsupported PDF form");break}})}fill26(i){return N(this,null,function*(){try{let r=yield this.loadPdfDocument(i.url);this.modifyFont(r);let s=r.getForm();this.setBasic26InfoFieldValues(s),yield this.inputTransactionData(s);let o=yield r.save();this.downloadModifiedPdf(o,i.name),this.boTransactions=[]}catch(r){this.boTransactions=[],console.error("Error filling form:",r),alert("An error occurred while filling the form. Please try again.")}})}fill30(i){return N(this,null,function*(){let r=yield this.loadPdfDocument(i.url);this.modifyFont(r);let s=r.getForm();this.setBasic30InfoFieldValues(s);let o=yield r.save();this.downloadModifiedPdf(o,i.name)})}fill62(i){return N(this,null,function*(){let r=yield this.loadPdfDocument(i.url);this.modifyFont(r);let s=r.getForm()})}loadPdfDocument(i){return N(this,null,function*(){let r=yield fetch(i);if(!r.ok)throw new Error("Failed to fetch PDF file");let s=yield r.arrayBuffer();return Er.load(s)})}setBasic26InfoFieldValues(i){[{name:"900_1_Text_C",value:this.name},{name:"900_2_Text_C",value:this.city},{name:"900_3_Text_C",value:this.province},{name:"900_4_Text_C",value:this.selectedMonth},{name:"900_5_Text_C",value:this.currentYear.toString()}].forEach(s=>{let o=i.getTextField(s.name);this.manuallyModifyFont(o,11.65),o.setText(s.value)})}setBasic30InfoFieldValues(i){let r=this.filterTransactionsByMonthYear(this.inC),s=[{name:"900_1_Text",value:this.name},{name:"900_2_Text",value:`${this.selectedMonth} ${this.currentYear}`},{name:"900_17_Text_C",value:this.selectedMonth}];this.totalForwardedFromLastMonth$.pipe(It(1)).subscribe(o=>{s.push({name:"901_1_S30_Value",value:o})}),this.calculateTotal(r).pipe(It(1)).subscribe(o=>{s.push({name:"901_2_S30_Value",value:o})}),this.transactions$.pipe(It(1)).subscribe(({expense:o})=>{let a=this.filterTransactionsByMonthYear(o);a.forEach(l=>{l.title.includes("KHOC")&&(s.push({name:"901_12_S30_Value",value:l.amount.toFixed(2).toString()}),a.splice(a.indexOf(l),1))}),this.boTransactions.forEach(l=>{l.title.includes("resolution")&&s.push({name:"901_13_S30_Value",value:l.amount.toFixed(2).toString()}),l.title.includes("from Box")&&(s.push({name:"901_7_S30_Value",value:l.amount.toFixed(2).toString()}),s.push({name:"901_20_S30_Value",value:l.amount.toFixed(2).toString()}))}),this.calculateTotal(a).pipe(It(1)).subscribe(l=>{s.push({name:"900_7_Text",value:"Expenses - Refer to S-26"}),s.push({name:"901_14_S30_Value",value:l})})}),s.forEach(o=>{let a=i.getTextField(o.name);this.manuallyModifyFont(a,11.65),a.setText(o.value)})}inputTransactionData(i){return N(this,null,function*(){let{income:r,expense:s}=this.transactionsSubject.value,o=this.filterTransactionsByMonthYear(r,"income").sort((u,d)=>u.date.getTime()-d.date.getTime()),a=this.filterTransactionsByMonthYear(s).sort((u,d)=>u.date.getTime()-d.date.getTime()),l=[...o,...a],c=this.createFieldMappings(l);this.fillFormFields(i,c)})}filterTransactionsByMonthYear(i,r){return this.boTransactions=[],i.filter(s=>{let o=new Date(s.date),a=o.getMonth()===this.months.indexOf(this.selectedMonth)&&o.getFullYear()===this.currentYear;return!r&&s.title.includes("WWW")&&a?(this.boTransactions.push(s),!1):a})}createFieldMappings(i){let r={},s=0,o=0;i.forEach((c,u)=>{let d=c.type==="income",h=d?`900_${u+7}_Text_C`:`900_${u+10}_Text_C`,p=d?`900_${u+59}_Text`:`900_${u+62}_Text`,g=d?`901_${u+1}_S26Value`:`902_${u+57}_S26Value`;if(r[h]=c.date.getDate().toString(),r[p]=c.title,r[g]=c.amount.toFixed(2),d){s=u;let m=`900_${u+111}_Text_C`;r[m]=this.tagService.synchronousGetTagFromId(c.tagIds[0],"income").name}else o=u});let a=new Date(this.currentYear,this.months.indexOf(this.selectedMonth)+1,0).getDate();r[`900_${s+9}_Text_C`]=a.toString(),r[`900_${s+113}_Text_C`]="D",r[`900_${s+61}_Text`]="Deposit to cashbox";let l=i.filter(c=>c.type==="income").reduce((c,u)=>c+u.amount,0).toFixed(2);return r[`901_${s+56}_S26Value`]=l,r[`902_${s+3}_S26Value`]=l,r[`900_${o+64}_Text`]="To Branch Office",this.boTransactions.forEach((c,u)=>{r[`900_${o+u+13}_Text_C`]=c.date.getDate().toString(),r[`900_${o+u+65}_Text`]=c.title,r[`902_${o+u+60}_S26Value`]=c.amount.toFixed(2)}),this.totalForwardedFromLastMonth$.pipe(It(1)).subscribe(c=>{r["904_24_S26Amount"]=c,r["904_33_S26Amount"]=c}),r}fillFormFields(i,r){Object.entries(r).forEach(([s,o])=>{i.getTextField(s).setText(o)})}modifyFont(i){i.getForm().getFields().forEach(r=>{r instanceof cd&&r.setFontSize(10)})}manuallyModifyFont(i,r){i.setFontSize(r)}calculateTotal(i){return new pe(r=>{let s=i.reduce((o,a)=>o+a.amount,0);r.next(s.toFixed(2)),r.complete()})}calculateTotalForwarded(i,r){return new pe(s=>{let o=this.filterPreviousMonthsTransactions(i),a=this.filterPreviousMonthsTransactions(r),l=o.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.amount,0),u=(l-c).toFixed(2);s.next(u),s.complete()})}filterPreviousMonthsTransactions(i){let r=this.months.indexOf(this.selectedMonth);return i.filter(s=>{let o=new Date(s.date);return o.getMonth()<r&&o.getFullYear()===this.currentYear})}downloadModifiedPdf(i,r){let s=new Blob([i],{type:"application/pdf"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${this.selectedMonth}_${this.currentYear}-${r}`,a.click(),URL.revokeObjectURL(o)}};e.\u0275fac=function(r){return new(r||e)(J(XZ),J(Nu),J(ku),J(Br))},e.\u0275cmp=je({type:e,selectors:[["app-form-filler"]],standalone:!0,features:[qe],decls:7,vars:5,consts:[["noFiles",""],[1,"mb-3"],["for","monthSelector"],["id","monthSelector",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-primary",3,"click"]],template:function(r,s){r&1&&(j(0,"div",1)(1,"label",2),we(2,"Select Month:"),U(),j(3,"select",3),N1("ngModelChange",function(a){return Yz(s.selectedMonth,a)||(s.selectedMonth=a),a}),Fe(4,ZOe,2,2,"option",4),U()(),Fe(5,nke,4,2,"ng-container",5),dy(6,"async")),r&2&&(ee(3),k1("ngModel",s.selectedMonth),ee(),de("ngForOf",s.months),ee(),de("ngIf",hy(6,3,s.uploadedFiles$)))},dependencies:[En,fo,Gi,w3,J4,Q4,$4,oE,vo,iP]});let t=e;return t})();var ike=[{path:"",component:tY},{path:"fill-form",component:$Z,canActivate:[Fq]}],ZZ=[{path:"",component:nY,canActivate:[KD]},{path:"login",component:Rq,canActivate:[KD]},{path:"register",component:Iq,canActivate:[KD]},{path:"dashboard",component:s9,canActivate:[xq],children:ike}];var tJ="@firebase/installations",WB="0.6.8";var nJ=1e4,iJ=`w:${WB}`,rJ="FIS_v2",rke="https://firebaseinstallations.googleapis.com/v1",ske=60*60*1e3,oke="installations",ake="Installations";var lke={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},If=new Ma(oke,ake,lke);function sJ(t){return t instanceof Ko&&t.code.includes("request-failed")}function oJ({projectId:t}){return`${rke}/projects/${t}/installations`}function aJ(t){return{token:t.token,requestStatus:2,expiresIn:uke(t.expiresIn),creationTime:Date.now()}}function lJ(t,e){return N(this,null,function*(){let i=(yield e.json()).error;return If.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function cJ({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function cke(t,{refreshToken:e}){let n=cJ(t);return n.append("Authorization",dke(e)),n}function uJ(t){return N(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function uke(t){return Number(t.replace("s","000"))}function dke(t){return`${rJ} ${t}`}function hke(i,r){return N(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=oJ(t),o=cJ(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let l={fid:n,authVersion:rJ,appId:t.appId,sdkVersion:iJ},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield uJ(()=>fetch(s,c));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:aJ(d.authToken)}}else throw yield lJ("Create Installation",u)})}function dJ(t){return new Promise(e=>{setTimeout(e,t)})}function fke(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var pke=/^[cdef][\w-]{21}$/,jB="";function gke(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=mke(t);return pke.test(n)?n:jB}catch{return jB}}function mke(t){return fke(t).substr(0,22)}function eI(t){return`${t.appName}!${t.appId}`}var hJ=new Map;function fJ(t,e){let n=eI(t);pJ(n,e),vke(n,e)}function pJ(t,e){let n=hJ.get(t);if(n)for(let i of n)i(e)}function vke(t,e){let n=yke();n&&n.postMessage({key:t,fid:e}),Cke()}var Rf=null;function yke(){return!Rf&&"BroadcastChannel"in self&&(Rf=new BroadcastChannel("[Firebase] FID Change"),Rf.onmessage=t=>{pJ(t.data.key,t.data.fid)}),Rf}function Cke(){hJ.size===0&&Rf&&(Rf.close(),Rf=null)}var wke="firebase-installations-database",Ske=1,xf="firebase-installations-store",HB=null;function zB(){return HB||(HB=kv(wke,Ske,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xf)}}})),HB}function JR(t,e){return N(this,null,function*(){let n=eI(t),r=(yield zB()).transaction(xf,"readwrite"),s=r.objectStore(xf),o=yield s.get(n);return yield s.put(e,n),yield r.done,(!o||o.fid!==e.fid)&&fJ(t,e.fid),e})}function gJ(t){return N(this,null,function*(){let e=eI(t),i=(yield zB()).transaction(xf,"readwrite");yield i.objectStore(xf).delete(e),yield i.done})}function tI(t,e){return N(this,null,function*(){let n=eI(t),r=(yield zB()).transaction(xf,"readwrite"),s=r.objectStore(xf),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield r.done,a&&(!o||o.fid!==a.fid)&&fJ(t,a.fid),a})}function qB(t){return N(this,null,function*(){let e,n=yield tI(t.appConfig,i=>{let r=bke(i),s=_ke(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===jB?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function bke(t){let e=t||{fid:gke(),registrationStatus:0};return mJ(e)}function _ke(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(If.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Eke(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Dke(t)}:{installationEntry:e}}function Eke(t,e){return N(this,null,function*(){try{let n=yield hke(t,e);return JR(t.appConfig,n)}catch(n){throw sJ(n)&&n.customData.serverCode===409?yield gJ(t.appConfig):yield JR(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Dke(t){return N(this,null,function*(){let e=yield JZ(t.appConfig);for(;e.registrationStatus===1;)yield dJ(100),e=yield JZ(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield qB(t);return i||n}return e})}function JZ(t){return tI(t,e=>{if(!e)throw If.create("installation-not-found");return mJ(e)})}function mJ(t){return Tke(t)?{fid:t.fid,registrationStatus:0}:t}function Tke(t){return t.registrationStatus===1&&t.registrationTime+nJ<Date.now()}function Rke(i,r){return N(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=Ike(t,n),o=cke(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let l={installation:{sdkVersion:iJ,appId:t.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield uJ(()=>fetch(s,c));if(u.ok){let d=yield u.json();return aJ(d)}else throw yield lJ("Generate Auth Token",u)})}function Ike(t,{fid:e}){return`${oJ(t)}/${e}/authTokens:generate`}function KB(t,e=!1){return N(this,null,function*(){let n,i=yield tI(t.appConfig,s=>{if(!vJ(s))throw If.create("not-registered");let o=s.authToken;if(!e&&Ake(o))return s;if(o.requestStatus===1)return n=xke(t,e),s;{if(!navigator.onLine)throw If.create("app-offline");let a=Mke(s);return n=Fke(t,a),a}});return n?yield n:i.authToken})}function xke(t,e){return N(this,null,function*(){let n=yield eJ(t.appConfig);for(;n.authToken.requestStatus===1;)yield dJ(100),n=yield eJ(t.appConfig);let i=n.authToken;return i.requestStatus===0?KB(t,e):i})}function eJ(t){return tI(t,e=>{if(!vJ(e))throw If.create("not-registered");let n=e.authToken;return Oke(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Fke(t,e){return N(this,null,function*(){try{let n=yield Rke(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield JR(t.appConfig,i),n}catch(n){if(sJ(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield gJ(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield JR(t.appConfig,i)}throw n}})}function vJ(t){return t!==void 0&&t.registrationStatus===2}function Ake(t){return t.requestStatus===2&&!Pke(t)}function Pke(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ske}function Mke(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Oke(t){return t.requestStatus===1&&t.requestTime+nJ<Date.now()}function kke(t){return N(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield qB(e);return i?i.catch(console.error):KB(e).catch(console.error),n.fid})}function Nke(t,e=!1){return N(this,null,function*(){let n=t;return yield Lke(n),(yield KB(n,e)).token})}function Lke(t){return N(this,null,function*(){let{registrationPromise:e}=yield qB(t);e&&(yield e)})}function Vke(t){if(!t||!t.options)throw UB("App Configuration");if(!t.name)throw UB("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw UB(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function UB(t){return If.create("missing-app-config-values",{valueName:t})}var yJ="installations",Bke="installations-internal",Gke=t=>{let e=t.getProvider("app").getImmediate(),n=Vke(e),i=Ei(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Hke=t=>{let e=t.getProvider("app").getImmediate(),n=Ei(e,yJ).getImmediate();return{getId:()=>kke(n),getToken:r=>Nke(n,r)}};function Uke(){jn(new vn(yJ,Gke,"PUBLIC")),jn(new vn(Bke,Hke,"PRIVATE"))}Uke();Qe(tJ,WB);Qe(tJ,WB,"esm2017");var nI="analytics",jke="firebase_id",Wke="origin",zke=60*1e3,qke="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",e2="https://www.googletagmanager.com/gtag/js";var ns=new ka("@firebase/analytics");var Kke={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ro=new Ma("analytics","Analytics",Kke);function Yke(t){if(!t.startsWith(e2)){let e=ro.create("invalid-gtag-resource",{gtagURL:t});return ns.warn(e.message),""}return t}function DJ(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Qke(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Xke(t,e){let n=Qke("firebase-js-sdk-policy",{createScriptURL:Yke}),i=document.createElement("script"),r=`${e2}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function $ke(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Zke(t,e,n,i,r,s){return N(this,null,function*(){let o=i[r];try{if(o)yield e[o];else{let l=(yield DJ(n)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){ns.error(a)}t("config",r,s)})}function Jke(t,e,n,i,r){return N(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield DJ(n);for(let l of o){let c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",i,r||{})}catch(s){ns.error(s)}})}function eNe(t,e,n,i){function r(s,...o){return N(this,null,function*(){try{if(s==="event"){let[a,l]=o;yield Jke(t,e,n,a,l)}else if(s==="config"){let[a,l]=o;yield Zke(t,e,n,i,a,l)}else if(s==="consent"){let[a,l]=o;t("consent",a,l)}else if(s==="get"){let[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){ns.error(a)}})}return r}function tNe(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=eNe(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function nNe(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(e2)&&n.src.includes(t))return n;return null}var iNe=30,rNe=1e3,QB=class{constructor(e={},n=rNe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},TJ=new QB;function sNe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function oNe(t){return N(this,null,function*(){var e;let{appId:n,apiKey:i}=t,r={method:"GET",headers:sNe(i)},s=qke.replace("{app-id}",n),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw ro.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function aNe(i){return N(this,arguments,function*(t,e=TJ,n){let{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw ro.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw ro.create("no-api-key")}let a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new XB;return setTimeout(()=>N(this,null,function*(){l.abort()}),n!==void 0?n:zke),RJ({appId:r,apiKey:s,measurementId:o},a,l,e)})}function RJ(s,o,a){return N(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=TJ){var l;let{appId:c,measurementId:u}=t;try{yield lNe(i,e)}catch(d){if(u)return ns.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:u};throw d}try{let d=yield oNe(t);return r.deleteThrottleMetadata(c),d}catch(d){let h=d;if(!cNe(h)){if(r.deleteThrottleMetadata(c),u)return ns.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw d}let p=Number((l=h?.customData)===null||l===void 0?void 0:l.httpStatus)===503?Yf(n,r.intervalMillis,iNe):Yf(n,r.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return r.setThrottleMetadata(c,g),ns.debug(`Calling attemptFetch again in ${p} millis`),RJ(t,g,i,r)}})}function lNe(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(ro.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function cNe(t){if(!(t instanceof Ko)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var XB=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var $B;function uNe(t,e,n,i,r){return N(this,null,function*(){if(r&&r.global){t("event",n,i);return}else{let s=yield e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}})}function dNe(t,e,n,i){return N(this,null,function*(){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{let r=yield e;t("config",r,{update:!0,user_id:n})}})}var ZB;function hNe(t){ZB=t}function fNe(t){$B=t}function pNe(){return N(this,null,function*(){if(oo())try{yield wd()}catch(t){return ns.warn(ro.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return ns.warn(ro.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function gNe(t,e,n,i,r,s,o){return N(this,null,function*(){var a;let l=aNe(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&ns.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>ns.error(p)),e.push(l);let c=pNe().then(p=>{if(p)return i.getId()}),[u,d]=yield Promise.all([l,c]);nNe(s)||Xke(s,u.measurementId),ZB&&(r("consent","default",ZB),hNe(void 0)),r("js",new Date);let h=(a=o?.config)!==null&&a!==void 0?a:{};return h[Wke]="firebase",h.update=!0,d!=null&&(h[jke]=d),r("config",u.measurementId,h),$B&&(r("set",$B),fNe(void 0)),u.measurementId})}var JB=class{constructor(e){this.app=e}_delete(){return delete Qm[this.app.options.appId],Promise.resolve()}},Qm={},CJ=[],wJ={},YB="dataLayer",mNe="gtag",SJ,t2,bJ=!1;function vNe(){let t=[];if(zI()&&t.push("This is a browser extension environment."),Av()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=ro.create("invalid-analytics-context",{errorInfo:e});ns.warn(n.message)}}function yNe(t,e,n){vNe();let i=t.options.appId;if(!i)throw ro.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ns.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ro.create("no-api-key");if(Qm[i]!=null)throw ro.create("already-exists",{id:i});if(!bJ){$ke(YB);let{wrappedGtag:s,gtagCore:o}=tNe(Qm,CJ,wJ,YB,mNe);t2=s,SJ=o,bJ=!0}return Qm[i]=gNe(t,CJ,wJ,e,SJ,YB,n),new JB(t)}function IJ(t=Vi()){t=nt(t);let e=Ei(t,nI);return e.isInitialized()?e.getImmediate():xJ(t)}function xJ(t,e={}){let n=Ei(t,nI);if(n.isInitialized()){let r=n.getImmediate();if(Mv(e,n.getOptions()))return r;throw ro.create("already-initialized")}return n.initialize({options:e})}function FJ(){return N(this,null,function*(){if(zI()||!Av()||!oo())return!1;try{return yield wd()}catch{return!1}})}function AJ(t,e,n){t=nt(t),dNe(t2,Qm[t.app.options.appId],e,n).catch(i=>ns.error(i))}function n2(t,e,n,i){t=nt(t),uNe(t2,Qm[t.app.options.appId],e,n,i).catch(r=>ns.error(r))}var _J="@firebase/analytics",EJ="0.10.7";function CNe(){jn(new vn(nI,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return yNe(i,r,n)},"PUBLIC")),jn(new vn("analytics-internal",t,"PRIVATE")),Qe(_J,EJ),Qe(_J,EJ,"esm2017");function t(e){try{let n=e.getProvider(nI).getImmediate();return{logEvent:(i,r,s)=>n2(n,i,r,s)}}catch(n){throw ro.create("interop-component-reg-failed",{reason:n})}}}CNe();var Ff=class{constructor(e){return e}},OJ="analytics",r2=class{constructor(){return ir(OJ)}};var s2="__angularfire_symbol__analyticsIsSupportedValue",kJ="__angularfire_symbol__analyticsIsSupported";globalThis[kJ]||=FJ().then(t=>globalThis[s2]=t).catch(()=>globalThis[s2]=!1);var iI={async:()=>globalThis[kJ],sync:()=>{let t=globalThis[s2];if(t===void 0)throw new Error(zp("Analytics"));return t}},NJ=iI.async,LJ=Ft(IJ,!0);var wNe=Ft(n2,!0);var SNe=Ft(AJ,!0);var a2=(()=>{class t{initialized;disposables=[];constructor(n,i,r){Qe("angularfire",An.full,"user-tracking");let s;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{s=o})),NJ().then(()=>{let o=r.get(Ff);o?this.disposables=[qp(n).subscribe(a=>{SNe(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||t)(Z(Ws),Z(Re),Z(_t))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),bNe="firebase_event_origin",_Ne="firebase_previous_class",ENe="firebase_previous_id",DNe="firebase_previous_screen",TNe="firebase_screen_class",PJ="firebase_screen_id",RNe="firebase_screen",o2="outlet",INe="page_path",xNe="page_title",R0="screen_class",MJ="screen_name",FNe="screen_view",ANe="auto",PNe="#",MNe=Math.floor(Math.random()*(2**32-1))-2**31,i2={},ONe=t=>{let e=[t[R0],t[o2]].join(PNe);if(i2.hasOwnProperty(e))return i2[e];{let n=MNe++;return i2[e]=n,n}},kNe=(t,e,n)=>t.events.pipe(Tt(r=>r instanceof Iy)).pipe(Ge(r=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,h=>h.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(h=>h).find(h=>h.outlet===r.snapshot.outlet);if(!a)return ae(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(h=>h.routeConfig?.path).filter(h=>h).join("/")||"/",u={[MJ]:c,[INe]:`/${o}`,[bNe]:ANe,[RNe]:c,[o2]:r.snapshot.outlet};e&&(u[xNe]=e.getTitle());let d=a.component;if(d){if(d===jA){let h=r.snapshot;for(;h.firstChild;)h=h.firstChild;d=h.component}}else d=r.snapshot.component;if(typeof d=="string")return ae(Se(W({},u),{[R0]:d}));if(d){let h=n.resolveComponentFactory(d);return ae(Se(W({},u),{[R0]:h.selector}))}return ae(null)}),Tt(r=>!!r),le(r=>W({[TNe]:r[R0],[PJ]:ONe(r)},r)),yx(r=>r[o2]),dn(r=>r.pipe(La((s,o)=>JSON.stringify(s)===JSON.stringify(o)),$o(void 0),jc(),le(([s,o])=>s?W({[_Ne]:s[R0],[DNe]:s[MJ],[ENe]:s[PJ]},o):o)))),VJ=(()=>{class t{disposable;constructor(n,i,r,s,o,a){Qe("angularfire",An.full,"screen-tracking"),NJ().then(()=>{let l=a.get(Ff);!n||!l||s.runOutsideAngular(()=>{this.disposable=kNe(n,i,r).pipe(Ge(c=>N(this,null,function*(){return o&&(yield o.initialized),wNe(l,FNe,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||t)(Z(fi,8),Z(F_,8),Z(Dp),Z(Re),Z(a2,8),Z(_t))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),l2=new ue("angularfire2.analytics-instances");function NNe(t,e){if(!iI.sync())return null;let n=gr(OJ,t,e);return n&&new Ff(n)}function LNe(t){return(e,n)=>{if(!iI.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Ff(i)}}var VNe={provide:r2,deps:[[new mt,l2]]},BNe={provide:Ff,useFactory:NNe,deps:[[new mt,l2],ei]};function BJ(t,...e){return Qe("angularfire",An.full,"analytics"),fn([BNe,VNe,{provide:qa,useValue:iI.async,multi:!0},{provide:l2,useFactory:LNe(t),multi:!0,deps:[Re,_t,Pn,Ii,...e]}])}var GJ="@firebase/database",HJ="1.0.7";var oG="";function GNe(t){oG=t}var m2=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Li(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:wS(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var v2=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Oa(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Cee=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new m2(e)}}catch{}return new v2},Pf=Cee("localStorage"),y2=Cee("sessionStorage");var Jm=new ka("@firebase/database"),HNe=function(){let t=1;return function(){return t++}}(),wee=function(t){let e=nU(t),n=new eU;n.update(e);let i=n.digest();return CS.encodeByteArray(i)},G0=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=G0.apply(null,i):typeof i=="object"?e+=Li(i):e+=i,e+=" "}return e},Mf=null,UJ=!0,UNe=function(t,e){ye(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Jm.logLevel=ss.VERBOSE,Mf=Jm.log.bind(Jm),e&&y2.set("logging_enabled",!0)):typeof t=="function"?Mf=t:(Mf=null,y2.remove("logging_enabled"))},Tr=function(...t){if(UJ===!0&&(UJ=!1,Mf===null&&y2.get("logging_enabled")===!0&&UNe(!0)),Mf){let e=G0.apply(null,t);Mf(e)}},H0=function(t){return function(...e){Tr(t,...e)}},C2=function(...t){let e="FIREBASE INTERNAL ERROR: "+G0(...t);Jm.error(e)},Rc=function(...t){let e=`FIREBASE FATAL ERROR: ${G0(...t)}`;throw Jm.error(e),new Error(e)},so=function(...t){let e="FIREBASE WARNING: "+G0(...t);Jm.warn(e)},jNe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&so("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},See=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},WNe=function(t){if(Pa()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},tv="[MIN_NAME]",Of="[MAX_NAME]",lv=function(t,e){if(t===e)return 0;if(t===tv||e===Of)return-1;if(e===tv||t===Of)return 1;{let n=jJ(t),i=jJ(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},zNe=function(t,e){return t===e?0:t<e?-1:1},I0=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Li(e))},aG=function(t){if(typeof t!="object"||t===null)return Li(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Li(e[i]),n+=":",n+=aG(t[e[i]]);return n+="}",n},bee=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Uo(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var _ee=function(t){ye(!See(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},qNe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},KNe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var YNe=new RegExp("^-?(0*)\\d{1,10}$"),QNe=-2147483648,XNe=2147483647,jJ=function(t){if(YNe.test(t)){let e=Number(t);if(e>=QNe&&e<=XNe)return e}return null},U0=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw so("Exception was thrown by user callback.",n),e},Math.floor(0))}},$Ne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},M0=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var w2=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){so(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var S2=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',so(e)}},O0=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),sI="5",Eee="v",Dee="s",Tee="r",Ree="f",Iee=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xee="ls",Fee="p",b2="ac",Aee="websocket",Pee="long_polling";var oI=class{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pf.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function ZNe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Mee(t,e,n){ye(typeof e=="string","typeof type must == string"),ye(typeof n=="object","typeof params must == object");let i;if(e===Aee)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Pee)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ZNe(t)&&(n.ns=t.namespace);let r=[];return Uo(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var _2=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Oa(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return QH(this.counters_)}};var c2={},u2={};function lG(t){let e=t.toString();return c2[e]||(c2[e]=new _2),c2[e]}function JNe(t,e){let n=t.toString();return u2[n]||(u2[n]=e()),u2[n]}var E2=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&U0(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var WJ="start",eLe="close",tLe="pLPCommand",nLe="pRTLPCB",Oee="id",kee="pw",Nee="ser",iLe="cb",rLe="seg",sLe="ts",oLe="d",aLe="dframe",Lee=1870,Vee=30,lLe=Lee-Vee,cLe=25e3,uLe=3e4,D2=class t{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=H0(e),this.stats_=lG(n),this.urlFn=l=>(this.appCheckToken&&(l[b2]=this.appCheckToken),Mee(n,Pee,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new E2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uLe)),WNe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T2((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===WJ)this.id=a,this.password=l;else if(o===eLe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[WJ]="t",i[Nee]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[iLe]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Eee]=sI,this.transportSessionId&&(i[Dee]=this.transportSessionId),this.lastSessionId&&(i[xee]=this.lastSessionId),this.applicationId&&(i[Fee]=this.applicationId),this.appCheckToken&&(i[b2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Iee.test(location.hostname)&&(i[Tee]=Ree);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Pa()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qNe()&&!KNe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Li(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=YH(n),r=bee(i,lLe);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Pa())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[aLe]="t",i[Oee]=e,i[kee]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Li(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},T2=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Pa())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=HNe(),window[tLe+this.uniqueCallbackIdentifier]=e,window[nLe+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Tr("frame writing exception"),a.stack&&Tr(a.stack),Tr(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tr("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Oee]=this.myID,e[kee]=this.myPW,e[Nee]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Vee+i.length<=Lee;){let o=this.pendingSegs.shift();i=i+"&"+rLe+r+"="+o.seg+"&"+sLe+r+"="+o.ts+"&"+oLe+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(cLe)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){Pa()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Tr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var dLe=16384,hLe=45e3,aI=null;typeof MozWebSocket<"u"?aI=MozWebSocket:typeof WebSocket<"u"&&(aI=WebSocket);var x0=(()=>{class t{constructor(n,i,r,s,o,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=H0(this.connId),this.stats_=lG(i),this.connURL=t.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){let a={};return a[Eee]=sI,!Pa()&&typeof location<"u"&&location.hostname&&Iee.test(location.hostname)&&(a[Tee]=Ree),i&&(a[Dee]=i),r&&(a[xee]=r),s&&(a[b2]=s),o&&(a[Fee]=o),Mee(n,Aee,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pf.set("previous_websocket_failure",!0);try{let r;if(Pa()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${sI}/${oG}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new aI(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&aI!==null&&!t.forceDisallow_}static previouslyFailed(){return Pf.isInMemoryStorage||Pf.get("previous_websocket_failure")===!0}markConnectionHealthy(){Pf.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=wS(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(ye(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=Li(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=bee(i,dLe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hLe))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),fLe=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[D2,x0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=x0&&x0.isAvailable(),r=i&&!x0.previouslyFailed();if(n.webSocketOnly&&(i||so("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[x0];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),pLe=6e4,gLe=5e3,mLe=10*1024,vLe=100*1024,d2="t",zJ="d",yLe="s",qJ="r",CLe="e",KJ="o",YJ="a",QJ="n",XJ="p",wLe="h",R2=class{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=H0("c:"+this.id+":"),this.transportManager_=new fLe(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=M0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>vLe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mLe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(d2 in e){let n=e[d2];n===YJ?this.upgradeIfSecondaryHealthy_():n===qJ?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===KJ&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=I0("t",e),i=I0("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:XJ,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:YJ,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QJ,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=I0("t",e),i=I0("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=I0(d2,e);if(zJ in e){let i=e[zJ];if(n===wLe){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===QJ){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===yLe?this.onConnectionShutdown_(i):n===qJ?this.onReset_(i):n===CLe?C2("Server Error: "+i):n===KJ?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C2("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),sI!==i&&so("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),M0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pLe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(gLe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:XJ,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var lI=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var cI=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ye(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){ye(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var uI=class t extends cI{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!WI()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return ye(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $J=32,ZJ=768,mn=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ln(){return new mn("")}function Wt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fd(t){return t.pieces_.length-t.pieceNum_}function In(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new mn(t.pieces_,e)}function Bee(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function SLe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Gee(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hee(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new mn(e,0)}function Yi(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof mn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new mn(n,0)}function Vt(t){return t.pieceNum_>=t.pieces_.length}function Go(t,e){let n=Wt(t),i=Wt(e);if(n===null)return e;if(n===i)return Go(In(t),In(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Uee(t,e){if(fd(t)!==fd(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ra(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(fd(t)>fd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var I2=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Gee(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ov(this.parts_[i]);jee(this)}};function bLe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ov(e),jee(t)}function _Le(t){let e=t.parts_.pop();t.byteLength_-=Ov(e),t.parts_.length>0&&(t.byteLength_-=1)}function jee(t){if(t.byteLength_>ZJ)throw new Error(t.errorPrefix_+"has a key path longer than "+ZJ+" bytes ("+t.byteLength_+").");if(t.parts_.length>$J)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$J+") or object contains a cycle "+Af(t))}function Af(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var x2=class t extends cI{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return ye(e==="visible","Unknown event type: "+e),[this.visible_]}};var F0=1e3,ELe=60*5*1e3,JJ=30*1e3,DLe=1.3,TLe=3e4,RLe="server_kill",eee=3,cG=(()=>{class t extends lI{constructor(n,i,r,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=H0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=F0,this.maxReconnectDelay_=ELe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Pa())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");x2.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&uI.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(Li(o)),ye(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();let i=new qf,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,r,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ye(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ye(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Oa(n,"w")){let r=Sd(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();so(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||ZH(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JJ)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=$H(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ye(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Li(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):C2("Unrecognized action received from server: "+Li(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){ye(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>TLe&&(this.reconnectDelay_=F0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*DLe)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},u=function(h){ye(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new R2(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,g=>{so(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(RLe)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&so(h),c())}}})}interrupt(n){Tr("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Tr("Resuming connection for reason: "+n),delete this.interruptReasons_[n],KI(this.interruptReasons_)&&(this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(o=>aG(o)).join("$"):r="default";let s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){let r=new mn(n).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){Tr("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eee&&(this.reconnectDelay_=JJ,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Tr("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eee&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Pa()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+oG.replace(/\./g,"-")]=1,WI()?n["framework.cordova"]=1:XH()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=uI.getInstance().currentlyOnline();return KI(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),zt=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var nv=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new zt(tv,e),r=new zt(tv,n);return this.compare(i,r)!==0}minPost(){return zt.MIN}};var rI,dI=class extends nv{static get __EMPTY_NODE(){return rI}static set __EMPTY_NODE(e){rI=e}compare(e,n){return lv(e.name,n.name)}isDefinedOn(e){throw zf("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Of,rI)}makePost(e,n){return ye(typeof e=="string","KeyIndex indexValue must always be a string."),new zt(e,rI)}toString(){return".key"}},ev=new dI;var $m=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ta=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??Ho.EMPTY_NODE,this.right=o??Ho.EMPTY_NODE}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Ho.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),F2=class{copy(e,n,i,r,s){return this}insert(e,n,i){return new Ta(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ho=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ta.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ta.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $m(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $m(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $m(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $m(this.root_,null,this.comparator_,!0,e)}};Ho.EMPTY_NODE=new F2;function ILe(t,e){return lv(t.name,e.name)}function uG(t,e){return lv(t,e)}var A2;function xLe(t){A2=t}var Wee=function(t){return typeof t=="number"?"number:"+_ee(t):"string:"+t},zee=function(t){if(t.isLeafNode()){let e=t.val();ye(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Oa(e,".sv"),"Priority must be a string or number.")}else ye(t===A2||t.isEmpty(),"priority of unexpected type.");ye(t===A2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var tee,iv=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,ye(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zee(this.priorityNode_)}static set __childrenNodeConstructor(n){tee=n}static get __childrenNodeConstructor(){return tee}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Vt(n)?this:Wt(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=Wt(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(ye(r!==".priority"||fd(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Wee(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=_ee(this.value_):n+=this.value_,this.lazyHash_=wee(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(ye(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(r);return ye(s>=0,"Unknown leaf type: "+i),ye(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),qee,Kee;function FLe(t){qee=t}function ALe(t){Kee=t}var P2=class extends nv{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?lv(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Of,new iv("[PRIORITY-POST]",Kee))}makePost(e,n){let i=qee(e);return new zt(n,new iv("[PRIORITY-POST]",i))}toString(){return".priority"}},Ir=new P2;var PLe=Math.log(2),M2=class{constructor(e){let n=s=>parseInt(Math.log(s)/PLe,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},hI=function(t,e,n,i){t.sort(e);let r=function(l,c){let u=c-l,d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new Ta(h,d.node,Ta.BLACK,null,null);{let p=parseInt(u/2,10)+l,g=r(l,p),m=r(p+1,c);return d=t[p],h=n?n(d):d,new Ta(h,d.node,Ta.BLACK,g,m)}},s=function(l){let c=null,u=null,d=t.length,h=function(g,m){let v=d-g,C=d;d-=g;let b=r(v+1,C),E=t[v],T=n?n(E):E;p(new Ta(T,E.node,m,null,b))},p=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){let m=l.nextBitIsOne(),v=Math.pow(2,l.count-(g+1));m?h(v,Ta.BLACK):(h(v,Ta.BLACK),h(v,Ta.RED))}return u},o=new M2(t.length),a=s(o);return new Ho(i||e,a)};var h2,Xm={},rv=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ye(Xm&&Ir,"ChildrenNode.ts has not been loaded"),h2=h2||new t({".priority":Xm},{".priority":Ir}),h2}get(e){let n=Sd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ho?n:null}hasIndex(e){return Oa(this.indexSet_,e.toString())}addIndex(e,n){ye(e!==ev,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=n.getIterator(zt.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=hI(i,e.getCompare()):a=Xm;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new t(u,c)}addToIndexes(e,n){let i=Pv(this.indexes_,(r,s)=>{let o=Sd(this.indexSet_,s);if(ye(o,"Missing index implementation for "+s),r===Xm)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(zt.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),hI(a,o.getCompare())}else return Xm;else{let a=n.get(e.name),l=r;return a&&(l=l.remove(new zt(e.name,a))),l.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=Pv(this.indexes_,r=>{if(r===Xm)return r;{let s=n.get(e.name);return s?r.remove(new zt(e.name,s)):r}});return new t(i,this.indexSet_)}};var A0,Hn=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zee(this.priorityNode_),this.children_.isEmpty()&&ye(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return A0||(A0=new t(new Ho(uG),null,rv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||A0}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?A0:i}}getChild(n){let i=Wt(n);return i===null?this:this.getImmediateChild(i).getChild(In(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(ye(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new zt(n,i),s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?A0:this.priorityNode_;return new t(s,a,o)}}updateChild(n,i){let r=Wt(n);if(r===null)return i;{ye(Wt(n)!==".priority"||fd(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(In(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Ir,(a,l)=>{i[a]=l.val(n),r++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Wee(this.getPriority().val())+":"),this.forEachChild(Ir,(i,r)=>{let s=r.hash();s!==""&&(n+=":"+i+":"+s)}),this.lazyHash_=n===""?"":wee(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new zt(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new zt(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new zt(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,zt.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,zt.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===j0?-1:0}withIndex(n){if(n===ev||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===ev||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Ir),s=i.getIterator(Ir),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ev?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),O2=class extends Hn{constructor(){super(new Ho(uG),Hn.EMPTY_NODE,rv.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Hn.EMPTY_NODE}isEmpty(){return!1}},j0=new O2;Object.defineProperties(zt,{MIN:{value:new zt(tv,Hn.EMPTY_NODE)},MAX:{value:new zt(Of,j0)}});dI.__EMPTY_NODE=Hn.EMPTY_NODE;iv.__childrenNodeConstructor=Hn;xLe(j0);ALe(j0);var MLe=!0;function Rr(t,e=null){if(t===null)return Hn.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ye(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new iv(n,Rr(e))}if(!(t instanceof Array)&&MLe){let n=[],i=!1;if(Uo(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=Rr(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new zt(o,l)))}}),n.length===0)return Hn.EMPTY_NODE;let s=hI(n,ILe,o=>o.name,uG);if(i){let o=hI(n,Ir.getCompare());return new Hn(s,Rr(e),new rv({".priority":o},{".priority":Ir}))}else return new Hn(s,Rr(e),rv.Default)}else{let n=Hn.EMPTY_NODE;return Uo(t,(i,r)=>{if(Oa(t,i)&&i.substring(0,1)!=="."){let s=Rr(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Rr(e))}}FLe(Rr);var k2=class extends nv{constructor(e){super(),this.indexPath_=e,ye(!Vt(e)&&Wt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?lv(e.name,n.name):s}makePost(e,n){let i=Rr(e),r=Hn.EMPTY_NODE.updateChild(this.indexPath_,i);return new zt(n,r)}maxPost(){let e=Hn.EMPTY_NODE.updateChild(this.indexPath_,j0);return new zt(Of,e)}toString(){return Gee(this.indexPath_,0).join("/")}};var N2=class extends nv{compare(e,n){let i=e.node.compareTo(n.node);return i===0?lv(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,n){let i=Rr(e);return new zt(n,i)}toString(){return".value"}},OLe=new N2;function kLe(t){return{type:"value",snapshotNode:t}}function NLe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function LLe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function nee(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VLe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var L2=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ir}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ye(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ye(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tv}hasEnd(){return this.endSet_}getIndexEndValue(){return ye(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ye(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Of}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ye(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ir}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function iee(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Ir?n="$priority":t.index_===OLe?n="$value":t.index_===ev?n="$key":(ye(t.index_ instanceof k2,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Li(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=Li(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Li(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Li(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Li(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ree(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ir&&(e.i=t.index_.toString()),e}var V2=class t extends lI{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=H0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ye(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,i),a={};this.listens_[o]=a;let l=iee(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),Sd(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=iee(e._queryParams),i=e._path.toString(),r=new qf;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+JH(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=wS(a.responseText)}catch{so("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&so("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var B2=class{constructor(){this.rootNode_=Hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function fI(){return{value:null,children:new Map}}function Yee(t,e,n){if(Vt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=Wt(e);t.children.has(i)||t.children.set(i,fI());let r=t.children.get(i);e=In(e),Yee(r,e,n)}}function G2(t,e,n){t.value!==null?n(e,t.value):BLe(t,(i,r)=>{let s=new mn(e.toString()+"/"+i);G2(r,s,n)})}function BLe(t,e){t.children.forEach((n,i)=>{e(i,n)})}var H2=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Uo(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var see=10*1e3,GLe=30*1e3,HLe=5*60*1e3,U2=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new H2(e);let i=see+(GLe-see)*Math.random();M0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;Uo(e,(r,s)=>{s>0&&Oa(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),M0(this.reportStats_.bind(this),Math.floor(Math.random()*2*HLe))}};var Tc=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Tc||{});function Qee(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xee(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $ee(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var j2=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Tc.ACK_USER_WRITE,this.source=Qee()}operationForChild(e){if(Vt(this.path)){if(this.affectedTree.value!=null)return ye(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new mn(e));return new t(ln(),n,this.revert)}}else return ye(Wt(this.path)===e,"operationForChild called for unrelated child."),new t(In(this.path),this.affectedTree,this.revert)}};var sv=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Tc.OVERWRITE}operationForChild(e){return Vt(this.path)?new t(this.source,ln(),this.snap.getImmediateChild(e)):new t(this.source,In(this.path),this.snap)}};var pI=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Tc.MERGE}operationForChild(e){if(Vt(this.path)){let n=this.children.subtree(new mn(e));return n.isEmpty()?null:n.value?new sv(this.source,ln(),n.value):new t(this.source,ln(),n)}else return ye(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,In(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var L0=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Vt(e))return this.isFullyInitialized()&&!this.filtered_;let n=Wt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function ULe(t,e,n,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(VLe(o.childName,o.snapshotNode))}),P0(t,r,"child_removed",e,i,n),P0(t,r,"child_added",e,i,n),P0(t,r,"child_moved",s,i,n),P0(t,r,"child_changed",e,i,n),P0(t,r,"value",e,i,n),r}function P0(t,e,n,i,r,s){let o=i.filter(a=>a.type===n);o.sort((a,l)=>WLe(t,a,l)),o.forEach(a=>{let l=jLe(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function jLe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function WLe(t,e,n){if(e.childName==null||n.childName==null)throw zf("Should only compare child_ events.");let i=new zt(e.childName,e.snapshotNode),r=new zt(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function Zee(t,e){return{eventCache:t,serverCache:e}}function k0(t,e,n,i){return Zee(new L0(e,n,i),t.serverCache)}function Jee(t,e,n,i){return Zee(t.eventCache,new L0(e,n,i))}function W2(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function kf(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var f2,zLe=()=>(f2||(f2=new Ho(zNe)),f2),Ts=class t{constructor(e,n=zLe()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Uo(e,(i,r)=>{n=n.set(new mn(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ln(),value:this.value};if(Vt(e))return null;{let i=Wt(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(In(e),n);return s!=null?{path:Yi(new mn(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Vt(e))return this;{let n=Wt(e),i=this.children.get(n);return i!==null?i.subtree(In(e)):new t(null)}}set(e,n){if(Vt(e))return new t(n,this.children);{let i=Wt(e),s=(this.children.get(i)||new t(null)).set(In(e),n),o=this.children.insert(i,s);return new t(this.value,o)}}remove(e){if(Vt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Wt(e),i=this.children.get(n);if(i){let r=i.remove(In(e)),s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Vt(e))return this.value;{let n=Wt(e),i=this.children.get(n);return i?i.get(In(e)):null}}setTree(e,n){if(Vt(e))return n;{let i=Wt(e),s=(this.children.get(i)||new t(null)).setTree(In(e),n),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new t(this.value,o)}}fold(e){return this.fold_(ln(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Yi(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ln(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(Vt(e))return null;{let s=Wt(e),o=this.children.get(s);return o?o.findOnPath_(In(e),Yi(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ln(),n)}foreachOnPath_(e,n,i){if(Vt(e))return this;{this.value&&i(n,this.value);let r=Wt(e),s=this.children.get(r);return s?s.foreachOnPath_(In(e),Yi(n,r),i):new t(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Yi(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var Ia=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Ts(null))}};function N0(t,e,n){if(Vt(e))return new Ia(new Ts(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Go(r,e);return s=s.updateChild(o,n),new Ia(t.writeTree_.set(r,s))}else{let r=new Ts(n),s=t.writeTree_.setTree(e,r);return new Ia(s)}}}function oee(t,e,n){let i=t;return Uo(n,(r,s)=>{i=N0(i,Yi(e,r),s)}),i}function aee(t,e){if(Vt(e))return Ia.empty();{let n=t.writeTree_.setTree(e,new Ts(null));return new Ia(n)}}function z2(t,e){return Nf(t,e)!=null}function Nf(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Go(n.path,e)):null}function lee(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ir,(i,r)=>{e.push(new zt(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new zt(i,r.value))}),e}function hd(t,e){if(Vt(e))return t;{let n=Nf(t,e);return n!=null?new Ia(new Ts(n)):new Ia(t.writeTree_.subtree(e))}}function q2(t){return t.writeTree_.isEmpty()}function ov(t,e){return ete(ln(),t.writeTree_,e)}function ete(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(ye(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=ete(Yi(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Yi(t,".priority"),i)),n}}function tte(t,e){return ote(e,t)}function qLe(t,e,n,i,r){ye(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=N0(t.visibleWrites,e,n)),t.lastWriteId=i}function KLe(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function YLe(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);ye(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&QLe(a,i.path)?r=!1:Ra(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return XLe(t),!0;if(i.snap)t.visibleWrites=aee(t.visibleWrites,i.path);else{let a=i.children;Uo(a,l=>{t.visibleWrites=aee(t.visibleWrites,Yi(i.path,l))})}return!0}else return!1}function QLe(t,e){if(t.snap)return Ra(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Ra(Yi(t.path,n),e))return!0;return!1}function XLe(t){t.visibleWrites=nte(t.allWrites,$Le,ln()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $Le(t){return t.visible}function nte(t,e,n){let i=Ia.empty();for(let r=0;r<t.length;++r){let s=t[r];if(e(s)){let o=s.path,a;if(s.snap)Ra(n,o)?(a=Go(n,o),i=N0(i,a,s.snap)):Ra(o,n)&&(a=Go(o,n),i=N0(i,ln(),s.snap.getChild(a)));else if(s.children){if(Ra(n,o))a=Go(n,o),i=oee(i,a,s.children);else if(Ra(o,n))if(a=Go(o,n),Vt(a))i=oee(i,ln(),s.children);else{let l=Sd(s.children,Wt(a));if(l){let c=l.getChild(In(a));i=N0(i,ln(),c)}}}else throw zf("WriteRecord should have .snap or .children")}}return i}function ite(t,e,n,i,r){if(!i&&!r){let s=Nf(t.visibleWrites,e);if(s!=null)return s;{let o=hd(t.visibleWrites,e);if(q2(o))return n;if(n==null&&!z2(o,ln()))return null;{let a=n||Hn.EMPTY_NODE;return ov(o,a)}}}else{let s=hd(t.visibleWrites,e);if(!r&&q2(s))return n;if(!r&&n==null&&!z2(s,ln()))return null;{let o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Ra(c.path,e)||Ra(e,c.path))},a=nte(t.allWrites,o,e),l=n||Hn.EMPTY_NODE;return ov(a,l)}}}function ZLe(t,e,n){let i=Hn.EMPTY_NODE,r=Nf(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ir,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){let s=hd(t.visibleWrites,e);return n.forEachChild(Ir,(o,a)=>{let l=ov(hd(s,new mn(o)),a);i=i.updateImmediateChild(o,l)}),lee(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=hd(t.visibleWrites,e);return lee(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function JLe(t,e,n,i,r){ye(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Yi(e,n);if(z2(t.visibleWrites,s))return null;{let o=hd(t.visibleWrites,s);return q2(o)?r.getChild(n):ov(o,r.getChild(n))}}function eVe(t,e,n,i){let r=Yi(e,n),s=Nf(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){let o=hd(t.visibleWrites,r);return ov(o,i.getNode().getImmediateChild(n))}else return null}function tVe(t,e){return Nf(t.visibleWrites,e)}function nVe(t,e,n,i,r,s,o){let a,l=hd(t.visibleWrites,e),c=Nf(l,ln());if(c!=null)a=c;else if(n!=null)a=ov(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),p=h.getNext();for(;p&&u.length<r;)d(p,i)!==0&&u.push(p),p=h.getNext();return u}else return[]}function iVe(){return{visibleWrites:Ia.empty(),allWrites:[],lastWriteId:-1}}function K2(t,e,n,i){return ite(t.writeTree,t.treePath,e,n,i)}function rte(t,e){return ZLe(t.writeTree,t.treePath,e)}function cee(t,e,n,i){return JLe(t.writeTree,t.treePath,e,n,i)}function gI(t,e){return tVe(t.writeTree,Yi(t.treePath,e))}function rVe(t,e,n,i,r,s){return nVe(t.writeTree,t.treePath,e,n,i,r,s)}function dG(t,e,n){return eVe(t.writeTree,t.treePath,e,n)}function ste(t,e){return ote(Yi(t.treePath,e),t.writeTree)}function ote(t,e){return{treePath:t,writeTree:e}}var Y2=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;ye(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ye(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,nee(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,LLe(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,NLe(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,nee(i,e.snapshotNode,r.oldSnap));else throw zf("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var Q2=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},ate=new Q2,V0=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new L0(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dG(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:kf(this.viewCache_),s=rVe(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}};function sVe(t,e){ye(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ye(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oVe(t,e,n,i,r){let s=new Y2,o,a;if(n.type===Tc.OVERWRITE){let c=n;c.source.fromUser?o=X2(t,e,c.path,c.snap,i,r,s):(ye(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Vt(c.path),o=mI(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===Tc.MERGE){let c=n;c.source.fromUser?o=lVe(t,e,c.path,c.children,i,r,s):(ye(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=$2(t,e,c.path,c.children,i,r,a,s))}else if(n.type===Tc.ACK_USER_WRITE){let c=n;c.revert?o=dVe(t,e,c.path,i,r,s):o=cVe(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Tc.LISTEN_COMPLETE)o=uVe(t,e,n.path,i,s);else throw zf("Unknown operation type: "+n.type);let l=s.getChanges();return aVe(e,o,l),{viewCache:o,changes:l}}function aVe(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=W2(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(kLe(W2(e)))}}function lte(t,e,n,i,r,s){let o=e.eventCache;if(gI(i,n)!=null)return e;{let a,l;if(Vt(n))if(ye(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=kf(e),u=c instanceof Hn?c:Hn.EMPTY_NODE,d=rte(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=K2(i,kf(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=Wt(n);if(c===".priority"){ye(fd(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=cee(i,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=In(n),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let h=cee(i,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=dG(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,r,s):a=o.getNode()}}return k0(e,a,o.isFullyInitialized()||Vt(n),t.filter.filtersNodes())}}function mI(t,e,n,i,r,s,o,a){let l=e.serverCache,c,u=o?t.filter:t.filter.getIndexedFilter();if(Vt(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),p,null)}else{let p=Wt(n);if(!l.isCompleteForPath(n)&&fd(n)>1)return e;let g=In(n),v=l.getNode().getImmediateChild(p).updateChild(g,i);p===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),p,v,g,ate,null)}let d=Jee(e,c,l.isFullyInitialized()||Vt(n),u.filtersNodes()),h=new V0(r,d,s);return lte(t,d,n,r,h,a)}function X2(t,e,n,i,r,s,o){let a=e.eventCache,l,c,u=new V0(r,e,s);if(Vt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=k0(e,c,!0,t.filter.filtersNodes());else{let d=Wt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=k0(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=In(n),p=a.getNode().getImmediateChild(d),g;if(Vt(h))g=i;else{let m=u.getCompleteChild(d);m!=null?Bee(h)===".priority"&&m.getChild(Hee(h)).isEmpty()?g=m:g=m.updateChild(h,i):g=Hn.EMPTY_NODE}if(p.equals(g))l=e;else{let m=t.filter.updateChild(a.getNode(),d,g,h,u,o);l=k0(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function uee(t,e){return t.eventCache.isCompleteForChild(e)}function lVe(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{let u=Yi(n,l);uee(e,Wt(u))&&(a=X2(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{let u=Yi(n,l);uee(e,Wt(u))||(a=X2(t,a,u,c,r,s,o))}),a}function dee(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function $2(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Vt(n)?c=i:c=new Ts(null).setTree(n,i);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=e.serverCache.getNode().getImmediateChild(d),g=dee(t,p,h);l=mI(t,l,new mn(d),g,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{let p=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let g=e.serverCache.getNode().getImmediateChild(d),m=dee(t,g,h);l=mI(t,l,new mn(d),m,r,s,o,a)}}),l}function cVe(t,e,n,i,r,s,o){if(gI(r,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Vt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return mI(t,e,n,l.getNode().getChild(n),r,s,a,o);if(Vt(n)){let c=new Ts(null);return l.getNode().forEachChild(ev,(u,d)=>{c=c.set(new mn(u),d)}),$2(t,e,n,c,r,s,a,o)}else return e}else{let c=new Ts(null);return i.foreach((u,d)=>{let h=Yi(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),$2(t,e,n,c,r,s,a,o)}}function uVe(t,e,n,i,r){let s=e.serverCache,o=Jee(e,s.getNode(),s.isFullyInitialized()||Vt(n),s.isFiltered());return lte(t,o,n,i,ate,r)}function dVe(t,e,n,i,r,s){let o;if(gI(i,n)!=null)return e;{let a=new V0(i,e,r),l=e.eventCache.getNode(),c;if(Vt(n)||Wt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=K2(i,kf(e));else{let d=e.serverCache.getNode();ye(d instanceof Hn,"serverChildren would be complete if leaf node"),u=rte(i,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{let u=Wt(n),d=dG(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,In(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Hn.EMPTY_NODE,In(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=K2(i,kf(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||gI(i,ln())!=null,k0(e,c,o,t.filter.filtersNodes())}}function hVe(t,e){let n=kf(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Vt(e)&&!n.getImmediateChild(Wt(e)).isEmpty())?n.getChild(e):null}function hee(t,e,n,i){e.type===Tc.MERGE&&e.source.queryId!==null&&(ye(kf(t.viewCache_),"We should always have a full cache before handling merges"),ye(W2(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,s=oVe(t.processor_,r,e,n,i);return sVe(t.processor_,s.viewCache),ye(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,fVe(t,s.changes,s.viewCache.eventCache.getNode(),null)}function fVe(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return ULe(t.eventGenerator_,e,n,r)}var fee;function pVe(t){ye(!fee,"__referenceConstructor has already been defined"),fee=t}function hG(t,e,n,i){let r=e.source.queryId;if(r!==null){let s=t.views.get(r);return ye(s!=null,"SyncTree gave us an op for an invalid query."),hee(s,e,n,i)}else{let s=[];for(let o of t.views.values())s=s.concat(hee(o,e,n,i));return s}}function fG(t,e){let n=null;for(let i of t.views.values())n=n||hVe(i,e);return n}var pee;function gVe(t){ye(!pee,"__referenceConstructor has already been defined"),pee=t}var vI=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ts(null),this.pendingWriteTree_=iVe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function mVe(t,e,n,i,r){return qLe(t.pendingWriteTree_,e,n,i,r),r?CI(t,new sv(Qee(),e,n)):[]}function Zm(t,e,n=!1){let i=KLe(t.pendingWriteTree_,e);if(YLe(t.pendingWriteTree_,e)){let s=new Ts(null);return i.snap!=null?s=s.set(ln(),!0):Uo(i.children,o=>{s=s.set(new mn(o),!0)}),CI(t,new j2(i.path,s,n))}else return[]}function yI(t,e,n){return CI(t,new sv(Xee(),e,n))}function vVe(t,e,n){let i=Ts.fromObject(n);return CI(t,new pI(Xee(),e,i))}function yVe(t,e,n,i){let r=hte(t,i);if(r!=null){let s=fte(r),o=s.path,a=s.queryId,l=Go(o,e),c=new sv($ee(a),l,n);return pte(t,o,c)}else return[]}function CVe(t,e,n,i){let r=hte(t,i);if(r){let s=fte(r),o=s.path,a=s.queryId,l=Go(o,e),c=Ts.fromObject(n),u=new pI($ee(a),l,c);return pte(t,o,u)}else return[]}function cte(t,e,n){let r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=Go(o,e),c=fG(a,l);if(c)return c});return ite(r,e,s,n,!0)}function CI(t,e){return ute(e,t.syncPointTree_,null,tte(t.pendingWriteTree_,ln()))}function ute(t,e,n,i){if(Vt(t.path))return dte(t,e,n,i);{let r=e.get(ln());n==null&&r!=null&&(n=fG(r,ln()));let s=[],o=Wt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=ste(i,o);s=s.concat(ute(a,l,c,u))}return r&&(s=s.concat(hG(r,t,i,n))),s}}function dte(t,e,n,i){let r=e.get(ln());n==null&&r!=null&&(n=fG(r,ln()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=ste(i,o),u=t.operationForChild(o);u&&(s=s.concat(dte(u,a,l,c)))}),r&&(s=s.concat(hG(r,t,i,n))),s}function hte(t,e){return t.tagToQueryMap.get(e)}function fte(t){let e=t.indexOf("$");return ye(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mn(t.substr(0,e))}}function pte(t,e,n){let i=t.syncPointTree_.get(e);ye(i,"Missing sync point for query tag that we're tracking");let r=tte(t.pendingWriteTree_,e);return hG(i,n,r,null)}var Z2=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},J2=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Yi(this.path_,e);return new t(this.syncTree_,n)}node(){return cte(this.syncTree_,this.path_)}},wVe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gee=function(t,e,n){if(!t||typeof t!="object")return t;if(ye(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return SVe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bVe(t[".sv"],e);ye(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},SVe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ye(!1,"Unexpected server value: "+t)}},bVe=function(t,e,n){t.hasOwnProperty("increment")||ye(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&ye(!1,"Unexpected increment value: "+i);let r=e.node();if(ye(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},_Ve=function(t,e,n,i){return pG(e,new J2(n,t),i)},EVe=function(t,e,n){return pG(t,new Z2(e),n)};function pG(t,e,n){let i=t.getPriority().val(),r=gee(i,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=gee(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new iv(a,Rr(r)):t}else{let o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new iv(r))),o.forEachChild(Ir,(a,l)=>{let c=pG(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var B0=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function gG(t,e){let n=e instanceof mn?e:new mn(e),i=t,r=Wt(n);for(;r!==null;){let s=Sd(i.node.children,r)||{children:{},childCount:0};i=new B0(r,i,s),n=In(n),r=Wt(n)}return i}function cv(t){return t.node.value}function gte(t,e){t.node.value=e,eG(t)}function mte(t){return t.node.childCount>0}function DVe(t){return cv(t)===void 0&&!mte(t)}function wI(t,e){Uo(t.node.children,(n,i)=>{e(new B0(n,t,i))})}function vte(t,e,n,i){n&&!i&&e(t),wI(t,r=>{vte(r,e,!0,i)}),n&&i&&e(t)}function TVe(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function W0(t){return new mn(t.parent===null?t.name:W0(t.parent)+"/"+t.name)}function eG(t){t.parent!==null&&RVe(t.parent,t.name,t)}function RVe(t,e,n){let i=DVe(n),r=Oa(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,eG(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,eG(t))}var IVe=/[\[\].#$\/\u0000-\u001F\u007F]/,xVe=/[\[\].#$\u0000-\u001F\u007F]/,p2=10*1024*1024,yte=function(t){return typeof t=="string"&&t.length!==0&&!IVe.test(t)},FVe=function(t){return typeof t=="string"&&t.length!==0&&!xVe.test(t)},AVe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FVe(t)};var Cte=function(t,e,n){let i=n instanceof mn?new I2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Af(i));if(typeof e=="function")throw new Error(t+"contains a function "+Af(i)+" with contents = "+e.toString());if(See(e))throw new Error(t+"contains "+e.toString()+" "+Af(i));if(typeof e=="string"&&e.length>p2/3&&Ov(e)>p2)throw new Error(t+"contains a string greater than "+p2+" utf8 bytes "+Af(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Uo(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!yte(o)))throw new Error(t+" contains an invalid key ("+o+") "+Af(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bLe(i,o),Cte(t,a,i),_Le(i)}),r&&s)throw new Error(t+' contains ".value" child '+Af(i)+" in addition to actual children.")}};var PVe=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!yte(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!AVe(n))throw new Error(tU(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var tG=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function MVe(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();n!==null&&!Uee(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Lf(t,e,n){MVe(t,n),OVe(t,i=>Ra(i,e)||Ra(e,i))}function OVe(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let s=r.path;e(s)?(kVe(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kVe(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();Mf&&Tr("event: "+n.toString()),U0(i)}}}var NVe="repo_interrupt",LVe=25,nG=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fI(),this.transactionQueueTree_=new B0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function VVe(t,e,n){if(t.stats_=lG(t.repoInfo_),t.forceRestClient_||$Ne())t.server_=new V2(t.repoInfo_,(i,r,s,o)=>{mee(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>vee(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Li(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new cG(t.repoInfo_,e,(i,r,s,o)=>{mee(t,i,r,s,o)},i=>{vee(t,i)},i=>{GVe(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=JNe(t.repoInfo_,()=>new U2(t.stats_,t.server_)),t.infoData_=new B2,t.infoSyncTree_=new vI({startListening:(i,r,s,o)=>{let a=[],l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=yI(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mG(t,"connected",!1),t.serverSyncTree_=new vI({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{let c=o(a,l);Lf(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function BVe(t){let n=t.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wte(t){return wVe({timestamp:BVe(t)})}function mee(t,e,n,i,r){t.dataUpdateCount++;let s=new mn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){let l=Pv(n,c=>Rr(c));o=CVe(t.serverSyncTree_,s,l,r)}else{let l=Rr(n);o=yVe(t.serverSyncTree_,s,l,r)}else if(i){let l=Pv(n,c=>Rr(c));o=vVe(t.serverSyncTree_,s,l)}else{let l=Rr(n);o=yI(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=yG(t,s)),Lf(t.eventQueue_,a,o)}function vee(t,e){mG(t,"connected",e),e===!1&&UVe(t)}function GVe(t,e){Uo(e,(n,i)=>{mG(t,n,i)})}function mG(t,e,n){let i=new mn("/.info/"+e),r=Rr(n);t.infoData_.updateSnapshot(i,r);let s=yI(t.infoSyncTree_,i,r);Lf(t.eventQueue_,i,s)}function HVe(t){return t.nextWriteId_++}function UVe(t){Ste(t,"onDisconnectEvents");let e=wte(t),n=fI();G2(t.onDisconnect_,ln(),(r,s)=>{let o=_Ve(r,s,t.serverSyncTree_,e);Yee(n,r,o)});let i=[];G2(n,ln(),(r,s)=>{i=i.concat(yI(t.serverSyncTree_,r,s));let o=qVe(t,r);yG(t,o)}),t.onDisconnect_=fI(),Lf(t.eventQueue_,ln(),i)}function jVe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(NVe)}function Ste(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tr(n,...e)}function bte(t,e,n){return cte(t.serverSyncTree_,e,n)||Hn.EMPTY_NODE}function vG(t,e=t.transactionQueueTree_){if(e||SI(t,e),cv(e)){let n=Ete(t,e);ye(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&WVe(t,W0(e),n)}else mte(e)&&wI(e,n=>{vG(t,n)})}function WVe(t,e,n){let i=n.map(c=>c.currentWriteId),r=bte(t,e,i),s=r,o=r.hash();for(let c=0;c<n.length;c++){let u=n[c];ye(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Go(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ste(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Zm(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();SI(t,gG(t.transactionQueueTree_,e)),vG(t,t.transactionQueueTree_),Lf(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)U0(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{so("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}yG(t,e)}},o)}function yG(t,e){let n=_te(t,e),i=W0(n),r=Ete(t,n);return zVe(t,r,i),i}function zVe(t,e,n){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Go(n,l.path),u=!1,d;if(ye(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(Zm(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LVe)u=!0,d="maxretry",r=r.concat(Zm(t.serverSyncTree_,l.currentWriteId,!0));else{let h=bte(t,l.path,o);l.currentInputSnapshot=h;let p=e[a].update(h.val());if(p!==void 0){Cte("transaction failed: Data returned ",p,l.path);let g=Rr(p);typeof p=="object"&&p!=null&&Oa(p,".priority")||(g=g.updatePriority(h.getPriority()));let v=l.currentWriteId,C=wte(t),b=EVe(g,h,C);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=b,l.currentWriteId=HVe(t),o.splice(o.indexOf(v),1),r=r.concat(mVe(t.serverSyncTree_,l.path,b,l.currentWriteId,l.applyLocally)),r=r.concat(Zm(t.serverSyncTree_,v,!0))}else u=!0,d="nodata",r=r.concat(Zm(t.serverSyncTree_,l.currentWriteId,!0))}Lf(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}SI(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)U0(i[a]);vG(t,t.transactionQueueTree_)}function _te(t,e){let n,i=t.transactionQueueTree_;for(n=Wt(e);n!==null&&cv(i)===void 0;)i=gG(i,n),e=In(e),n=Wt(e);return i}function Ete(t,e){let n=[];return Dte(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Dte(t,e,n){let i=cv(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);wI(e,r=>{Dte(t,r,n)})}function SI(t,e){let n=cv(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,gte(e,n.length>0?n:void 0)}wI(e,i=>{SI(t,i)})}function qVe(t,e){let n=W0(_te(t,e)),i=gG(t.transactionQueueTree_,e);return TVe(i,r=>{g2(t,r)}),g2(t,i),vte(i,r=>{g2(t,r)}),n}function g2(t,e){let n=cv(e);if(n){let i=[],r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ye(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ye(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Zm(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gte(e,void 0):n.length=s+1,Lf(t.eventQueue_,W0(e),r);for(let o=0;o<i.length;o++)U0(i[o])}}function KVe(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function YVe(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):so(`Invalid query segment '${n}' in query '${t}'`)}return e}var yee=function(t,e){let n=QVe(t),i=n.namespace;n.domain==="firebase.com"&&Rc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Rc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jNe();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new oI(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new mn(n.pathString)}},QVe=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=KVe(t.substring(u,d)));let h=YVe(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var iG=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Vt(this._path)?null:Bee(this._path)}get ref(){return new av(this._repo,this._path)}get _queryIdentifier(){let e=ree(this._queryParams),n=aG(e);return n==="{}"?"default":n}get _queryObject(){return ree(this._queryParams)}isEqual(e){if(e=nt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=Uee(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+SLe(this._path)}};var av=class t extends iG{constructor(e,n){super(e,n,new L2,!1)}get parent(){let e=Hee(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};pVe(av);gVe(av);var XVe="FIREBASE_DATABASE_EMULATOR_HOST",rG={},$Ve=!1;function ZVe(t,e,n,i){t.repoInfo_=new oI(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function JVe(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Rc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=yee(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[XVe]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=yee(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let u=r&&l?new O0(O0.OWNER):new S2(t.name,t.options,e);PVe("Invalid Firebase Database URL",o),Vt(o.path)||Rc("Database URL must point to the root of a Firebase Database (not including a child path).");let d=tBe(a,t,u,new w2(t.name,n));return new sG(d,t)}function eBe(t,e){let n=rG[e];(!n||n[t.key]!==t)&&Rc(`Database ${e}(${t.repoInfo_}) has already been deleted.`),jVe(t),delete n[t.key]}function tBe(t,e,n,i){let r=rG[e.name];r||(r={},rG[e.name]=r);let s=r[t.toURLString()];return s&&Rc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new nG(t,$Ve,n,i),r[t.toURLString()]=s,s}var sG=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VVe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new av(this._repo,ln())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eBe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Rc("Cannot call "+e+" on a deleted database.")}};function Tte(t=Vi(),e){let n=Ei(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=Mc("database");i&&Rte(n,...i)}return n}function Rte(t,e,n,i={}){t=nt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Rc("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Rc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new O0(O0.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Kf(i.mockUserToken,t.app.options.projectId);s=new O0(o)}ZVe(r,e,n,s)}function nBe(t){GNe(Oc),jn(new vn("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return JVe(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Qe(GJ,HJ,t),Qe(GJ,HJ,"esm2017")}cG.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cG.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};nBe();var z0=class{constructor(e){return e}},Ite="database",CG=class{constructor(){return ir(Ite)}};var wG=new ue("angularfire2.database-instances");function iBe(t,e){let n=gr(Ite,t,e);return n&&new z0(n)}function rBe(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new z0(i)}}var sBe={provide:CG,deps:[[new mt,wG]]},oBe={provide:z0,useFactory:iBe,deps:[[new mt,wG],ei]};function xte(t,...e){return Qe("angularfire",An.full,"rtdb"),fn([oBe,sBe,{provide:wG,useFactory:rBe(t),multi:!0,deps:[Re,_t,Pn,Ii,[new mt,oa],[new mt,Ri],...e]}])}var Fte=Ft(Tte,!0);var Mte="functions";var SG=class{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return N(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return N(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return N(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return N(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}})}};var bG="us-central1";var _G=class{constructor(e,n,i,r,s=bG,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new SG(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin,this.region=bG}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function aBe(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var Ate="@firebase/functions",Pte="0.11.6";var lBe="auth-internal",cBe="app-check-internal",uBe="messaging-internal";function dBe(t,e){let n=(i,{instanceIdentifier:r})=>{let s=i.getProvider("app").getImmediate(),o=i.getProvider(lBe),a=i.getProvider(uBe),l=i.getProvider(cBe);return new _G(s,o,a,l,r,t)};jn(new vn(Mte,n,"PUBLIC").setMultipleInstances(!0)),Qe(Ate,Pte,e),Qe(Ate,Pte,"esm2017")}function Ote(t=Vi(),e=bG){let i=Ei(nt(t),Mte).getImmediate({identifier:e}),r=Mc("functions");return r&&kte(i,...r),i}function kte(t,e,n){aBe(nt(t),e,n)}dBe(fetch.bind(self));var q0=class{constructor(e){return e}},Nte="functions",EG=class{constructor(){return ir(Nte)}};var DG=new ue("angularfire2.functions-instances");function hBe(t,e){let n=gr(Nte,t,e);return n&&new q0(n)}function fBe(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new q0(i)}}var pBe={provide:EG,deps:[[new mt,DG]]},gBe={provide:q0,useFactory:hBe,deps:[[new mt,DG],ei]};function Lte(t,...e){return Qe("angularfire",An.full,"fn"),fn([gBe,pBe,{provide:DG,useFactory:fBe(t),multi:!0,deps:[Re,_t,Pn,Ii,[new mt,oa],[new mt,Ri],...e]}])}var Vte=Ft(Ote,!0);var mBe="/firebase-messaging-sw.js",vBe="/firebase-cloud-messaging-push-scope",Wte="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yBe="https://fcmregistrations.googleapis.com/v1",zte="google.c.a.c_id",CBe="google.c.a.c_l",wBe="google.c.a.ts",SBe="google.c.a.e";var bI=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(bI||{});function Ic(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bBe(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}var TG="fcm_token_details_db",_Be=5,Bte="fcm_token_object_Store";function EBe(t){return N(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(TG))return null;let e=null;return(yield kv(TG,_Be,{upgrade:(i,r,s,o)=>N(this,null,function*(){var a;if(r<2||!i.objectStoreNames.contains(Bte))return;let l=o.objectStore(Bte),c=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!c){if(r===2){let u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ic(u.vapidKey)}}}else if(r===3){let u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ic(u.auth),p256dh:Ic(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ic(u.vapidKey)}}}else if(r===4){let u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ic(u.auth),p256dh:Ic(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ic(u.vapidKey)}}}}})})).close(),yield SS(TG),yield SS("fcm_vapid_details_db"),yield SS("undefined"),DBe(e)?e:null})}function DBe(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var TBe="firebase-messaging-database",RBe=1,K0="firebase-messaging-store",RG=null;function qte(){return RG||(RG=kv(TBe,RBe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(K0)}}})),RG}function IBe(t){return N(this,null,function*(){let e=Kte(t),i=yield(yield qte()).transaction(K0).objectStore(K0).get(e);if(i)return i;{let r=yield EBe(t.appConfig.senderId);if(r)return yield FG(t,r),r}})}function FG(t,e){return N(this,null,function*(){let n=Kte(t),r=(yield qte()).transaction(K0,"readwrite");return yield r.objectStore(K0).put(e,n),yield r.done,e})}function Kte({appConfig:t}){return t.appId}var xBe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},is=new Ma("messaging","Messaging",xBe);function FBe(t,e){return N(this,null,function*(){let n=yield PG(t),i=Yte(e),r={method:"POST",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(AG(t.appConfig),r)).json()}catch(o){throw is.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw is.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw is.create("token-subscribe-no-token");return s.token})}function ABe(t,e){return N(this,null,function*(){let n=yield PG(t),i=Yte(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(`${AG(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw is.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw is.create("token-update-failed",{errorInfo:o})}if(!s.token)throw is.create("token-update-no-token");return s.token})}function PBe(t,e){return N(this,null,function*(){let i={method:"DELETE",headers:yield PG(t)};try{let s=yield(yield fetch(`${AG(t.appConfig)}/${e}`,i)).json();if(s.error){let o=s.error.message;throw is.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw is.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function AG({projectId:t}){return`${yBe}/projects/${t}/registrations`}function PG(n){return N(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Yte({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:e,p256dh:t}};return i!==Wte&&(r.web.applicationPubKey=i),r}var MBe=7*24*60*60*1e3;function OBe(t){return N(this,null,function*(){let e=yield NBe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ic(e.getKey("auth")),p256dh:Ic(e.getKey("p256dh"))},i=yield IBe(t.firebaseDependencies);if(i){if(LBe(i.subscriptionOptions,n))return Date.now()>=i.createTime+MBe?kBe(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield PBe(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Gte(t.firebaseDependencies,n)}else return Gte(t.firebaseDependencies,n)})}function kBe(t,e){return N(this,null,function*(){try{let n=yield ABe(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield FG(t.firebaseDependencies,i),n}catch(n){throw n}})}function Gte(t,e){return N(this,null,function*(){let i={token:yield FBe(t,e),createTime:Date.now(),subscriptionOptions:e};return yield FG(t,i),i.token})}function NBe(t,e){return N(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bBe(e)})})}function LBe(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}function Hte(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return VBe(e,t),BBe(e,t),GBe(e,t),e}function VBe(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let r=e.notification.image;r&&(t.notification.image=r);let s=e.notification.icon;s&&(t.notification.icon=s)}function BBe(t,e){e.data&&(t.data=e.data)}function GBe(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function HBe(t){return typeof t=="object"&&!!t&&zte in t}Qte("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Qte("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Qte(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function UBe(t){if(!t||!t.options)throw IG("App Configuration Object");if(!t.name)throw IG("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw IG(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function IG(t){return is.create("missing-app-config-values",{valueName:t})}var xG=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=UBe(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function jBe(t){return N(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(mBe,{scope:vBe}),t.swRegistration.update().catch(()=>{})}catch(e){throw is.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function WBe(t,e){return N(this,null,function*(){if(!e&&!t.swRegistration&&(yield jBe(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw is.create("invalid-sw-registration");t.swRegistration=e}})}function zBe(t,e){return N(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Wte)})}function qBe(t,e){return N(this,null,function*(){if(!navigator)throw is.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw is.create("permission-blocked");return yield zBe(t,e?.vapidKey),yield WBe(t,e?.serviceWorkerRegistration),OBe(t)})}function KBe(t,e,n){return N(this,null,function*(){let i=YBe(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[zte],message_name:n[CBe],message_time:n[wBe],message_device_time:Math.floor(Date.now()/1e3)})})}function YBe(t){switch(t){case bI.NOTIFICATION_CLICKED:return"notification_open";case bI.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function QBe(t,e){return N(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===bI.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Hte(n)):t.onMessageHandler.next(Hte(n)));let i=n.data;HBe(i)&&i[SBe]==="1"&&(yield KBe(t,n.messageType,i))})}var Ute="@firebase/messaging",jte="0.12.10";var XBe=t=>{let e=new xG(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>QBe(e,n)),e},$Be=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>qBe(e,i)}};function ZBe(){jn(new vn("messaging",XBe,"PUBLIC")),jn(new vn("messaging-internal",$Be,"PRIVATE")),Qe(Ute,jte),Qe(Ute,jte,"esm2017")}function MG(){return N(this,null,function*(){try{yield wd()}catch{return!1}return typeof window<"u"&&oo()&&Av()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Xte(t=Vi()){return MG().then(e=>{if(!e)throw is.create("unsupported-browser")},e=>{throw is.create("indexed-db-unsupported")}),Ei(nt(t),"messaging").getImmediate()}ZBe();var Y0=class{constructor(e){return e}},$te="messaging",OG=class{constructor(){return ir($te)}};var Zte="__angularfire_symbol__messagingIsSupported",kG="__angularfire_symbol__messagingIsSupportedValue";globalThis[Zte]||=MG().then(t=>globalThis[kG]=t).catch(()=>globalThis[kG]=!1);var _I={async:()=>globalThis[Zte],sync:()=>{let t=globalThis[kG];if(t===void 0)throw new Error(zp("Messaging"));return t}},NG=new ue("angularfire2.messaging-instances");function JBe(t,e){if(!_I.sync())return null;let n=gr($te,t,e);return n&&new Y0(n)}function e2e(t){return(e,n)=>{if(!_I.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Y0(i)}}var t2e={provide:OG,deps:[[new mt,NG]]},n2e={provide:Y0,useFactory:JBe,deps:[[new mt,NG],ei]};function Jte(t,...e){return Qe("angularfire",An.full,"fcm"),fn([n2e,t2e,{provide:qa,useValue:_I.async,multi:!0},{provide:NG,useFactory:e2e(t),multi:!0,deps:[Re,_t,Pn,Ii,...e]}])}var sbt=_I.async;var ene=Ft(Xte,!0);var Q0=class{constructor(e){return e}},tne="storage",LG=class{constructor(){return ir(tne)}};var VG=new ue("angularfire2.storage-instances");function i2e(t,e){let n=gr(tne,t,e);return n&&new Q0(n)}function r2e(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Q0(i)}}var s2e={provide:LG,deps:[[new mt,VG]]},o2e={provide:Q0,useFactory:i2e,deps:[[new mt,VG],ei]};function nne(t,...e){return Qe("angularfire",An.full,"gcs"),fn([o2e,s2e,{provide:VG,useFactory:r2e(t),multi:!0,deps:[Re,_t,Pn,Ii,[new mt,oa],[new mt,Ri],...e]}])}var ine=Ft(qZ,!0);var BG="@firebase/remote-config",rne="0.4.8";var sne="remote-config";var a2e={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Rs=new Ma("remoteconfig","Remote Config",a2e);function one(t=Vi()){return t=nt(t),Ei(t,sne).getImmediate()}function ane(t){let e=nt(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var GG=class{constructor(e,n,i,r){this.client=e,this.storage=n,this.storageCache=i,this.logger=r}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){return N(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return i;e.eTag=i&&i.eTag;let r=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})}};function l2e(t=navigator){return t.languages&&t.languages[0]||t.language}var HG=class{constructor(e,n,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){return N(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:l2e()},l={method:"POST",headers:o,body:JSON.stringify(a)},c=fetch(s,l),u=new Promise((v,C)=>{e.signal.addEventListener(()=>{let b=new Error("The operation was aborted.");b.name="AbortError",C(b)})}),d;try{yield Promise.race([c,u]),d=yield c}catch(v){let C="fetch-client-network";throw v?.name==="AbortError"&&(C="fetch-timeout"),Rs.create(C,{originalErrorMessage:v?.message})}let h=d.status,p=d.headers.get("ETag")||void 0,g,m;if(d.status===200){let v;try{v=yield d.json()}catch(C){throw Rs.create("fetch-client-parse",{originalErrorMessage:C?.message})}g=v.entries,m=v.state}if(m==="INSTANCE_STATE_UNSPECIFIED"?h=500:m==="NO_CHANGE"?h=304:(m==="NO_TEMPLATE"||m==="EMPTY_CONFIG")&&(g={}),h!==304&&h!==200)throw Rs.create("fetch-status",{httpStatus:h});return{status:h,eTag:p,config:g}})}};function c2e(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Rs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function u2e(t){if(!(t instanceof Ko)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var UG=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return N(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(r,s){return N(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:i}){yield c2e(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!u2e(o))throw o;let a={throttleEndTimeMillis:Date.now()+Yf(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var d2e=60*1e3,h2e=12*60*60*1e3,jG=class{constructor(e,n,i,r,s){this.app=e,this._client=n,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:d2e,minimumFetchIntervalMillis:h2e},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function EI(t,e){let n=t.target.error||void 0;return Rs.create(e,{originalErrorMessage:n&&n?.message})}var Vf="app_namespace_store",f2e="firebase_remote_config",p2e=1;function g2e(){return new Promise((t,e)=>{try{let n=indexedDB.open(f2e,p2e);n.onerror=i=>{e(EI(i,"storage-open"))},n.onsuccess=i=>{t(i.target.result)},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Vf,{keyPath:"compositeKey"})}}}catch(n){e(Rs.create("storage-open",{originalErrorMessage:n?.message}))}})}var WG=class{constructor(e,n,i,r=g2e()){this.appId=e,this.appName=n,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return N(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let o=n.transaction([Vf],"readonly").objectStore(Vf),a=this.createCompositeKey(e);try{let l=o.get(a);l.onerror=c=>{r(EI(c,"storage-get"))},l.onsuccess=c=>{let u=c.target.result;i(u?u.value:void 0)}}catch(l){r(Rs.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(e,n){return N(this,null,function*(){let i=yield this.openDbPromise;return new Promise((r,s)=>{let a=i.transaction([Vf],"readwrite").objectStore(Vf),l=this.createCompositeKey(e);try{let c=a.put({compositeKey:l,value:n});c.onerror=u=>{s(EI(u,"storage-set"))},c.onsuccess=()=>{r()}}catch(c){s(Rs.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(e){return N(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let o=n.transaction([Vf],"readwrite").objectStore(Vf),a=this.createCompositeKey(e);try{let l=o.delete(a);l.onerror=c=>{r(EI(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){r(Rs.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var zG=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return N(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=yield e;r&&(this.lastFetchStatus=r);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield i;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function m2e(){jn(new vn(sne,t,"PUBLIC").setMultipleInstances(!0)),Qe(BG,rne),Qe(BG,rne,"esm2017");function t(e,{instanceIdentifier:n}){let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rs.create("registration-window");if(!oo())throw Rs.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw Rs.create("registration-project-id");if(!o)throw Rs.create("registration-api-key");if(!a)throw Rs.create("registration-app-id");n=n||"firebase";let l=new WG(a,i.name,n),c=new zG(l),u=new ka(BG);u.logLevel=ss.ERROR;let d=new HG(r,Oc,n,s,o,a),h=new UG(d,l),p=new GG(h,l,c,u),g=new jG(i,p,c,l,u);return ane(g),g}}function lne(){return N(this,null,function*(){if(!oo())return!1;try{return yield wd()}catch{return!1}})}m2e();var X0=class{constructor(e){return e}},cne="remote-config",qG=class{constructor(){return ir(cne)}};var KG="__angularfire_symbol__remoteConfigIsSupportedValue",une="__angularfire_symbol__remoteConfigIsSupported";globalThis[une]||=lne().then(t=>globalThis[KG]=t).catch(()=>globalThis[KG]=!1);var DI={async:()=>globalThis[une],sync:()=>{let t=globalThis[KG];if(t===void 0)throw new Error(zp("RemoteConfig"));return t}},YG=new ue("angularfire2.remote-config-instances");function v2e(t,e){if(!DI.sync())return null;let n=gr(cne,t,e);return n&&new X0(n)}function y2e(t){return(e,n)=>{if(!DI.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new X0(i)}}var C2e={provide:qG,deps:[[new mt,YG]]},w2e={provide:X0,useFactory:v2e,deps:[[new mt,YG],ei]};function dne(t,...e){return Qe("angularfire",An.full,"rc"),fn([w2e,C2e,{provide:qa,useValue:DI.async,multi:!0},{provide:YG,useFactory:y2e(t),multi:!0,deps:[Re,_t,Pn,Ii,...e]}])}var Ybt=DI.async;var hne=Ft(one,!0);var QG={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var Z0="Service workers are disabled or not supported by this browser";function S2e(t){return Dd(()=>Lc(new Error(t)))}var uv=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=S2e(Z0);else{let i=ui(e,"controllerchange").pipe(le(()=>e.controller)),r=Dd(()=>ae(e.controller)),s=lo(r,i);this.worker=s.pipe(Tt(u=>!!u)),this.registration=this.worker.pipe(Ge(()=>e.getRegistration()));let c=ui(e,"message").pipe(le(u=>u.data)).pipe(Tt(u=>u&&u.type)).pipe(wx());c.connect(),this.events=c}}postMessage(e,n){return this.worker.pipe(It(1),rn(i=>{i.postMessage(W({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,i){let r=this.waitForOperationCompleted(i),s=this.postMessage(e,n);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=i=>i.type===e:n=i=>e.includes(i.type),this.events.pipe(Tt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(It(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Tt(n=>n.nonce===e),It(1),le(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},b2e=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,this.pushManager=null,this.subscriptionChanges=new ot,!i.isEnabled){this.messages=Gc,this.notificationClicks=Gc,this.subscription=Gc;return}this.messages=this.sw.eventsOfType("PUSH").pipe(le(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(le(s=>s.data)),this.pushManager=this.sw.registration.pipe(le(s=>s.pushManager));let r=this.pushManager.pipe(Ge(s=>s.getSubscription()));this.subscription=Bc(r,this.subscriptionChanges)}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Z0));let r={userVisibleOnly:!0},s=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(s.length));for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return r.applicationServerKey=o,this.pushManager.pipe(Ge(a=>a.subscribe(r)),It(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Z0));let i=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(It(1),Ge(i)).toPromise()}decodeBase64(i){return atob(i)}};e.\u0275fac=function(r){return new(r||e)(Z(uv))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),_2e=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=Gc,this.unrecoverable=Gc;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Z0));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Z0));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}};e.\u0275fac=function(r){return new(r||e)(Z(uv))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();var fne=new ue("");function E2e(t,e,n,i){return()=>{if(!(Ip(i)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let r;if(typeof n.registrationStrategy=="function")r=n.registrationStrategy();else{let[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=ae(null);break;case"registerWithDelay":r=pne(+a[0]||0);break;case"registerWhenStable":r=a[0]?Bc(gne(t),pne(+a[0])):gne(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Re).runOutsideAngular(()=>r.pipe(It(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function pne(t){return ae(null).pipe(Uv(t))}function gne(t){return t.get(Gs).isStable.pipe(Tt(n=>n))}function D2e(t,e){return new uv(Ip(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var $0=class{};function mne(t,e={}){return fn([b2e,_2e,{provide:fne,useValue:t},{provide:$0,useValue:e},{provide:uv,useFactory:D2e,deps:[$0,_n]},{provide:qa,useFactory:E2e,deps:[_t,fne,$0,_n],multi:!0}])}var vne={providers:[{provide:du,useValue:QG.firebaseConfig},S4(ZZ),G3(),e5(()=>t5(QG.firebaseConfig)),o5(()=>c5()),BJ(()=>LJ()),VJ,a2,p9(()=>y9()),xte(()=>Fte()),Lte(()=>Vte()),Jte(()=>ene()),nne(()=>ine()),dne(()=>hne()),mne("ngsw-worker.js",{enabled:!py(),registrationStrategy:"registerWhenStable:30000"})]};var yne=(()=>{let e=class e{constructor(i){this.auth=i}ngOnInit(){this.auth.initializeUserState()}};e.\u0275fac=function(r){return new(r||e)(J(vs))},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Vr([l9()]),qe],decls:1,vars:0,template:function(r,s){r&1&&fe(0,"router-outlet")},dependencies:[En,ky]});let t=e;return t})();B3(yne,vne).catch(t=>console.error(t));
